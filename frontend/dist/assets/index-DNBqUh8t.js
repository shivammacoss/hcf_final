function Cp(t,s){for(var r=0;r<s.length;r++){const a=s[r];if(typeof a!="string"&&!Array.isArray(a)){for(const n in a)if(n!=="default"&&!(n in t)){const l=Object.getOwnPropertyDescriptor(a,n);l&&Object.defineProperty(t,n,l.get?l:{enumerable:!0,get:()=>a[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(n){if(n.ep)return;n.ep=!0;const l=r(n);fetch(n.href,l)}})();function Tp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var bm={exports:{}},$i={},jm={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cl=Symbol.for("react.element"),Ep=Symbol.for("react.portal"),Pp=Symbol.for("react.fragment"),Ap=Symbol.for("react.strict_mode"),Dp=Symbol.for("react.profiler"),Ip=Symbol.for("react.provider"),$p=Symbol.for("react.context"),Lp=Symbol.for("react.forward_ref"),Up=Symbol.for("react.suspense"),zp=Symbol.for("react.memo"),_p=Symbol.for("react.lazy"),zu=Symbol.iterator;function Mp(t){return t===null||typeof t!="object"?null:(t=zu&&t[zu]||t["@@iterator"],typeof t=="function"?t:null)}var Nm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vm=Object.assign,wm={};function sn(t,s,r){this.props=t,this.context=s,this.refs=wm,this.updater=r||Nm}sn.prototype.isReactComponent={};sn.prototype.setState=function(t,s){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,s,"setState")};sn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function km(){}km.prototype=sn.prototype;function qc(t,s,r){this.props=t,this.context=s,this.refs=wm,this.updater=r||Nm}var Gc=qc.prototype=new km;Gc.constructor=qc;vm(Gc,sn.prototype);Gc.isPureReactComponent=!0;var _u=Array.isArray,Sm=Object.prototype.hasOwnProperty,Kc={current:null},Cm={key:!0,ref:!0,__self:!0,__source:!0};function Tm(t,s,r){var a,n={},l=null,i=null;if(s!=null)for(a in s.ref!==void 0&&(i=s.ref),s.key!==void 0&&(l=""+s.key),s)Sm.call(s,a)&&!Cm.hasOwnProperty(a)&&(n[a]=s[a]);var d=arguments.length-2;if(d===1)n.children=r;else if(1<d){for(var c=Array(d),u=0;u<d;u++)c[u]=arguments[u+2];n.children=c}if(t&&t.defaultProps)for(a in d=t.defaultProps,d)n[a]===void 0&&(n[a]=d[a]);return{$$typeof:cl,type:t,key:l,ref:i,props:n,_owner:Kc.current}}function Fp(t,s){return{$$typeof:cl,type:t.type,key:s,ref:t.ref,props:t.props,_owner:t._owner}}function Xc(t){return typeof t=="object"&&t!==null&&t.$$typeof===cl}function Rp(t){var s={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return s[r]})}var Mu=/\/+/g;function so(t,s){return typeof t=="object"&&t!==null&&t.key!=null?Rp(""+t.key):s.toString(36)}function Fl(t,s,r,a,n){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(l){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case cl:case Ep:i=!0}}if(i)return i=t,n=n(i),t=a===""?"."+so(i,0):a,_u(n)?(r="",t!=null&&(r=t.replace(Mu,"$&/")+"/"),Fl(n,s,r,"",function(u){return u})):n!=null&&(Xc(n)&&(n=Fp(n,r+(!n.key||i&&i.key===n.key?"":(""+n.key).replace(Mu,"$&/")+"/")+t)),s.push(n)),1;if(i=0,a=a===""?".":a+":",_u(t))for(var d=0;d<t.length;d++){l=t[d];var c=a+so(l,d);i+=Fl(l,s,r,c,n)}else if(c=Mp(t),typeof c=="function")for(t=c.call(t),d=0;!(l=t.next()).done;)l=l.value,c=a+so(l,d++),i+=Fl(l,s,r,c,n);else if(l==="object")throw s=String(t),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return i}function fl(t,s,r){if(t==null)return t;var a=[],n=0;return Fl(t,a,"","",function(l){return s.call(r,l,n++)}),a}function Op(t){if(t._status===-1){var s=t._result;s=s(),s.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=s)}if(t._status===1)return t._result.default;throw t._result}var Zt={current:null},Rl={transition:null},Bp={ReactCurrentDispatcher:Zt,ReactCurrentBatchConfig:Rl,ReactCurrentOwner:Kc};function Em(){throw Error("act(...) is not supported in production builds of React.")}Ve.Children={map:fl,forEach:function(t,s,r){fl(t,function(){s.apply(this,arguments)},r)},count:function(t){var s=0;return fl(t,function(){s++}),s},toArray:function(t){return fl(t,function(s){return s})||[]},only:function(t){if(!Xc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ve.Component=sn;Ve.Fragment=Pp;Ve.Profiler=Dp;Ve.PureComponent=qc;Ve.StrictMode=Ap;Ve.Suspense=Up;Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bp;Ve.act=Em;Ve.cloneElement=function(t,s,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var a=vm({},t.props),n=t.key,l=t.ref,i=t._owner;if(s!=null){if(s.ref!==void 0&&(l=s.ref,i=Kc.current),s.key!==void 0&&(n=""+s.key),t.type&&t.type.defaultProps)var d=t.type.defaultProps;for(c in s)Sm.call(s,c)&&!Cm.hasOwnProperty(c)&&(a[c]=s[c]===void 0&&d!==void 0?d[c]:s[c])}var c=arguments.length-2;if(c===1)a.children=r;else if(1<c){d=Array(c);for(var u=0;u<c;u++)d[u]=arguments[u+2];a.children=d}return{$$typeof:cl,type:t.type,key:n,ref:l,props:a,_owner:i}};Ve.createContext=function(t){return t={$$typeof:$p,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ip,_context:t},t.Consumer=t};Ve.createElement=Tm;Ve.createFactory=function(t){var s=Tm.bind(null,t);return s.type=t,s};Ve.createRef=function(){return{current:null}};Ve.forwardRef=function(t){return{$$typeof:Lp,render:t}};Ve.isValidElement=Xc;Ve.lazy=function(t){return{$$typeof:_p,_payload:{_status:-1,_result:t},_init:Op}};Ve.memo=function(t,s){return{$$typeof:zp,type:t,compare:s===void 0?null:s}};Ve.startTransition=function(t){var s=Rl.transition;Rl.transition={};try{t()}finally{Rl.transition=s}};Ve.unstable_act=Em;Ve.useCallback=function(t,s){return Zt.current.useCallback(t,s)};Ve.useContext=function(t){return Zt.current.useContext(t)};Ve.useDebugValue=function(){};Ve.useDeferredValue=function(t){return Zt.current.useDeferredValue(t)};Ve.useEffect=function(t,s){return Zt.current.useEffect(t,s)};Ve.useId=function(){return Zt.current.useId()};Ve.useImperativeHandle=function(t,s,r){return Zt.current.useImperativeHandle(t,s,r)};Ve.useInsertionEffect=function(t,s){return Zt.current.useInsertionEffect(t,s)};Ve.useLayoutEffect=function(t,s){return Zt.current.useLayoutEffect(t,s)};Ve.useMemo=function(t,s){return Zt.current.useMemo(t,s)};Ve.useReducer=function(t,s,r){return Zt.current.useReducer(t,s,r)};Ve.useRef=function(t){return Zt.current.useRef(t)};Ve.useState=function(t){return Zt.current.useState(t)};Ve.useSyncExternalStore=function(t,s,r){return Zt.current.useSyncExternalStore(t,s,r)};Ve.useTransition=function(){return Zt.current.useTransition()};Ve.version="18.3.1";jm.exports=Ve;var o=jm.exports;const Pm=Tp(o),Vp=Cp({__proto__:null,default:Pm},[o]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wp=o,Hp=Symbol.for("react.element"),Yp=Symbol.for("react.fragment"),Jp=Object.prototype.hasOwnProperty,qp=Wp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Gp={key:!0,ref:!0,__self:!0,__source:!0};function Am(t,s,r){var a,n={},l=null,i=null;r!==void 0&&(l=""+r),s.key!==void 0&&(l=""+s.key),s.ref!==void 0&&(i=s.ref);for(a in s)Jp.call(s,a)&&!Gp.hasOwnProperty(a)&&(n[a]=s[a]);if(t&&t.defaultProps)for(a in s=t.defaultProps,s)n[a]===void 0&&(n[a]=s[a]);return{$$typeof:Hp,type:t,key:l,ref:i,props:n,_owner:qp.current}}$i.Fragment=Yp;$i.jsx=Am;$i.jsxs=Am;bm.exports=$i;var e=bm.exports,Bo={},Dm={exports:{}},ps={},Im={exports:{}},$m={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function s(y,O){var g=y.length;y.push(O);e:for(;0<g;){var v=g-1>>>1,W=y[v];if(0<n(W,O))y[v]=O,y[g]=W,g=v;else break e}}function r(y){return y.length===0?null:y[0]}function a(y){if(y.length===0)return null;var O=y[0],g=y.pop();if(g!==O){y[0]=g;e:for(var v=0,W=y.length,Z=W>>>1;v<Z;){var B=2*(v+1)-1,M=y[B],te=B+1,ae=y[te];if(0>n(M,g))te<W&&0>n(ae,M)?(y[v]=ae,y[te]=g,v=te):(y[v]=M,y[B]=g,v=B);else if(te<W&&0>n(ae,g))y[v]=ae,y[te]=g,v=te;else break e}}return O}function n(y,O){var g=y.sortIndex-O.sortIndex;return g!==0?g:y.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var i=Date,d=i.now();t.unstable_now=function(){return i.now()-d}}var c=[],u=[],x=1,b=null,f=3,T=!1,w=!1,j=!1,S=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function h(y){for(var O=r(u);O!==null;){if(O.callback===null)a(u);else if(O.startTime<=y)a(u),O.sortIndex=O.expirationTime,s(c,O);else break;O=r(u)}}function N(y){if(j=!1,h(y),!w)if(r(c)!==null)w=!0,$(C);else{var O=r(u);O!==null&&H(N,O.startTime-y)}}function C(y,O){w=!1,j&&(j=!1,p(U),U=-1),T=!0;var g=f;try{for(h(O),b=r(c);b!==null&&(!(b.expirationTime>O)||y&&!le());){var v=b.callback;if(typeof v=="function"){b.callback=null,f=b.priorityLevel;var W=v(b.expirationTime<=O);O=t.unstable_now(),typeof W=="function"?b.callback=W:b===r(c)&&a(c),h(O)}else a(c);b=r(c)}if(b!==null)var Z=!0;else{var B=r(u);B!==null&&H(N,B.startTime-O),Z=!1}return Z}finally{b=null,f=g,T=!1}}var E=!1,P=null,U=-1,K=5,R=-1;function le(){return!(t.unstable_now()-R<K)}function X(){if(P!==null){var y=t.unstable_now();R=y;var O=!0;try{O=P(!0,y)}finally{O?_():(E=!1,P=null)}}else E=!1}var _;if(typeof m=="function")_=function(){m(X)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,I=L.port2;L.port1.onmessage=X,_=function(){I.postMessage(null)}}else _=function(){S(X,0)};function $(y){P=y,E||(E=!0,_())}function H(y,O){U=S(function(){y(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(y){y.callback=null},t.unstable_continueExecution=function(){w||T||(w=!0,$(C))},t.unstable_forceFrameRate=function(y){0>y||125<y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<y?Math.floor(1e3/y):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(y){switch(f){case 1:case 2:case 3:var O=3;break;default:O=f}var g=f;f=O;try{return y()}finally{f=g}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(y,O){switch(y){case 1:case 2:case 3:case 4:case 5:break;default:y=3}var g=f;f=y;try{return O()}finally{f=g}},t.unstable_scheduleCallback=function(y,O,g){var v=t.unstable_now();switch(typeof g=="object"&&g!==null?(g=g.delay,g=typeof g=="number"&&0<g?v+g:v):g=v,y){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=g+W,y={id:x++,callback:O,priorityLevel:y,startTime:g,expirationTime:W,sortIndex:-1},g>v?(y.sortIndex=g,s(u,y),r(c)===null&&y===r(u)&&(j?(p(U),U=-1):j=!0,H(N,g-v))):(y.sortIndex=W,s(c,y),w||T||(w=!0,$(C))),y},t.unstable_shouldYield=le,t.unstable_wrapCallback=function(y){var O=f;return function(){var g=f;f=O;try{return y.apply(this,arguments)}finally{f=g}}}})($m);Im.exports=$m;var Kp=Im.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xp=o,hs=Kp;function ie(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Lm=new Set,Vn={};function ja(t,s){Ja(t,s),Ja(t+"Capture",s)}function Ja(t,s){for(Vn[t]=s,t=0;t<s.length;t++)Lm.add(s[t])}var br=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vo=Object.prototype.hasOwnProperty,Qp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Fu={},Ru={};function Zp(t){return Vo.call(Ru,t)?!0:Vo.call(Fu,t)?!1:Qp.test(t)?Ru[t]=!0:(Fu[t]=!0,!1)}function eg(t,s,r,a){if(r!==null&&r.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function tg(t,s,r,a){if(s===null||typeof s>"u"||eg(t,s,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function es(t,s,r,a,n,l,i){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=a,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=t,this.type=s,this.sanitizeURL=l,this.removeEmptyString=i}var zt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){zt[t]=new es(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];zt[s]=new es(s,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){zt[t]=new es(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){zt[t]=new es(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){zt[t]=new es(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){zt[t]=new es(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){zt[t]=new es(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){zt[t]=new es(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){zt[t]=new es(t,5,!1,t.toLowerCase(),null,!1,!1)});var Qc=/[\-:]([a-z])/g;function Zc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(Qc,Zc);zt[s]=new es(s,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(Qc,Zc);zt[s]=new es(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(Qc,Zc);zt[s]=new es(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){zt[t]=new es(t,1,!1,t.toLowerCase(),null,!1,!1)});zt.xlinkHref=new es("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){zt[t]=new es(t,1,!1,t.toLowerCase(),null,!0,!0)});function ed(t,s,r,a){var n=zt.hasOwnProperty(s)?zt[s]:null;(n!==null?n.type!==0:a||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(tg(s,r,n,a)&&(r=null),a||n===null?Zp(s)&&(r===null?t.removeAttribute(s):t.setAttribute(s,""+r)):n.mustUseProperty?t[n.propertyName]=r===null?n.type===3?!1:"":r:(s=n.attributeName,a=n.attributeNamespace,r===null?t.removeAttribute(s):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,a?t.setAttributeNS(a,s,r):t.setAttribute(s,r))))}var Sr=Xp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yl=Symbol.for("react.element"),Pa=Symbol.for("react.portal"),Aa=Symbol.for("react.fragment"),td=Symbol.for("react.strict_mode"),Wo=Symbol.for("react.profiler"),Um=Symbol.for("react.provider"),zm=Symbol.for("react.context"),sd=Symbol.for("react.forward_ref"),Ho=Symbol.for("react.suspense"),Yo=Symbol.for("react.suspense_list"),rd=Symbol.for("react.memo"),Pr=Symbol.for("react.lazy"),_m=Symbol.for("react.offscreen"),Ou=Symbol.iterator;function dn(t){return t===null||typeof t!="object"?null:(t=Ou&&t[Ou]||t["@@iterator"],typeof t=="function"?t:null)}var dt=Object.assign,ro;function kn(t){if(ro===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);ro=s&&s[1]||""}return`
`+ro+t}var ao=!1;function no(t,s){if(!t||ao)return"";ao=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(u){var a=u}Reflect.construct(t,[],s)}else{try{s.call()}catch(u){a=u}t.call(s.prototype)}else{try{throw Error()}catch(u){a=u}t()}}catch(u){if(u&&a&&typeof u.stack=="string"){for(var n=u.stack.split(`
`),l=a.stack.split(`
`),i=n.length-1,d=l.length-1;1<=i&&0<=d&&n[i]!==l[d];)d--;for(;1<=i&&0<=d;i--,d--)if(n[i]!==l[d]){if(i!==1||d!==1)do if(i--,d--,0>d||n[i]!==l[d]){var c=`
`+n[i].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=i&&0<=d);break}}}finally{ao=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?kn(t):""}function sg(t){switch(t.tag){case 5:return kn(t.type);case 16:return kn("Lazy");case 13:return kn("Suspense");case 19:return kn("SuspenseList");case 0:case 2:case 15:return t=no(t.type,!1),t;case 11:return t=no(t.type.render,!1),t;case 1:return t=no(t.type,!0),t;default:return""}}function Jo(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Aa:return"Fragment";case Pa:return"Portal";case Wo:return"Profiler";case td:return"StrictMode";case Ho:return"Suspense";case Yo:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case zm:return(t.displayName||"Context")+".Consumer";case Um:return(t._context.displayName||"Context")+".Provider";case sd:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case rd:return s=t.displayName||null,s!==null?s:Jo(t.type)||"Memo";case Pr:s=t._payload,t=t._init;try{return Jo(t(s))}catch{}}return null}function rg(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Jo(s);case 8:return s===td?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Jr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Mm(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function ag(t){var s=Mm(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),a=""+t[s];if(!t.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,l=r.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return n.call(this)},set:function(i){a=""+i,l.call(this,i)}}),Object.defineProperty(t,s,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(i){a=""+i},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function bl(t){t._valueTracker||(t._valueTracker=ag(t))}function Fm(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var r=s.getValue(),a="";return t&&(a=Mm(t)?t.checked?"true":"false":t.value),t=a,t!==r?(s.setValue(t),!0):!1}function ti(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function qo(t,s){var r=s.checked;return dt({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Bu(t,s){var r=s.defaultValue==null?"":s.defaultValue,a=s.checked!=null?s.checked:s.defaultChecked;r=Jr(s.value!=null?s.value:r),t._wrapperState={initialChecked:a,initialValue:r,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Rm(t,s){s=s.checked,s!=null&&ed(t,"checked",s,!1)}function Go(t,s){Rm(t,s);var r=Jr(s.value),a=s.type;if(r!=null)a==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(a==="submit"||a==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?Ko(t,s.type,r):s.hasOwnProperty("defaultValue")&&Ko(t,s.type,Jr(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function Vu(t,s,r){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var a=s.type;if(!(a!=="submit"&&a!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,r||s===t.value||(t.value=s),t.defaultValue=s}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Ko(t,s,r){(s!=="number"||ti(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Sn=Array.isArray;function Oa(t,s,r,a){if(t=t.options,s){s={};for(var n=0;n<r.length;n++)s["$"+r[n]]=!0;for(r=0;r<t.length;r++)n=s.hasOwnProperty("$"+t[r].value),t[r].selected!==n&&(t[r].selected=n),n&&a&&(t[r].defaultSelected=!0)}else{for(r=""+Jr(r),s=null,n=0;n<t.length;n++){if(t[n].value===r){t[n].selected=!0,a&&(t[n].defaultSelected=!0);return}s!==null||t[n].disabled||(s=t[n])}s!==null&&(s.selected=!0)}}function Xo(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(ie(91));return dt({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Wu(t,s){var r=s.value;if(r==null){if(r=s.children,s=s.defaultValue,r!=null){if(s!=null)throw Error(ie(92));if(Sn(r)){if(1<r.length)throw Error(ie(93));r=r[0]}s=r}s==null&&(s=""),r=s}t._wrapperState={initialValue:Jr(r)}}function Om(t,s){var r=Jr(s.value),a=Jr(s.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),s.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),a!=null&&(t.defaultValue=""+a)}function Hu(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function Bm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qo(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?Bm(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var jl,Vm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,r,a,n){MSApp.execUnsafeLocalFunction(function(){return t(s,r,a,n)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(jl=jl||document.createElement("div"),jl.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=jl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function Wn(t,s){if(s){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=s;return}}t.textContent=s}var In={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ng=["Webkit","ms","Moz","O"];Object.keys(In).forEach(function(t){ng.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),In[s]=In[t]})});function Wm(t,s,r){return s==null||typeof s=="boolean"||s===""?"":r||typeof s!="number"||s===0||In.hasOwnProperty(t)&&In[t]?(""+s).trim():s+"px"}function Hm(t,s){t=t.style;for(var r in s)if(s.hasOwnProperty(r)){var a=r.indexOf("--")===0,n=Wm(r,s[r],a);r==="float"&&(r="cssFloat"),a?t.setProperty(r,n):t[r]=n}}var lg=dt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zo(t,s){if(s){if(lg[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(ie(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(ie(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(ie(61))}if(s.style!=null&&typeof s.style!="object")throw Error(ie(62))}}function ec(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tc=null;function ad(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var sc=null,Ba=null,Va=null;function Yu(t){if(t=xl(t)){if(typeof sc!="function")throw Error(ie(280));var s=t.stateNode;s&&(s=Mi(s),sc(t.stateNode,t.type,s))}}function Ym(t){Ba?Va?Va.push(t):Va=[t]:Ba=t}function Jm(){if(Ba){var t=Ba,s=Va;if(Va=Ba=null,Yu(t),s)for(t=0;t<s.length;t++)Yu(s[t])}}function qm(t,s){return t(s)}function Gm(){}var lo=!1;function Km(t,s,r){if(lo)return t(s,r);lo=!0;try{return qm(t,s,r)}finally{lo=!1,(Ba!==null||Va!==null)&&(Gm(),Jm())}}function Hn(t,s){var r=t.stateNode;if(r===null)return null;var a=Mi(r);if(a===null)return null;r=a[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(t=t.type,a=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!a;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ie(231,s,typeof r));return r}var rc=!1;if(br)try{var un={};Object.defineProperty(un,"passive",{get:function(){rc=!0}}),window.addEventListener("test",un,un),window.removeEventListener("test",un,un)}catch{rc=!1}function ig(t,s,r,a,n,l,i,d,c){var u=Array.prototype.slice.call(arguments,3);try{s.apply(r,u)}catch(x){this.onError(x)}}var $n=!1,si=null,ri=!1,ac=null,og={onError:function(t){$n=!0,si=t}};function cg(t,s,r,a,n,l,i,d,c){$n=!1,si=null,ig.apply(og,arguments)}function dg(t,s,r,a,n,l,i,d,c){if(cg.apply(this,arguments),$n){if($n){var u=si;$n=!1,si=null}else throw Error(ie(198));ri||(ri=!0,ac=u)}}function Na(t){var s=t,r=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(r=s.return),t=s.return;while(t)}return s.tag===3?r:null}function Xm(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function Ju(t){if(Na(t)!==t)throw Error(ie(188))}function ug(t){var s=t.alternate;if(!s){if(s=Na(t),s===null)throw Error(ie(188));return s!==t?null:t}for(var r=t,a=s;;){var n=r.return;if(n===null)break;var l=n.alternate;if(l===null){if(a=n.return,a!==null){r=a;continue}break}if(n.child===l.child){for(l=n.child;l;){if(l===r)return Ju(n),t;if(l===a)return Ju(n),s;l=l.sibling}throw Error(ie(188))}if(r.return!==a.return)r=n,a=l;else{for(var i=!1,d=n.child;d;){if(d===r){i=!0,r=n,a=l;break}if(d===a){i=!0,a=n,r=l;break}d=d.sibling}if(!i){for(d=l.child;d;){if(d===r){i=!0,r=l,a=n;break}if(d===a){i=!0,a=l,r=n;break}d=d.sibling}if(!i)throw Error(ie(189))}}if(r.alternate!==a)throw Error(ie(190))}if(r.tag!==3)throw Error(ie(188));return r.stateNode.current===r?t:s}function Qm(t){return t=ug(t),t!==null?Zm(t):null}function Zm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=Zm(t);if(s!==null)return s;t=t.sibling}return null}var eh=hs.unstable_scheduleCallback,qu=hs.unstable_cancelCallback,xg=hs.unstable_shouldYield,mg=hs.unstable_requestPaint,gt=hs.unstable_now,hg=hs.unstable_getCurrentPriorityLevel,nd=hs.unstable_ImmediatePriority,th=hs.unstable_UserBlockingPriority,ai=hs.unstable_NormalPriority,pg=hs.unstable_LowPriority,sh=hs.unstable_IdlePriority,Li=null,sr=null;function gg(t){if(sr&&typeof sr.onCommitFiberRoot=="function")try{sr.onCommitFiberRoot(Li,t,void 0,(t.current.flags&128)===128)}catch{}}var Bs=Math.clz32?Math.clz32:bg,fg=Math.log,yg=Math.LN2;function bg(t){return t>>>=0,t===0?32:31-(fg(t)/yg|0)|0}var Nl=64,vl=4194304;function Cn(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ni(t,s){var r=t.pendingLanes;if(r===0)return 0;var a=0,n=t.suspendedLanes,l=t.pingedLanes,i=r&268435455;if(i!==0){var d=i&~n;d!==0?a=Cn(d):(l&=i,l!==0&&(a=Cn(l)))}else i=r&~n,i!==0?a=Cn(i):l!==0&&(a=Cn(l));if(a===0)return 0;if(s!==0&&s!==a&&!(s&n)&&(n=a&-a,l=s&-s,n>=l||n===16&&(l&4194240)!==0))return s;if(a&4&&(a|=r&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=a;0<s;)r=31-Bs(s),n=1<<r,a|=t[r],s&=~n;return a}function jg(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ng(t,s){for(var r=t.suspendedLanes,a=t.pingedLanes,n=t.expirationTimes,l=t.pendingLanes;0<l;){var i=31-Bs(l),d=1<<i,c=n[i];c===-1?(!(d&r)||d&a)&&(n[i]=jg(d,s)):c<=s&&(t.expiredLanes|=d),l&=~d}}function nc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function rh(){var t=Nl;return Nl<<=1,!(Nl&4194240)&&(Nl=64),t}function io(t){for(var s=[],r=0;31>r;r++)s.push(t);return s}function dl(t,s,r){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-Bs(s),t[s]=r}function vg(t,s){var r=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var a=t.eventTimes;for(t=t.expirationTimes;0<r;){var n=31-Bs(r),l=1<<n;s[n]=0,a[n]=-1,t[n]=-1,r&=~l}}function ld(t,s){var r=t.entangledLanes|=s;for(t=t.entanglements;r;){var a=31-Bs(r),n=1<<a;n&s|t[a]&s&&(t[a]|=s),r&=~n}}var Ke=0;function ah(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var nh,id,lh,ih,oh,lc=!1,wl=[],zr=null,_r=null,Mr=null,Yn=new Map,Jn=new Map,Dr=[],wg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gu(t,s){switch(t){case"focusin":case"focusout":zr=null;break;case"dragenter":case"dragleave":_r=null;break;case"mouseover":case"mouseout":Mr=null;break;case"pointerover":case"pointerout":Yn.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jn.delete(s.pointerId)}}function xn(t,s,r,a,n,l){return t===null||t.nativeEvent!==l?(t={blockedOn:s,domEventName:r,eventSystemFlags:a,nativeEvent:l,targetContainers:[n]},s!==null&&(s=xl(s),s!==null&&id(s)),t):(t.eventSystemFlags|=a,s=t.targetContainers,n!==null&&s.indexOf(n)===-1&&s.push(n),t)}function kg(t,s,r,a,n){switch(s){case"focusin":return zr=xn(zr,t,s,r,a,n),!0;case"dragenter":return _r=xn(_r,t,s,r,a,n),!0;case"mouseover":return Mr=xn(Mr,t,s,r,a,n),!0;case"pointerover":var l=n.pointerId;return Yn.set(l,xn(Yn.get(l)||null,t,s,r,a,n)),!0;case"gotpointercapture":return l=n.pointerId,Jn.set(l,xn(Jn.get(l)||null,t,s,r,a,n)),!0}return!1}function ch(t){var s=ca(t.target);if(s!==null){var r=Na(s);if(r!==null){if(s=r.tag,s===13){if(s=Xm(r),s!==null){t.blockedOn=s,oh(t.priority,function(){lh(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ol(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var r=ic(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var a=new r.constructor(r.type,r);tc=a,r.target.dispatchEvent(a),tc=null}else return s=xl(r),s!==null&&id(s),t.blockedOn=r,!1;s.shift()}return!0}function Ku(t,s,r){Ol(t)&&r.delete(s)}function Sg(){lc=!1,zr!==null&&Ol(zr)&&(zr=null),_r!==null&&Ol(_r)&&(_r=null),Mr!==null&&Ol(Mr)&&(Mr=null),Yn.forEach(Ku),Jn.forEach(Ku)}function mn(t,s){t.blockedOn===s&&(t.blockedOn=null,lc||(lc=!0,hs.unstable_scheduleCallback(hs.unstable_NormalPriority,Sg)))}function qn(t){function s(n){return mn(n,t)}if(0<wl.length){mn(wl[0],t);for(var r=1;r<wl.length;r++){var a=wl[r];a.blockedOn===t&&(a.blockedOn=null)}}for(zr!==null&&mn(zr,t),_r!==null&&mn(_r,t),Mr!==null&&mn(Mr,t),Yn.forEach(s),Jn.forEach(s),r=0;r<Dr.length;r++)a=Dr[r],a.blockedOn===t&&(a.blockedOn=null);for(;0<Dr.length&&(r=Dr[0],r.blockedOn===null);)ch(r),r.blockedOn===null&&Dr.shift()}var Wa=Sr.ReactCurrentBatchConfig,li=!0;function Cg(t,s,r,a){var n=Ke,l=Wa.transition;Wa.transition=null;try{Ke=1,od(t,s,r,a)}finally{Ke=n,Wa.transition=l}}function Tg(t,s,r,a){var n=Ke,l=Wa.transition;Wa.transition=null;try{Ke=4,od(t,s,r,a)}finally{Ke=n,Wa.transition=l}}function od(t,s,r,a){if(li){var n=ic(t,s,r,a);if(n===null)yo(t,s,a,ii,r),Gu(t,a);else if(kg(n,t,s,r,a))a.stopPropagation();else if(Gu(t,a),s&4&&-1<wg.indexOf(t)){for(;n!==null;){var l=xl(n);if(l!==null&&nh(l),l=ic(t,s,r,a),l===null&&yo(t,s,a,ii,r),l===n)break;n=l}n!==null&&a.stopPropagation()}else yo(t,s,a,null,r)}}var ii=null;function ic(t,s,r,a){if(ii=null,t=ad(a),t=ca(t),t!==null)if(s=Na(t),s===null)t=null;else if(r=s.tag,r===13){if(t=Xm(s),t!==null)return t;t=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return ii=t,null}function dh(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hg()){case nd:return 1;case th:return 4;case ai:case pg:return 16;case sh:return 536870912;default:return 16}default:return 16}}var $r=null,cd=null,Bl=null;function uh(){if(Bl)return Bl;var t,s=cd,r=s.length,a,n="value"in $r?$r.value:$r.textContent,l=n.length;for(t=0;t<r&&s[t]===n[t];t++);var i=r-t;for(a=1;a<=i&&s[r-a]===n[l-a];a++);return Bl=n.slice(t,1<a?1-a:void 0)}function Vl(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function kl(){return!0}function Xu(){return!1}function gs(t){function s(r,a,n,l,i){this._reactName=r,this._targetInst=n,this.type=a,this.nativeEvent=l,this.target=i,this.currentTarget=null;for(var d in t)t.hasOwnProperty(d)&&(r=t[d],this[d]=r?r(l):l[d]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?kl:Xu,this.isPropagationStopped=Xu,this}return dt(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=kl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=kl)},persist:function(){},isPersistent:kl}),s}var rn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dd=gs(rn),ul=dt({},rn,{view:0,detail:0}),Eg=gs(ul),oo,co,hn,Ui=dt({},ul,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ud,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hn&&(hn&&t.type==="mousemove"?(oo=t.screenX-hn.screenX,co=t.screenY-hn.screenY):co=oo=0,hn=t),oo)},movementY:function(t){return"movementY"in t?t.movementY:co}}),Qu=gs(Ui),Pg=dt({},Ui,{dataTransfer:0}),Ag=gs(Pg),Dg=dt({},ul,{relatedTarget:0}),uo=gs(Dg),Ig=dt({},rn,{animationName:0,elapsedTime:0,pseudoElement:0}),$g=gs(Ig),Lg=dt({},rn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ug=gs(Lg),zg=dt({},rn,{data:0}),Zu=gs(zg),_g={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Mg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rg(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Fg[t])?!!s[t]:!1}function ud(){return Rg}var Og=dt({},ul,{key:function(t){if(t.key){var s=_g[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Vl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Mg[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ud,charCode:function(t){return t.type==="keypress"?Vl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Bg=gs(Og),Vg=dt({},Ui,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ex=gs(Vg),Wg=dt({},ul,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ud}),Hg=gs(Wg),Yg=dt({},rn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jg=gs(Yg),qg=dt({},Ui,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Gg=gs(qg),Kg=[9,13,27,32],xd=br&&"CompositionEvent"in window,Ln=null;br&&"documentMode"in document&&(Ln=document.documentMode);var Xg=br&&"TextEvent"in window&&!Ln,xh=br&&(!xd||Ln&&8<Ln&&11>=Ln),tx=" ",sx=!1;function mh(t,s){switch(t){case"keyup":return Kg.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Da=!1;function Qg(t,s){switch(t){case"compositionend":return hh(s);case"keypress":return s.which!==32?null:(sx=!0,tx);case"textInput":return t=s.data,t===tx&&sx?null:t;default:return null}}function Zg(t,s){if(Da)return t==="compositionend"||!xd&&mh(t,s)?(t=uh(),Bl=cd=$r=null,Da=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return xh&&s.locale!=="ko"?null:s.data;default:return null}}var ef={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rx(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!ef[t.type]:s==="textarea"}function ph(t,s,r,a){Ym(a),s=oi(s,"onChange"),0<s.length&&(r=new dd("onChange","change",null,r,a),t.push({event:r,listeners:s}))}var Un=null,Gn=null;function tf(t){Ch(t,0)}function zi(t){var s=La(t);if(Fm(s))return t}function sf(t,s){if(t==="change")return s}var gh=!1;if(br){var xo;if(br){var mo="oninput"in document;if(!mo){var ax=document.createElement("div");ax.setAttribute("oninput","return;"),mo=typeof ax.oninput=="function"}xo=mo}else xo=!1;gh=xo&&(!document.documentMode||9<document.documentMode)}function nx(){Un&&(Un.detachEvent("onpropertychange",fh),Gn=Un=null)}function fh(t){if(t.propertyName==="value"&&zi(Gn)){var s=[];ph(s,Gn,t,ad(t)),Km(tf,s)}}function rf(t,s,r){t==="focusin"?(nx(),Un=s,Gn=r,Un.attachEvent("onpropertychange",fh)):t==="focusout"&&nx()}function af(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return zi(Gn)}function nf(t,s){if(t==="click")return zi(s)}function lf(t,s){if(t==="input"||t==="change")return zi(s)}function of(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Ws=typeof Object.is=="function"?Object.is:of;function Kn(t,s){if(Ws(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),a=Object.keys(s);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var n=r[a];if(!Vo.call(s,n)||!Ws(t[n],s[n]))return!1}return!0}function lx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ix(t,s){var r=lx(t);t=0;for(var a;r;){if(r.nodeType===3){if(a=t+r.textContent.length,t<=s&&a>=s)return{node:r,offset:s-t};t=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lx(r)}}function yh(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?yh(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function bh(){for(var t=window,s=ti();s instanceof t.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)t=s.contentWindow;else break;s=ti(t.document)}return s}function md(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function cf(t){var s=bh(),r=t.focusedElem,a=t.selectionRange;if(s!==r&&r&&r.ownerDocument&&yh(r.ownerDocument.documentElement,r)){if(a!==null&&md(r)){if(s=a.start,t=a.end,t===void 0&&(t=s),"selectionStart"in r)r.selectionStart=s,r.selectionEnd=Math.min(t,r.value.length);else if(t=(s=r.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var n=r.textContent.length,l=Math.min(a.start,n);a=a.end===void 0?l:Math.min(a.end,n),!t.extend&&l>a&&(n=a,a=l,l=n),n=ix(r,l);var i=ix(r,a);n&&i&&(t.rangeCount!==1||t.anchorNode!==n.node||t.anchorOffset!==n.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(s=s.createRange(),s.setStart(n.node,n.offset),t.removeAllRanges(),l>a?(t.addRange(s),t.extend(i.node,i.offset)):(s.setEnd(i.node,i.offset),t.addRange(s)))}}for(s=[],t=r;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<s.length;r++)t=s[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var df=br&&"documentMode"in document&&11>=document.documentMode,Ia=null,oc=null,zn=null,cc=!1;function ox(t,s,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;cc||Ia==null||Ia!==ti(a)||(a=Ia,"selectionStart"in a&&md(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),zn&&Kn(zn,a)||(zn=a,a=oi(oc,"onSelect"),0<a.length&&(s=new dd("onSelect","select",null,s,r),t.push({event:s,listeners:a}),s.target=Ia)))}function Sl(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit"+t]="webkit"+s,r["Moz"+t]="moz"+s,r}var $a={animationend:Sl("Animation","AnimationEnd"),animationiteration:Sl("Animation","AnimationIteration"),animationstart:Sl("Animation","AnimationStart"),transitionend:Sl("Transition","TransitionEnd")},ho={},jh={};br&&(jh=document.createElement("div").style,"AnimationEvent"in window||(delete $a.animationend.animation,delete $a.animationiteration.animation,delete $a.animationstart.animation),"TransitionEvent"in window||delete $a.transitionend.transition);function _i(t){if(ho[t])return ho[t];if(!$a[t])return t;var s=$a[t],r;for(r in s)if(s.hasOwnProperty(r)&&r in jh)return ho[t]=s[r];return t}var Nh=_i("animationend"),vh=_i("animationiteration"),wh=_i("animationstart"),kh=_i("transitionend"),Sh=new Map,cx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Kr(t,s){Sh.set(t,s),ja(s,[t])}for(var po=0;po<cx.length;po++){var go=cx[po],uf=go.toLowerCase(),xf=go[0].toUpperCase()+go.slice(1);Kr(uf,"on"+xf)}Kr(Nh,"onAnimationEnd");Kr(vh,"onAnimationIteration");Kr(wh,"onAnimationStart");Kr("dblclick","onDoubleClick");Kr("focusin","onFocus");Kr("focusout","onBlur");Kr(kh,"onTransitionEnd");Ja("onMouseEnter",["mouseout","mouseover"]);Ja("onMouseLeave",["mouseout","mouseover"]);Ja("onPointerEnter",["pointerout","pointerover"]);Ja("onPointerLeave",["pointerout","pointerover"]);ja("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ja("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ja("onBeforeInput",["compositionend","keypress","textInput","paste"]);ja("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ja("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ja("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tn));function dx(t,s,r){var a=t.type||"unknown-event";t.currentTarget=r,dg(a,s,void 0,t),t.currentTarget=null}function Ch(t,s){s=(s&4)!==0;for(var r=0;r<t.length;r++){var a=t[r],n=a.event;a=a.listeners;e:{var l=void 0;if(s)for(var i=a.length-1;0<=i;i--){var d=a[i],c=d.instance,u=d.currentTarget;if(d=d.listener,c!==l&&n.isPropagationStopped())break e;dx(n,d,u),l=c}else for(i=0;i<a.length;i++){if(d=a[i],c=d.instance,u=d.currentTarget,d=d.listener,c!==l&&n.isPropagationStopped())break e;dx(n,d,u),l=c}}}if(ri)throw t=ac,ri=!1,ac=null,t}function at(t,s){var r=s[hc];r===void 0&&(r=s[hc]=new Set);var a=t+"__bubble";r.has(a)||(Th(s,t,2,!1),r.add(a))}function fo(t,s,r){var a=0;s&&(a|=4),Th(r,t,a,s)}var Cl="_reactListening"+Math.random().toString(36).slice(2);function Xn(t){if(!t[Cl]){t[Cl]=!0,Lm.forEach(function(r){r!=="selectionchange"&&(mf.has(r)||fo(r,!1,t),fo(r,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Cl]||(s[Cl]=!0,fo("selectionchange",!1,s))}}function Th(t,s,r,a){switch(dh(s)){case 1:var n=Cg;break;case 4:n=Tg;break;default:n=od}r=n.bind(null,s,r,t),n=void 0,!rc||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(n=!0),a?n!==void 0?t.addEventListener(s,r,{capture:!0,passive:n}):t.addEventListener(s,r,!0):n!==void 0?t.addEventListener(s,r,{passive:n}):t.addEventListener(s,r,!1)}function yo(t,s,r,a,n){var l=a;if(!(s&1)&&!(s&2)&&a!==null)e:for(;;){if(a===null)return;var i=a.tag;if(i===3||i===4){var d=a.stateNode.containerInfo;if(d===n||d.nodeType===8&&d.parentNode===n)break;if(i===4)for(i=a.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;i=i.return}for(;d!==null;){if(i=ca(d),i===null)return;if(c=i.tag,c===5||c===6){a=l=i;continue e}d=d.parentNode}}a=a.return}Km(function(){var u=l,x=ad(r),b=[];e:{var f=Sh.get(t);if(f!==void 0){var T=dd,w=t;switch(t){case"keypress":if(Vl(r)===0)break e;case"keydown":case"keyup":T=Bg;break;case"focusin":w="focus",T=uo;break;case"focusout":w="blur",T=uo;break;case"beforeblur":case"afterblur":T=uo;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Qu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=Ag;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=Hg;break;case Nh:case vh:case wh:T=$g;break;case kh:T=Jg;break;case"scroll":T=Eg;break;case"wheel":T=Gg;break;case"copy":case"cut":case"paste":T=Ug;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=ex}var j=(s&4)!==0,S=!j&&t==="scroll",p=j?f!==null?f+"Capture":null:f;j=[];for(var m=u,h;m!==null;){h=m;var N=h.stateNode;if(h.tag===5&&N!==null&&(h=N,p!==null&&(N=Hn(m,p),N!=null&&j.push(Qn(m,N,h)))),S)break;m=m.return}0<j.length&&(f=new T(f,w,null,r,x),b.push({event:f,listeners:j}))}}if(!(s&7)){e:{if(f=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",f&&r!==tc&&(w=r.relatedTarget||r.fromElement)&&(ca(w)||w[jr]))break e;if((T||f)&&(f=x.window===x?x:(f=x.ownerDocument)?f.defaultView||f.parentWindow:window,T?(w=r.relatedTarget||r.toElement,T=u,w=w?ca(w):null,w!==null&&(S=Na(w),w!==S||w.tag!==5&&w.tag!==6)&&(w=null)):(T=null,w=u),T!==w)){if(j=Qu,N="onMouseLeave",p="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(j=ex,N="onPointerLeave",p="onPointerEnter",m="pointer"),S=T==null?f:La(T),h=w==null?f:La(w),f=new j(N,m+"leave",T,r,x),f.target=S,f.relatedTarget=h,N=null,ca(x)===u&&(j=new j(p,m+"enter",w,r,x),j.target=h,j.relatedTarget=S,N=j),S=N,T&&w)t:{for(j=T,p=w,m=0,h=j;h;h=Ca(h))m++;for(h=0,N=p;N;N=Ca(N))h++;for(;0<m-h;)j=Ca(j),m--;for(;0<h-m;)p=Ca(p),h--;for(;m--;){if(j===p||p!==null&&j===p.alternate)break t;j=Ca(j),p=Ca(p)}j=null}else j=null;T!==null&&ux(b,f,T,j,!1),w!==null&&S!==null&&ux(b,S,w,j,!0)}}e:{if(f=u?La(u):window,T=f.nodeName&&f.nodeName.toLowerCase(),T==="select"||T==="input"&&f.type==="file")var C=sf;else if(rx(f))if(gh)C=lf;else{C=af;var E=rf}else(T=f.nodeName)&&T.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=nf);if(C&&(C=C(t,u))){ph(b,C,r,x);break e}E&&E(t,f,u),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&Ko(f,"number",f.value)}switch(E=u?La(u):window,t){case"focusin":(rx(E)||E.contentEditable==="true")&&(Ia=E,oc=u,zn=null);break;case"focusout":zn=oc=Ia=null;break;case"mousedown":cc=!0;break;case"contextmenu":case"mouseup":case"dragend":cc=!1,ox(b,r,x);break;case"selectionchange":if(df)break;case"keydown":case"keyup":ox(b,r,x)}var P;if(xd)e:{switch(t){case"compositionstart":var U="onCompositionStart";break e;case"compositionend":U="onCompositionEnd";break e;case"compositionupdate":U="onCompositionUpdate";break e}U=void 0}else Da?mh(t,r)&&(U="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(U="onCompositionStart");U&&(xh&&r.locale!=="ko"&&(Da||U!=="onCompositionStart"?U==="onCompositionEnd"&&Da&&(P=uh()):($r=x,cd="value"in $r?$r.value:$r.textContent,Da=!0)),E=oi(u,U),0<E.length&&(U=new Zu(U,t,null,r,x),b.push({event:U,listeners:E}),P?U.data=P:(P=hh(r),P!==null&&(U.data=P)))),(P=Xg?Qg(t,r):Zg(t,r))&&(u=oi(u,"onBeforeInput"),0<u.length&&(x=new Zu("onBeforeInput","beforeinput",null,r,x),b.push({event:x,listeners:u}),x.data=P))}Ch(b,s)})}function Qn(t,s,r){return{instance:t,listener:s,currentTarget:r}}function oi(t,s){for(var r=s+"Capture",a=[];t!==null;){var n=t,l=n.stateNode;n.tag===5&&l!==null&&(n=l,l=Hn(t,r),l!=null&&a.unshift(Qn(t,l,n)),l=Hn(t,s),l!=null&&a.push(Qn(t,l,n))),t=t.return}return a}function Ca(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ux(t,s,r,a,n){for(var l=s._reactName,i=[];r!==null&&r!==a;){var d=r,c=d.alternate,u=d.stateNode;if(c!==null&&c===a)break;d.tag===5&&u!==null&&(d=u,n?(c=Hn(r,l),c!=null&&i.unshift(Qn(r,c,d))):n||(c=Hn(r,l),c!=null&&i.push(Qn(r,c,d)))),r=r.return}i.length!==0&&t.push({event:s,listeners:i})}var hf=/\r\n?/g,pf=/\u0000|\uFFFD/g;function xx(t){return(typeof t=="string"?t:""+t).replace(hf,`
`).replace(pf,"")}function Tl(t,s,r){if(s=xx(s),xx(t)!==s&&r)throw Error(ie(425))}function ci(){}var dc=null,uc=null;function xc(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var mc=typeof setTimeout=="function"?setTimeout:void 0,gf=typeof clearTimeout=="function"?clearTimeout:void 0,mx=typeof Promise=="function"?Promise:void 0,ff=typeof queueMicrotask=="function"?queueMicrotask:typeof mx<"u"?function(t){return mx.resolve(null).then(t).catch(yf)}:mc;function yf(t){setTimeout(function(){throw t})}function bo(t,s){var r=s,a=0;do{var n=r.nextSibling;if(t.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(a===0){t.removeChild(n),qn(s);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=n}while(r);qn(s)}function Fr(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function hx(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(s===0)return t;s--}else r==="/$"&&s++}t=t.previousSibling}return null}var an=Math.random().toString(36).slice(2),tr="__reactFiber$"+an,Zn="__reactProps$"+an,jr="__reactContainer$"+an,hc="__reactEvents$"+an,bf="__reactListeners$"+an,jf="__reactHandles$"+an;function ca(t){var s=t[tr];if(s)return s;for(var r=t.parentNode;r;){if(s=r[jr]||r[tr]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(t=hx(t);t!==null;){if(r=t[tr])return r;t=hx(t)}return s}t=r,r=t.parentNode}return null}function xl(t){return t=t[tr]||t[jr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function La(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ie(33))}function Mi(t){return t[Zn]||null}var pc=[],Ua=-1;function Xr(t){return{current:t}}function lt(t){0>Ua||(t.current=pc[Ua],pc[Ua]=null,Ua--)}function rt(t,s){Ua++,pc[Ua]=t.current,t.current=s}var qr={},Yt=Xr(qr),ls=Xr(!1),pa=qr;function qa(t,s){var r=t.type.contextTypes;if(!r)return qr;var a=t.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===s)return a.__reactInternalMemoizedMaskedChildContext;var n={},l;for(l in r)n[l]=s[l];return a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=n),n}function is(t){return t=t.childContextTypes,t!=null}function di(){lt(ls),lt(Yt)}function px(t,s,r){if(Yt.current!==qr)throw Error(ie(168));rt(Yt,s),rt(ls,r)}function Eh(t,s,r){var a=t.stateNode;if(s=s.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var n in a)if(!(n in s))throw Error(ie(108,rg(t)||"Unknown",n));return dt({},r,a)}function ui(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qr,pa=Yt.current,rt(Yt,t),rt(ls,ls.current),!0}function gx(t,s,r){var a=t.stateNode;if(!a)throw Error(ie(169));r?(t=Eh(t,s,pa),a.__reactInternalMemoizedMergedChildContext=t,lt(ls),lt(Yt),rt(Yt,t)):lt(ls),rt(ls,r)}var mr=null,Fi=!1,jo=!1;function Ph(t){mr===null?mr=[t]:mr.push(t)}function Nf(t){Fi=!0,Ph(t)}function Qr(){if(!jo&&mr!==null){jo=!0;var t=0,s=Ke;try{var r=mr;for(Ke=1;t<r.length;t++){var a=r[t];do a=a(!0);while(a!==null)}mr=null,Fi=!1}catch(n){throw mr!==null&&(mr=mr.slice(t+1)),eh(nd,Qr),n}finally{Ke=s,jo=!1}}return null}var za=[],_a=0,xi=null,mi=0,Ns=[],vs=0,ga=null,hr=1,pr="";function ia(t,s){za[_a++]=mi,za[_a++]=xi,xi=t,mi=s}function Ah(t,s,r){Ns[vs++]=hr,Ns[vs++]=pr,Ns[vs++]=ga,ga=t;var a=hr;t=pr;var n=32-Bs(a)-1;a&=~(1<<n),r+=1;var l=32-Bs(s)+n;if(30<l){var i=n-n%5;l=(a&(1<<i)-1).toString(32),a>>=i,n-=i,hr=1<<32-Bs(s)+n|r<<n|a,pr=l+t}else hr=1<<l|r<<n|a,pr=t}function hd(t){t.return!==null&&(ia(t,1),Ah(t,1,0))}function pd(t){for(;t===xi;)xi=za[--_a],za[_a]=null,mi=za[--_a],za[_a]=null;for(;t===ga;)ga=Ns[--vs],Ns[vs]=null,pr=Ns[--vs],Ns[vs]=null,hr=Ns[--vs],Ns[vs]=null}var ms=null,us=null,it=!1,Os=null;function Dh(t,s){var r=ks(5,null,null,0);r.elementType="DELETED",r.stateNode=s,r.return=t,s=t.deletions,s===null?(t.deletions=[r],t.flags|=16):s.push(r)}function fx(t,s){switch(t.tag){case 5:var r=t.type;return s=s.nodeType!==1||r.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,ms=t,us=Fr(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,ms=t,us=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(r=ga!==null?{id:hr,overflow:pr}:null,t.memoizedState={dehydrated:s,treeContext:r,retryLane:1073741824},r=ks(18,null,null,0),r.stateNode=s,r.return=t,t.child=r,ms=t,us=null,!0):!1;default:return!1}}function gc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function fc(t){if(it){var s=us;if(s){var r=s;if(!fx(t,s)){if(gc(t))throw Error(ie(418));s=Fr(r.nextSibling);var a=ms;s&&fx(t,s)?Dh(a,r):(t.flags=t.flags&-4097|2,it=!1,ms=t)}}else{if(gc(t))throw Error(ie(418));t.flags=t.flags&-4097|2,it=!1,ms=t}}}function yx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ms=t}function El(t){if(t!==ms)return!1;if(!it)return yx(t),it=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!xc(t.type,t.memoizedProps)),s&&(s=us)){if(gc(t))throw Ih(),Error(ie(418));for(;s;)Dh(t,s),s=Fr(s.nextSibling)}if(yx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ie(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(s===0){us=Fr(t.nextSibling);break e}s--}else r!=="$"&&r!=="$!"&&r!=="$?"||s++}t=t.nextSibling}us=null}}else us=ms?Fr(t.stateNode.nextSibling):null;return!0}function Ih(){for(var t=us;t;)t=Fr(t.nextSibling)}function Ga(){us=ms=null,it=!1}function gd(t){Os===null?Os=[t]:Os.push(t)}var vf=Sr.ReactCurrentBatchConfig;function pn(t,s,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ie(309));var a=r.stateNode}if(!a)throw Error(ie(147,t));var n=a,l=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===l?s.ref:(s=function(i){var d=n.refs;i===null?delete d[l]:d[l]=i},s._stringRef=l,s)}if(typeof t!="string")throw Error(ie(284));if(!r._owner)throw Error(ie(290,t))}return t}function Pl(t,s){throw t=Object.prototype.toString.call(s),Error(ie(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function bx(t){var s=t._init;return s(t._payload)}function $h(t){function s(p,m){if(t){var h=p.deletions;h===null?(p.deletions=[m],p.flags|=16):h.push(m)}}function r(p,m){if(!t)return null;for(;m!==null;)s(p,m),m=m.sibling;return null}function a(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function n(p,m){return p=Vr(p,m),p.index=0,p.sibling=null,p}function l(p,m,h){return p.index=h,t?(h=p.alternate,h!==null?(h=h.index,h<m?(p.flags|=2,m):h):(p.flags|=2,m)):(p.flags|=1048576,m)}function i(p){return t&&p.alternate===null&&(p.flags|=2),p}function d(p,m,h,N){return m===null||m.tag!==6?(m=To(h,p.mode,N),m.return=p,m):(m=n(m,h),m.return=p,m)}function c(p,m,h,N){var C=h.type;return C===Aa?x(p,m,h.props.children,N,h.key):m!==null&&(m.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Pr&&bx(C)===m.type)?(N=n(m,h.props),N.ref=pn(p,m,h),N.return=p,N):(N=Kl(h.type,h.key,h.props,null,p.mode,N),N.ref=pn(p,m,h),N.return=p,N)}function u(p,m,h,N){return m===null||m.tag!==4||m.stateNode.containerInfo!==h.containerInfo||m.stateNode.implementation!==h.implementation?(m=Eo(h,p.mode,N),m.return=p,m):(m=n(m,h.children||[]),m.return=p,m)}function x(p,m,h,N,C){return m===null||m.tag!==7?(m=ma(h,p.mode,N,C),m.return=p,m):(m=n(m,h),m.return=p,m)}function b(p,m,h){if(typeof m=="string"&&m!==""||typeof m=="number")return m=To(""+m,p.mode,h),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case yl:return h=Kl(m.type,m.key,m.props,null,p.mode,h),h.ref=pn(p,null,m),h.return=p,h;case Pa:return m=Eo(m,p.mode,h),m.return=p,m;case Pr:var N=m._init;return b(p,N(m._payload),h)}if(Sn(m)||dn(m))return m=ma(m,p.mode,h,null),m.return=p,m;Pl(p,m)}return null}function f(p,m,h,N){var C=m!==null?m.key:null;if(typeof h=="string"&&h!==""||typeof h=="number")return C!==null?null:d(p,m,""+h,N);if(typeof h=="object"&&h!==null){switch(h.$$typeof){case yl:return h.key===C?c(p,m,h,N):null;case Pa:return h.key===C?u(p,m,h,N):null;case Pr:return C=h._init,f(p,m,C(h._payload),N)}if(Sn(h)||dn(h))return C!==null?null:x(p,m,h,N,null);Pl(p,h)}return null}function T(p,m,h,N,C){if(typeof N=="string"&&N!==""||typeof N=="number")return p=p.get(h)||null,d(m,p,""+N,C);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case yl:return p=p.get(N.key===null?h:N.key)||null,c(m,p,N,C);case Pa:return p=p.get(N.key===null?h:N.key)||null,u(m,p,N,C);case Pr:var E=N._init;return T(p,m,h,E(N._payload),C)}if(Sn(N)||dn(N))return p=p.get(h)||null,x(m,p,N,C,null);Pl(m,N)}return null}function w(p,m,h,N){for(var C=null,E=null,P=m,U=m=0,K=null;P!==null&&U<h.length;U++){P.index>U?(K=P,P=null):K=P.sibling;var R=f(p,P,h[U],N);if(R===null){P===null&&(P=K);break}t&&P&&R.alternate===null&&s(p,P),m=l(R,m,U),E===null?C=R:E.sibling=R,E=R,P=K}if(U===h.length)return r(p,P),it&&ia(p,U),C;if(P===null){for(;U<h.length;U++)P=b(p,h[U],N),P!==null&&(m=l(P,m,U),E===null?C=P:E.sibling=P,E=P);return it&&ia(p,U),C}for(P=a(p,P);U<h.length;U++)K=T(P,p,U,h[U],N),K!==null&&(t&&K.alternate!==null&&P.delete(K.key===null?U:K.key),m=l(K,m,U),E===null?C=K:E.sibling=K,E=K);return t&&P.forEach(function(le){return s(p,le)}),it&&ia(p,U),C}function j(p,m,h,N){var C=dn(h);if(typeof C!="function")throw Error(ie(150));if(h=C.call(h),h==null)throw Error(ie(151));for(var E=C=null,P=m,U=m=0,K=null,R=h.next();P!==null&&!R.done;U++,R=h.next()){P.index>U?(K=P,P=null):K=P.sibling;var le=f(p,P,R.value,N);if(le===null){P===null&&(P=K);break}t&&P&&le.alternate===null&&s(p,P),m=l(le,m,U),E===null?C=le:E.sibling=le,E=le,P=K}if(R.done)return r(p,P),it&&ia(p,U),C;if(P===null){for(;!R.done;U++,R=h.next())R=b(p,R.value,N),R!==null&&(m=l(R,m,U),E===null?C=R:E.sibling=R,E=R);return it&&ia(p,U),C}for(P=a(p,P);!R.done;U++,R=h.next())R=T(P,p,U,R.value,N),R!==null&&(t&&R.alternate!==null&&P.delete(R.key===null?U:R.key),m=l(R,m,U),E===null?C=R:E.sibling=R,E=R);return t&&P.forEach(function(X){return s(p,X)}),it&&ia(p,U),C}function S(p,m,h,N){if(typeof h=="object"&&h!==null&&h.type===Aa&&h.key===null&&(h=h.props.children),typeof h=="object"&&h!==null){switch(h.$$typeof){case yl:e:{for(var C=h.key,E=m;E!==null;){if(E.key===C){if(C=h.type,C===Aa){if(E.tag===7){r(p,E.sibling),m=n(E,h.props.children),m.return=p,p=m;break e}}else if(E.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Pr&&bx(C)===E.type){r(p,E.sibling),m=n(E,h.props),m.ref=pn(p,E,h),m.return=p,p=m;break e}r(p,E);break}else s(p,E);E=E.sibling}h.type===Aa?(m=ma(h.props.children,p.mode,N,h.key),m.return=p,p=m):(N=Kl(h.type,h.key,h.props,null,p.mode,N),N.ref=pn(p,m,h),N.return=p,p=N)}return i(p);case Pa:e:{for(E=h.key;m!==null;){if(m.key===E)if(m.tag===4&&m.stateNode.containerInfo===h.containerInfo&&m.stateNode.implementation===h.implementation){r(p,m.sibling),m=n(m,h.children||[]),m.return=p,p=m;break e}else{r(p,m);break}else s(p,m);m=m.sibling}m=Eo(h,p.mode,N),m.return=p,p=m}return i(p);case Pr:return E=h._init,S(p,m,E(h._payload),N)}if(Sn(h))return w(p,m,h,N);if(dn(h))return j(p,m,h,N);Pl(p,h)}return typeof h=="string"&&h!==""||typeof h=="number"?(h=""+h,m!==null&&m.tag===6?(r(p,m.sibling),m=n(m,h),m.return=p,p=m):(r(p,m),m=To(h,p.mode,N),m.return=p,p=m),i(p)):r(p,m)}return S}var Ka=$h(!0),Lh=$h(!1),hi=Xr(null),pi=null,Ma=null,fd=null;function yd(){fd=Ma=pi=null}function bd(t){var s=hi.current;lt(hi),t._currentValue=s}function yc(t,s,r){for(;t!==null;){var a=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,a!==null&&(a.childLanes|=s)):a!==null&&(a.childLanes&s)!==s&&(a.childLanes|=s),t===r)break;t=t.return}}function Ha(t,s){pi=t,fd=Ma=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(as=!0),t.firstContext=null)}function Ts(t){var s=t._currentValue;if(fd!==t)if(t={context:t,memoizedValue:s,next:null},Ma===null){if(pi===null)throw Error(ie(308));Ma=t,pi.dependencies={lanes:0,firstContext:t}}else Ma=Ma.next=t;return s}var da=null;function jd(t){da===null?da=[t]:da.push(t)}function Uh(t,s,r,a){var n=s.interleaved;return n===null?(r.next=r,jd(s)):(r.next=n.next,n.next=r),s.interleaved=r,Nr(t,a)}function Nr(t,s){t.lanes|=s;var r=t.alternate;for(r!==null&&(r.lanes|=s),r=t,t=t.return;t!==null;)t.childLanes|=s,r=t.alternate,r!==null&&(r.childLanes|=s),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Ar=!1;function Nd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zh(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function fr(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function Rr(t,s,r){var a=t.updateQueue;if(a===null)return null;if(a=a.shared,Je&2){var n=a.pending;return n===null?s.next=s:(s.next=n.next,n.next=s),a.pending=s,Nr(t,r)}return n=a.interleaved,n===null?(s.next=s,jd(a)):(s.next=n.next,n.next=s),a.interleaved=s,Nr(t,r)}function Wl(t,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194240)!==0)){var a=s.lanes;a&=t.pendingLanes,r|=a,s.lanes=r,ld(t,r)}}function jx(t,s){var r=t.updateQueue,a=t.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var n=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?n=l=i:l=l.next=i,r=r.next}while(r!==null);l===null?n=l=s:l=l.next=s}else n=l=s;r={baseState:a.baseState,firstBaseUpdate:n,lastBaseUpdate:l,shared:a.shared,effects:a.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=s:t.next=s,r.lastBaseUpdate=s}function gi(t,s,r,a){var n=t.updateQueue;Ar=!1;var l=n.firstBaseUpdate,i=n.lastBaseUpdate,d=n.shared.pending;if(d!==null){n.shared.pending=null;var c=d,u=c.next;c.next=null,i===null?l=u:i.next=u,i=c;var x=t.alternate;x!==null&&(x=x.updateQueue,d=x.lastBaseUpdate,d!==i&&(d===null?x.firstBaseUpdate=u:d.next=u,x.lastBaseUpdate=c))}if(l!==null){var b=n.baseState;i=0,x=u=c=null,d=l;do{var f=d.lane,T=d.eventTime;if((a&f)===f){x!==null&&(x=x.next={eventTime:T,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var w=t,j=d;switch(f=s,T=r,j.tag){case 1:if(w=j.payload,typeof w=="function"){b=w.call(T,b,f);break e}b=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=j.payload,f=typeof w=="function"?w.call(T,b,f):w,f==null)break e;b=dt({},b,f);break e;case 2:Ar=!0}}d.callback!==null&&d.lane!==0&&(t.flags|=64,f=n.effects,f===null?n.effects=[d]:f.push(d))}else T={eventTime:T,lane:f,tag:d.tag,payload:d.payload,callback:d.callback,next:null},x===null?(u=x=T,c=b):x=x.next=T,i|=f;if(d=d.next,d===null){if(d=n.shared.pending,d===null)break;f=d,d=f.next,f.next=null,n.lastBaseUpdate=f,n.shared.pending=null}}while(!0);if(x===null&&(c=b),n.baseState=c,n.firstBaseUpdate=u,n.lastBaseUpdate=x,s=n.shared.interleaved,s!==null){n=s;do i|=n.lane,n=n.next;while(n!==s)}else l===null&&(n.shared.lanes=0);ya|=i,t.lanes=i,t.memoizedState=b}}function Nx(t,s,r){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var a=t[s],n=a.callback;if(n!==null){if(a.callback=null,a=r,typeof n!="function")throw Error(ie(191,n));n.call(a)}}}var ml={},rr=Xr(ml),el=Xr(ml),tl=Xr(ml);function ua(t){if(t===ml)throw Error(ie(174));return t}function vd(t,s){switch(rt(tl,s),rt(el,t),rt(rr,ml),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Qo(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=Qo(s,t)}lt(rr),rt(rr,s)}function Xa(){lt(rr),lt(el),lt(tl)}function _h(t){ua(tl.current);var s=ua(rr.current),r=Qo(s,t.type);s!==r&&(rt(el,t),rt(rr,r))}function wd(t){el.current===t&&(lt(rr),lt(el))}var ot=Xr(0);function fi(t){for(var s=t;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var No=[];function kd(){for(var t=0;t<No.length;t++)No[t]._workInProgressVersionPrimary=null;No.length=0}var Hl=Sr.ReactCurrentDispatcher,vo=Sr.ReactCurrentBatchConfig,fa=0,ct=null,wt=null,Et=null,yi=!1,_n=!1,sl=0,wf=0;function Rt(){throw Error(ie(321))}function Sd(t,s){if(s===null)return!1;for(var r=0;r<s.length&&r<t.length;r++)if(!Ws(t[r],s[r]))return!1;return!0}function Cd(t,s,r,a,n,l){if(fa=l,ct=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Hl.current=t===null||t.memoizedState===null?Tf:Ef,t=r(a,n),_n){l=0;do{if(_n=!1,sl=0,25<=l)throw Error(ie(301));l+=1,Et=wt=null,s.updateQueue=null,Hl.current=Pf,t=r(a,n)}while(_n)}if(Hl.current=bi,s=wt!==null&&wt.next!==null,fa=0,Et=wt=ct=null,yi=!1,s)throw Error(ie(300));return t}function Td(){var t=sl!==0;return sl=0,t}function er(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?ct.memoizedState=Et=t:Et=Et.next=t,Et}function Es(){if(wt===null){var t=ct.alternate;t=t!==null?t.memoizedState:null}else t=wt.next;var s=Et===null?ct.memoizedState:Et.next;if(s!==null)Et=s,wt=t;else{if(t===null)throw Error(ie(310));wt=t,t={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},Et===null?ct.memoizedState=Et=t:Et=Et.next=t}return Et}function rl(t,s){return typeof s=="function"?s(t):s}function wo(t){var s=Es(),r=s.queue;if(r===null)throw Error(ie(311));r.lastRenderedReducer=t;var a=wt,n=a.baseQueue,l=r.pending;if(l!==null){if(n!==null){var i=n.next;n.next=l.next,l.next=i}a.baseQueue=n=l,r.pending=null}if(n!==null){l=n.next,a=a.baseState;var d=i=null,c=null,u=l;do{var x=u.lane;if((fa&x)===x)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),a=u.hasEagerState?u.eagerState:t(a,u.action);else{var b={lane:x,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(d=c=b,i=a):c=c.next=b,ct.lanes|=x,ya|=x}u=u.next}while(u!==null&&u!==l);c===null?i=a:c.next=d,Ws(a,s.memoizedState)||(as=!0),s.memoizedState=a,s.baseState=i,s.baseQueue=c,r.lastRenderedState=a}if(t=r.interleaved,t!==null){n=t;do l=n.lane,ct.lanes|=l,ya|=l,n=n.next;while(n!==t)}else n===null&&(r.lanes=0);return[s.memoizedState,r.dispatch]}function ko(t){var s=Es(),r=s.queue;if(r===null)throw Error(ie(311));r.lastRenderedReducer=t;var a=r.dispatch,n=r.pending,l=s.memoizedState;if(n!==null){r.pending=null;var i=n=n.next;do l=t(l,i.action),i=i.next;while(i!==n);Ws(l,s.memoizedState)||(as=!0),s.memoizedState=l,s.baseQueue===null&&(s.baseState=l),r.lastRenderedState=l}return[l,a]}function Mh(){}function Fh(t,s){var r=ct,a=Es(),n=s(),l=!Ws(a.memoizedState,n);if(l&&(a.memoizedState=n,as=!0),a=a.queue,Ed(Bh.bind(null,r,a,t),[t]),a.getSnapshot!==s||l||Et!==null&&Et.memoizedState.tag&1){if(r.flags|=2048,al(9,Oh.bind(null,r,a,n,s),void 0,null),Dt===null)throw Error(ie(349));fa&30||Rh(r,s,n)}return n}function Rh(t,s,r){t.flags|=16384,t={getSnapshot:s,value:r},s=ct.updateQueue,s===null?(s={lastEffect:null,stores:null},ct.updateQueue=s,s.stores=[t]):(r=s.stores,r===null?s.stores=[t]:r.push(t))}function Oh(t,s,r,a){s.value=r,s.getSnapshot=a,Vh(s)&&Wh(t)}function Bh(t,s,r){return r(function(){Vh(s)&&Wh(t)})}function Vh(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!Ws(t,r)}catch{return!0}}function Wh(t){var s=Nr(t,1);s!==null&&Vs(s,t,1,-1)}function vx(t){var s=er();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rl,lastRenderedState:t},s.queue=t,t=t.dispatch=Cf.bind(null,ct,t),[s.memoizedState,t]}function al(t,s,r,a){return t={tag:t,create:s,destroy:r,deps:a,next:null},s=ct.updateQueue,s===null?(s={lastEffect:null,stores:null},ct.updateQueue=s,s.lastEffect=t.next=t):(r=s.lastEffect,r===null?s.lastEffect=t.next=t:(a=r.next,r.next=t,t.next=a,s.lastEffect=t)),t}function Hh(){return Es().memoizedState}function Yl(t,s,r,a){var n=er();ct.flags|=t,n.memoizedState=al(1|s,r,void 0,a===void 0?null:a)}function Ri(t,s,r,a){var n=Es();a=a===void 0?null:a;var l=void 0;if(wt!==null){var i=wt.memoizedState;if(l=i.destroy,a!==null&&Sd(a,i.deps)){n.memoizedState=al(s,r,l,a);return}}ct.flags|=t,n.memoizedState=al(1|s,r,l,a)}function wx(t,s){return Yl(8390656,8,t,s)}function Ed(t,s){return Ri(2048,8,t,s)}function Yh(t,s){return Ri(4,2,t,s)}function Jh(t,s){return Ri(4,4,t,s)}function qh(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Gh(t,s,r){return r=r!=null?r.concat([t]):null,Ri(4,4,qh.bind(null,s,t),r)}function Pd(){}function Kh(t,s){var r=Es();s=s===void 0?null:s;var a=r.memoizedState;return a!==null&&s!==null&&Sd(s,a[1])?a[0]:(r.memoizedState=[t,s],t)}function Xh(t,s){var r=Es();s=s===void 0?null:s;var a=r.memoizedState;return a!==null&&s!==null&&Sd(s,a[1])?a[0]:(t=t(),r.memoizedState=[t,s],t)}function Qh(t,s,r){return fa&21?(Ws(r,s)||(r=rh(),ct.lanes|=r,ya|=r,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,as=!0),t.memoizedState=r)}function kf(t,s){var r=Ke;Ke=r!==0&&4>r?r:4,t(!0);var a=vo.transition;vo.transition={};try{t(!1),s()}finally{Ke=r,vo.transition=a}}function Zh(){return Es().memoizedState}function Sf(t,s,r){var a=Br(t);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},e0(t))t0(s,r);else if(r=Uh(t,s,r,a),r!==null){var n=Xt();Vs(r,t,a,n),s0(r,s,a)}}function Cf(t,s,r){var a=Br(t),n={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(e0(t))t0(s,n);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=s.lastRenderedReducer,l!==null))try{var i=s.lastRenderedState,d=l(i,r);if(n.hasEagerState=!0,n.eagerState=d,Ws(d,i)){var c=s.interleaved;c===null?(n.next=n,jd(s)):(n.next=c.next,c.next=n),s.interleaved=n;return}}catch{}finally{}r=Uh(t,s,n,a),r!==null&&(n=Xt(),Vs(r,t,a,n),s0(r,s,a))}}function e0(t){var s=t.alternate;return t===ct||s!==null&&s===ct}function t0(t,s){_n=yi=!0;var r=t.pending;r===null?s.next=s:(s.next=r.next,r.next=s),t.pending=s}function s0(t,s,r){if(r&4194240){var a=s.lanes;a&=t.pendingLanes,r|=a,s.lanes=r,ld(t,r)}}var bi={readContext:Ts,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useInsertionEffect:Rt,useLayoutEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useMutableSource:Rt,useSyncExternalStore:Rt,useId:Rt,unstable_isNewReconciler:!1},Tf={readContext:Ts,useCallback:function(t,s){return er().memoizedState=[t,s===void 0?null:s],t},useContext:Ts,useEffect:wx,useImperativeHandle:function(t,s,r){return r=r!=null?r.concat([t]):null,Yl(4194308,4,qh.bind(null,s,t),r)},useLayoutEffect:function(t,s){return Yl(4194308,4,t,s)},useInsertionEffect:function(t,s){return Yl(4,2,t,s)},useMemo:function(t,s){var r=er();return s=s===void 0?null:s,t=t(),r.memoizedState=[t,s],t},useReducer:function(t,s,r){var a=er();return s=r!==void 0?r(s):s,a.memoizedState=a.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},a.queue=t,t=t.dispatch=Sf.bind(null,ct,t),[a.memoizedState,t]},useRef:function(t){var s=er();return t={current:t},s.memoizedState=t},useState:vx,useDebugValue:Pd,useDeferredValue:function(t){return er().memoizedState=t},useTransition:function(){var t=vx(!1),s=t[0];return t=kf.bind(null,t[1]),er().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,r){var a=ct,n=er();if(it){if(r===void 0)throw Error(ie(407));r=r()}else{if(r=s(),Dt===null)throw Error(ie(349));fa&30||Rh(a,s,r)}n.memoizedState=r;var l={value:r,getSnapshot:s};return n.queue=l,wx(Bh.bind(null,a,l,t),[t]),a.flags|=2048,al(9,Oh.bind(null,a,l,r,s),void 0,null),r},useId:function(){var t=er(),s=Dt.identifierPrefix;if(it){var r=pr,a=hr;r=(a&~(1<<32-Bs(a)-1)).toString(32)+r,s=":"+s+"R"+r,r=sl++,0<r&&(s+="H"+r.toString(32)),s+=":"}else r=wf++,s=":"+s+"r"+r.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},Ef={readContext:Ts,useCallback:Kh,useContext:Ts,useEffect:Ed,useImperativeHandle:Gh,useInsertionEffect:Yh,useLayoutEffect:Jh,useMemo:Xh,useReducer:wo,useRef:Hh,useState:function(){return wo(rl)},useDebugValue:Pd,useDeferredValue:function(t){var s=Es();return Qh(s,wt.memoizedState,t)},useTransition:function(){var t=wo(rl)[0],s=Es().memoizedState;return[t,s]},useMutableSource:Mh,useSyncExternalStore:Fh,useId:Zh,unstable_isNewReconciler:!1},Pf={readContext:Ts,useCallback:Kh,useContext:Ts,useEffect:Ed,useImperativeHandle:Gh,useInsertionEffect:Yh,useLayoutEffect:Jh,useMemo:Xh,useReducer:ko,useRef:Hh,useState:function(){return ko(rl)},useDebugValue:Pd,useDeferredValue:function(t){var s=Es();return wt===null?s.memoizedState=t:Qh(s,wt.memoizedState,t)},useTransition:function(){var t=ko(rl)[0],s=Es().memoizedState;return[t,s]},useMutableSource:Mh,useSyncExternalStore:Fh,useId:Zh,unstable_isNewReconciler:!1};function Ms(t,s){if(t&&t.defaultProps){s=dt({},s),t=t.defaultProps;for(var r in t)s[r]===void 0&&(s[r]=t[r]);return s}return s}function bc(t,s,r,a){s=t.memoizedState,r=r(a,s),r=r==null?s:dt({},s,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Oi={isMounted:function(t){return(t=t._reactInternals)?Na(t)===t:!1},enqueueSetState:function(t,s,r){t=t._reactInternals;var a=Xt(),n=Br(t),l=fr(a,n);l.payload=s,r!=null&&(l.callback=r),s=Rr(t,l,n),s!==null&&(Vs(s,t,n,a),Wl(s,t,n))},enqueueReplaceState:function(t,s,r){t=t._reactInternals;var a=Xt(),n=Br(t),l=fr(a,n);l.tag=1,l.payload=s,r!=null&&(l.callback=r),s=Rr(t,l,n),s!==null&&(Vs(s,t,n,a),Wl(s,t,n))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var r=Xt(),a=Br(t),n=fr(r,a);n.tag=2,s!=null&&(n.callback=s),s=Rr(t,n,a),s!==null&&(Vs(s,t,a,r),Wl(s,t,a))}};function kx(t,s,r,a,n,l,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(a,l,i):s.prototype&&s.prototype.isPureReactComponent?!Kn(r,a)||!Kn(n,l):!0}function r0(t,s,r){var a=!1,n=qr,l=s.contextType;return typeof l=="object"&&l!==null?l=Ts(l):(n=is(s)?pa:Yt.current,a=s.contextTypes,l=(a=a!=null)?qa(t,n):qr),s=new s(r,l),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Oi,t.stateNode=s,s._reactInternals=t,a&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=l),s}function Sx(t,s,r,a){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,a),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,a),s.state!==t&&Oi.enqueueReplaceState(s,s.state,null)}function jc(t,s,r,a){var n=t.stateNode;n.props=r,n.state=t.memoizedState,n.refs={},Nd(t);var l=s.contextType;typeof l=="object"&&l!==null?n.context=Ts(l):(l=is(s)?pa:Yt.current,n.context=qa(t,l)),n.state=t.memoizedState,l=s.getDerivedStateFromProps,typeof l=="function"&&(bc(t,s,l,r),n.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(s=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),s!==n.state&&Oi.enqueueReplaceState(n,n.state,null),gi(t,r,n,a),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308)}function Qa(t,s){try{var r="",a=s;do r+=sg(a),a=a.return;while(a);var n=r}catch(l){n=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:s,stack:n,digest:null}}function So(t,s,r){return{value:t,source:null,stack:r??null,digest:s??null}}function Nc(t,s){try{console.error(s.value)}catch(r){setTimeout(function(){throw r})}}var Af=typeof WeakMap=="function"?WeakMap:Map;function a0(t,s,r){r=fr(-1,r),r.tag=3,r.payload={element:null};var a=s.value;return r.callback=function(){Ni||(Ni=!0,Dc=a),Nc(t,s)},r}function n0(t,s,r){r=fr(-1,r),r.tag=3;var a=t.type.getDerivedStateFromError;if(typeof a=="function"){var n=s.value;r.payload=function(){return a(n)},r.callback=function(){Nc(t,s)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){Nc(t,s),typeof a!="function"&&(Or===null?Or=new Set([this]):Or.add(this));var i=s.stack;this.componentDidCatch(s.value,{componentStack:i!==null?i:""})}),r}function Cx(t,s,r){var a=t.pingCache;if(a===null){a=t.pingCache=new Af;var n=new Set;a.set(s,n)}else n=a.get(s),n===void 0&&(n=new Set,a.set(s,n));n.has(r)||(n.add(r),t=Wf.bind(null,t,s,r),s.then(t,t))}function Tx(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function Ex(t,s,r,a,n){return t.mode&1?(t.flags|=65536,t.lanes=n,t):(t===s?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(s=fr(-1,1),s.tag=2,Rr(r,s,1))),r.lanes|=1),t)}var Df=Sr.ReactCurrentOwner,as=!1;function Kt(t,s,r,a){s.child=t===null?Lh(s,null,r,a):Ka(s,t.child,r,a)}function Px(t,s,r,a,n){r=r.render;var l=s.ref;return Ha(s,n),a=Cd(t,s,r,a,l,n),r=Td(),t!==null&&!as?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~n,vr(t,s,n)):(it&&r&&hd(s),s.flags|=1,Kt(t,s,a,n),s.child)}function Ax(t,s,r,a,n){if(t===null){var l=r.type;return typeof l=="function"&&!_d(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(s.tag=15,s.type=l,l0(t,s,l,a,n)):(t=Kl(r.type,null,a,s,s.mode,n),t.ref=s.ref,t.return=s,s.child=t)}if(l=t.child,!(t.lanes&n)){var i=l.memoizedProps;if(r=r.compare,r=r!==null?r:Kn,r(i,a)&&t.ref===s.ref)return vr(t,s,n)}return s.flags|=1,t=Vr(l,a),t.ref=s.ref,t.return=s,s.child=t}function l0(t,s,r,a,n){if(t!==null){var l=t.memoizedProps;if(Kn(l,a)&&t.ref===s.ref)if(as=!1,s.pendingProps=a=l,(t.lanes&n)!==0)t.flags&131072&&(as=!0);else return s.lanes=t.lanes,vr(t,s,n)}return vc(t,s,r,a,n)}function i0(t,s,r){var a=s.pendingProps,n=a.children,l=t!==null?t.memoizedState:null;if(a.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(Ra,ds),ds|=r;else{if(!(r&1073741824))return t=l!==null?l.baseLanes|r:r,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,rt(Ra,ds),ds|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=l!==null?l.baseLanes:r,rt(Ra,ds),ds|=a}else l!==null?(a=l.baseLanes|r,s.memoizedState=null):a=r,rt(Ra,ds),ds|=a;return Kt(t,s,n,r),s.child}function o0(t,s){var r=s.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(s.flags|=512,s.flags|=2097152)}function vc(t,s,r,a,n){var l=is(r)?pa:Yt.current;return l=qa(s,l),Ha(s,n),r=Cd(t,s,r,a,l,n),a=Td(),t!==null&&!as?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~n,vr(t,s,n)):(it&&a&&hd(s),s.flags|=1,Kt(t,s,r,n),s.child)}function Dx(t,s,r,a,n){if(is(r)){var l=!0;ui(s)}else l=!1;if(Ha(s,n),s.stateNode===null)Jl(t,s),r0(s,r,a),jc(s,r,a,n),a=!0;else if(t===null){var i=s.stateNode,d=s.memoizedProps;i.props=d;var c=i.context,u=r.contextType;typeof u=="object"&&u!==null?u=Ts(u):(u=is(r)?pa:Yt.current,u=qa(s,u));var x=r.getDerivedStateFromProps,b=typeof x=="function"||typeof i.getSnapshotBeforeUpdate=="function";b||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(d!==a||c!==u)&&Sx(s,i,a,u),Ar=!1;var f=s.memoizedState;i.state=f,gi(s,a,i,n),c=s.memoizedState,d!==a||f!==c||ls.current||Ar?(typeof x=="function"&&(bc(s,r,x,a),c=s.memoizedState),(d=Ar||kx(s,r,d,a,f,c,u))?(b||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(s.flags|=4194308)):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=a,s.memoizedState=c),i.props=a,i.state=c,i.context=u,a=d):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),a=!1)}else{i=s.stateNode,zh(t,s),d=s.memoizedProps,u=s.type===s.elementType?d:Ms(s.type,d),i.props=u,b=s.pendingProps,f=i.context,c=r.contextType,typeof c=="object"&&c!==null?c=Ts(c):(c=is(r)?pa:Yt.current,c=qa(s,c));var T=r.getDerivedStateFromProps;(x=typeof T=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(d!==b||f!==c)&&Sx(s,i,a,c),Ar=!1,f=s.memoizedState,i.state=f,gi(s,a,i,n);var w=s.memoizedState;d!==b||f!==w||ls.current||Ar?(typeof T=="function"&&(bc(s,r,T,a),w=s.memoizedState),(u=Ar||kx(s,r,u,a,f,w,c)||!1)?(x||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(a,w,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(a,w,c)),typeof i.componentDidUpdate=="function"&&(s.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof i.componentDidUpdate!="function"||d===t.memoizedProps&&f===t.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&f===t.memoizedState||(s.flags|=1024),s.memoizedProps=a,s.memoizedState=w),i.props=a,i.state=w,i.context=c,a=u):(typeof i.componentDidUpdate!="function"||d===t.memoizedProps&&f===t.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&f===t.memoizedState||(s.flags|=1024),a=!1)}return wc(t,s,r,a,l,n)}function wc(t,s,r,a,n,l){o0(t,s);var i=(s.flags&128)!==0;if(!a&&!i)return n&&gx(s,r,!1),vr(t,s,l);a=s.stateNode,Df.current=s;var d=i&&typeof r.getDerivedStateFromError!="function"?null:a.render();return s.flags|=1,t!==null&&i?(s.child=Ka(s,t.child,null,l),s.child=Ka(s,null,d,l)):Kt(t,s,d,l),s.memoizedState=a.state,n&&gx(s,r,!0),s.child}function c0(t){var s=t.stateNode;s.pendingContext?px(t,s.pendingContext,s.pendingContext!==s.context):s.context&&px(t,s.context,!1),vd(t,s.containerInfo)}function Ix(t,s,r,a,n){return Ga(),gd(n),s.flags|=256,Kt(t,s,r,a),s.child}var kc={dehydrated:null,treeContext:null,retryLane:0};function Sc(t){return{baseLanes:t,cachePool:null,transitions:null}}function d0(t,s,r){var a=s.pendingProps,n=ot.current,l=!1,i=(s.flags&128)!==0,d;if((d=i)||(d=t!==null&&t.memoizedState===null?!1:(n&2)!==0),d?(l=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(n|=1),rt(ot,n&1),t===null)return fc(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(i=a.children,t=a.fallback,l?(a=s.mode,l=s.child,i={mode:"hidden",children:i},!(a&1)&&l!==null?(l.childLanes=0,l.pendingProps=i):l=Wi(i,a,0,null),t=ma(t,a,r,null),l.return=s,t.return=s,l.sibling=t,s.child=l,s.child.memoizedState=Sc(r),s.memoizedState=kc,t):Ad(s,i));if(n=t.memoizedState,n!==null&&(d=n.dehydrated,d!==null))return If(t,s,i,a,d,n,r);if(l){l=a.fallback,i=s.mode,n=t.child,d=n.sibling;var c={mode:"hidden",children:a.children};return!(i&1)&&s.child!==n?(a=s.child,a.childLanes=0,a.pendingProps=c,s.deletions=null):(a=Vr(n,c),a.subtreeFlags=n.subtreeFlags&14680064),d!==null?l=Vr(d,l):(l=ma(l,i,r,null),l.flags|=2),l.return=s,a.return=s,a.sibling=l,s.child=a,a=l,l=s.child,i=t.child.memoizedState,i=i===null?Sc(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},l.memoizedState=i,l.childLanes=t.childLanes&~r,s.memoizedState=kc,a}return l=t.child,t=l.sibling,a=Vr(l,{mode:"visible",children:a.children}),!(s.mode&1)&&(a.lanes=r),a.return=s,a.sibling=null,t!==null&&(r=s.deletions,r===null?(s.deletions=[t],s.flags|=16):r.push(t)),s.child=a,s.memoizedState=null,a}function Ad(t,s){return s=Wi({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function Al(t,s,r,a){return a!==null&&gd(a),Ka(s,t.child,null,r),t=Ad(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function If(t,s,r,a,n,l,i){if(r)return s.flags&256?(s.flags&=-257,a=So(Error(ie(422))),Al(t,s,i,a)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(l=a.fallback,n=s.mode,a=Wi({mode:"visible",children:a.children},n,0,null),l=ma(l,n,i,null),l.flags|=2,a.return=s,l.return=s,a.sibling=l,s.child=a,s.mode&1&&Ka(s,t.child,null,i),s.child.memoizedState=Sc(i),s.memoizedState=kc,l);if(!(s.mode&1))return Al(t,s,i,null);if(n.data==="$!"){if(a=n.nextSibling&&n.nextSibling.dataset,a)var d=a.dgst;return a=d,l=Error(ie(419)),a=So(l,a,void 0),Al(t,s,i,a)}if(d=(i&t.childLanes)!==0,as||d){if(a=Dt,a!==null){switch(i&-i){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(a.suspendedLanes|i)?0:n,n!==0&&n!==l.retryLane&&(l.retryLane=n,Nr(t,n),Vs(a,t,n,-1))}return zd(),a=So(Error(ie(421))),Al(t,s,i,a)}return n.data==="$?"?(s.flags|=128,s.child=t.child,s=Hf.bind(null,t),n._reactRetry=s,null):(t=l.treeContext,us=Fr(n.nextSibling),ms=s,it=!0,Os=null,t!==null&&(Ns[vs++]=hr,Ns[vs++]=pr,Ns[vs++]=ga,hr=t.id,pr=t.overflow,ga=s),s=Ad(s,a.children),s.flags|=4096,s)}function $x(t,s,r){t.lanes|=s;var a=t.alternate;a!==null&&(a.lanes|=s),yc(t.return,s,r)}function Co(t,s,r,a,n){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:n}:(l.isBackwards=s,l.rendering=null,l.renderingStartTime=0,l.last=a,l.tail=r,l.tailMode=n)}function u0(t,s,r){var a=s.pendingProps,n=a.revealOrder,l=a.tail;if(Kt(t,s,a.children,r),a=ot.current,a&2)a=a&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$x(t,r,s);else if(t.tag===19)$x(t,r,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}a&=1}if(rt(ot,a),!(s.mode&1))s.memoizedState=null;else switch(n){case"forwards":for(r=s.child,n=null;r!==null;)t=r.alternate,t!==null&&fi(t)===null&&(n=r),r=r.sibling;r=n,r===null?(n=s.child,s.child=null):(n=r.sibling,r.sibling=null),Co(s,!1,n,r,l);break;case"backwards":for(r=null,n=s.child,s.child=null;n!==null;){if(t=n.alternate,t!==null&&fi(t)===null){s.child=n;break}t=n.sibling,n.sibling=r,r=n,n=t}Co(s,!0,r,null,l);break;case"together":Co(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Jl(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function vr(t,s,r){if(t!==null&&(s.dependencies=t.dependencies),ya|=s.lanes,!(r&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(ie(153));if(s.child!==null){for(t=s.child,r=Vr(t,t.pendingProps),s.child=r,r.return=s;t.sibling!==null;)t=t.sibling,r=r.sibling=Vr(t,t.pendingProps),r.return=s;r.sibling=null}return s.child}function $f(t,s,r){switch(s.tag){case 3:c0(s),Ga();break;case 5:_h(s);break;case 1:is(s.type)&&ui(s);break;case 4:vd(s,s.stateNode.containerInfo);break;case 10:var a=s.type._context,n=s.memoizedProps.value;rt(hi,a._currentValue),a._currentValue=n;break;case 13:if(a=s.memoizedState,a!==null)return a.dehydrated!==null?(rt(ot,ot.current&1),s.flags|=128,null):r&s.child.childLanes?d0(t,s,r):(rt(ot,ot.current&1),t=vr(t,s,r),t!==null?t.sibling:null);rt(ot,ot.current&1);break;case 19:if(a=(r&s.childLanes)!==0,t.flags&128){if(a)return u0(t,s,r);s.flags|=128}if(n=s.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),rt(ot,ot.current),a)break;return null;case 22:case 23:return s.lanes=0,i0(t,s,r)}return vr(t,s,r)}var x0,Cc,m0,h0;x0=function(t,s){for(var r=s.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Cc=function(){};m0=function(t,s,r,a){var n=t.memoizedProps;if(n!==a){t=s.stateNode,ua(rr.current);var l=null;switch(r){case"input":n=qo(t,n),a=qo(t,a),l=[];break;case"select":n=dt({},n,{value:void 0}),a=dt({},a,{value:void 0}),l=[];break;case"textarea":n=Xo(t,n),a=Xo(t,a),l=[];break;default:typeof n.onClick!="function"&&typeof a.onClick=="function"&&(t.onclick=ci)}Zo(r,a);var i;r=null;for(u in n)if(!a.hasOwnProperty(u)&&n.hasOwnProperty(u)&&n[u]!=null)if(u==="style"){var d=n[u];for(i in d)d.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Vn.hasOwnProperty(u)?l||(l=[]):(l=l||[]).push(u,null));for(u in a){var c=a[u];if(d=n!=null?n[u]:void 0,a.hasOwnProperty(u)&&c!==d&&(c!=null||d!=null))if(u==="style")if(d){for(i in d)!d.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in c)c.hasOwnProperty(i)&&d[i]!==c[i]&&(r||(r={}),r[i]=c[i])}else r||(l||(l=[]),l.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,d=d?d.__html:void 0,c!=null&&d!==c&&(l=l||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Vn.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&at("scroll",t),l||d===c||(l=[])):(l=l||[]).push(u,c))}r&&(l=l||[]).push("style",r);var u=l;(s.updateQueue=u)&&(s.flags|=4)}};h0=function(t,s,r,a){r!==a&&(s.flags|=4)};function gn(t,s){if(!it)switch(t.tailMode){case"hidden":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:a.sibling=null}}function Ot(t){var s=t.alternate!==null&&t.alternate.child===t.child,r=0,a=0;if(s)for(var n=t.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags&14680064,a|=n.flags&14680064,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags,a|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=a,t.childLanes=r,s}function Lf(t,s,r){var a=s.pendingProps;switch(pd(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(s),null;case 1:return is(s.type)&&di(),Ot(s),null;case 3:return a=s.stateNode,Xa(),lt(ls),lt(Yt),kd(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(El(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Os!==null&&(Lc(Os),Os=null))),Cc(t,s),Ot(s),null;case 5:wd(s);var n=ua(tl.current);if(r=s.type,t!==null&&s.stateNode!=null)m0(t,s,r,a,n),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!a){if(s.stateNode===null)throw Error(ie(166));return Ot(s),null}if(t=ua(rr.current),El(s)){a=s.stateNode,r=s.type;var l=s.memoizedProps;switch(a[tr]=s,a[Zn]=l,t=(s.mode&1)!==0,r){case"dialog":at("cancel",a),at("close",a);break;case"iframe":case"object":case"embed":at("load",a);break;case"video":case"audio":for(n=0;n<Tn.length;n++)at(Tn[n],a);break;case"source":at("error",a);break;case"img":case"image":case"link":at("error",a),at("load",a);break;case"details":at("toggle",a);break;case"input":Bu(a,l),at("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!l.multiple},at("invalid",a);break;case"textarea":Wu(a,l),at("invalid",a)}Zo(r,l),n=null;for(var i in l)if(l.hasOwnProperty(i)){var d=l[i];i==="children"?typeof d=="string"?a.textContent!==d&&(l.suppressHydrationWarning!==!0&&Tl(a.textContent,d,t),n=["children",d]):typeof d=="number"&&a.textContent!==""+d&&(l.suppressHydrationWarning!==!0&&Tl(a.textContent,d,t),n=["children",""+d]):Vn.hasOwnProperty(i)&&d!=null&&i==="onScroll"&&at("scroll",a)}switch(r){case"input":bl(a),Vu(a,l,!0);break;case"textarea":bl(a),Hu(a);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(a.onclick=ci)}a=n,s.updateQueue=a,a!==null&&(s.flags|=4)}else{i=n.nodeType===9?n:n.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Bm(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof a.is=="string"?t=i.createElement(r,{is:a.is}):(t=i.createElement(r),r==="select"&&(i=t,a.multiple?i.multiple=!0:a.size&&(i.size=a.size))):t=i.createElementNS(t,r),t[tr]=s,t[Zn]=a,x0(t,s,!1,!1),s.stateNode=t;e:{switch(i=ec(r,a),r){case"dialog":at("cancel",t),at("close",t),n=a;break;case"iframe":case"object":case"embed":at("load",t),n=a;break;case"video":case"audio":for(n=0;n<Tn.length;n++)at(Tn[n],t);n=a;break;case"source":at("error",t),n=a;break;case"img":case"image":case"link":at("error",t),at("load",t),n=a;break;case"details":at("toggle",t),n=a;break;case"input":Bu(t,a),n=qo(t,a),at("invalid",t);break;case"option":n=a;break;case"select":t._wrapperState={wasMultiple:!!a.multiple},n=dt({},a,{value:void 0}),at("invalid",t);break;case"textarea":Wu(t,a),n=Xo(t,a),at("invalid",t);break;default:n=a}Zo(r,n),d=n;for(l in d)if(d.hasOwnProperty(l)){var c=d[l];l==="style"?Hm(t,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Vm(t,c)):l==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Wn(t,c):typeof c=="number"&&Wn(t,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Vn.hasOwnProperty(l)?c!=null&&l==="onScroll"&&at("scroll",t):c!=null&&ed(t,l,c,i))}switch(r){case"input":bl(t),Vu(t,a,!1);break;case"textarea":bl(t),Hu(t);break;case"option":a.value!=null&&t.setAttribute("value",""+Jr(a.value));break;case"select":t.multiple=!!a.multiple,l=a.value,l!=null?Oa(t,!!a.multiple,l,!1):a.defaultValue!=null&&Oa(t,!!a.multiple,a.defaultValue,!0);break;default:typeof n.onClick=="function"&&(t.onclick=ci)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Ot(s),null;case 6:if(t&&s.stateNode!=null)h0(t,s,t.memoizedProps,a);else{if(typeof a!="string"&&s.stateNode===null)throw Error(ie(166));if(r=ua(tl.current),ua(rr.current),El(s)){if(a=s.stateNode,r=s.memoizedProps,a[tr]=s,(l=a.nodeValue!==r)&&(t=ms,t!==null))switch(t.tag){case 3:Tl(a.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Tl(a.nodeValue,r,(t.mode&1)!==0)}l&&(s.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[tr]=s,s.stateNode=a}return Ot(s),null;case 13:if(lt(ot),a=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(it&&us!==null&&s.mode&1&&!(s.flags&128))Ih(),Ga(),s.flags|=98560,l=!1;else if(l=El(s),a!==null&&a.dehydrated!==null){if(t===null){if(!l)throw Error(ie(318));if(l=s.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(ie(317));l[tr]=s}else Ga(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Ot(s),l=!1}else Os!==null&&(Lc(Os),Os=null),l=!0;if(!l)return s.flags&65536?s:null}return s.flags&128?(s.lanes=r,s):(a=a!==null,a!==(t!==null&&t.memoizedState!==null)&&a&&(s.child.flags|=8192,s.mode&1&&(t===null||ot.current&1?kt===0&&(kt=3):zd())),s.updateQueue!==null&&(s.flags|=4),Ot(s),null);case 4:return Xa(),Cc(t,s),t===null&&Xn(s.stateNode.containerInfo),Ot(s),null;case 10:return bd(s.type._context),Ot(s),null;case 17:return is(s.type)&&di(),Ot(s),null;case 19:if(lt(ot),l=s.memoizedState,l===null)return Ot(s),null;if(a=(s.flags&128)!==0,i=l.rendering,i===null)if(a)gn(l,!1);else{if(kt!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(i=fi(t),i!==null){for(s.flags|=128,gn(l,!1),a=i.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),s.subtreeFlags=0,a=r,r=s.child;r!==null;)l=r,t=a,l.flags&=14680066,i=l.alternate,i===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,t=i.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return rt(ot,ot.current&1|2),s.child}t=t.sibling}l.tail!==null&&gt()>Za&&(s.flags|=128,a=!0,gn(l,!1),s.lanes=4194304)}else{if(!a)if(t=fi(i),t!==null){if(s.flags|=128,a=!0,r=t.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),gn(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!it)return Ot(s),null}else 2*gt()-l.renderingStartTime>Za&&r!==1073741824&&(s.flags|=128,a=!0,gn(l,!1),s.lanes=4194304);l.isBackwards?(i.sibling=s.child,s.child=i):(r=l.last,r!==null?r.sibling=i:s.child=i,l.last=i)}return l.tail!==null?(s=l.tail,l.rendering=s,l.tail=s.sibling,l.renderingStartTime=gt(),s.sibling=null,r=ot.current,rt(ot,a?r&1|2:r&1),s):(Ot(s),null);case 22:case 23:return Ud(),a=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==a&&(s.flags|=8192),a&&s.mode&1?ds&1073741824&&(Ot(s),s.subtreeFlags&6&&(s.flags|=8192)):Ot(s),null;case 24:return null;case 25:return null}throw Error(ie(156,s.tag))}function Uf(t,s){switch(pd(s),s.tag){case 1:return is(s.type)&&di(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Xa(),lt(ls),lt(Yt),kd(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return wd(s),null;case 13:if(lt(ot),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(ie(340));Ga()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return lt(ot),null;case 4:return Xa(),null;case 10:return bd(s.type._context),null;case 22:case 23:return Ud(),null;case 24:return null;default:return null}}var Dl=!1,Vt=!1,zf=typeof WeakSet=="function"?WeakSet:Set,we=null;function Fa(t,s){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){xt(t,s,a)}else r.current=null}function Tc(t,s,r){try{r()}catch(a){xt(t,s,a)}}var Lx=!1;function _f(t,s){if(dc=li,t=bh(),md(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var n=a.anchorOffset,l=a.focusNode;a=a.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var i=0,d=-1,c=-1,u=0,x=0,b=t,f=null;t:for(;;){for(var T;b!==r||n!==0&&b.nodeType!==3||(d=i+n),b!==l||a!==0&&b.nodeType!==3||(c=i+a),b.nodeType===3&&(i+=b.nodeValue.length),(T=b.firstChild)!==null;)f=b,b=T;for(;;){if(b===t)break t;if(f===r&&++u===n&&(d=i),f===l&&++x===a&&(c=i),(T=b.nextSibling)!==null)break;b=f,f=b.parentNode}b=T}r=d===-1||c===-1?null:{start:d,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(uc={focusedElem:t,selectionRange:r},li=!1,we=s;we!==null;)if(s=we,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,we=t;else for(;we!==null;){s=we;try{var w=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var j=w.memoizedProps,S=w.memoizedState,p=s.stateNode,m=p.getSnapshotBeforeUpdate(s.elementType===s.type?j:Ms(s.type,j),S);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var h=s.stateNode.containerInfo;h.nodeType===1?h.textContent="":h.nodeType===9&&h.documentElement&&h.removeChild(h.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ie(163))}}catch(N){xt(s,s.return,N)}if(t=s.sibling,t!==null){t.return=s.return,we=t;break}we=s.return}return w=Lx,Lx=!1,w}function Mn(t,s,r){var a=s.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var n=a=a.next;do{if((n.tag&t)===t){var l=n.destroy;n.destroy=void 0,l!==void 0&&Tc(s,r,l)}n=n.next}while(n!==a)}}function Bi(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var a=r.create;r.destroy=a()}r=r.next}while(r!==s)}}function Ec(t){var s=t.ref;if(s!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof s=="function"?s(t):s.current=t}}function p0(t){var s=t.alternate;s!==null&&(t.alternate=null,p0(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[tr],delete s[Zn],delete s[hc],delete s[bf],delete s[jf])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function g0(t){return t.tag===5||t.tag===3||t.tag===4}function Ux(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||g0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Pc(t,s,r){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?r.nodeType===8?r.parentNode.insertBefore(t,s):r.insertBefore(t,s):(r.nodeType===8?(s=r.parentNode,s.insertBefore(t,r)):(s=r,s.appendChild(t)),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=ci));else if(a!==4&&(t=t.child,t!==null))for(Pc(t,s,r),t=t.sibling;t!==null;)Pc(t,s,r),t=t.sibling}function Ac(t,s,r){var a=t.tag;if(a===5||a===6)t=t.stateNode,s?r.insertBefore(t,s):r.appendChild(t);else if(a!==4&&(t=t.child,t!==null))for(Ac(t,s,r),t=t.sibling;t!==null;)Ac(t,s,r),t=t.sibling}var $t=null,Fs=!1;function Tr(t,s,r){for(r=r.child;r!==null;)f0(t,s,r),r=r.sibling}function f0(t,s,r){if(sr&&typeof sr.onCommitFiberUnmount=="function")try{sr.onCommitFiberUnmount(Li,r)}catch{}switch(r.tag){case 5:Vt||Fa(r,s);case 6:var a=$t,n=Fs;$t=null,Tr(t,s,r),$t=a,Fs=n,$t!==null&&(Fs?(t=$t,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):$t.removeChild(r.stateNode));break;case 18:$t!==null&&(Fs?(t=$t,r=r.stateNode,t.nodeType===8?bo(t.parentNode,r):t.nodeType===1&&bo(t,r),qn(t)):bo($t,r.stateNode));break;case 4:a=$t,n=Fs,$t=r.stateNode.containerInfo,Fs=!0,Tr(t,s,r),$t=a,Fs=n;break;case 0:case 11:case 14:case 15:if(!Vt&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){n=a=a.next;do{var l=n,i=l.destroy;l=l.tag,i!==void 0&&(l&2||l&4)&&Tc(r,s,i),n=n.next}while(n!==a)}Tr(t,s,r);break;case 1:if(!Vt&&(Fa(r,s),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(d){xt(r,s,d)}Tr(t,s,r);break;case 21:Tr(t,s,r);break;case 22:r.mode&1?(Vt=(a=Vt)||r.memoizedState!==null,Tr(t,s,r),Vt=a):Tr(t,s,r);break;default:Tr(t,s,r)}}function zx(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new zf),s.forEach(function(a){var n=Yf.bind(null,t,a);r.has(a)||(r.add(a),a.then(n,n))})}}function Ls(t,s){var r=s.deletions;if(r!==null)for(var a=0;a<r.length;a++){var n=r[a];try{var l=t,i=s,d=i;e:for(;d!==null;){switch(d.tag){case 5:$t=d.stateNode,Fs=!1;break e;case 3:$t=d.stateNode.containerInfo,Fs=!0;break e;case 4:$t=d.stateNode.containerInfo,Fs=!0;break e}d=d.return}if($t===null)throw Error(ie(160));f0(l,i,n),$t=null,Fs=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(u){xt(n,s,u)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)y0(s,t),s=s.sibling}function y0(t,s){var r=t.alternate,a=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ls(s,t),Qs(t),a&4){try{Mn(3,t,t.return),Bi(3,t)}catch(j){xt(t,t.return,j)}try{Mn(5,t,t.return)}catch(j){xt(t,t.return,j)}}break;case 1:Ls(s,t),Qs(t),a&512&&r!==null&&Fa(r,r.return);break;case 5:if(Ls(s,t),Qs(t),a&512&&r!==null&&Fa(r,r.return),t.flags&32){var n=t.stateNode;try{Wn(n,"")}catch(j){xt(t,t.return,j)}}if(a&4&&(n=t.stateNode,n!=null)){var l=t.memoizedProps,i=r!==null?r.memoizedProps:l,d=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{d==="input"&&l.type==="radio"&&l.name!=null&&Rm(n,l),ec(d,i);var u=ec(d,l);for(i=0;i<c.length;i+=2){var x=c[i],b=c[i+1];x==="style"?Hm(n,b):x==="dangerouslySetInnerHTML"?Vm(n,b):x==="children"?Wn(n,b):ed(n,x,b,u)}switch(d){case"input":Go(n,l);break;case"textarea":Om(n,l);break;case"select":var f=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!l.multiple;var T=l.value;T!=null?Oa(n,!!l.multiple,T,!1):f!==!!l.multiple&&(l.defaultValue!=null?Oa(n,!!l.multiple,l.defaultValue,!0):Oa(n,!!l.multiple,l.multiple?[]:"",!1))}n[Zn]=l}catch(j){xt(t,t.return,j)}}break;case 6:if(Ls(s,t),Qs(t),a&4){if(t.stateNode===null)throw Error(ie(162));n=t.stateNode,l=t.memoizedProps;try{n.nodeValue=l}catch(j){xt(t,t.return,j)}}break;case 3:if(Ls(s,t),Qs(t),a&4&&r!==null&&r.memoizedState.isDehydrated)try{qn(s.containerInfo)}catch(j){xt(t,t.return,j)}break;case 4:Ls(s,t),Qs(t);break;case 13:Ls(s,t),Qs(t),n=t.child,n.flags&8192&&(l=n.memoizedState!==null,n.stateNode.isHidden=l,!l||n.alternate!==null&&n.alternate.memoizedState!==null||($d=gt())),a&4&&zx(t);break;case 22:if(x=r!==null&&r.memoizedState!==null,t.mode&1?(Vt=(u=Vt)||x,Ls(s,t),Vt=u):Ls(s,t),Qs(t),a&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!x&&t.mode&1)for(we=t,x=t.child;x!==null;){for(b=we=x;we!==null;){switch(f=we,T=f.child,f.tag){case 0:case 11:case 14:case 15:Mn(4,f,f.return);break;case 1:Fa(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){a=f,r=f.return;try{s=a,w.props=s.memoizedProps,w.state=s.memoizedState,w.componentWillUnmount()}catch(j){xt(a,r,j)}}break;case 5:Fa(f,f.return);break;case 22:if(f.memoizedState!==null){Mx(b);continue}}T!==null?(T.return=f,we=T):Mx(b)}x=x.sibling}e:for(x=null,b=t;;){if(b.tag===5){if(x===null){x=b;try{n=b.stateNode,u?(l=n.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(d=b.stateNode,c=b.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,d.style.display=Wm("display",i))}catch(j){xt(t,t.return,j)}}}else if(b.tag===6){if(x===null)try{b.stateNode.nodeValue=u?"":b.memoizedProps}catch(j){xt(t,t.return,j)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===t)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===t)break e;for(;b.sibling===null;){if(b.return===null||b.return===t)break e;x===b&&(x=null),b=b.return}x===b&&(x=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:Ls(s,t),Qs(t),a&4&&zx(t);break;case 21:break;default:Ls(s,t),Qs(t)}}function Qs(t){var s=t.flags;if(s&2){try{e:{for(var r=t.return;r!==null;){if(g0(r)){var a=r;break e}r=r.return}throw Error(ie(160))}switch(a.tag){case 5:var n=a.stateNode;a.flags&32&&(Wn(n,""),a.flags&=-33);var l=Ux(t);Ac(t,l,n);break;case 3:case 4:var i=a.stateNode.containerInfo,d=Ux(t);Pc(t,d,i);break;default:throw Error(ie(161))}}catch(c){xt(t,t.return,c)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Mf(t,s,r){we=t,b0(t)}function b0(t,s,r){for(var a=(t.mode&1)!==0;we!==null;){var n=we,l=n.child;if(n.tag===22&&a){var i=n.memoizedState!==null||Dl;if(!i){var d=n.alternate,c=d!==null&&d.memoizedState!==null||Vt;d=Dl;var u=Vt;if(Dl=i,(Vt=c)&&!u)for(we=n;we!==null;)i=we,c=i.child,i.tag===22&&i.memoizedState!==null?Fx(n):c!==null?(c.return=i,we=c):Fx(n);for(;l!==null;)we=l,b0(l),l=l.sibling;we=n,Dl=d,Vt=u}_x(t)}else n.subtreeFlags&8772&&l!==null?(l.return=n,we=l):_x(t)}}function _x(t){for(;we!==null;){var s=we;if(s.flags&8772){var r=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Vt||Bi(5,s);break;case 1:var a=s.stateNode;if(s.flags&4&&!Vt)if(r===null)a.componentDidMount();else{var n=s.elementType===s.type?r.memoizedProps:Ms(s.type,r.memoizedProps);a.componentDidUpdate(n,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var l=s.updateQueue;l!==null&&Nx(s,l,a);break;case 3:var i=s.updateQueue;if(i!==null){if(r=null,s.child!==null)switch(s.child.tag){case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}Nx(s,i,r)}break;case 5:var d=s.stateNode;if(r===null&&s.flags&4){r=d;var c=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var u=s.alternate;if(u!==null){var x=u.memoizedState;if(x!==null){var b=x.dehydrated;b!==null&&qn(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ie(163))}Vt||s.flags&512&&Ec(s)}catch(f){xt(s,s.return,f)}}if(s===t){we=null;break}if(r=s.sibling,r!==null){r.return=s.return,we=r;break}we=s.return}}function Mx(t){for(;we!==null;){var s=we;if(s===t){we=null;break}var r=s.sibling;if(r!==null){r.return=s.return,we=r;break}we=s.return}}function Fx(t){for(;we!==null;){var s=we;try{switch(s.tag){case 0:case 11:case 15:var r=s.return;try{Bi(4,s)}catch(c){xt(s,r,c)}break;case 1:var a=s.stateNode;if(typeof a.componentDidMount=="function"){var n=s.return;try{a.componentDidMount()}catch(c){xt(s,n,c)}}var l=s.return;try{Ec(s)}catch(c){xt(s,l,c)}break;case 5:var i=s.return;try{Ec(s)}catch(c){xt(s,i,c)}}}catch(c){xt(s,s.return,c)}if(s===t){we=null;break}var d=s.sibling;if(d!==null){d.return=s.return,we=d;break}we=s.return}}var Ff=Math.ceil,ji=Sr.ReactCurrentDispatcher,Dd=Sr.ReactCurrentOwner,Cs=Sr.ReactCurrentBatchConfig,Je=0,Dt=null,yt=null,Ut=0,ds=0,Ra=Xr(0),kt=0,nl=null,ya=0,Vi=0,Id=0,Fn=null,rs=null,$d=0,Za=1/0,xr=null,Ni=!1,Dc=null,Or=null,Il=!1,Lr=null,vi=0,Rn=0,Ic=null,ql=-1,Gl=0;function Xt(){return Je&6?gt():ql!==-1?ql:ql=gt()}function Br(t){return t.mode&1?Je&2&&Ut!==0?Ut&-Ut:vf.transition!==null?(Gl===0&&(Gl=rh()),Gl):(t=Ke,t!==0||(t=window.event,t=t===void 0?16:dh(t.type)),t):1}function Vs(t,s,r,a){if(50<Rn)throw Rn=0,Ic=null,Error(ie(185));dl(t,r,a),(!(Je&2)||t!==Dt)&&(t===Dt&&(!(Je&2)&&(Vi|=r),kt===4&&Ir(t,Ut)),os(t,a),r===1&&Je===0&&!(s.mode&1)&&(Za=gt()+500,Fi&&Qr()))}function os(t,s){var r=t.callbackNode;Ng(t,s);var a=ni(t,t===Dt?Ut:0);if(a===0)r!==null&&qu(r),t.callbackNode=null,t.callbackPriority=0;else if(s=a&-a,t.callbackPriority!==s){if(r!=null&&qu(r),s===1)t.tag===0?Nf(Rx.bind(null,t)):Ph(Rx.bind(null,t)),ff(function(){!(Je&6)&&Qr()}),r=null;else{switch(ah(a)){case 1:r=nd;break;case 4:r=th;break;case 16:r=ai;break;case 536870912:r=sh;break;default:r=ai}r=T0(r,j0.bind(null,t))}t.callbackPriority=s,t.callbackNode=r}}function j0(t,s){if(ql=-1,Gl=0,Je&6)throw Error(ie(327));var r=t.callbackNode;if(Ya()&&t.callbackNode!==r)return null;var a=ni(t,t===Dt?Ut:0);if(a===0)return null;if(a&30||a&t.expiredLanes||s)s=wi(t,a);else{s=a;var n=Je;Je|=2;var l=v0();(Dt!==t||Ut!==s)&&(xr=null,Za=gt()+500,xa(t,s));do try{Bf();break}catch(d){N0(t,d)}while(!0);yd(),ji.current=l,Je=n,yt!==null?s=0:(Dt=null,Ut=0,s=kt)}if(s!==0){if(s===2&&(n=nc(t),n!==0&&(a=n,s=$c(t,n))),s===1)throw r=nl,xa(t,0),Ir(t,a),os(t,gt()),r;if(s===6)Ir(t,a);else{if(n=t.current.alternate,!(a&30)&&!Rf(n)&&(s=wi(t,a),s===2&&(l=nc(t),l!==0&&(a=l,s=$c(t,l))),s===1))throw r=nl,xa(t,0),Ir(t,a),os(t,gt()),r;switch(t.finishedWork=n,t.finishedLanes=a,s){case 0:case 1:throw Error(ie(345));case 2:oa(t,rs,xr);break;case 3:if(Ir(t,a),(a&130023424)===a&&(s=$d+500-gt(),10<s)){if(ni(t,0)!==0)break;if(n=t.suspendedLanes,(n&a)!==a){Xt(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=mc(oa.bind(null,t,rs,xr),s);break}oa(t,rs,xr);break;case 4:if(Ir(t,a),(a&4194240)===a)break;for(s=t.eventTimes,n=-1;0<a;){var i=31-Bs(a);l=1<<i,i=s[i],i>n&&(n=i),a&=~l}if(a=n,a=gt()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Ff(a/1960))-a,10<a){t.timeoutHandle=mc(oa.bind(null,t,rs,xr),a);break}oa(t,rs,xr);break;case 5:oa(t,rs,xr);break;default:throw Error(ie(329))}}}return os(t,gt()),t.callbackNode===r?j0.bind(null,t):null}function $c(t,s){var r=Fn;return t.current.memoizedState.isDehydrated&&(xa(t,s).flags|=256),t=wi(t,s),t!==2&&(s=rs,rs=r,s!==null&&Lc(s)),t}function Lc(t){rs===null?rs=t:rs.push.apply(rs,t)}function Rf(t){for(var s=t;;){if(s.flags&16384){var r=s.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var n=r[a],l=n.getSnapshot;n=n.value;try{if(!Ws(l(),n))return!1}catch{return!1}}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ir(t,s){for(s&=~Id,s&=~Vi,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var r=31-Bs(s),a=1<<r;t[r]=-1,s&=~a}}function Rx(t){if(Je&6)throw Error(ie(327));Ya();var s=ni(t,0);if(!(s&1))return os(t,gt()),null;var r=wi(t,s);if(t.tag!==0&&r===2){var a=nc(t);a!==0&&(s=a,r=$c(t,a))}if(r===1)throw r=nl,xa(t,0),Ir(t,s),os(t,gt()),r;if(r===6)throw Error(ie(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,oa(t,rs,xr),os(t,gt()),null}function Ld(t,s){var r=Je;Je|=1;try{return t(s)}finally{Je=r,Je===0&&(Za=gt()+500,Fi&&Qr())}}function ba(t){Lr!==null&&Lr.tag===0&&!(Je&6)&&Ya();var s=Je;Je|=1;var r=Cs.transition,a=Ke;try{if(Cs.transition=null,Ke=1,t)return t()}finally{Ke=a,Cs.transition=r,Je=s,!(Je&6)&&Qr()}}function Ud(){ds=Ra.current,lt(Ra)}function xa(t,s){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,gf(r)),yt!==null)for(r=yt.return;r!==null;){var a=r;switch(pd(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&di();break;case 3:Xa(),lt(ls),lt(Yt),kd();break;case 5:wd(a);break;case 4:Xa();break;case 13:lt(ot);break;case 19:lt(ot);break;case 10:bd(a.type._context);break;case 22:case 23:Ud()}r=r.return}if(Dt=t,yt=t=Vr(t.current,null),Ut=ds=s,kt=0,nl=null,Id=Vi=ya=0,rs=Fn=null,da!==null){for(s=0;s<da.length;s++)if(r=da[s],a=r.interleaved,a!==null){r.interleaved=null;var n=a.next,l=r.pending;if(l!==null){var i=l.next;l.next=n,a.next=i}r.pending=a}da=null}return t}function N0(t,s){do{var r=yt;try{if(yd(),Hl.current=bi,yi){for(var a=ct.memoizedState;a!==null;){var n=a.queue;n!==null&&(n.pending=null),a=a.next}yi=!1}if(fa=0,Et=wt=ct=null,_n=!1,sl=0,Dd.current=null,r===null||r.return===null){kt=1,nl=s,yt=null;break}e:{var l=t,i=r.return,d=r,c=s;if(s=Ut,d.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,x=d,b=x.tag;if(!(x.mode&1)&&(b===0||b===11||b===15)){var f=x.alternate;f?(x.updateQueue=f.updateQueue,x.memoizedState=f.memoizedState,x.lanes=f.lanes):(x.updateQueue=null,x.memoizedState=null)}var T=Tx(i);if(T!==null){T.flags&=-257,Ex(T,i,d,l,s),T.mode&1&&Cx(l,u,s),s=T,c=u;var w=s.updateQueue;if(w===null){var j=new Set;j.add(c),s.updateQueue=j}else w.add(c);break e}else{if(!(s&1)){Cx(l,u,s),zd();break e}c=Error(ie(426))}}else if(it&&d.mode&1){var S=Tx(i);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Ex(S,i,d,l,s),gd(Qa(c,d));break e}}l=c=Qa(c,d),kt!==4&&(kt=2),Fn===null?Fn=[l]:Fn.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,s&=-s,l.lanes|=s;var p=a0(l,c,s);jx(l,p);break e;case 1:d=c;var m=l.type,h=l.stateNode;if(!(l.flags&128)&&(typeof m.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Or===null||!Or.has(h)))){l.flags|=65536,s&=-s,l.lanes|=s;var N=n0(l,d,s);jx(l,N);break e}}l=l.return}while(l!==null)}k0(r)}catch(C){s=C,yt===r&&r!==null&&(yt=r=r.return);continue}break}while(!0)}function v0(){var t=ji.current;return ji.current=bi,t===null?bi:t}function zd(){(kt===0||kt===3||kt===2)&&(kt=4),Dt===null||!(ya&268435455)&&!(Vi&268435455)||Ir(Dt,Ut)}function wi(t,s){var r=Je;Je|=2;var a=v0();(Dt!==t||Ut!==s)&&(xr=null,xa(t,s));do try{Of();break}catch(n){N0(t,n)}while(!0);if(yd(),Je=r,ji.current=a,yt!==null)throw Error(ie(261));return Dt=null,Ut=0,kt}function Of(){for(;yt!==null;)w0(yt)}function Bf(){for(;yt!==null&&!xg();)w0(yt)}function w0(t){var s=C0(t.alternate,t,ds);t.memoizedProps=t.pendingProps,s===null?k0(t):yt=s,Dd.current=null}function k0(t){var s=t;do{var r=s.alternate;if(t=s.return,s.flags&32768){if(r=Uf(r,s),r!==null){r.flags&=32767,yt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{kt=6,yt=null;return}}else if(r=Lf(r,s,ds),r!==null){yt=r;return}if(s=s.sibling,s!==null){yt=s;return}yt=s=t}while(s!==null);kt===0&&(kt=5)}function oa(t,s,r){var a=Ke,n=Cs.transition;try{Cs.transition=null,Ke=1,Vf(t,s,r,a)}finally{Cs.transition=n,Ke=a}return null}function Vf(t,s,r,a){do Ya();while(Lr!==null);if(Je&6)throw Error(ie(327));r=t.finishedWork;var n=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ie(177));t.callbackNode=null,t.callbackPriority=0;var l=r.lanes|r.childLanes;if(vg(t,l),t===Dt&&(yt=Dt=null,Ut=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Il||(Il=!0,T0(ai,function(){return Ya(),null})),l=(r.flags&15990)!==0,r.subtreeFlags&15990||l){l=Cs.transition,Cs.transition=null;var i=Ke;Ke=1;var d=Je;Je|=4,Dd.current=null,_f(t,r),y0(r,t),cf(uc),li=!!dc,uc=dc=null,t.current=r,Mf(r),mg(),Je=d,Ke=i,Cs.transition=l}else t.current=r;if(Il&&(Il=!1,Lr=t,vi=n),l=t.pendingLanes,l===0&&(Or=null),gg(r.stateNode),os(t,gt()),s!==null)for(a=t.onRecoverableError,r=0;r<s.length;r++)n=s[r],a(n.value,{componentStack:n.stack,digest:n.digest});if(Ni)throw Ni=!1,t=Dc,Dc=null,t;return vi&1&&t.tag!==0&&Ya(),l=t.pendingLanes,l&1?t===Ic?Rn++:(Rn=0,Ic=t):Rn=0,Qr(),null}function Ya(){if(Lr!==null){var t=ah(vi),s=Cs.transition,r=Ke;try{if(Cs.transition=null,Ke=16>t?16:t,Lr===null)var a=!1;else{if(t=Lr,Lr=null,vi=0,Je&6)throw Error(ie(331));var n=Je;for(Je|=4,we=t.current;we!==null;){var l=we,i=l.child;if(we.flags&16){var d=l.deletions;if(d!==null){for(var c=0;c<d.length;c++){var u=d[c];for(we=u;we!==null;){var x=we;switch(x.tag){case 0:case 11:case 15:Mn(8,x,l)}var b=x.child;if(b!==null)b.return=x,we=b;else for(;we!==null;){x=we;var f=x.sibling,T=x.return;if(p0(x),x===u){we=null;break}if(f!==null){f.return=T,we=f;break}we=T}}}var w=l.alternate;if(w!==null){var j=w.child;if(j!==null){w.child=null;do{var S=j.sibling;j.sibling=null,j=S}while(j!==null)}}we=l}}if(l.subtreeFlags&2064&&i!==null)i.return=l,we=i;else e:for(;we!==null;){if(l=we,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Mn(9,l,l.return)}var p=l.sibling;if(p!==null){p.return=l.return,we=p;break e}we=l.return}}var m=t.current;for(we=m;we!==null;){i=we;var h=i.child;if(i.subtreeFlags&2064&&h!==null)h.return=i,we=h;else e:for(i=m;we!==null;){if(d=we,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:Bi(9,d)}}catch(C){xt(d,d.return,C)}if(d===i){we=null;break e}var N=d.sibling;if(N!==null){N.return=d.return,we=N;break e}we=d.return}}if(Je=n,Qr(),sr&&typeof sr.onPostCommitFiberRoot=="function")try{sr.onPostCommitFiberRoot(Li,t)}catch{}a=!0}return a}finally{Ke=r,Cs.transition=s}}return!1}function Ox(t,s,r){s=Qa(r,s),s=a0(t,s,1),t=Rr(t,s,1),s=Xt(),t!==null&&(dl(t,1,s),os(t,s))}function xt(t,s,r){if(t.tag===3)Ox(t,t,r);else for(;s!==null;){if(s.tag===3){Ox(s,t,r);break}else if(s.tag===1){var a=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Or===null||!Or.has(a))){t=Qa(r,t),t=n0(s,t,1),s=Rr(s,t,1),t=Xt(),s!==null&&(dl(s,1,t),os(s,t));break}}s=s.return}}function Wf(t,s,r){var a=t.pingCache;a!==null&&a.delete(s),s=Xt(),t.pingedLanes|=t.suspendedLanes&r,Dt===t&&(Ut&r)===r&&(kt===4||kt===3&&(Ut&130023424)===Ut&&500>gt()-$d?xa(t,0):Id|=r),os(t,s)}function S0(t,s){s===0&&(t.mode&1?(s=vl,vl<<=1,!(vl&130023424)&&(vl=4194304)):s=1);var r=Xt();t=Nr(t,s),t!==null&&(dl(t,s,r),os(t,r))}function Hf(t){var s=t.memoizedState,r=0;s!==null&&(r=s.retryLane),S0(t,r)}function Yf(t,s){var r=0;switch(t.tag){case 13:var a=t.stateNode,n=t.memoizedState;n!==null&&(r=n.retryLane);break;case 19:a=t.stateNode;break;default:throw Error(ie(314))}a!==null&&a.delete(s),S0(t,r)}var C0;C0=function(t,s,r){if(t!==null)if(t.memoizedProps!==s.pendingProps||ls.current)as=!0;else{if(!(t.lanes&r)&&!(s.flags&128))return as=!1,$f(t,s,r);as=!!(t.flags&131072)}else as=!1,it&&s.flags&1048576&&Ah(s,mi,s.index);switch(s.lanes=0,s.tag){case 2:var a=s.type;Jl(t,s),t=s.pendingProps;var n=qa(s,Yt.current);Ha(s,r),n=Cd(null,s,a,t,n,r);var l=Td();return s.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,is(a)?(l=!0,ui(s)):l=!1,s.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Nd(s),n.updater=Oi,s.stateNode=n,n._reactInternals=s,jc(s,a,t,r),s=wc(null,s,a,!0,l,r)):(s.tag=0,it&&l&&hd(s),Kt(null,s,n,r),s=s.child),s;case 16:a=s.elementType;e:{switch(Jl(t,s),t=s.pendingProps,n=a._init,a=n(a._payload),s.type=a,n=s.tag=qf(a),t=Ms(a,t),n){case 0:s=vc(null,s,a,t,r);break e;case 1:s=Dx(null,s,a,t,r);break e;case 11:s=Px(null,s,a,t,r);break e;case 14:s=Ax(null,s,a,Ms(a.type,t),r);break e}throw Error(ie(306,a,""))}return s;case 0:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:Ms(a,n),vc(t,s,a,n,r);case 1:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:Ms(a,n),Dx(t,s,a,n,r);case 3:e:{if(c0(s),t===null)throw Error(ie(387));a=s.pendingProps,l=s.memoizedState,n=l.element,zh(t,s),gi(s,a,null,r);var i=s.memoizedState;if(a=i.element,l.isDehydrated)if(l={element:a,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},s.updateQueue.baseState=l,s.memoizedState=l,s.flags&256){n=Qa(Error(ie(423)),s),s=Ix(t,s,a,r,n);break e}else if(a!==n){n=Qa(Error(ie(424)),s),s=Ix(t,s,a,r,n);break e}else for(us=Fr(s.stateNode.containerInfo.firstChild),ms=s,it=!0,Os=null,r=Lh(s,null,a,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ga(),a===n){s=vr(t,s,r);break e}Kt(t,s,a,r)}s=s.child}return s;case 5:return _h(s),t===null&&fc(s),a=s.type,n=s.pendingProps,l=t!==null?t.memoizedProps:null,i=n.children,xc(a,n)?i=null:l!==null&&xc(a,l)&&(s.flags|=32),o0(t,s),Kt(t,s,i,r),s.child;case 6:return t===null&&fc(s),null;case 13:return d0(t,s,r);case 4:return vd(s,s.stateNode.containerInfo),a=s.pendingProps,t===null?s.child=Ka(s,null,a,r):Kt(t,s,a,r),s.child;case 11:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:Ms(a,n),Px(t,s,a,n,r);case 7:return Kt(t,s,s.pendingProps,r),s.child;case 8:return Kt(t,s,s.pendingProps.children,r),s.child;case 12:return Kt(t,s,s.pendingProps.children,r),s.child;case 10:e:{if(a=s.type._context,n=s.pendingProps,l=s.memoizedProps,i=n.value,rt(hi,a._currentValue),a._currentValue=i,l!==null)if(Ws(l.value,i)){if(l.children===n.children&&!ls.current){s=vr(t,s,r);break e}}else for(l=s.child,l!==null&&(l.return=s);l!==null;){var d=l.dependencies;if(d!==null){i=l.child;for(var c=d.firstContext;c!==null;){if(c.context===a){if(l.tag===1){c=fr(-1,r&-r),c.tag=2;var u=l.updateQueue;if(u!==null){u=u.shared;var x=u.pending;x===null?c.next=c:(c.next=x.next,x.next=c),u.pending=c}}l.lanes|=r,c=l.alternate,c!==null&&(c.lanes|=r),yc(l.return,r,s),d.lanes|=r;break}c=c.next}}else if(l.tag===10)i=l.type===s.type?null:l.child;else if(l.tag===18){if(i=l.return,i===null)throw Error(ie(341));i.lanes|=r,d=i.alternate,d!==null&&(d.lanes|=r),yc(i,r,s),i=l.sibling}else i=l.child;if(i!==null)i.return=l;else for(i=l;i!==null;){if(i===s){i=null;break}if(l=i.sibling,l!==null){l.return=i.return,i=l;break}i=i.return}l=i}Kt(t,s,n.children,r),s=s.child}return s;case 9:return n=s.type,a=s.pendingProps.children,Ha(s,r),n=Ts(n),a=a(n),s.flags|=1,Kt(t,s,a,r),s.child;case 14:return a=s.type,n=Ms(a,s.pendingProps),n=Ms(a.type,n),Ax(t,s,a,n,r);case 15:return l0(t,s,s.type,s.pendingProps,r);case 17:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:Ms(a,n),Jl(t,s),s.tag=1,is(a)?(t=!0,ui(s)):t=!1,Ha(s,r),r0(s,a,n),jc(s,a,n,r),wc(null,s,a,!0,t,r);case 19:return u0(t,s,r);case 22:return i0(t,s,r)}throw Error(ie(156,s.tag))};function T0(t,s){return eh(t,s)}function Jf(t,s,r,a){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ks(t,s,r,a){return new Jf(t,s,r,a)}function _d(t){return t=t.prototype,!(!t||!t.isReactComponent)}function qf(t){if(typeof t=="function")return _d(t)?1:0;if(t!=null){if(t=t.$$typeof,t===sd)return 11;if(t===rd)return 14}return 2}function Vr(t,s){var r=t.alternate;return r===null?(r=ks(t.tag,s,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=s,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Kl(t,s,r,a,n,l){var i=2;if(a=t,typeof t=="function")_d(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case Aa:return ma(r.children,n,l,s);case td:i=8,n|=8;break;case Wo:return t=ks(12,r,s,n|2),t.elementType=Wo,t.lanes=l,t;case Ho:return t=ks(13,r,s,n),t.elementType=Ho,t.lanes=l,t;case Yo:return t=ks(19,r,s,n),t.elementType=Yo,t.lanes=l,t;case _m:return Wi(r,n,l,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Um:i=10;break e;case zm:i=9;break e;case sd:i=11;break e;case rd:i=14;break e;case Pr:i=16,a=null;break e}throw Error(ie(130,t==null?t:typeof t,""))}return s=ks(i,r,s,n),s.elementType=t,s.type=a,s.lanes=l,s}function ma(t,s,r,a){return t=ks(7,t,a,s),t.lanes=r,t}function Wi(t,s,r,a){return t=ks(22,t,a,s),t.elementType=_m,t.lanes=r,t.stateNode={isHidden:!1},t}function To(t,s,r){return t=ks(6,t,null,s),t.lanes=r,t}function Eo(t,s,r){return s=ks(4,t.children!==null?t.children:[],t.key,s),s.lanes=r,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function Gf(t,s,r,a,n){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=io(0),this.expirationTimes=io(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=io(0),this.identifierPrefix=a,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Md(t,s,r,a,n,l,i,d,c){return t=new Gf(t,s,r,d,c),s===1?(s=1,l===!0&&(s|=8)):s=0,l=ks(3,null,null,s),t.current=l,l.stateNode=t,l.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nd(l),t}function Kf(t,s,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pa,key:a==null?null:""+a,children:t,containerInfo:s,implementation:r}}function E0(t){if(!t)return qr;t=t._reactInternals;e:{if(Na(t)!==t||t.tag!==1)throw Error(ie(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(is(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(ie(171))}if(t.tag===1){var r=t.type;if(is(r))return Eh(t,r,s)}return s}function P0(t,s,r,a,n,l,i,d,c){return t=Md(r,a,!0,t,n,l,i,d,c),t.context=E0(null),r=t.current,a=Xt(),n=Br(r),l=fr(a,n),l.callback=s??null,Rr(r,l,n),t.current.lanes=n,dl(t,n,a),os(t,a),t}function Hi(t,s,r,a){var n=s.current,l=Xt(),i=Br(n);return r=E0(r),s.context===null?s.context=r:s.pendingContext=r,s=fr(l,i),s.payload={element:t},a=a===void 0?null:a,a!==null&&(s.callback=a),t=Rr(n,s,i),t!==null&&(Vs(t,n,i,l),Wl(t,n,i)),i}function ki(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Bx(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<s?r:s}}function Fd(t,s){Bx(t,s),(t=t.alternate)&&Bx(t,s)}function Xf(){return null}var A0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Rd(t){this._internalRoot=t}Yi.prototype.render=Rd.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(ie(409));Hi(t,s,null,null)};Yi.prototype.unmount=Rd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;ba(function(){Hi(null,t,null,null)}),s[jr]=null}};function Yi(t){this._internalRoot=t}Yi.prototype.unstable_scheduleHydration=function(t){if(t){var s=ih();t={blockedOn:null,target:t,priority:s};for(var r=0;r<Dr.length&&s!==0&&s<Dr[r].priority;r++);Dr.splice(r,0,t),r===0&&ch(t)}};function Od(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ji(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Vx(){}function Qf(t,s,r,a,n){if(n){if(typeof a=="function"){var l=a;a=function(){var u=ki(i);l.call(u)}}var i=P0(s,a,t,0,null,!1,!1,"",Vx);return t._reactRootContainer=i,t[jr]=i.current,Xn(t.nodeType===8?t.parentNode:t),ba(),i}for(;n=t.lastChild;)t.removeChild(n);if(typeof a=="function"){var d=a;a=function(){var u=ki(c);d.call(u)}}var c=Md(t,0,!1,null,null,!1,!1,"",Vx);return t._reactRootContainer=c,t[jr]=c.current,Xn(t.nodeType===8?t.parentNode:t),ba(function(){Hi(s,c,r,a)}),c}function qi(t,s,r,a,n){var l=r._reactRootContainer;if(l){var i=l;if(typeof n=="function"){var d=n;n=function(){var c=ki(i);d.call(c)}}Hi(s,i,t,n)}else i=Qf(r,s,t,n,a);return ki(i)}nh=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var r=Cn(s.pendingLanes);r!==0&&(ld(s,r|1),os(s,gt()),!(Je&6)&&(Za=gt()+500,Qr()))}break;case 13:ba(function(){var a=Nr(t,1);if(a!==null){var n=Xt();Vs(a,t,1,n)}}),Fd(t,1)}};id=function(t){if(t.tag===13){var s=Nr(t,134217728);if(s!==null){var r=Xt();Vs(s,t,134217728,r)}Fd(t,134217728)}};lh=function(t){if(t.tag===13){var s=Br(t),r=Nr(t,s);if(r!==null){var a=Xt();Vs(r,t,s,a)}Fd(t,s)}};ih=function(){return Ke};oh=function(t,s){var r=Ke;try{return Ke=t,s()}finally{Ke=r}};sc=function(t,s,r){switch(s){case"input":if(Go(t,r),s=r.name,r.type==="radio"&&s!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<r.length;s++){var a=r[s];if(a!==t&&a.form===t.form){var n=Mi(a);if(!n)throw Error(ie(90));Fm(a),Go(a,n)}}}break;case"textarea":Om(t,r);break;case"select":s=r.value,s!=null&&Oa(t,!!r.multiple,s,!1)}};qm=Ld;Gm=ba;var Zf={usingClientEntryPoint:!1,Events:[xl,La,Mi,Ym,Jm,Ld]},fn={findFiberByHostInstance:ca,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ey={bundleType:fn.bundleType,version:fn.version,rendererPackageName:fn.rendererPackageName,rendererConfig:fn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Sr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Qm(t),t===null?null:t.stateNode},findFiberByHostInstance:fn.findFiberByHostInstance||Xf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$l.isDisabled&&$l.supportsFiber)try{Li=$l.inject(ey),sr=$l}catch{}}ps.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zf;ps.createPortal=function(t,s){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Od(s))throw Error(ie(200));return Kf(t,s,null,r)};ps.createRoot=function(t,s){if(!Od(t))throw Error(ie(299));var r=!1,a="",n=A0;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(n=s.onRecoverableError)),s=Md(t,1,!1,null,null,r,!1,a,n),t[jr]=s.current,Xn(t.nodeType===8?t.parentNode:t),new Rd(s)};ps.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(ie(188)):(t=Object.keys(t).join(","),Error(ie(268,t)));return t=Qm(s),t=t===null?null:t.stateNode,t};ps.flushSync=function(t){return ba(t)};ps.hydrate=function(t,s,r){if(!Ji(s))throw Error(ie(200));return qi(null,t,s,!0,r)};ps.hydrateRoot=function(t,s,r){if(!Od(t))throw Error(ie(405));var a=r!=null&&r.hydratedSources||null,n=!1,l="",i=A0;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(i=r.onRecoverableError)),s=P0(s,null,t,1,r??null,n,!1,l,i),t[jr]=s.current,Xn(t),a)for(t=0;t<a.length;t++)r=a[t],n=r._getVersion,n=n(r._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[r,n]:s.mutableSourceEagerHydrationData.push(r,n);return new Yi(s)};ps.render=function(t,s,r){if(!Ji(s))throw Error(ie(200));return qi(null,t,s,!1,r)};ps.unmountComponentAtNode=function(t){if(!Ji(t))throw Error(ie(40));return t._reactRootContainer?(ba(function(){qi(null,null,t,!1,function(){t._reactRootContainer=null,t[jr]=null})}),!0):!1};ps.unstable_batchedUpdates=Ld;ps.unstable_renderSubtreeIntoContainer=function(t,s,r,a){if(!Ji(r))throw Error(ie(200));if(t==null||t._reactInternals===void 0)throw Error(ie(38));return qi(t,s,r,!1,a)};ps.version="18.3.1-next-f1338f8080-20240426";function D0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(D0)}catch(t){console.error(t)}}D0(),Dm.exports=ps;var ty=Dm.exports,Wx=ty;Bo.createRoot=Wx.createRoot,Bo.hydrateRoot=Wx.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ll(){return ll=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},ll.apply(this,arguments)}var Ur;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ur||(Ur={}));const Hx="popstate";function sy(t){t===void 0&&(t={});function s(a,n){let{pathname:l,search:i,hash:d}=a.location;return Uc("",{pathname:l,search:i,hash:d},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(a,n){return typeof n=="string"?n:Si(n)}return ay(s,r,null,t)}function jt(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function Bd(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function ry(){return Math.random().toString(36).substr(2,8)}function Yx(t,s){return{usr:t.state,key:t.key,idx:s}}function Uc(t,s,r,a){return r===void 0&&(r=null),ll({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof s=="string"?nn(s):s,{state:r,key:s&&s.key||a||ry()})}function Si(t){let{pathname:s="/",search:r="",hash:a=""}=t;return r&&r!=="?"&&(s+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(s+=a.charAt(0)==="#"?a:"#"+a),s}function nn(t){let s={};if(t){let r=t.indexOf("#");r>=0&&(s.hash=t.substr(r),t=t.substr(0,r));let a=t.indexOf("?");a>=0&&(s.search=t.substr(a),t=t.substr(0,a)),t&&(s.pathname=t)}return s}function ay(t,s,r,a){a===void 0&&(a={});let{window:n=document.defaultView,v5Compat:l=!1}=a,i=n.history,d=Ur.Pop,c=null,u=x();u==null&&(u=0,i.replaceState(ll({},i.state,{idx:u}),""));function x(){return(i.state||{idx:null}).idx}function b(){d=Ur.Pop;let S=x(),p=S==null?null:S-u;u=S,c&&c({action:d,location:j.location,delta:p})}function f(S,p){d=Ur.Push;let m=Uc(j.location,S,p);u=x()+1;let h=Yx(m,u),N=j.createHref(m);try{i.pushState(h,"",N)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;n.location.assign(N)}l&&c&&c({action:d,location:j.location,delta:1})}function T(S,p){d=Ur.Replace;let m=Uc(j.location,S,p);u=x();let h=Yx(m,u),N=j.createHref(m);i.replaceState(h,"",N),l&&c&&c({action:d,location:j.location,delta:0})}function w(S){let p=n.location.origin!=="null"?n.location.origin:n.location.href,m=typeof S=="string"?S:Si(S);return m=m.replace(/ $/,"%20"),jt(p,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,p)}let j={get action(){return d},get location(){return t(n,i)},listen(S){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(Hx,b),c=S,()=>{n.removeEventListener(Hx,b),c=null}},createHref(S){return s(n,S)},createURL:w,encodeLocation(S){let p=w(S);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:f,replace:T,go(S){return i.go(S)}};return j}var Jx;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Jx||(Jx={}));function ny(t,s,r){return r===void 0&&(r="/"),ly(t,s,r)}function ly(t,s,r,a){let n=typeof s=="string"?nn(s):s,l=Vd(n.pathname||"/",r);if(l==null)return null;let i=I0(t);iy(i);let d=null;for(let c=0;d==null&&c<i.length;++c){let u=by(l);d=gy(i[c],u)}return d}function I0(t,s,r,a){s===void 0&&(s=[]),r===void 0&&(r=[]),a===void 0&&(a="");let n=(l,i,d)=>{let c={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:i,route:l};c.relativePath.startsWith("/")&&(jt(c.relativePath.startsWith(a),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(a.length));let u=Wr([a,c.relativePath]),x=r.concat(c);l.children&&l.children.length>0&&(jt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),I0(l.children,s,x,u)),!(l.path==null&&!l.index)&&s.push({path:u,score:hy(u,l.index),routesMeta:x})};return t.forEach((l,i)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))n(l,i);else for(let c of $0(l.path))n(l,i,c)}),s}function $0(t){let s=t.split("/");if(s.length===0)return[];let[r,...a]=s,n=r.endsWith("?"),l=r.replace(/\?$/,"");if(a.length===0)return n?[l,""]:[l];let i=$0(a.join("/")),d=[];return d.push(...i.map(c=>c===""?l:[l,c].join("/"))),n&&d.push(...i),d.map(c=>t.startsWith("/")&&c===""?"/":c)}function iy(t){t.sort((s,r)=>s.score!==r.score?r.score-s.score:py(s.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}const oy=/^:[\w-]+$/,cy=3,dy=2,uy=1,xy=10,my=-2,qx=t=>t==="*";function hy(t,s){let r=t.split("/"),a=r.length;return r.some(qx)&&(a+=my),s&&(a+=dy),r.filter(n=>!qx(n)).reduce((n,l)=>n+(oy.test(l)?cy:l===""?uy:xy),a)}function py(t,s){return t.length===s.length&&t.slice(0,-1).every((a,n)=>a===s[n])?t[t.length-1]-s[s.length-1]:0}function gy(t,s,r){let{routesMeta:a}=t,n={},l="/",i=[];for(let d=0;d<a.length;++d){let c=a[d],u=d===a.length-1,x=l==="/"?s:s.slice(l.length)||"/",b=fy({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},x),f=c.route;if(!b)return null;Object.assign(n,b.params),i.push({params:n,pathname:Wr([l,b.pathname]),pathnameBase:ky(Wr([l,b.pathnameBase])),route:f}),b.pathnameBase!=="/"&&(l=Wr([l,b.pathnameBase]))}return i}function fy(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,a]=yy(t.path,t.caseSensitive,t.end),n=s.match(r);if(!n)return null;let l=n[0],i=l.replace(/(.)\/+$/,"$1"),d=n.slice(1);return{params:a.reduce((u,x,b)=>{let{paramName:f,isOptional:T}=x;if(f==="*"){let j=d[b]||"";i=l.slice(0,l.length-j.length).replace(/(.)\/+$/,"$1")}const w=d[b];return T&&!w?u[f]=void 0:u[f]=(w||"").replace(/%2F/g,"/"),u},{}),pathname:l,pathnameBase:i,pattern:t}}function yy(t,s,r){s===void 0&&(s=!1),r===void 0&&(r=!0),Bd(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let a=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,d,c)=>(a.push({paramName:d,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(a.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,s?void 0:"i"),a]}function by(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return Bd(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),t}}function Vd(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let r=s.endsWith("/")?s.length-1:s.length,a=t.charAt(r);return a&&a!=="/"?null:t.slice(r)||"/"}const jy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ny=t=>jy.test(t);function vy(t,s){s===void 0&&(s="/");let{pathname:r,search:a="",hash:n=""}=typeof t=="string"?nn(t):t,l;if(r)if(Ny(r))l=r;else{if(r.includes("//")){let i=r;r=r.replace(/\/\/+/g,"/"),Bd(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+r))}r.startsWith("/")?l=Gx(r.substring(1),"/"):l=Gx(r,s)}else l=s;return{pathname:l,search:Sy(a),hash:Cy(n)}}function Gx(t,s){let r=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function Po(t,s,r,a){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function wy(t){return t.filter((s,r)=>r===0||s.route.path&&s.route.path.length>0)}function L0(t,s){let r=wy(t);return s?r.map((a,n)=>n===r.length-1?a.pathname:a.pathnameBase):r.map(a=>a.pathnameBase)}function U0(t,s,r,a){a===void 0&&(a=!1);let n;typeof t=="string"?n=nn(t):(n=ll({},t),jt(!n.pathname||!n.pathname.includes("?"),Po("?","pathname","search",n)),jt(!n.pathname||!n.pathname.includes("#"),Po("#","pathname","hash",n)),jt(!n.search||!n.search.includes("#"),Po("#","search","hash",n)));let l=t===""||n.pathname==="",i=l?"/":n.pathname,d;if(i==null)d=r;else{let b=s.length-1;if(!a&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),b-=1;n.pathname=f.join("/")}d=b>=0?s[b]:"/"}let c=vy(n,d),u=i&&i!=="/"&&i.endsWith("/"),x=(l||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||x)&&(c.pathname+="/"),c}const Wr=t=>t.join("/").replace(/\/\/+/g,"/"),ky=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Sy=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Cy=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Ty(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const z0=["post","put","patch","delete"];new Set(z0);const Ey=["get",...z0];new Set(Ey);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function il(){return il=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},il.apply(this,arguments)}const Wd=o.createContext(null),Py=o.createContext(null),va=o.createContext(null),Gi=o.createContext(null),Zr=o.createContext({outlet:null,matches:[],isDataRoute:!1}),_0=o.createContext(null);function Ay(t,s){let{relative:r}=s===void 0?{}:s;hl()||jt(!1);let{basename:a,navigator:n}=o.useContext(va),{hash:l,pathname:i,search:d}=F0(t,{relative:r}),c=i;return a!=="/"&&(c=i==="/"?a:Wr([a,i])),n.createHref({pathname:c,search:d,hash:l})}function hl(){return o.useContext(Gi)!=null}function ln(){return hl()||jt(!1),o.useContext(Gi).location}function M0(t){o.useContext(va).static||o.useLayoutEffect(t)}function ut(){let{isDataRoute:t}=o.useContext(Zr);return t?Vy():Dy()}function Dy(){hl()||jt(!1);let t=o.useContext(Wd),{basename:s,future:r,navigator:a}=o.useContext(va),{matches:n}=o.useContext(Zr),{pathname:l}=ln(),i=JSON.stringify(L0(n,r.v7_relativeSplatPath)),d=o.useRef(!1);return M0(()=>{d.current=!0}),o.useCallback(function(u,x){if(x===void 0&&(x={}),!d.current)return;if(typeof u=="number"){a.go(u);return}let b=U0(u,JSON.parse(i),l,x.relative==="path");t==null&&s!=="/"&&(b.pathname=b.pathname==="/"?s:Wr([s,b.pathname])),(x.replace?a.replace:a.push)(b,x.state,x)},[s,a,i,l,t])}function Hd(){let{matches:t}=o.useContext(Zr),s=t[t.length-1];return s?s.params:{}}function F0(t,s){let{relative:r}=s===void 0?{}:s,{future:a}=o.useContext(va),{matches:n}=o.useContext(Zr),{pathname:l}=ln(),i=JSON.stringify(L0(n,a.v7_relativeSplatPath));return o.useMemo(()=>U0(t,JSON.parse(i),l,r==="path"),[t,i,l,r])}function Iy(t,s){return $y(t,s)}function $y(t,s,r,a){hl()||jt(!1);let{navigator:n}=o.useContext(va),{matches:l}=o.useContext(Zr),i=l[l.length-1],d=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let u=ln(),x;if(s){var b;let S=typeof s=="string"?nn(s):s;c==="/"||(b=S.pathname)!=null&&b.startsWith(c)||jt(!1),x=S}else x=u;let f=x.pathname||"/",T=f;if(c!=="/"){let S=c.replace(/^\//,"").split("/");T="/"+f.replace(/^\//,"").split("/").slice(S.length).join("/")}let w=ny(t,{pathname:T}),j=My(w&&w.map(S=>Object.assign({},S,{params:Object.assign({},d,S.params),pathname:Wr([c,n.encodeLocation?n.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?c:Wr([c,n.encodeLocation?n.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),l,r,a);return s&&j?o.createElement(Gi.Provider,{value:{location:il({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:Ur.Pop}},j):j}function Ly(){let t=By(),s=Ty(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return o.createElement(o.Fragment,null,o.createElement("h2",null,"Unexpected Application Error!"),o.createElement("h3",{style:{fontStyle:"italic"}},s),r?o.createElement("pre",{style:n},r):null,null)}const Uy=o.createElement(Ly,null);class zy extends o.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,r){return r.location!==s.location||r.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:r.error,location:r.location,revalidation:s.revalidation||r.revalidation}}componentDidCatch(s,r){console.error("React Router caught the following error during render",s,r)}render(){return this.state.error!==void 0?o.createElement(Zr.Provider,{value:this.props.routeContext},o.createElement(_0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function _y(t){let{routeContext:s,match:r,children:a}=t,n=o.useContext(Wd);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),o.createElement(Zr.Provider,{value:s},a)}function My(t,s,r,a){var n;if(s===void 0&&(s=[]),r===void 0&&(r=null),a===void 0&&(a=null),t==null){var l;if(!r)return null;if(r.errors)t=r.matches;else if((l=a)!=null&&l.v7_partialHydration&&s.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,d=(n=r)==null?void 0:n.errors;if(d!=null){let x=i.findIndex(b=>b.route.id&&(d==null?void 0:d[b.route.id])!==void 0);x>=0||jt(!1),i=i.slice(0,Math.min(i.length,x+1))}let c=!1,u=-1;if(r&&a&&a.v7_partialHydration)for(let x=0;x<i.length;x++){let b=i[x];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(u=x),b.route.id){let{loaderData:f,errors:T}=r,w=b.route.loader&&f[b.route.id]===void 0&&(!T||T[b.route.id]===void 0);if(b.route.lazy||w){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((x,b,f)=>{let T,w=!1,j=null,S=null;r&&(T=d&&b.route.id?d[b.route.id]:void 0,j=b.route.errorElement||Uy,c&&(u<0&&f===0?(Wy("route-fallback"),w=!0,S=null):u===f&&(w=!0,S=b.route.hydrateFallbackElement||null)));let p=s.concat(i.slice(0,f+1)),m=()=>{let h;return T?h=j:w?h=S:b.route.Component?h=o.createElement(b.route.Component,null):b.route.element?h=b.route.element:h=x,o.createElement(_y,{match:b,routeContext:{outlet:x,matches:p,isDataRoute:r!=null},children:h})};return r&&(b.route.ErrorBoundary||b.route.errorElement||f===0)?o.createElement(zy,{location:r.location,revalidation:r.revalidation,component:j,error:T,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var R0=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(R0||{}),O0=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(O0||{});function Fy(t){let s=o.useContext(Wd);return s||jt(!1),s}function Ry(t){let s=o.useContext(Py);return s||jt(!1),s}function Oy(t){let s=o.useContext(Zr);return s||jt(!1),s}function B0(t){let s=Oy(),r=s.matches[s.matches.length-1];return r.route.id||jt(!1),r.route.id}function By(){var t;let s=o.useContext(_0),r=Ry(),a=B0();return s!==void 0?s:(t=r.errors)==null?void 0:t[a]}function Vy(){let{router:t}=Fy(R0.UseNavigateStable),s=B0(O0.UseNavigateStable),r=o.useRef(!1);return M0(()=>{r.current=!0}),o.useCallback(function(n,l){l===void 0&&(l={}),r.current&&(typeof n=="number"?t.navigate(n):t.navigate(n,il({fromRouteId:s},l)))},[t,s])}const Kx={};function Wy(t,s,r){Kx[t]||(Kx[t]=!0)}function Hy(t,s){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Me(t){jt(!1)}function Yy(t){let{basename:s="/",children:r=null,location:a,navigationType:n=Ur.Pop,navigator:l,static:i=!1,future:d}=t;hl()&&jt(!1);let c=s.replace(/^\/*/,"/"),u=o.useMemo(()=>({basename:c,navigator:l,static:i,future:il({v7_relativeSplatPath:!1},d)}),[c,d,l,i]);typeof a=="string"&&(a=nn(a));let{pathname:x="/",search:b="",hash:f="",state:T=null,key:w="default"}=a,j=o.useMemo(()=>{let S=Vd(x,c);return S==null?null:{location:{pathname:S,search:b,hash:f,state:T,key:w},navigationType:n}},[c,x,b,f,T,w,n]);return j==null?null:o.createElement(va.Provider,{value:u},o.createElement(Gi.Provider,{children:r,value:j}))}function Jy(t){let{children:s,location:r}=t;return Iy(zc(s),r)}new Promise(()=>{});function zc(t,s){s===void 0&&(s=[]);let r=[];return o.Children.forEach(t,(a,n)=>{if(!o.isValidElement(a))return;let l=[...s,n];if(a.type===o.Fragment){r.push.apply(r,zc(a.props.children,l));return}a.type!==Me&&jt(!1),!a.props.index||!a.props.children||jt(!1);let i={id:a.props.id||l.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(i.children=zc(a.props.children,l)),r.push(i)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _c(){return _c=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},_c.apply(this,arguments)}function qy(t,s){if(t==null)return{};var r={},a=Object.keys(t),n,l;for(l=0;l<a.length;l++)n=a[l],!(s.indexOf(n)>=0)&&(r[n]=t[n]);return r}function Gy(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Ky(t,s){return t.button===0&&(!s||s==="_self")&&!Gy(t)}function Mc(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((s,r)=>{let a=t[r];return s.concat(Array.isArray(a)?a.map(n=>[r,n]):[[r,a]])},[]))}function Xy(t,s){let r=Mc(t);return s&&s.forEach((a,n)=>{r.has(n)||s.getAll(n).forEach(l=>{r.append(n,l)})}),r}const Qy=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Zy="6";try{window.__reactRouterVersion=Zy}catch{}const eb="startTransition",Xx=Vp[eb];function tb(t){let{basename:s,children:r,future:a,window:n}=t,l=o.useRef();l.current==null&&(l.current=sy({window:n,v5Compat:!0}));let i=l.current,[d,c]=o.useState({action:i.action,location:i.location}),{v7_startTransition:u}=a||{},x=o.useCallback(b=>{u&&Xx?Xx(()=>c(b)):c(b)},[c,u]);return o.useLayoutEffect(()=>i.listen(x),[i,x]),o.useEffect(()=>Hy(a),[a]),o.createElement(Yy,{basename:s,children:r,location:d.location,navigationType:d.action,navigator:i,future:a})}const sb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ns=o.forwardRef(function(s,r){let{onClick:a,relative:n,reloadDocument:l,replace:i,state:d,target:c,to:u,preventScrollReset:x,viewTransition:b}=s,f=qy(s,Qy),{basename:T}=o.useContext(va),w,j=!1;if(typeof u=="string"&&rb.test(u)&&(w=u,sb))try{let h=new URL(window.location.href),N=u.startsWith("//")?new URL(h.protocol+u):new URL(u),C=Vd(N.pathname,T);N.origin===h.origin&&C!=null?u=C+N.search+N.hash:j=!0}catch{}let S=Ay(u,{relative:n}),p=ab(u,{replace:i,state:d,target:c,preventScrollReset:x,relative:n,viewTransition:b});function m(h){a&&a(h),h.defaultPrevented||p(h)}return o.createElement("a",_c({},f,{href:w||S,onClick:j||l?a:m,ref:r,target:c}))});var Qx;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Qx||(Qx={}));var Zx;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Zx||(Zx={}));function ab(t,s){let{target:r,replace:a,state:n,preventScrollReset:l,relative:i,viewTransition:d}=s===void 0?{}:s,c=ut(),u=ln(),x=F0(t,{relative:i});return o.useCallback(b=>{if(Ky(b,r)){b.preventDefault();let f=a!==void 0?a:Si(u)===Si(x);c(t,{replace:f,state:n,preventScrollReset:l,relative:i,viewTransition:d})}},[u,c,x,a,n,r,t,l,i,d])}function Ki(t){let s=o.useRef(Mc(t)),r=o.useRef(!1),a=ln(),n=o.useMemo(()=>Xy(a.search,r.current?null:s.current),[a.search]),l=ut(),i=o.useCallback((d,c)=>{const u=Mc(typeof d=="function"?d(n):d);r.current=!0,l("?"+u,c)},[l,n]);return[n,i]}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nb=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),V0=(...t)=>t.filter((s,r,a)=>!!s&&s.trim()!==""&&a.indexOf(s)===r).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ib=o.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:n="",children:l,iconNode:i,...d},c)=>o.createElement("svg",{ref:c,...lb,width:s,height:s,stroke:t,strokeWidth:a?Number(r)*24/Number(s):r,className:V0("lucide",n),...d},[...i.map(([u,x])=>o.createElement(u,x)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=(t,s)=>{const r=o.forwardRef(({className:a,...n},l)=>o.createElement(ib,{ref:l,iconNode:s,className:V0(`lucide-${nb(t)}`,a),...n}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=oe("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=oe("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=oe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=oe("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=oe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=oe("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=oe("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=oe("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=oe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cb=oe("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=oe("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=oe("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=oe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const em=oe("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=oe("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=oe("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tm=oe("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=oe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=oe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=oe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=oe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=oe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=oe("CircleArrowDown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=oe("CircleArrowUp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=oe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=oe("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=oe("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=oe("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=oe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=oe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=oe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=oe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ll=oe("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=oe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xb=oe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=oe("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=oe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pl=oe("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=oe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=oe("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=oe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sm=oe("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rm=oe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0=oe("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=oe("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hb=oe("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=oe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fc=oe("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=oe("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gb=oe("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=oe("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=oe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=oe("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=oe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=oe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const am=oe("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nm=oe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lm=oe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=oe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=oe("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const im=oe("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=oe("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bb=oe("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jb=oe("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rc=oe("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=oe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nb=oe("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=oe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=oe("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=oe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=oe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=oe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=oe("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=oe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=oe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=oe("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=oe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=oe("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=oe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wb=oe("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kb=oe("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=oe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=oe("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=oe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xi=oe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=oe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=oe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=oe("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=oe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=oe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=oe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=oe("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=oe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),K0="http://localhost:5001/api/auth",Tb=async t=>{const s=await fetch(`${K0}/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),r=await s.json();if(!s.ok)throw new Error(r.message||"Signup failed");return r},Eb=async t=>{const s=await fetch(`${K0}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),r=await s.json();if(!s.ok)throw new Error(r.message||"Login failed");return r},Pb=()=>{const t=ut(),[s,r]=o.useState("signin"),[a,n]=o.useState(!1),[l,i]=o.useState(""),[d,c]=o.useState(!1),[u,x]=o.useState({email:"",password:""}),[b,f]=o.useState(window.innerWidth<768);o.useEffect(()=>{const j=()=>f(window.innerWidth<768);return window.addEventListener("resize",j),()=>window.removeEventListener("resize",j)},[]);const T=j=>{x({...u,[j.target.name]:j.target.value}),i("")},w=async j=>{j.preventDefault(),n(!0),i("");try{const S=await Eb(u);localStorage.setItem("token",S.token),localStorage.setItem("user",JSON.stringify(S.user)),t(b?"/mobile":"/dashboard")}catch(S){i(S.message)}finally{n(!1)}};return e.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-gradient-to-r from-cyan-500/20 to-transparent rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-gradient-to-l from-orange-500/20 via-purple-500/20 to-transparent rounded-full blur-3xl"}),e.jsxs("div",{className:"relative bg-dark-700 rounded-2xl p-8 w-full max-w-md border border-gray-800",children:[e.jsx("button",{className:"absolute top-4 right-4 w-8 h-8 bg-dark-600 rounded-full flex items-center justify-center hover:bg-dark-500 transition-colors",children:e.jsx(ye,{size:16,className:"text-gray-400"})}),e.jsxs("div",{className:"flex bg-dark-600 rounded-full p-1 w-fit mb-8",children:[e.jsx(ns,{to:"/user/signup",className:"px-6 py-2 rounded-full text-sm font-medium text-gray-400 hover:text-white transition-colors",children:"Sign up"}),e.jsx("button",{onClick:()=>r("signin"),className:`px-6 py-2 rounded-full text-sm font-medium transition-colors ${s==="signin"?"bg-dark-500 text-white":"text-gray-400 hover:text-white"}`,children:"Sign in"})]}),e.jsx("h1",{className:"text-2xl font-semibold text-white mb-6",children:"Welcome back"}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ys,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"email",name:"email",placeholder:"Enter your email",value:u.email,onChange:T,className:"w-full bg-dark-600 border border-gray-700 rounded-lg pl-11 pr-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600 transition-colors"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ss,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:d?"text":"password",name:"password",placeholder:"Enter your password",value:u.password,onChange:T,className:"w-full bg-dark-600 border border-gray-700 rounded-lg pl-11 pr-12 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600 transition-colors"}),e.jsx("button",{type:"button",onClick:()=>c(!d),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300 transition-colors",children:d?e.jsx(pl,{size:18}):e.jsx(Qt,{size:18})})]}),e.jsx("div",{className:"text-right",children:e.jsx(ns,{to:"/user/forgot-password",className:"text-sm text-gray-400 hover:text-white transition-colors",children:"Forgot password?"})}),l&&e.jsx("p",{className:"text-red-500 text-sm",children:l}),e.jsx("button",{type:"submit",disabled:a,className:"w-full bg-white text-black font-medium py-3 rounded-lg hover:bg-gray-100 transition-colors mt-2 disabled:opacity-50",children:a?"Signing in...":"Sign in"})]}),e.jsxs("p",{className:"text-center text-gray-500 text-sm mt-6",children:["Don't have an account?"," ",e.jsx(ns,{to:"/user/signup",className:"text-white hover:underline",children:"Sign up"})]})]})]})},Ab="http://localhost:5001/api",om=[{code:"+1",name:"United States",flag:""},{code:"+1",name:"Canada",flag:""},{code:"+44",name:"United Kingdom",flag:""},{code:"+91",name:"India",flag:""},{code:"+61",name:"Australia",flag:""},{code:"+49",name:"Germany",flag:""},{code:"+33",name:"France",flag:""},{code:"+81",name:"Japan",flag:""},{code:"+86",name:"China",flag:""},{code:"+55",name:"Brazil",flag:""},{code:"+52",name:"Mexico",flag:""},{code:"+34",name:"Spain",flag:""},{code:"+39",name:"Italy",flag:""},{code:"+7",name:"Russia",flag:""},{code:"+82",name:"South Korea",flag:""},{code:"+31",name:"Netherlands",flag:""},{code:"+46",name:"Sweden",flag:""},{code:"+41",name:"Switzerland",flag:""},{code:"+65",name:"Singapore",flag:""},{code:"+971",name:"UAE",flag:""},{code:"+966",name:"Saudi Arabia",flag:""},{code:"+27",name:"South Africa",flag:""},{code:"+234",name:"Nigeria",flag:""},{code:"+254",name:"Kenya",flag:""},{code:"+62",name:"Indonesia",flag:""},{code:"+60",name:"Malaysia",flag:""},{code:"+63",name:"Philippines",flag:""},{code:"+66",name:"Thailand",flag:""},{code:"+84",name:"Vietnam",flag:""},{code:"+92",name:"Pakistan",flag:""},{code:"+880",name:"Bangladesh",flag:""},{code:"+94",name:"Sri Lanka",flag:""},{code:"+977",name:"Nepal",flag:""}],cm=()=>{const t=ut(),[s]=Ki(),r=s.get("ref"),[a,n]=o.useState("signup"),[l,i]=o.useState(!1),[d,c]=o.useState(""),[u,x]=o.useState(!1),[b,f]=o.useState(""),[T,w]=o.useState(om[0]),j=o.useRef(null),[S,p]=o.useState(!1),[m,h]=o.useState(window.innerWidth<768),[N,C]=o.useState({firstName:"",email:"",phone:"",countryCode:"+1",password:""});o.useEffect(()=>{const R=()=>h(window.innerWidth<768);return window.addEventListener("resize",R),()=>window.removeEventListener("resize",R)},[]),o.useEffect(()=>{const R=le=>{j.current&&!j.current.contains(le.target)&&x(!1)};return document.addEventListener("mousedown",R),()=>document.removeEventListener("mousedown",R)},[]);const E=om.filter(R=>R.name.toLowerCase().includes(b.toLowerCase())||R.code.includes(b)),P=R=>{w(R),C({...N,countryCode:R.code}),x(!1),f("")},U=R=>{C({...N,[R.target.name]:R.target.value}),c("")},K=async R=>{var le;R.preventDefault(),i(!0),c("");try{const X=await Tb(N);if(localStorage.setItem("token",X.token),localStorage.setItem("user",JSON.stringify(X.user)),r&&((le=X.user)!=null&&le._id))try{await fetch(`${Ab}/ib/register-referral`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:X.user._id,referralCode:r})}),console.log("Referral registered:",r)}catch(_){console.error("Error registering referral:",_)}t(m?"/mobile":"/dashboard")}catch(X){c(X.message)}finally{i(!1)}};return e.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center p-4 sm:p-6 md:p-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-gradient-to-r from-cyan-500/20 to-transparent rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-gradient-to-l from-orange-500/20 via-purple-500/20 to-transparent rounded-full blur-3xl"}),e.jsxs("div",{className:"relative bg-dark-700 rounded-2xl p-6 sm:p-8 w-full max-w-md border border-gray-800 mx-4 sm:mx-0",children:[e.jsx("button",{className:"absolute top-4 right-4 w-8 h-8 bg-dark-600 rounded-full flex items-center justify-center hover:bg-dark-500 transition-colors",children:e.jsx(ye,{size:16,className:"text-gray-400"})}),e.jsxs("div",{className:"flex bg-dark-600 rounded-full p-1 w-fit mb-8",children:[e.jsx("button",{onClick:()=>n("signup"),className:`px-6 py-2 rounded-full text-sm font-medium transition-colors ${a==="signup"?"bg-dark-500 text-white":"text-gray-400 hover:text-white"}`,children:"Sign up"}),e.jsx(ns,{to:"/user/login",className:"px-6 py-2 rounded-full text-sm font-medium text-gray-400 hover:text-white transition-colors",children:"Sign in"})]}),e.jsx("h1",{className:"text-2xl font-semibold text-white mb-6",children:"Create an account"}),e.jsxs("form",{onSubmit:K,className:"space-y-4",children:[e.jsx("input",{type:"text",name:"firstName",placeholder:"Enter your name",value:N.firstName,onChange:U,className:"w-full bg-dark-600 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600 transition-colors"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ys,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"email",name:"email",placeholder:"Enter your email",value:N.email,onChange:U,className:"w-full bg-dark-600 border border-gray-700 rounded-lg pl-11 pr-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600 transition-colors"})]}),e.jsxs("div",{className:"flex relative",ref:j,children:[e.jsxs("button",{type:"button",onClick:()=>x(!u),className:"flex items-center gap-1 sm:gap-2 bg-dark-600 border border-gray-700 rounded-l-lg px-2 sm:px-3 py-3 border-r-0 hover:bg-dark-500 transition-colors min-w-[70px] sm:min-w-[90px]",children:[e.jsx("span",{className:"text-base sm:text-lg",children:T.flag}),e.jsx("span",{className:"text-gray-400 text-xs sm:text-sm hidden sm:inline",children:T.code}),e.jsx(H0,{size:14,className:"text-gray-500"})]}),u&&e.jsxs("div",{className:"absolute top-full left-0 mt-1 w-64 sm:w-72 bg-dark-600 border border-gray-700 rounded-lg shadow-xl z-50 max-h-64 overflow-hidden",children:[e.jsx("div",{className:"p-2 border-b border-gray-700",children:e.jsxs("div",{className:"relative",children:[e.jsx(_t,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search country...",value:b,onChange:R=>f(R.target.value),className:"w-full bg-dark-700 border border-gray-700 rounded-lg pl-9 pr-3 py-2 text-white text-sm placeholder-gray-500 focus:outline-none focus:border-gray-600"})]})}),e.jsxs("div",{className:"max-h-48 overflow-y-auto",children:[E.map((R,le)=>e.jsxs("button",{type:"button",onClick:()=>P(R),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-dark-500 transition-colors text-left",children:[e.jsx("span",{className:"text-lg",children:R.flag}),e.jsx("span",{className:"text-white text-sm flex-1",children:R.name}),e.jsx("span",{className:"text-gray-500 text-sm",children:R.code})]},`${R.code}-${le}`)),E.length===0&&e.jsx("p",{className:"text-gray-500 text-sm text-center py-3",children:"No countries found"})]})]}),e.jsx("input",{type:"tel",name:"phone",placeholder:"Enter phone number",value:N.phone,onChange:U,className:"flex-1 bg-dark-600 border border-gray-700 rounded-r-lg px-3 sm:px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600 transition-colors min-w-0"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:S?"text":"password",name:"password",placeholder:"Create password",value:N.password,onChange:U,className:"w-full bg-dark-600 border border-gray-700 rounded-lg px-4 py-3 pr-12 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600 transition-colors"}),e.jsx("button",{type:"button",onClick:()=>p(!S),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300 transition-colors",children:S?e.jsx(pl,{size:18}):e.jsx(Qt,{size:18})})]}),d&&e.jsx("p",{className:"text-red-500 text-sm",children:d}),e.jsx("button",{type:"submit",disabled:l,className:"w-full bg-white text-black font-medium py-3 rounded-lg hover:bg-gray-100 transition-colors mt-2 disabled:opacity-50",children:l?"Creating account...":"Create an account"})]}),e.jsxs("p",{className:"text-center text-gray-500 text-sm mt-6",children:["By creating an account, you agree to our"," ",e.jsx("a",{href:"#",className:"text-white hover:underline",children:"Terms & Service"})]})]})]})},Ta="http://localhost:5001/api",Db=()=>{const t=ut(),[s,r]=o.useState("Dashboard"),[a,n]=o.useState(!1),[l,i]=o.useState([]),[d,c]=o.useState(!0),[u,x]=o.useState([]),[b,f]=o.useState(!0),[T,w]=o.useState(0),[j,S]=o.useState(0),[p,m]=o.useState(0),[h,N]=o.useState(0),[C,E]=o.useState([]),[P,U]=o.useState(!1),[K,R]=o.useState([]),[le,X]=o.useState(0),_=o.useRef(null),L=o.useRef(null),I=o.useRef(null),$=o.useRef(null),H=JSON.parse(localStorage.getItem("user")||"{}"),[y,O]=o.useState(window.innerWidth<768);o.useEffect(()=>{const Y=()=>{const re=window.innerWidth<768;O(re)};return window.addEventListener("resize",Y),window.innerWidth<768&&!sessionStorage.getItem("viewChecked")&&(sessionStorage.setItem("viewChecked","true"),t("/mobile")),()=>window.removeEventListener("resize",Y)},[t]);const g=async()=>{const Y=localStorage.getItem("token");if(!Y||!H._id){t("/user/login");return}try{const re=await fetch(`${Ta}/auth/me`,{headers:{Authorization:`Bearer ${Y}`}}),Se=await re.json();if(Se.forceLogout||re.status===403){alert(Se.message||"Session expired. Please login again."),localStorage.removeItem("token"),localStorage.removeItem("user"),t("/user/login");return}}catch(re){console.error("Auth check error:",re)}};o.useEffect(()=>{g(),v(),H._id&&(W(),Z())},[H._id]),o.useEffect(()=>{C.length>0&&B()},[C]);const v=async()=>{try{const re=await(await fetch(`${Ta}/prop/status`)).json();re.success&&U(re.enabled)}catch(Y){console.error("Error fetching challenge status:",Y)}},W=async()=>{var Y;try{const Se=await(await fetch(`${Ta}/wallet/${H._id}`)).json();w(((Y=Se.wallet)==null?void 0:Y.balance)||0)}catch(re){console.error("Error fetching wallet:",re)}},Z=async()=>{try{const re=await(await fetch(`${Ta}/trading-accounts/user/${H._id}`)).json();E(re.accounts||[])}catch(Y){console.error("Error fetching accounts:",Y)}},B=async()=>{try{let Y=[],re=0,Se=0;for(const Ie of C){const fe=await(await fetch(`${Ta}/trade/history/${Ie._id}`)).json();fe.success&&fe.trades&&(Y=[...Y,...fe.trades],fe.trades.forEach(He=>{re+=(He.commission||0)+(He.swap||0),Se+=He.realizedPnl||0}));const Te=await(await fetch(`${Ta}/trade/open/${Ie._id}`)).json();Te.success&&Te.trades&&(Y=[...Y,...Te.trades])}S(Y.length),m(Math.abs(re)),N(Se)}catch(Y){console.error("Error fetching trades:",Y)}};o.useEffect(()=>{const Y=async()=>{var Se;c(!0);try{const Ie=await fetch("https://api.coingecko.com/api/v3/news");if(Ie.ok){const z=await Ie.json();i(((Se=z.data)==null?void 0:Se.slice(0,6))||[])}else i([{title:"Bitcoin Surges Past $100K Milestone",description:"BTC reaches new all-time high amid institutional buying",updated_at:Date.now(),url:"#"},{title:"Ethereum 2.0 Staking Rewards Increase",description:"ETH staking yields hit 5.2% APY",updated_at:Date.now()-36e5,url:"#"},{title:"SEC Approves New Crypto ETFs",description:"Multiple spot crypto ETFs get regulatory approval",updated_at:Date.now()-72e5,url:"#"},{title:"DeFi Total Value Locked Hits $200B",description:"Decentralized finance continues rapid growth",updated_at:Date.now()-108e5,url:"#"},{title:"Major Bank Launches Crypto Custody",description:"Traditional finance embraces digital assets",updated_at:Date.now()-144e5,url:"#"},{title:"NFT Market Shows Recovery Signs",description:"Trading volume up 40% month-over-month",updated_at:Date.now()-18e6,url:"#"}])}catch{i([{title:"Bitcoin Surges Past $100K Milestone",description:"BTC reaches new all-time high amid institutional buying",updated_at:Date.now(),url:"#"},{title:"Ethereum 2.0 Staking Rewards Increase",description:"ETH staking yields hit 5.2% APY",updated_at:Date.now()-36e5,url:"#"},{title:"SEC Approves New Crypto ETFs",description:"Multiple spot crypto ETFs get regulatory approval",updated_at:Date.now()-72e5,url:"#"},{title:"DeFi Total Value Locked Hits $200B",description:"Decentralized finance continues rapid growth",updated_at:Date.now()-108e5,url:"#"},{title:"Major Bank Launches Crypto Custody",description:"Traditional finance embraces digital assets",updated_at:Date.now()-144e5,url:"#"},{title:"NFT Market Shows Recovery Signs",description:"Trading volume up 40% month-over-month",updated_at:Date.now()-18e6,url:"#"}])}c(!1)};Y();const re=setInterval(Y,3e5);return()=>clearInterval(re)},[]),o.useEffect(()=>{f(!0),x([{date:"2026-01-08",time:"08:30",country:"US",event:"Non-Farm Payrolls",impact:"high",forecast:"180K",previous:"227K"},{date:"2026-01-08",time:"10:00",country:"US",event:"ISM Services PMI",impact:"high",forecast:"53.5",previous:"52.1"},{date:"2026-01-09",time:"08:30",country:"US",event:"Initial Jobless Claims",impact:"medium",forecast:"210K",previous:"211K"},{date:"2026-01-09",time:"14:00",country:"US",event:"FOMC Meeting Minutes",impact:"high",forecast:"-",previous:"-"},{date:"2026-01-10",time:"08:30",country:"US",event:"CPI m/m",impact:"high",forecast:"0.3%",previous:"0.3%"},{date:"2026-01-10",time:"08:30",country:"US",event:"Core CPI m/m",impact:"high",forecast:"0.2%",previous:"0.3%"},{date:"2026-01-13",time:"08:30",country:"US",event:"PPI m/m",impact:"medium",forecast:"0.2%",previous:"0.4%"},{date:"2026-01-14",time:"08:30",country:"US",event:"Retail Sales m/m",impact:"high",forecast:"0.5%",previous:"0.7%"}]),f(!1)},[]),o.useEffect(()=>{const Y=async()=>{try{const Se=await fetch("https://newsdata.io/api/1/news?apikey=pub_63aboreal&q=forex%20OR%20currency%20OR%20trading&language=en&category=business");if(Se.ok){const Ie=await Se.json();if(Ie.results&&Ie.results.length>0){R(Ie.results.slice(0,10));return}}}catch{console.log("Using fallback news data")}R([{title:"EUR/USD Breaks Key Resistance Level",description:"Euro surges against dollar amid ECB hawkish stance",image_url:"https://images.unsplash.com/photo-1611974789855-9c2a0a7236a3?w=400",pubDate:new Date().toISOString(),link:"#"},{title:"Fed Signals Potential Rate Cuts in 2026",description:"Federal Reserve hints at monetary policy shift",image_url:"https://images.unsplash.com/photo-1526304640581-d334cdbbf45e?w=400",pubDate:new Date().toISOString(),link:"#"},{title:"GBP/JPY Volatility Spikes on BOJ News",description:"Bank of Japan policy decision creates market turbulence",image_url:"https://images.unsplash.com/photo-1590283603385-17ffb3a7f29f?w=400",pubDate:new Date().toISOString(),link:"#"},{title:"Gold Prices Hit New Record High",description:"Safe-haven demand drives precious metals rally",image_url:"https://images.unsplash.com/photo-1610375461246-83df859d849d?w=400",pubDate:new Date().toISOString(),link:"#"},{title:"Oil Markets React to OPEC+ Decision",description:"Crude prices fluctuate on production cut news",image_url:"https://images.unsplash.com/photo-1518186285589-2f7649de83e0?w=400",pubDate:new Date().toISOString(),link:"#"},{title:"USD/CHF Tests Critical Support Zone",description:"Swiss franc strengthens on risk-off sentiment",image_url:"https://images.unsplash.com/photo-1642790106117-e829e14a795f?w=400",pubDate:new Date().toISOString(),link:"#"},{title:"AUD/USD Rallies on China Data",description:"Australian dollar gains on positive trade figures",image_url:"https://images.unsplash.com/photo-1523961131990-5ea7c61b2107?w=400",pubDate:new Date().toISOString(),link:"#"},{title:"Crypto Markets Show Correlation with Forex",description:"Bitcoin movements mirror dollar index trends",image_url:"https://images.unsplash.com/photo-1518546305927-5a555bb7020d?w=400",pubDate:new Date().toISOString(),link:"#"}])};Y();const re=setInterval(Y,6e5);return()=>clearInterval(re)},[]),o.useEffect(()=>{if(K.length===0)return;const Y=setInterval(()=>{X(re=>(re+1)%K.length)},5e3);return()=>clearInterval(Y)},[K.length]);const M=()=>{X(Y=>(Y+1)%K.length)},te=()=>{X(Y=>(Y-1+K.length)%K.length)},ae=[{name:"Dashboard",icon:As,path:"/dashboard"},{name:"Account",icon:It,path:"/account"},{name:"Wallet",icon:nt,path:"/wallet"},{name:"IB",icon:et,path:"/ib"},{name:"Copytrade",icon:Jt,path:"/copytrade"},{name:"Profile",icon:nr,path:"/profile"},{name:"Support",icon:Cr,path:"/support"},{name:"Instructions",icon:Ps,path:"/instructions"}],pe=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t("/user/login")};return o.useEffect(()=>{if(_.current){_.current.innerHTML="";const Y=document.createElement("script");Y.src="https://s3.tradingview.com/external-embedding/embed-widget-timeline.js",Y.async=!0,Y.innerHTML=JSON.stringify({feedMode:"all_symbols",colorTheme:"dark",isTransparent:!0,displayMode:"regular",width:"100%",height:"100%",locale:"en"}),_.current.appendChild(Y)}if(L.current){L.current.innerHTML="";const Y=document.createElement("script");Y.src="https://s3.tradingview.com/external-embedding/embed-widget-events.js",Y.async=!0,Y.innerHTML=JSON.stringify({colorTheme:"dark",isTransparent:!0,width:"100%",height:"100%",locale:"en",importanceFilter:"0,1",countryFilter:"us,eu,gb,jp,cn"}),L.current.appendChild(Y)}if(I.current){I.current.innerHTML="";const Y=document.createElement("script");Y.src="https://s3.tradingview.com/external-embedding/embed-widget-forex-heat-map.js",Y.async=!0,Y.innerHTML=JSON.stringify({width:"100%",height:"100%",currencies:["EUR","USD","JPY","GBP","CHF","AUD","CAD","NZD"],isTransparent:!0,colorTheme:"dark",locale:"en"}),I.current.appendChild(Y)}if($.current){$.current.innerHTML="";const Y=document.createElement("script");Y.src="https://s3.tradingview.com/external-embedding/embed-widget-screener.js",Y.async=!0,Y.innerHTML=JSON.stringify({width:"100%",height:"100%",defaultColumn:"overview",defaultScreen:"general",market:"forex",showToolbar:!0,colorTheme:"dark",locale:"en",isTransparent:!0}),$.current.appendChild(Y)}},[]),e.jsxs("div",{className:"min-h-screen bg-dark-900 flex",children:[e.jsxs("aside",{className:`${a?"w-48":"w-16"} bg-dark-900 border-r border-gray-800 flex flex-col transition-all duration-300 ease-in-out`,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[e.jsx("div",{className:"p-4 flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 bg-accent-green rounded flex items-center justify-center",children:e.jsx("span",{className:"text-black font-bold text-sm",children:"X"})})}),e.jsx("nav",{className:"flex-1 px-2",children:ae.map(Y=>e.jsxs("button",{onClick:()=>t(Y.path),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-colors ${s===Y.name?"bg-accent-green text-black":"text-gray-400 hover:text-white hover:bg-dark-700"}`,title:a?"":Y.name,children:[e.jsx(Y.icon,{size:18,className:"flex-shrink-0"}),a&&e.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:Y.name})]},Y.name))}),e.jsx("div",{className:"p-2 border-t border-gray-800",children:e.jsxs("button",{onClick:pe,className:"w-full flex items-center gap-3 px-3 py-2.5 text-gray-400 hover:text-white transition-colors rounded-lg",title:a?"":"Log Out",children:[e.jsx(fs,{size:18,className:"flex-shrink-0"}),a&&e.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:"Log Out"})]})})]}),e.jsxs("main",{className:"flex-1 overflow-auto",children:[K.length>0&&e.jsx("div",{className:"relative bg-gradient-to-r from-dark-800 via-dark-900 to-dark-800 border-b border-gray-800",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"bg-red-500 px-4 py-3 flex items-center gap-2",children:[e.jsx(im,{size:16,className:"text-white"}),e.jsx("span",{className:"text-white font-bold text-sm uppercase",children:"Breaking"})]}),e.jsx("div",{className:"flex-1 overflow-hidden relative",children:e.jsx("div",{className:"flex transition-transform duration-500 ease-in-out",style:{transform:`translateX(-${le*100}%)`},children:K.map((Y,re)=>e.jsxs("a",{href:Y.link||"#",target:"_blank",rel:"noopener noreferrer",className:"min-w-full flex items-center gap-4 px-4 py-2 hover:bg-dark-700/50 transition-colors",children:[Y.image_url&&e.jsx("img",{src:Y.image_url,alt:"",className:"w-12 h-12 object-cover rounded-lg flex-shrink-0",onError:Se=>Se.target.style.display="none"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-white font-medium text-sm truncate",children:Y.title}),e.jsx("p",{className:"text-gray-400 text-xs truncate",children:Y.description})]}),e.jsx(mb,{size:14,className:"text-gray-500 flex-shrink-0"})]},re))})}),e.jsxs("div",{className:"flex items-center gap-1 px-2",children:[e.jsx("button",{onClick:te,className:"p-1.5 hover:bg-dark-700 rounded transition-colors text-gray-400 hover:text-white",children:e.jsx(db,{size:18})}),e.jsx("button",{onClick:M,className:"p-1.5 hover:bg-dark-700 rounded transition-colors text-gray-400 hover:text-white",children:e.jsx(gr,{size:18})})]}),e.jsx("div",{className:"flex items-center gap-1 px-3 border-l border-gray-700",children:K.slice(0,8).map((Y,re)=>e.jsx("button",{onClick:()=>X(re),className:`w-1.5 h-1.5 rounded-full transition-colors ${le===re?"bg-accent-green":"bg-gray-600"}`},re))})]})}),e.jsxs("header",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-800",children:[e.jsx("h1",{className:"text-xl font-semibold text-white",children:"Dashboard"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Welcome back!"})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-accent-green/20 rounded-lg flex items-center justify-center",children:e.jsx(nt,{size:20,className:"text-accent-green"})}),e.jsx("button",{onClick:()=>t("/wallet"),className:"text-accent-green text-xs font-medium hover:underline",children:"View"})]}),e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"Wallet Balance"}),e.jsxs("p",{className:"text-white text-2xl font-bold",children:["$",T.toLocaleString()]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center",children:e.jsx(mt,{size:20,className:"text-blue-500"})}),e.jsxs("span",{className:"text-gray-500 text-xs",children:[C.length," accounts"]})]}),e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"Total Trades"}),e.jsx("p",{className:"text-white text-2xl font-bold",children:j.toLocaleString()})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-500/20 rounded-lg flex items-center justify-center",children:e.jsx(Pt,{size:20,className:"text-orange-500"})}),e.jsx("span",{className:"text-gray-500 text-xs",children:"Fees & Swap"})]}),e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"Total Charges"}),e.jsxs("p",{className:"text-white text-2xl font-bold",children:["$",p.toFixed(2)]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-lg flex items-center justify-center",children:e.jsx(Ci,{size:20,className:"text-purple-500"})}),e.jsxs("span",{className:`text-xs font-medium ${h>=0?"text-accent-green":"text-red-500"}`,children:[h>=0?"+":"",h!==0?(h/(T||1)*100).toFixed(1)+"%":"0%"]})]}),e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"Total PnL"}),e.jsxs("p",{className:`text-2xl font-bold ${h>=0?"text-accent-green":"text-red-500"}`,children:[h>=0?"+":"","$",h.toFixed(2)]})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-500/20 rounded-lg flex items-center justify-center",children:e.jsx(Ci,{size:20,className:"text-orange-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-white font-semibold",children:"Forex Heatmap"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Currency strength visualization"})]})]}),e.jsx("div",{className:"h-80 overflow-hidden rounded-lg",children:e.jsx("div",{ref:I,className:"tradingview-widget-container h-full",children:e.jsx("div",{className:"tradingview-widget-container__widget h-full"})})})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-cyan-500/20 rounded-lg flex items-center justify-center",children:e.jsx(mt,{size:20,className:"text-cyan-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-white font-semibold",children:"Forex Screener"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Real-time currency pair analysis"})]})]}),e.jsx("div",{className:"h-96 overflow-hidden rounded-lg",children:e.jsx("div",{ref:$,className:"tradingview-widget-container h-full",children:e.jsx("div",{className:"tradingview-widget-container__widget h-full"})})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center",children:e.jsx(im,{size:20,className:"text-blue-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-white font-semibold",children:"Market News"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Real-time updates from TradingView"})]})]}),e.jsx("div",{className:"h-96 overflow-hidden rounded-lg",children:e.jsx("div",{ref:_,className:"tradingview-widget-container h-full",children:e.jsx("div",{className:"tradingview-widget-container__widget h-full"})})})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-lg flex items-center justify-center",children:e.jsx(wa,{size:20,className:"text-purple-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-white font-semibold",children:"Economic Calendar"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Real-time events from TradingView"})]})]}),e.jsx("div",{className:"h-96 overflow-hidden rounded-lg",children:e.jsx("div",{ref:L,className:"tradingview-widget-container h-full",children:e.jsx("div",{className:"tradingview-widget-container__widget h-full"})})})]})]})]})]})]})},Lo="eyJhbGciOiJSUzUxMiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiJiYmRlZGVjYWJjMDAzOTczNTQ3ODk2Y2NlYjgyNzY2NSIsImFjY2Vzc1J1bGVzIjpbeyJpZCI6InRyYWRpbmctYWNjb3VudC1tYW5hZ2VtZW50LWFwaSIsIm1ldGhvZHMiOlsidHJhZGluZy1hY2NvdW50LW1hbmFnZW1lbnQtYXBpOnJlc3Q6cHVibGljOio6KiJdLCJyb2xlcyI6WyJyZWFkZXIiXSwicmVzb3VyY2VzIjpbImFjY291bnQ6JFVTRVJfSUQkOjJkNjM4M2E1LWJiNjgtNGJhOS1hNDBmLTE4OTA5NGQ3YzE0ZiJdfSx7ImlkIjoibWV0YWFwaS1yZXN0LWFwaSIsIm1ldGhvZHMiOlsibWV0YWFwaS1hcGk6cmVzdDpwdWJsaWM6KjoqIl0sInJvbGVzIjpbInJlYWRlciIsIndyaXRlciJdLCJyZXNvdXJjZXMiOlsiYWNjb3VudDokVVNFUl9JRCQ6MmQ2MzgzYTUtYmI2OC00YmE5LWE0MGYtMTg5MDk0ZDdjMTRmIl19LHsiaWQiOiJtZXRhYXBpLXJwYy1hcGkiLCJtZXRob2RzIjpbIm1ldGFhcGktYXBpOndzOnB1YmxpYzoqOioiXSwicm9sZXMiOlsicmVhZGVyIiwid3JpdGVyIl0sInJlc291cmNlcyI6WyJhY2NvdW50OiRVU0VSX0lEJDoyZDYzODNhNS1iYjY4LTRiYTktYTQwZi0xODkwOTRkN2MxNGYiXX0seyJpZCI6Im1ldGFhcGktcmVhbC10aW1lLXN0cmVhbWluZy1hcGkiLCJtZXRob2RzIjpbIm1ldGFhcGktYXBpOndzOnB1YmxpYzoqOioiXSwicm9sZXMiOlsicmVhZGVyIiwid3JpdGVyIl0sInJlc291cmNlcyI6WyJhY2NvdW50OiRVU0VSX0lEJDoyZDYzODNhNS1iYjY4LTRiYTktYTQwZi0xODkwOTRkN2MxNGYiXX0seyJpZCI6Im1ldGFzdGF0cy1hcGkiLCJtZXRob2RzIjpbIm1ldGFzdGF0cy1hcGk6cmVzdDpwdWJsaWM6KjoqIl0sInJvbGVzIjpbInJlYWRlciJdLCJyZXNvdXJjZXMiOlsiYWNjb3VudDokVVNFUl9JRCQ6MmQ2MzgzYTUtYmI2OC00YmE5LWE0MGYtMTg5MDk0ZDdjMTRmIl19XSwiaWdub3JlUmF0ZUxpbWl0cyI6ZmFsc2UsInRva2VuSWQiOiIyMDIxMDIxMyIsImltcGVyc29uYXRlZCI6ZmFsc2UsInJlYWxVc2VySWQiOiJiYmRlZGVjYWJjMDAzOTczNTQ3ODk2Y2NlYjgyNzY2NSIsImlhdCI6MTc2Nzg2OTUyMywiZXhwIjoxNzc1NjQ1NTIzfQ.OKKP9THiaQN1GRbWEM2HaCRYkNeEyIwB63Jocxyuy-8jR0Gv2fQFncUnWAoVF7jBZRT3Eii4-HqcU7aXZGJZyFyRyekAROD4XEoWfvEDRHGuyi3Mzqt3II3apH-wlFIQDBaH4qtiCCHXPTw1-dDOSDrjcXzVhvx-1sU88Iq_0QBgz7MUJ7zKFWWzB3usBtbixcRHG6fhKFwLlKePry8BMbj9xrvySuyySj0wnl8Qw4Fgo9KYLc4UdliEhNAqN3MPumH4yccM-BZjrYWN_FMLZHCSfutjSSwjoQrwwOTyf8NsHnqJNXfcboV7IZkP5iGth6-hEMNb-UKmdsFZLQjenEI-Ql3xwo-i7luILfqErquc9ZIuhTZVLlAQPiyiiXDCwL6DlJRj625tiAJKgAKz65Bz8NiXZ0T37r9OCKcwK6Q7Rr8LK1bluHGBk3iewpJgpNzPa92GmjBhrbY5EaNfr8Os84zdLOGpww8nljfEqdy40boOl-2hZ8S9FpV6drnlSLD-aAhKbq3yIR9_S_tXqwstIl00_1JUKHpJHZn04zvIXtqYFGgiAxcY7AXKrk1Bty_xulnaiQ9dXuSj8boJJkeoaq6wwJGNe_aA-ytdQAKz6PSxtXRcQVB-PsKzhC8wKCBbxru9zCwDkSXJUPtEKN5c25eMvsTq5JNc5sgbrds",An="2d6383a5-bb68-4ba9-a40f-189094d7c14f";console.log("MetaAPI initialized with account:",An);class Ib{constructor(){this.ws=null,this.subscribers=new Map,this.prices=new Map,this.symbols=[],this.isConnected=!1,this.reconnectAttempts=0,this.maxReconnectAttempts=5}async getSymbols(){try{const s=new AbortController,r=setTimeout(()=>s.abort(),5e3),a=await fetch(`https://mt-client-api-v1.new-york.agiliumtrade.ai/users/current/accounts/${An}/symbols`,{headers:{"auth-token":Lo,"Content-Type":"application/json"},signal:s.signal});if(clearTimeout(r),!a.ok)throw new Error("Failed to fetch symbols");const n=await a.json();return this.symbols=n,n}catch(s){return console.error("Error fetching symbols:",s),[]}}async getSymbolSpecification(s){try{const r=await fetch(`https://mt-client-api-v1.new-york.agiliumtrade.ai/users/current/accounts/${An}/symbols/${s}/specification`,{headers:{"auth-token":Lo,"Content-Type":"application/json"}});if(!r.ok)throw new Error("Failed to fetch symbol specification");return await r.json()}catch(r){return console.error("Error fetching symbol specification:",r),null}}async getSymbolPrice(s){try{const r=await fetch(`http://localhost:5001/api/prices/${s}`);if(!r.ok)throw new Error("Failed to fetch symbol price");const a=await r.json();return a.success&&a.price?(this.prices.set(s,a.price),a.price):null}catch(r){return console.error("Error fetching symbol price:",r),null}}async getAllPrices(s){try{const r=await fetch("http://localhost:5001/api/prices/batch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbols:s})});if(!r.ok)throw new Error("Failed to fetch prices");const a=await r.json();return a.success&&a.prices?(Object.entries(a.prices).forEach(([n,l])=>{this.prices.set(n,l)}),a.prices):{}}catch(r){return console.error("Error fetching all prices:",r),{}}}connect(s=[]){if(this.ws&&this.ws.readyState===WebSocket.OPEN)return;const r="wss://mt-client-api-v1.new-york.agiliumtrade.ai/ws";this.ws=new WebSocket(r),this.ws.onopen=()=>{console.log("MetaAPI WebSocket connected"),this.isConnected=!0,this.reconnectAttempts=0,this.ws.send(JSON.stringify({type:"authenticate",accountId:An,token:Lo})),s.length>0&&this.subscribeToSymbols(s)},this.ws.onmessage=a=>{try{const n=JSON.parse(a.data);this.handleMessage(n)}catch(n){console.error("Error parsing WebSocket message:",n)}},this.ws.onerror=a=>{console.error("MetaAPI WebSocket error:",a)},this.ws.onclose=()=>{console.log("MetaAPI WebSocket disconnected"),this.isConnected=!1,this.reconnectAttempts<this.maxReconnectAttempts&&(this.reconnectAttempts++,setTimeout(()=>{console.log(`Reconnecting... Attempt ${this.reconnectAttempts}`),this.connect(Array.from(this.subscribers.keys()))},3e3*this.reconnectAttempts))}}handleMessage(s){if(s.type==="prices"||s.type==="price"){const r=s.symbol,a={bid:s.bid,ask:s.ask,spread:s.ask-s.bid,time:s.time};this.prices.set(r,a);const n=this.subscribers.get(r);n&&n(a)}}subscribeToSymbols(s){if(!this.ws||this.ws.readyState!==WebSocket.OPEN){console.warn("WebSocket not connected");return}this.ws.send(JSON.stringify({type:"subscribeToMarketData",accountId:An,symbols:s,subscriptions:[{type:"quotes"}]}))}subscribe(s,r){this.subscribers.set(s,r),this.isConnected&&this.subscribeToSymbols([s])}unsubscribe(s){this.subscribers.delete(s)}disconnect(){this.ws&&(this.ws.close(),this.ws=null),this.subscribers.clear(),this.isConnected=!1}getPrice(s){return this.prices.get(s)}}const tn=new Ib,ir=Object.create(null);ir.open="0";ir.close="1";ir.ping="2";ir.pong="3";ir.message="4";ir.upgrade="5";ir.noop="6";const Xl=Object.create(null);Object.keys(ir).forEach(t=>{Xl[ir[t]]=t});const Bc={type:"error",data:"parser error"},X0=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Q0=typeof ArrayBuffer=="function",Z0=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,qd=({type:t,data:s},r,a)=>X0&&s instanceof Blob?r?a(s):dm(s,a):Q0&&(s instanceof ArrayBuffer||Z0(s))?r?a(s):dm(new Blob([s]),a):a(ir[t]+(s||"")),dm=(t,s)=>{const r=new FileReader;return r.onload=function(){const a=r.result.split(",")[1];s("b"+(a||""))},r.readAsDataURL(t)};function um(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Uo;function $b(t,s){if(X0&&t.data instanceof Blob)return t.data.arrayBuffer().then(um).then(s);if(Q0&&(t.data instanceof ArrayBuffer||Z0(t.data)))return s(um(t.data));qd(t,!1,r=>{Uo||(Uo=new TextEncoder),s(Uo.encode(r))})}const xm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Dn=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<xm.length;t++)Dn[xm.charCodeAt(t)]=t;const Lb=t=>{let s=t.length*.75,r=t.length,a,n=0,l,i,d,c;t[t.length-1]==="="&&(s--,t[t.length-2]==="="&&s--);const u=new ArrayBuffer(s),x=new Uint8Array(u);for(a=0;a<r;a+=4)l=Dn[t.charCodeAt(a)],i=Dn[t.charCodeAt(a+1)],d=Dn[t.charCodeAt(a+2)],c=Dn[t.charCodeAt(a+3)],x[n++]=l<<2|i>>4,x[n++]=(i&15)<<4|d>>2,x[n++]=(d&3)<<6|c&63;return u},Ub=typeof ArrayBuffer=="function",Gd=(t,s)=>{if(typeof t!="string")return{type:"message",data:ep(t,s)};const r=t.charAt(0);return r==="b"?{type:"message",data:zb(t.substring(1),s)}:Xl[r]?t.length>1?{type:Xl[r],data:t.substring(1)}:{type:Xl[r]}:Bc},zb=(t,s)=>{if(Ub){const r=Lb(t);return ep(r,s)}else return{base64:!0,data:t}},ep=(t,s)=>{switch(s){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},tp="",_b=(t,s)=>{const r=t.length,a=new Array(r);let n=0;t.forEach((l,i)=>{qd(l,!1,d=>{a[i]=d,++n===r&&s(a.join(tp))})})},Mb=(t,s)=>{const r=t.split(tp),a=[];for(let n=0;n<r.length;n++){const l=Gd(r[n],s);if(a.push(l),l.type==="error")break}return a};function Fb(){return new TransformStream({transform(t,s){$b(t,r=>{const a=r.length;let n;if(a<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,a);else if(a<65536){n=new Uint8Array(3);const l=new DataView(n.buffer);l.setUint8(0,126),l.setUint16(1,a)}else{n=new Uint8Array(9);const l=new DataView(n.buffer);l.setUint8(0,127),l.setBigUint64(1,BigInt(a))}t.data&&typeof t.data!="string"&&(n[0]|=128),s.enqueue(n),s.enqueue(r)})}})}let zo;function Ul(t){return t.reduce((s,r)=>s+r.length,0)}function zl(t,s){if(t[0].length===s)return t.shift();const r=new Uint8Array(s);let a=0;for(let n=0;n<s;n++)r[n]=t[0][a++],a===t[0].length&&(t.shift(),a=0);return t.length&&a<t[0].length&&(t[0]=t[0].slice(a)),r}function Rb(t,s){zo||(zo=new TextDecoder);const r=[];let a=0,n=-1,l=!1;return new TransformStream({transform(i,d){for(r.push(i);;){if(a===0){if(Ul(r)<1)break;const c=zl(r,1);l=(c[0]&128)===128,n=c[0]&127,n<126?a=3:n===126?a=1:a=2}else if(a===1){if(Ul(r)<2)break;const c=zl(r,2);n=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),a=3}else if(a===2){if(Ul(r)<8)break;const c=zl(r,8),u=new DataView(c.buffer,c.byteOffset,c.length),x=u.getUint32(0);if(x>Math.pow(2,21)-1){d.enqueue(Bc);break}n=x*Math.pow(2,32)+u.getUint32(4),a=3}else{if(Ul(r)<n)break;const c=zl(r,n);d.enqueue(Gd(l?c:zo.decode(c),s)),a=0}if(n===0||n>t){d.enqueue(Bc);break}}}})}const sp=4;function bt(t){if(t)return Ob(t)}function Ob(t){for(var s in bt.prototype)t[s]=bt.prototype[s];return t}bt.prototype.on=bt.prototype.addEventListener=function(t,s){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(s),this};bt.prototype.once=function(t,s){function r(){this.off(t,r),s.apply(this,arguments)}return r.fn=s,this.on(t,r),this};bt.prototype.off=bt.prototype.removeListener=bt.prototype.removeAllListeners=bt.prototype.removeEventListener=function(t,s){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var a,n=0;n<r.length;n++)if(a=r[n],a===s||a.fn===s){r.splice(n,1);break}return r.length===0&&delete this._callbacks["$"+t],this};bt.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var s=new Array(arguments.length-1),r=this._callbacks["$"+t],a=1;a<arguments.length;a++)s[a-1]=arguments[a];if(r){r=r.slice(0);for(var a=0,n=r.length;a<n;++a)r[a].apply(this,s)}return this};bt.prototype.emitReserved=bt.prototype.emit;bt.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};bt.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Qi=typeof Promise=="function"&&typeof Promise.resolve=="function"?s=>Promise.resolve().then(s):(s,r)=>r(s,0),ws=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Bb="arraybuffer";function rp(t,...s){return s.reduce((r,a)=>(t.hasOwnProperty(a)&&(r[a]=t[a]),r),{})}const Vb=ws.setTimeout,Wb=ws.clearTimeout;function Zi(t,s){s.useNativeTimers?(t.setTimeoutFn=Vb.bind(ws),t.clearTimeoutFn=Wb.bind(ws)):(t.setTimeoutFn=ws.setTimeout.bind(ws),t.clearTimeoutFn=ws.clearTimeout.bind(ws))}const Hb=1.33;function Yb(t){return typeof t=="string"?Jb(t):Math.ceil((t.byteLength||t.size)*Hb)}function Jb(t){let s=0,r=0;for(let a=0,n=t.length;a<n;a++)s=t.charCodeAt(a),s<128?r+=1:s<2048?r+=2:s<55296||s>=57344?r+=3:(a++,r+=4);return r}function ap(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function qb(t){let s="";for(let r in t)t.hasOwnProperty(r)&&(s.length&&(s+="&"),s+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return s}function Gb(t){let s={},r=t.split("&");for(let a=0,n=r.length;a<n;a++){let l=r[a].split("=");s[decodeURIComponent(l[0])]=decodeURIComponent(l[1])}return s}class Kb extends Error{constructor(s,r,a){super(s),this.description=r,this.context=a,this.type="TransportError"}}class Kd extends bt{constructor(s){super(),this.writable=!1,Zi(this,s),this.opts=s,this.query=s.query,this.socket=s.socket,this.supportsBinary=!s.forceBase64}onError(s,r,a){return super.emitReserved("error",new Kb(s,r,a)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(s){this.readyState==="open"&&this.write(s)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(s){const r=Gd(s,this.socket.binaryType);this.onPacket(r)}onPacket(s){super.emitReserved("packet",s)}onClose(s){this.readyState="closed",super.emitReserved("close",s)}pause(s){}createUri(s,r={}){return s+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const s=this.opts.hostname;return s.indexOf(":")===-1?s:"["+s+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(s){const r=qb(s);return r.length?"?"+r:""}}class Xb extends Kd{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(s){this.readyState="pausing";const r=()=>{this.readyState="paused",s()};if(this._polling||!this.writable){let a=0;this._polling&&(a++,this.once("pollComplete",function(){--a||r()})),this.writable||(a++,this.once("drain",function(){--a||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(s){const r=a=>{if(this.readyState==="opening"&&a.type==="open"&&this.onOpen(),a.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(a)};Mb(s,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const s=()=>{this.write([{type:"close"}])};this.readyState==="open"?s():this.once("open",s)}write(s){this.writable=!1,_b(s,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const s=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=ap()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(s,r)}}let np=!1;try{np=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Qb=np;function Zb(){}class ej extends Xb{constructor(s){if(super(s),typeof location<"u"){const r=location.protocol==="https:";let a=location.port;a||(a=r?"443":"80"),this.xd=typeof location<"u"&&s.hostname!==location.hostname||a!==s.port}}doWrite(s,r){const a=this.request({method:"POST",data:s});a.on("success",r),a.on("error",(n,l)=>{this.onError("xhr post error",n,l)})}doPoll(){const s=this.request();s.on("data",this.onData.bind(this)),s.on("error",(r,a)=>{this.onError("xhr poll error",r,a)}),this.pollXhr=s}}class ar extends bt{constructor(s,r,a){super(),this.createRequest=s,Zi(this,a),this._opts=a,this._method=a.method||"GET",this._uri=r,this._data=a.data!==void 0?a.data:null,this._create()}_create(){var s;const r=rp(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const a=this._xhr=this.createRequest(r);try{a.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){a.setDisableHeaderCheck&&a.setDisableHeaderCheck(!0);for(let n in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(n)&&a.setRequestHeader(n,this._opts.extraHeaders[n])}}catch{}if(this._method==="POST")try{a.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{a.setRequestHeader("Accept","*/*")}catch{}(s=this._opts.cookieJar)===null||s===void 0||s.addCookies(a),"withCredentials"in a&&(a.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(a.timeout=this._opts.requestTimeout),a.onreadystatechange=()=>{var n;a.readyState===3&&((n=this._opts.cookieJar)===null||n===void 0||n.parseCookies(a.getResponseHeader("set-cookie"))),a.readyState===4&&(a.status===200||a.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof a.status=="number"?a.status:0)},0))},a.send(this._data)}catch(n){this.setTimeoutFn(()=>{this._onError(n)},0);return}typeof document<"u"&&(this._index=ar.requestsCount++,ar.requests[this._index]=this)}_onError(s){this.emitReserved("error",s,this._xhr),this._cleanup(!0)}_cleanup(s){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Zb,s)try{this._xhr.abort()}catch{}typeof document<"u"&&delete ar.requests[this._index],this._xhr=null}}_onLoad(){const s=this._xhr.responseText;s!==null&&(this.emitReserved("data",s),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}ar.requestsCount=0;ar.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",mm);else if(typeof addEventListener=="function"){const t="onpagehide"in ws?"pagehide":"unload";addEventListener(t,mm,!1)}}function mm(){for(let t in ar.requests)ar.requests.hasOwnProperty(t)&&ar.requests[t].abort()}const tj=function(){const t=lp({xdomain:!1});return t&&t.responseType!==null}();class sj extends ej{constructor(s){super(s);const r=s&&s.forceBase64;this.supportsBinary=tj&&!r}request(s={}){return Object.assign(s,{xd:this.xd},this.opts),new ar(lp,this.uri(),s)}}function lp(t){const s=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!s||Qb))return new XMLHttpRequest}catch{}if(!s)try{return new ws[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const ip=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class rj extends Kd{get name(){return"websocket"}doOpen(){const s=this.uri(),r=this.opts.protocols,a=ip?{}:rp(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(a.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(s,r,a)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=s=>this.onClose({description:"websocket connection closed",context:s}),this.ws.onmessage=s=>this.onData(s.data),this.ws.onerror=s=>this.onError("websocket error",s)}write(s){this.writable=!1;for(let r=0;r<s.length;r++){const a=s[r],n=r===s.length-1;qd(a,this.supportsBinary,l=>{try{this.doWrite(a,l)}catch{}n&&Qi(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const s=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=ap()),this.supportsBinary||(r.b64=1),this.createUri(s,r)}}const _o=ws.WebSocket||ws.MozWebSocket;class aj extends rj{createSocket(s,r,a){return ip?new _o(s,r,a):r?new _o(s,r):new _o(s)}doWrite(s,r){this.ws.send(r)}}class nj extends Kd{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(s){return this.emitReserved("error",s)}this._transport.closed.then(()=>{this.onClose()}).catch(s=>{this.onError("webtransport error",s)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(s=>{const r=Rb(Number.MAX_SAFE_INTEGER,this.socket.binaryType),a=s.readable.pipeThrough(r).getReader(),n=Fb();n.readable.pipeTo(s.writable),this._writer=n.writable.getWriter();const l=()=>{a.read().then(({done:d,value:c})=>{d||(this.onPacket(c),l())}).catch(d=>{})};l();const i={type:"open"};this.query.sid&&(i.data=`{"sid":"${this.query.sid}"}`),this._writer.write(i).then(()=>this.onOpen())})})}write(s){this.writable=!1;for(let r=0;r<s.length;r++){const a=s[r],n=r===s.length-1;this._writer.write(a).then(()=>{n&&Qi(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var s;(s=this._transport)===null||s===void 0||s.close()}}const lj={websocket:aj,webtransport:nj,polling:sj},ij=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,oj=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Vc(t){if(t.length>8e3)throw"URI too long";const s=t,r=t.indexOf("["),a=t.indexOf("]");r!=-1&&a!=-1&&(t=t.substring(0,r)+t.substring(r,a).replace(/:/g,";")+t.substring(a,t.length));let n=ij.exec(t||""),l={},i=14;for(;i--;)l[oj[i]]=n[i]||"";return r!=-1&&a!=-1&&(l.source=s,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l.pathNames=cj(l,l.path),l.queryKey=dj(l,l.query),l}function cj(t,s){const r=/\/{2,9}/g,a=s.replace(r,"/").split("/");return(s.slice(0,1)=="/"||s.length===0)&&a.splice(0,1),s.slice(-1)=="/"&&a.splice(a.length-1,1),a}function dj(t,s){const r={};return s.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,n,l){n&&(r[n]=l)}),r}const Wc=typeof addEventListener=="function"&&typeof removeEventListener=="function",Ql=[];Wc&&addEventListener("offline",()=>{Ql.forEach(t=>t())},!1);class Yr extends bt{constructor(s,r){if(super(),this.binaryType=Bb,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,s&&typeof s=="object"&&(r=s,s=null),s){const a=Vc(s);r.hostname=a.host,r.secure=a.protocol==="https"||a.protocol==="wss",r.port=a.port,a.query&&(r.query=a.query)}else r.host&&(r.hostname=Vc(r.host).host);Zi(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(a=>{const n=a.prototype.name;this.transports.push(n),this._transportsByName[n]=a}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Gb(this.opts.query)),Wc&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Ql.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(s){const r=Object.assign({},this.opts.query);r.EIO=sp,r.transport=s,this.id&&(r.sid=this.id);const a=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[s]);return new this._transportsByName[s](a)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const s=this.opts.rememberUpgrade&&Yr.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(s);r.open(),this.setTransport(r)}setTransport(s){this.transport&&this.transport.removeAllListeners(),this.transport=s,s.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",Yr.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",s),this.emitReserved("heartbeat"),s.type){case"open":this.onHandshake(JSON.parse(s.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=s.data,this._onError(r);break;case"message":this.emitReserved("data",s.data),this.emitReserved("message",s.data);break}}onHandshake(s){this.emitReserved("handshake",s),this.id=s.sid,this.transport.query.sid=s.sid,this._pingInterval=s.pingInterval,this._pingTimeout=s.pingTimeout,this._maxPayload=s.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const s=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+s,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},s),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const s=this._getWritablePackets();this.transport.send(s),this._prevBufferLen=s.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let a=0;a<this.writeBuffer.length;a++){const n=this.writeBuffer[a].data;if(n&&(r+=Yb(n)),a>0&&r>this._maxPayload)return this.writeBuffer.slice(0,a);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const s=Date.now()>this._pingTimeoutTime;return s&&(this._pingTimeoutTime=0,Qi(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),s}write(s,r,a){return this._sendPacket("message",s,r,a),this}send(s,r,a){return this._sendPacket("message",s,r,a),this}_sendPacket(s,r,a,n){if(typeof r=="function"&&(n=r,r=void 0),typeof a=="function"&&(n=a,a=null),this.readyState==="closing"||this.readyState==="closed")return;a=a||{},a.compress=a.compress!==!1;const l={type:s,data:r,options:a};this.emitReserved("packetCreate",l),this.writeBuffer.push(l),n&&this.once("flush",n),this.flush()}close(){const s=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),s()},a=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?a():s()}):this.upgrading?a():s()),this}_onError(s){if(Yr.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",s),this._onClose("transport error",s)}_onClose(s,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Wc&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const a=Ql.indexOf(this._offlineEventListener);a!==-1&&Ql.splice(a,1)}this.readyState="closed",this.id=null,this.emitReserved("close",s,r),this.writeBuffer=[],this._prevBufferLen=0}}}Yr.protocol=sp;class uj extends Yr{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let s=0;s<this._upgrades.length;s++)this._probe(this._upgrades[s])}_probe(s){let r=this.createTransport(s),a=!1;Yr.priorWebsocketSuccess=!1;const n=()=>{a||(r.send([{type:"ping",data:"probe"}]),r.once("packet",b=>{if(!a)if(b.type==="pong"&&b.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Yr.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{a||this.readyState!=="closed"&&(x(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=r.name,this.emitReserved("upgradeError",f)}}))};function l(){a||(a=!0,x(),r.close(),r=null)}const i=b=>{const f=new Error("probe error: "+b);f.transport=r.name,l(),this.emitReserved("upgradeError",f)};function d(){i("transport closed")}function c(){i("socket closed")}function u(b){r&&b.name!==r.name&&l()}const x=()=>{r.removeListener("open",n),r.removeListener("error",i),r.removeListener("close",d),this.off("close",c),this.off("upgrading",u)};r.once("open",n),r.once("error",i),r.once("close",d),this.once("close",c),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&s!=="webtransport"?this.setTimeoutFn(()=>{a||r.open()},200):r.open()}onHandshake(s){this._upgrades=this._filterUpgrades(s.upgrades),super.onHandshake(s)}_filterUpgrades(s){const r=[];for(let a=0;a<s.length;a++)~this.transports.indexOf(s[a])&&r.push(s[a]);return r}}let xj=class extends uj{constructor(s,r={}){const a=typeof s=="object"?s:r;(!a.transports||a.transports&&typeof a.transports[0]=="string")&&(a.transports=(a.transports||["polling","websocket","webtransport"]).map(n=>lj[n]).filter(n=>!!n)),super(s,a)}};function mj(t,s="",r){let a=t;r=r||typeof location<"u"&&location,t==null&&(t=r.protocol+"//"+r.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=r.protocol+t:t=r.host+t),/^(https?|wss?):\/\//.test(t)||(typeof r<"u"?t=r.protocol+"//"+t:t="https://"+t),a=Vc(t)),a.port||(/^(http|ws)$/.test(a.protocol)?a.port="80":/^(http|ws)s$/.test(a.protocol)&&(a.port="443")),a.path=a.path||"/";const l=a.host.indexOf(":")!==-1?"["+a.host+"]":a.host;return a.id=a.protocol+"://"+l+":"+a.port+s,a.href=a.protocol+"://"+l+(r&&r.port===a.port?"":":"+a.port),a}const hj=typeof ArrayBuffer=="function",pj=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,op=Object.prototype.toString,gj=typeof Blob=="function"||typeof Blob<"u"&&op.call(Blob)==="[object BlobConstructor]",fj=typeof File=="function"||typeof File<"u"&&op.call(File)==="[object FileConstructor]";function Xd(t){return hj&&(t instanceof ArrayBuffer||pj(t))||gj&&t instanceof Blob||fj&&t instanceof File}function Zl(t,s){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let r=0,a=t.length;r<a;r++)if(Zl(t[r]))return!0;return!1}if(Xd(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Zl(t.toJSON(),!0);for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&Zl(t[r]))return!0;return!1}function yj(t){const s=[],r=t.data,a=t;return a.data=Hc(r,s),a.attachments=s.length,{packet:a,buffers:s}}function Hc(t,s){if(!t)return t;if(Xd(t)){const r={_placeholder:!0,num:s.length};return s.push(t),r}else if(Array.isArray(t)){const r=new Array(t.length);for(let a=0;a<t.length;a++)r[a]=Hc(t[a],s);return r}else if(typeof t=="object"&&!(t instanceof Date)){const r={};for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=Hc(t[a],s));return r}return t}function bj(t,s){return t.data=Yc(t.data,s),delete t.attachments,t}function Yc(t,s){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<s.length)return s[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=Yc(t[r],s);else if(typeof t=="object")for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=Yc(t[r],s));return t}const cp=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],jj=5;var Fe;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Fe||(Fe={}));class Nj{constructor(s){this.replacer=s}encode(s){return(s.type===Fe.EVENT||s.type===Fe.ACK)&&Zl(s)?this.encodeAsBinary({type:s.type===Fe.EVENT?Fe.BINARY_EVENT:Fe.BINARY_ACK,nsp:s.nsp,data:s.data,id:s.id}):[this.encodeAsString(s)]}encodeAsString(s){let r=""+s.type;return(s.type===Fe.BINARY_EVENT||s.type===Fe.BINARY_ACK)&&(r+=s.attachments+"-"),s.nsp&&s.nsp!=="/"&&(r+=s.nsp+","),s.id!=null&&(r+=s.id),s.data!=null&&(r+=JSON.stringify(s.data,this.replacer)),r}encodeAsBinary(s){const r=yj(s),a=this.encodeAsString(r.packet),n=r.buffers;return n.unshift(a),n}}class Qd extends bt{constructor(s){super(),this.reviver=s}add(s){let r;if(typeof s=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(s);const a=r.type===Fe.BINARY_EVENT;a||r.type===Fe.BINARY_ACK?(r.type=a?Fe.EVENT:Fe.ACK,this.reconstructor=new vj(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Xd(s)||s.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(s),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+s)}decodeString(s){let r=0;const a={type:Number(s.charAt(0))};if(Fe[a.type]===void 0)throw new Error("unknown packet type "+a.type);if(a.type===Fe.BINARY_EVENT||a.type===Fe.BINARY_ACK){const l=r+1;for(;s.charAt(++r)!=="-"&&r!=s.length;);const i=s.substring(l,r);if(i!=Number(i)||s.charAt(r)!=="-")throw new Error("Illegal attachments");a.attachments=Number(i)}if(s.charAt(r+1)==="/"){const l=r+1;for(;++r&&!(s.charAt(r)===","||r===s.length););a.nsp=s.substring(l,r)}else a.nsp="/";const n=s.charAt(r+1);if(n!==""&&Number(n)==n){const l=r+1;for(;++r;){const i=s.charAt(r);if(i==null||Number(i)!=i){--r;break}if(r===s.length)break}a.id=Number(s.substring(l,r+1))}if(s.charAt(++r)){const l=this.tryParse(s.substr(r));if(Qd.isPayloadValid(a.type,l))a.data=l;else throw new Error("invalid payload")}return a}tryParse(s){try{return JSON.parse(s,this.reviver)}catch{return!1}}static isPayloadValid(s,r){switch(s){case Fe.CONNECT:return Ii(r);case Fe.DISCONNECT:return r===void 0;case Fe.CONNECT_ERROR:return typeof r=="string"||Ii(r);case Fe.EVENT:case Fe.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&cp.indexOf(r[0])===-1);case Fe.ACK:case Fe.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class vj{constructor(s){this.packet=s,this.buffers=[],this.reconPack=s}takeBinaryData(s){if(this.buffers.push(s),this.buffers.length===this.reconPack.attachments){const r=bj(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function wj(t){return typeof t=="string"}const kj=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};function Sj(t){return t===void 0||kj(t)}function Ii(t){return Object.prototype.toString.call(t)==="[object Object]"}function Cj(t,s){switch(t){case Fe.CONNECT:return s===void 0||Ii(s);case Fe.DISCONNECT:return s===void 0;case Fe.EVENT:return Array.isArray(s)&&(typeof s[0]=="number"||typeof s[0]=="string"&&cp.indexOf(s[0])===-1);case Fe.ACK:return Array.isArray(s);case Fe.CONNECT_ERROR:return typeof s=="string"||Ii(s);default:return!1}}function Tj(t){return wj(t.nsp)&&Sj(t.id)&&Cj(t.type,t.data)}const Ej=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Qd,Encoder:Nj,get PacketType(){return Fe},isPacketValid:Tj,protocol:jj},Symbol.toStringTag,{value:"Module"}));function Rs(t,s,r){return t.on(s,r),function(){t.off(s,r)}}const Pj=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class dp extends bt{constructor(s,r,a){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=s,this.nsp=r,a&&a.auth&&(this.auth=a.auth),this._opts=Object.assign({},a),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const s=this.io;this.subs=[Rs(s,"open",this.onopen.bind(this)),Rs(s,"packet",this.onpacket.bind(this)),Rs(s,"error",this.onerror.bind(this)),Rs(s,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...s){return s.unshift("message"),this.emit.apply(this,s),this}emit(s,...r){var a,n,l;if(Pj.hasOwnProperty(s))throw new Error('"'+s.toString()+'" is a reserved event name');if(r.unshift(s),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const i={type:Fe.EVENT,data:r};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const x=this.ids++,b=r.pop();this._registerAckCallback(x,b),i.id=x}const d=(n=(a=this.io.engine)===null||a===void 0?void 0:a.transport)===null||n===void 0?void 0:n.writable,c=this.connected&&!(!((l=this.io.engine)===null||l===void 0)&&l._hasPingExpired());return this.flags.volatile&&!d||(c?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(s,r){var a;const n=(a=this.flags.timeout)!==null&&a!==void 0?a:this._opts.ackTimeout;if(n===void 0){this.acks[s]=r;return}const l=this.io.setTimeoutFn(()=>{delete this.acks[s];for(let d=0;d<this.sendBuffer.length;d++)this.sendBuffer[d].id===s&&this.sendBuffer.splice(d,1);r.call(this,new Error("operation has timed out"))},n),i=(...d)=>{this.io.clearTimeoutFn(l),r.apply(this,d)};i.withError=!0,this.acks[s]=i}emitWithAck(s,...r){return new Promise((a,n)=>{const l=(i,d)=>i?n(i):a(d);l.withError=!0,r.push(l),this.emit(s,...r)})}_addToQueue(s){let r;typeof s[s.length-1]=="function"&&(r=s.pop());const a={id:this._queueSeq++,tryCount:0,pending:!1,args:s,flags:Object.assign({fromQueue:!0},this.flags)};s.push((n,...l)=>(this._queue[0],n!==null?a.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(n)):(this._queue.shift(),r&&r(null,...l)),a.pending=!1,this._drainQueue())),this._queue.push(a),this._drainQueue()}_drainQueue(s=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!s||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(s){s.nsp=this.nsp,this.io._packet(s)}onopen(){typeof this.auth=="function"?this.auth(s=>{this._sendConnectPacket(s)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(s){this.packet({type:Fe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},s):s})}onerror(s){this.connected||this.emitReserved("connect_error",s)}onclose(s,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",s,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(s=>{if(!this.sendBuffer.some(a=>String(a.id)===s)){const a=this.acks[s];delete this.acks[s],a.withError&&a.call(this,new Error("socket has been disconnected"))}})}onpacket(s){if(s.nsp===this.nsp)switch(s.type){case Fe.CONNECT:s.data&&s.data.sid?this.onconnect(s.data.sid,s.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Fe.EVENT:case Fe.BINARY_EVENT:this.onevent(s);break;case Fe.ACK:case Fe.BINARY_ACK:this.onack(s);break;case Fe.DISCONNECT:this.ondisconnect();break;case Fe.CONNECT_ERROR:this.destroy();const a=new Error(s.data.message);a.data=s.data.data,this.emitReserved("connect_error",a);break}}onevent(s){const r=s.data||[];s.id!=null&&r.push(this.ack(s.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(s){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const a of r)a.apply(this,s)}super.emit.apply(this,s),this._pid&&s.length&&typeof s[s.length-1]=="string"&&(this._lastOffset=s[s.length-1])}ack(s){const r=this;let a=!1;return function(...n){a||(a=!0,r.packet({type:Fe.ACK,id:s,data:n}))}}onack(s){const r=this.acks[s.id];typeof r=="function"&&(delete this.acks[s.id],r.withError&&s.data.unshift(null),r.apply(this,s.data))}onconnect(s,r){this.id=s,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(s=>this.emitEvent(s)),this.receiveBuffer=[],this.sendBuffer.forEach(s=>{this.notifyOutgoingListeners(s),this.packet(s)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(s=>s()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Fe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(s){return this.flags.compress=s,this}get volatile(){return this.flags.volatile=!0,this}timeout(s){return this.flags.timeout=s,this}onAny(s){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(s),this}prependAny(s){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(s),this}offAny(s){if(!this._anyListeners)return this;if(s){const r=this._anyListeners;for(let a=0;a<r.length;a++)if(s===r[a])return r.splice(a,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(s){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(s),this}prependAnyOutgoing(s){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(s),this}offAnyOutgoing(s){if(!this._anyOutgoingListeners)return this;if(s){const r=this._anyOutgoingListeners;for(let a=0;a<r.length;a++)if(s===r[a])return r.splice(a,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(s){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const a of r)a.apply(this,s.data)}}}function on(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}on.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var s=Math.random(),r=Math.floor(s*this.jitter*t);t=Math.floor(s*10)&1?t+r:t-r}return Math.min(t,this.max)|0};on.prototype.reset=function(){this.attempts=0};on.prototype.setMin=function(t){this.ms=t};on.prototype.setMax=function(t){this.max=t};on.prototype.setJitter=function(t){this.jitter=t};class Jc extends bt{constructor(s,r){var a;super(),this.nsps={},this.subs=[],s&&typeof s=="object"&&(r=s,s=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Zi(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((a=r.randomizationFactor)!==null&&a!==void 0?a:.5),this.backoff=new on({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=s;const n=r.parser||Ej;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(s){return arguments.length?(this._reconnection=!!s,s||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(s){return s===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=s,this)}reconnectionDelay(s){var r;return s===void 0?this._reconnectionDelay:(this._reconnectionDelay=s,(r=this.backoff)===null||r===void 0||r.setMin(s),this)}randomizationFactor(s){var r;return s===void 0?this._randomizationFactor:(this._randomizationFactor=s,(r=this.backoff)===null||r===void 0||r.setJitter(s),this)}reconnectionDelayMax(s){var r;return s===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=s,(r=this.backoff)===null||r===void 0||r.setMax(s),this)}timeout(s){return arguments.length?(this._timeout=s,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(s){if(~this._readyState.indexOf("open"))return this;this.engine=new xj(this.uri,this.opts);const r=this.engine,a=this;this._readyState="opening",this.skipReconnect=!1;const n=Rs(r,"open",function(){a.onopen(),s&&s()}),l=d=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",d),s?s(d):this.maybeReconnectOnOpen()},i=Rs(r,"error",l);if(this._timeout!==!1){const d=this._timeout,c=this.setTimeoutFn(()=>{n(),l(new Error("timeout")),r.close()},d);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(n),this.subs.push(i),this}connect(s){return this.open(s)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const s=this.engine;this.subs.push(Rs(s,"ping",this.onping.bind(this)),Rs(s,"data",this.ondata.bind(this)),Rs(s,"error",this.onerror.bind(this)),Rs(s,"close",this.onclose.bind(this)),Rs(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(s){try{this.decoder.add(s)}catch(r){this.onclose("parse error",r)}}ondecoded(s){Qi(()=>{this.emitReserved("packet",s)},this.setTimeoutFn)}onerror(s){this.emitReserved("error",s)}socket(s,r){let a=this.nsps[s];return a?this._autoConnect&&!a.active&&a.connect():(a=new dp(this,s,r),this.nsps[s]=a),a}_destroy(s){const r=Object.keys(this.nsps);for(const a of r)if(this.nsps[a].active)return;this._close()}_packet(s){const r=this.encoder.encode(s);for(let a=0;a<r.length;a++)this.engine.write(r[a],s.options)}cleanup(){this.subs.forEach(s=>s()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(s,r){var a;this.cleanup(),(a=this.engine)===null||a===void 0||a.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",s,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const s=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const a=this.setTimeoutFn(()=>{s.skipReconnect||(this.emitReserved("reconnect_attempt",s.backoff.attempts),!s.skipReconnect&&s.open(n=>{n?(s._reconnecting=!1,s.reconnect(),this.emitReserved("reconnect_error",n)):s.onreconnect()}))},r);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}}onreconnect(){const s=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",s)}}const bn={};function ei(t,s){typeof t=="object"&&(s=t,t=void 0),s=s||{};const r=mj(t,s.path||"/socket.io"),a=r.source,n=r.id,l=r.path,i=bn[n]&&l in bn[n].nsps,d=s.forceNew||s["force new connection"]||s.multiplex===!1||i;let c;return d?c=new Jc(a,s):(bn[n]||(bn[n]=new Jc(a,s)),c=bn[n]),r.query&&!s.query&&(s.query=r.queryKey),c.socket(r.path,s)}Object.assign(ei,{Manager:Jc,Socket:dp,io:ei,connect:ei});const Aj="http://localhost:5001";class Dj{constructor(){this.socket=null,this.prices={},this.subscribers=new Map,this.isConnected=!1,this.reconnectAttempts=0,this.maxReconnectAttempts=10}connect(){var s;(s=this.socket)!=null&&s.connected||(this.socket=ei(Aj,{transports:["websocket"],reconnection:!0,reconnectionAttempts:this.maxReconnectAttempts,reconnectionDelay:1e3,reconnectionDelayMax:5e3}),this.socket.on("connect",()=>{console.log("[PriceStream] Connected to server"),this.isConnected=!0,this.reconnectAttempts=0,this.socket.emit("subscribePrices")}),this.socket.on("priceStream",r=>{const{prices:a,updated:n,timestamp:l}=r;a&&(this.prices={...this.prices,...a}),this.subscribers.forEach((i,d)=>{try{i(this.prices,n,l)}catch(c){console.error("[PriceStream] Subscriber error:",c)}})}),this.socket.on("disconnect",()=>{console.log("[PriceStream] Disconnected"),this.isConnected=!1}),this.socket.on("connect_error",r=>{console.error("[PriceStream] Connection error:",r.message),this.reconnectAttempts++}))}disconnect(){this.socket&&(this.socket.emit("unsubscribePrices"),this.socket.disconnect(),this.socket=null),this.isConnected=!1,this.subscribers.clear()}subscribe(s,r){var a;return this.subscribers.set(s,r),(a=this.socket)!=null&&a.connected||this.connect(),Object.keys(this.prices).length>0&&r(this.prices,{},Date.now()),()=>this.unsubscribe(s)}unsubscribe(s){this.subscribers.delete(s),this.subscribers.size===0&&this.disconnect()}getPrice(s){return this.prices[s]||null}getAllPrices(){return this.prices}calculatePnl(s){const r=this.prices[s.symbol];if(!r)return 0;const a=s.side==="BUY"?r.bid:r.ask,n=s.contractSize||100;return s.side==="BUY"?(a-s.openPrice)*s.quantity*n:(s.openPrice-a)*s.quantity*n}}const Zd=new Dj,Us="http://localhost:5001/api",Ij=()=>{var Ft,gl;const t=ut(),[s]=Ki(),r=s.get("account"),[a,n]=o.useState(r?"trade":"home"),[l,i]=o.useState(!1),[d,c]=o.useState(!1),[u,x]=o.useState(null),[b,f]=o.useState(null),[T,w]=o.useState([]),[j,S]=o.useState(null),[p,m]=o.useState([]),[h,N]=o.useState([]),[C,E]=o.useState([]),[P,U]=o.useState([]),[K,R]=o.useState({}),[le,X]=o.useState(!0),[_,L]=o.useState(""),[I,$]=o.useState("All"),[H,y]=o.useState("positions"),[O,g]=o.useState([{symbol:"XAUUSD",name:"Gold"}]),[v,W]=o.useState("XAUUSD"),[Z,B]=o.useState("market"),[M,te]=o.useState("BUY"),[ae,pe]=o.useState("0.01"),[Y,re]=o.useState(""),[Se,Ie]=o.useState(""),[z,fe]=o.useState(!1),[Pe,Te]=o.useState({balance:0,equity:0,credit:0,freeMargin:0,usedMargin:0,floatingPnl:0}),[He,Oe]=o.useState(null),G=o.useRef(null);o.useRef(null);const[q,F]=o.useState(!1),[k,ee]=o.useState(null),[ce,je]=o.useState(""),[he,Le]=o.useState(""),[Be,V]=o.useState(!1),[ue,ke]=o.useState([]),We=o.useRef(0),Ue=["All","Starred","Forex","Metals","Crypto"],ft=[{symbol:"EURUSD",name:"EUR/USD",bid:0,ask:0,spread:0,category:"Forex",starred:!0},{symbol:"GBPUSD",name:"GBP/USD",bid:0,ask:0,spread:0,category:"Forex",starred:!0},{symbol:"USDJPY",name:"USD/JPY",bid:0,ask:0,spread:0,category:"Forex",starred:!1},{symbol:"USDCHF",name:"USD/CHF",bid:0,ask:0,spread:0,category:"Forex",starred:!1},{symbol:"AUDUSD",name:"AUD/USD",bid:0,ask:0,spread:0,category:"Forex",starred:!1},{symbol:"NZDUSD",name:"NZD/USD",bid:0,ask:0,spread:0,category:"Forex",starred:!1},{symbol:"USDCAD",name:"USD/CAD",bid:0,ask:0,spread:0,category:"Forex",starred:!1},{symbol:"EURGBP",name:"EUR/GBP",bid:0,ask:0,spread:0,category:"Forex",starred:!1},{symbol:"EURJPY",name:"EUR/JPY",bid:0,ask:0,spread:0,category:"Forex",starred:!1},{symbol:"GBPJPY",name:"GBP/JPY",bid:0,ask:0,spread:0,category:"Forex",starred:!1},{symbol:"XAUUSD",name:"Gold",bid:0,ask:0,spread:0,category:"Metals",starred:!0},{symbol:"XAGUSD",name:"Silver",bid:0,ask:0,spread:0,category:"Metals",starred:!1},{symbol:"BTCUSD",name:"Bitcoin",bid:0,ask:0,spread:0,category:"Crypto",starred:!0},{symbol:"ETHUSD",name:"Ethereum",bid:0,ask:0,spread:0,category:"Crypto",starred:!1},{symbol:"BNBUSD",name:"BNB",bid:0,ask:0,spread:0,category:"Crypto",starred:!1},{symbol:"SOLUSD",name:"Solana",bid:0,ask:0,spread:0,category:"Crypto",starred:!1},{symbol:"XRPUSD",name:"XRP",bid:0,ask:0,spread:0,category:"Crypto",starred:!1},{symbol:"ADAUSD",name:"Cardano",bid:0,ask:0,spread:0,category:"Crypto",starred:!1},{symbol:"DOGEUSD",name:"Dogecoin",bid:0,ask:0,spread:0,category:"Crypto",starred:!1},{symbol:"DOTUSD",name:"Polkadot",bid:0,ask:0,spread:0,category:"Crypto",starred:!1},{symbol:"MATICUSD",name:"Polygon",bid:0,ask:0,spread:0,category:"Crypto",starred:!1},{symbol:"LTCUSD",name:"Litecoin",bid:0,ask:0,spread:0,category:"Crypto",starred:!1},{symbol:"AVAXUSD",name:"Avalanche",bid:0,ask:0,spread:0,category:"Crypto",starred:!1},{symbol:"LINKUSD",name:"Chainlink",bid:0,ask:0,spread:0,category:"Crypto",starred:!1}];o.useEffect(()=>{const A=()=>{window.innerWidth>=768&&(sessionStorage.removeItem("viewChecked"),t("/dashboard"))};return window.addEventListener("resize",A),()=>window.removeEventListener("resize",A)},[t]),o.useEffect(()=>{const A=JSON.parse(localStorage.getItem("user")||"{}");if(!A._id){t("/user/login");return}return f(A),U(ft),Nt(A._id),Xe(),()=>{tn.disconnect()}},[]),o.useEffect(()=>{if(j){Q(),ve(),Re(),Qe();const A=setInterval(()=>{Q(),Qe()},5e3);return()=>clearInterval(A)}},[j]);const Ze=["EURUSD","GBPUSD","USDJPY","USDCHF","AUDUSD","NZDUSD","USDCAD","EURGBP","EURJPY","GBPJPY","XAUUSD","XAGUSD","BTCUSD","ETHUSD","BNBUSD","SOLUSD","XRPUSD","ADAUSD","DOGEUSD","DOTUSD","MATICUSD","LTCUSD","AVAXUSD","LINKUSD"];o.useEffect(()=>{const A=Zd.subscribe("mobileTradingApp",(ge,Ee,ze)=>{!ge||Object.keys(ge).length===0||(R(_e=>{const De={..._e};return Object.entries(ge).forEach(([$e,pt])=>{pt&&pt.bid&&(De[$e]=pt)}),De}),U(_e=>_e.map(De=>{const $e=ge[De.symbol];if($e&&$e.bid&&$e.bid>0){const pt=$e.bid,Ks=$e.ask||$e.bid,$s=Math.abs(Ks-pt)||pt*1e-4;return{...De,bid:pt,ask:Ks,spread:$s}}return De})),Object.keys(ge).length>0&&ts(ge))});return Xe(),()=>A()},[]);const Xe=async()=>{try{const A=await tn.getAllPrices(Ze);Object.keys(A).length>0&&(X(!1),R(A),U(ge=>ge.map(Ee=>{const ze=A[Ee.symbol];if(ze&&ze.bid){const _e=ze.bid,De=ze.ask||ze.bid,$e=Math.abs(De-_e)||_e*1e-4;return{...Ee,bid:_e,ask:De,spread:$e}}return Ee})),ts(A))}catch(A){console.error("Live prices error:",A)}},ts=async A=>{if(j)try{const Ee=await(await fetch(`${Us}/trade/check-pending`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prices:A})})).json();Ee.success&&Ee.executedCount>0&&(Ee.executedTrades.forEach(De=>{var $e;me(`${De.orderType} order executed: ${De.symbol} ${De.side} @ ${($e=De.executionPrice)==null?void 0:$e.toFixed(5)}`,"success")}),Q(),ve());const _e=await(await fetch(`${Us}/trade/check-sltp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prices:A})})).json();_e.success&&_e.closedCount>0&&(_e.closedTrades.forEach(De=>{const $e=De.pnl>=0?`+$${De.pnl.toFixed(2)}`:`-$${Math.abs(De.pnl).toFixed(2)}`;me(`${De.reason} hit: ${De.symbol} closed at ${$e}`,De.pnl>=0?"success":"error")}),Q(),Re(),Qe())}catch{}},Nt=async A=>{var ge;try{const ze=await(await fetch(`${Us}/trading-accounts/user/${A}`)).json();if(w(ze.accounts||[]),((ge=ze.accounts)==null?void 0:ge.length)>0)if(r){const _e=ze.accounts.find(De=>De._id===r);S(_e||ze.accounts[0])}else S(ze.accounts[0])}catch{}X(!1)},Q=async()=>{if(j)try{const ge=await(await fetch(`${Us}/trade/open/${j._id}`)).json();ge.success&&m(ge.trades||[])}catch{}},ve=async()=>{if(j)try{const ge=await(await fetch(`${Us}/trade/pending/${j._id}`)).json();ge.success&&N(ge.orders||[])}catch{}},Re=async()=>{if(j)try{const ge=await(await fetch(`${Us}/trade/history/${j._id}?limit=50`)).json();ge.success&&E(ge.trades||[])}catch{}},Qe=async()=>{if(j)try{const A=encodeURIComponent(JSON.stringify(K)),Ee=await(await fetch(`${Us}/trade/summary/${j._id}?prices=${A}`)).json();Ee.success&&Te(Ee.summary)}catch{}},cs=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t("/user/login")},or=A=>{x(A),c(!0)},ss=async()=>{if(!j||!u||z)return;fe(!0);const A=K[u.symbol]||{};if(!A.bid||!A.ask||A.bid<=0||A.ask<=0){me("Market is closed or no price data available","error"),fe(!1);return}try{const Ee=await(await fetch(`${Us}/trade/open`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:b._id,tradingAccountId:j._id,symbol:u.symbol,segment:u.category,side:M,orderType:Z==="market"?"MARKET":"PENDING",quantity:parseFloat(ae),bid:A.bid,ask:A.ask,sl:Y?parseFloat(Y):null,tp:Se?parseFloat(Se):null})})).json();Ee.success?(c(!1),Q(),Qe(),me("Order executed successfully!","success")):me(Ee.message||"Order failed","error")}catch{me("Error executing order","error")}fe(!1)},St=async A=>{var ze,_e;const ge=p.find(De=>De._id===A);if(!ge){me("Trade not found","error");return}const Ee=K[ge.symbol]||{};if(!Ee.bid||!Ee.ask||Ee.bid<=0||Ee.ask<=0){me("Market is closed or no price data. Cannot close trade.","error");return}try{const $e=await(await fetch(`${Us}/trade/close`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tradeId:A,bid:Ee.bid,ask:Ee.ask})})).json();if($e.success){const pt=((ze=$e.realizedPnl)==null?void 0:ze.toFixed(2))||((_e=$e.pnl)==null?void 0:_e.toFixed(2))||"0.00";me(`Trade closed! P/L: $${pt}`,parseFloat(pt)>=0?"success":"error"),Q(),Re(),Qe()}else me($e.message||"Failed to close trade","error")}catch(De){console.error("Close trade error:",De),me("Error closing trade","error")}},me=(A,ge="success",Ee=3e3)=>{const ze=++We.current,_e={id:ze,message:A,type:ge};ke(De=>[...De,_e]),setTimeout(()=>{ke(De=>De.filter($e=>$e.id!==ze))},Ee)},Ct=A=>{var ge,Ee;ee(A),je(((ge=A.sl||A.stopLoss)==null?void 0:ge.toString())||""),Le(((Ee=A.tp||A.takeProfit)==null?void 0:Ee.toString())||""),F(!0)},ys=async()=>{if(!(!k||Be)){V(!0);try{const ge=await(await fetch(`${Us}/trade/modify`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({tradeId:k._id,sl:ce?parseFloat(ce):null,tp:he?parseFloat(he):null})})).json();ge.success?(me("Trade modified successfully","success"),Q(),F(!1)):me(ge.message||"Failed to modify trade","error")}catch{me("Error modifying trade","error")}V(!1)}},ht=async A=>{try{const Ee=await(await fetch(`${Us}/trade/cancel`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tradeId:A})})).json();Ee.success?(me("Pending order cancelled","success"),ve()):me(Ee.message||"Failed to cancel order","error")}catch{me("Error cancelling order","error")}},ka=P.filter(A=>{const ge=A.symbol.toLowerCase().includes(_.toLowerCase())||A.name.toLowerCase().includes(_.toLowerCase()),Ee=I==="All"||I==="Starred"&&A.starred||A.category===I;return ge&&Ee}),cr=[{name:"Dashboard",icon:lr,path:"/dashboard",action:()=>n("home")},{name:"Wallet",icon:nt,path:"/wallet"},{name:"Copy Trade",icon:Jt,path:"/copytrade"},{name:"IB Program",icon:et,path:"/ib"},{name:"Profile",icon:nr,path:"/profile"},{name:"Support",icon:Cr,path:"/support"},{name:"Instructions",icon:Ps,path:"/instructions"}],vt=A=>K[A]||{bid:0,ask:0},Ds=A=>{const ge=vt(A.symbol),Ee=A.side==="BUY"?ge.bid:ge.ask;if(!Ee||Ee<=0)return A._lastPnl||0;const ze=A.side==="BUY"?(Ee-A.openPrice)*A.quantity*(A.contractSize||1e5):(A.openPrice-Ee)*A.quantity*(A.contractSize||1e5);return A._lastPnl=ze,ze},Js=Object.keys(K).length>0&&p.some(A=>{var ge;return((ge=K[A.symbol])==null?void 0:ge.bid)>0})?p.reduce((A,ge)=>A+Ds(ge),0):Pe.floatingPnl||0,dr=p.reduce((A,ge)=>A+(ge.marginUsed||0),0),Mt=(Pe.balance||0)+(Pe.credit||0)+Js,qs=Mt-dr,[Gs,J]=o.useState(!1),se=()=>e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Welcome back,"}),e.jsx("h1",{className:"text-white text-lg font-bold",children:(b==null?void 0:b.firstName)||"Trader"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>t("/profile"),className:"p-2 bg-dark-800 rounded-full",children:e.jsx(nr,{size:20,className:"text-gray-400"})}),e.jsx("button",{className:"p-2 bg-dark-800 rounded-full",children:e.jsx(ob,{size:20,className:"text-gray-400"})})]})]}),j&&e.jsxs("div",{className:"bg-gradient-to-br from-accent-green/20 to-dark-800 rounded-xl p-4 mb-4 border border-accent-green/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 cursor-pointer",onClick:()=>J(!Gs),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-accent-green/30 rounded-full flex items-center justify-center",children:e.jsx(It,{size:16,className:"text-accent-green"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium text-sm",children:j.accountId}),e.jsx("p",{className:"text-gray-400 text-xs",children:j.accountType||"Standard"})]})]}),e.jsx(gr,{size:18,className:`text-gray-400 transition-transform ${Gs?"rotate-90":""}`})]}),Gs&&T.length>1&&e.jsxs("div",{className:"mb-3 border-t border-gray-700 pt-3",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-2",children:"Switch Account"}),e.jsx("div",{className:"space-y-2",children:T.map(A=>e.jsxs("button",{onClick:()=>{S(A),J(!1)},className:`w-full flex items-center justify-between p-2 rounded-lg ${j._id===A._id?"bg-accent-green/20 border border-accent-green/50":"bg-dark-700"}`,children:[e.jsx("span",{className:"text-white text-sm",children:A.accountId}),j._id===A._id&&e.jsx(qe,{size:14,className:"text-accent-green"})]},A._id))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-xs",children:"Balance"}),e.jsxs("p",{className:"text-white text-xl font-bold",children:["$",(Pe.balance||0).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-xs",children:"Equity"}),e.jsxs("p",{className:`text-xl font-bold ${Js>=0?"text-green-500":"text-red-500"}`,children:["$",Mt.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsxs("button",{onClick:()=>t("/wallet"),className:"flex-1 flex items-center justify-center gap-1 py-2 bg-accent-green text-black rounded-lg text-sm font-medium",children:[e.jsx(On,{size:16}),"Deposit"]}),e.jsxs("button",{onClick:()=>t("/wallet"),className:"flex-1 flex items-center justify-center gap-1 py-2 bg-dark-700 text-white rounded-lg text-sm font-medium border border-gray-600",children:[e.jsx(Bn,{size:16}),"Withdraw"]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[e.jsxs("button",{onClick:()=>t("/account"),className:"flex flex-col items-center p-2.5 bg-dark-800 rounded-xl",children:[e.jsx(It,{size:20,className:"text-accent-green mb-1"}),e.jsx("span",{className:"text-white text-[10px]",children:"Account"})]}),e.jsxs("button",{onClick:()=>n("market"),className:"flex flex-col items-center p-2.5 bg-dark-800 rounded-xl",children:[e.jsx(tm,{size:20,className:"text-blue-500 mb-1"}),e.jsx("span",{className:"text-white text-[10px]",children:"Market"})]}),e.jsxs("button",{onClick:()=>n("trade"),className:"flex flex-col items-center p-2.5 bg-dark-800 rounded-xl",children:[e.jsx(mt,{size:20,className:"text-yellow-500 mb-1"}),e.jsx("span",{className:"text-white text-[10px]",children:"Trade"})]}),e.jsxs("button",{onClick:()=>n("chart"),className:"flex flex-col items-center p-2.5 bg-dark-800 rounded-xl",children:[e.jsx($o,{size:20,className:"text-orange-500 mb-1"}),e.jsx("span",{className:"text-white text-[10px]",children:"Chart"})]}),e.jsxs("button",{onClick:()=>t("/wallet"),className:"flex flex-col items-center p-2.5 bg-dark-800 rounded-xl",children:[e.jsx(nt,{size:20,className:"text-green-500 mb-1"}),e.jsx("span",{className:"text-white text-[10px]",children:"Wallet"})]}),e.jsxs("button",{onClick:()=>t("/copytrade"),className:"flex flex-col items-center p-2.5 bg-dark-800 rounded-xl",children:[e.jsx(Jt,{size:20,className:"text-purple-500 mb-1"}),e.jsx("span",{className:"text-white text-[10px]",children:"Copy"})]}),e.jsxs("button",{onClick:()=>t("/ib"),className:"flex flex-col items-center p-2.5 bg-dark-800 rounded-xl",children:[e.jsx(et,{size:20,className:"text-pink-500 mb-1"}),e.jsx("span",{className:"text-white text-[10px]",children:"IB"})]}),e.jsxs("button",{onClick:()=>i(!0),className:"flex flex-col items-center p-2.5 bg-dark-800 rounded-xl",children:[e.jsx(Ti,{size:20,className:"text-gray-400 mb-1"}),e.jsx("span",{className:"text-white text-[10px]",children:"More"})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-white font-semibold",children:"Open Positions"}),e.jsxs("span",{className:"text-accent-green text-sm",children:[p.length," active"]})]}),p.length===0?e.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"No open positions"}):e.jsxs("div",{className:"space-y-2",children:[p.slice(0,3).map(A=>{const ge=Ds(A);return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-700 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:A.symbol}),e.jsxs("p",{className:`text-xs ${A.side==="BUY"?"text-green-500":"text-red-500"}`,children:[A.side,"  ",A.quantity," lots"]})]}),e.jsxs("p",{className:`font-semibold ${ge>=0?"text-green-500":"text-red-500"}`,children:[ge>=0?"+":"","$",ge.toFixed(2)]})]},A._id)}),p.length>3&&e.jsxs("button",{onClick:()=>n("trade"),className:"w-full text-accent-green text-sm py-2",children:["View all ",p.length," positions "]})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-4",children:[e.jsx("h3",{className:"text-white font-semibold mb-3",children:"Market Watch"}),e.jsx("div",{className:"space-y-2",children:P.filter(A=>A.starred).slice(0,4).map(A=>{var Ee;const ge=vt(A.symbol);return e.jsxs("button",{onClick:()=>or(A),className:"w-full flex items-center justify-between p-3 bg-dark-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ol,{size:16,className:"text-yellow-500 fill-yellow-500"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-white font-medium",children:A.symbol}),e.jsx("p",{className:"text-gray-500 text-xs",children:A.name})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-white",children:((Ee=ge.bid)==null?void 0:Ee.toFixed(A.category==="Forex"?5:2))||"-"}),e.jsxs("p",{className:"text-gray-500 text-xs",children:["Spread: ",((ge.ask-ge.bid)*(A.category==="Forex"?1e4:1)).toFixed(1)]})]})]},A.symbol)})})]})]}),Ce=()=>e.jsxs("div",{className:"flex flex-col h-full pb-16",children:[e.jsxs("div",{className:"p-4 bg-dark-800 border-b border-gray-800",children:[e.jsxs("div",{className:"relative mb-3",children:[e.jsx(_t,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:18}),e.jsx("input",{type:"text",placeholder:"Search instruments...",value:_,onChange:A=>L(A.target.value),className:"w-full bg-dark-700 border border-gray-700 rounded-xl pl-10 pr-4 py-3 text-white placeholder-gray-500"})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1",children:Ue.map(A=>e.jsx("button",{onClick:()=>$(A),className:`px-4 py-1.5 rounded-full text-sm whitespace-nowrap ${I===A?"bg-accent-green text-black":"bg-dark-700 text-gray-400"}`,children:A},A))})]}),e.jsx("div",{className:"flex-1 overflow-auto",children:ka.map(A=>{var Ee,ze;const ge=vt(A.symbol);return e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:_e=>{_e.stopPropagation(),U(De=>De.map($e=>$e.symbol===A.symbol?{...$e,starred:!$e.starred}:$e))},className:"p-1",children:e.jsx(ol,{size:18,className:A.starred?"text-yellow-500 fill-yellow-500":"text-gray-600"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-white font-medium",children:A.symbol}),e.jsx("p",{className:"text-gray-500 text-xs",children:A.name})]})]}),e.jsxs("button",{onClick:()=>or(A),className:"flex items-center gap-3 active:bg-dark-700 rounded-lg p-2",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-red-500 text-sm",children:((Ee=ge.bid)==null?void 0:Ee.toFixed(A.category==="Forex"?5:2))||"-"}),e.jsx("p",{className:"text-gray-600 text-xs",children:"Bid"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-green-500 text-sm",children:((ze=ge.ask)==null?void 0:ze.toFixed(A.category==="Forex"?5:2))||"-"}),e.jsx("p",{className:"text-gray-600 text-xs",children:"Ask"})]})]}),e.jsx("button",{onClick:()=>{O.find(De=>De.symbol===A.symbol)||g(De=>[...De,{symbol:A.symbol,name:A.name}]),W(A.symbol),n("chart")},className:"p-2 bg-dark-700 rounded-lg",children:e.jsx($o,{size:18,className:"text-accent-green"})})]},A.symbol)})})]}),bs=()=>e.jsxs("div",{className:"flex flex-col h-full pb-16",children:[e.jsx("div",{className:"bg-dark-900 border-b border-gray-800",children:e.jsxs("div",{className:"divide-y divide-gray-800",children:[e.jsxs("div",{className:"flex justify-between px-4 py-2.5",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Balance"}),e.jsx("span",{className:"text-white text-sm",children:(Pe.balance||0).toFixed(2)})]}),e.jsxs("div",{className:"flex justify-between px-4 py-2.5",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Equity"}),e.jsx("span",{className:`text-sm ${Js>=0?"text-white":"text-red-500"}`,children:Mt.toFixed(2)})]}),e.jsxs("div",{className:"flex justify-between px-4 py-2.5",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Credit"}),e.jsx("span",{className:"text-white text-sm",children:(Pe.credit||0).toFixed(2)})]}),e.jsxs("div",{className:"flex justify-between px-4 py-2.5",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Used Margin"}),e.jsx("span",{className:"text-white text-sm",children:dr.toFixed(2)})]}),e.jsxs("div",{className:"flex justify-between px-4 py-2.5",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Free Margin"}),e.jsx("span",{className:`text-sm ${qs>=0?"text-blue-400":"text-red-500"}`,children:qs.toFixed(2)})]}),e.jsxs("div",{className:"flex justify-between px-4 py-2.5",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Floating PL"}),e.jsx("span",{className:`text-sm ${Js>=0?"text-green-500":"text-red-500"}`,children:Js.toFixed(2)})]})]})}),e.jsx("div",{className:"flex bg-dark-800 border-b border-gray-800",children:["positions","pending","history"].map(A=>e.jsx("button",{onClick:()=>y(A),className:`flex-1 py-3 text-sm font-medium ${H===A?"text-accent-green border-b-2 border-accent-green":"text-gray-500"}`,children:A==="positions"?`Positions (${p.length})`:A==="pending"?`Pending (${h.length})`:"History"},A))}),e.jsxs("div",{className:"flex-1 overflow-auto",children:[H==="positions"&&(p.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[e.jsx(mt,{size:48,className:"mb-2 opacity-50"}),e.jsx("p",{children:"No open positions"})]}):e.jsx("div",{className:"divide-y divide-gray-800",children:p.map(A=>{var De,$e,pt,Ks;const ge=Ds(A),Ee=vt(A.symbol),ze=He===A._id,_e=A.side==="BUY"?Ee.bid:Ee.ask;return e.jsxs("div",{className:"bg-dark-900",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 cursor-pointer",onClick:()=>Oe(ze?null:A._id),children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-white font-medium text-sm",children:A.symbol}),e.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] ${A.side==="BUY"?"bg-blue-500/20 text-blue-500":"bg-red-500/20 text-red-500"}`,children:A.side})]}),e.jsxs("p",{className:"text-gray-500 text-xs",children:[A.quantity," lots @ ",(De=A.openPrice)==null?void 0:De.toFixed(5)]})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:$s=>{$s.stopPropagation(),Ct(A)},className:"p-2 bg-blue-500/20 rounded-lg active:bg-blue-500/30",children:e.jsx(Rc,{size:14,className:"text-blue-400"})}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-semibold text-sm ${ge>=0?"text-green-500":"text-red-500"}`,children:[ge>=0?"+":"","$",ge.toFixed(2)]}),e.jsx("p",{className:"text-gray-500 text-xs",children:(_e==null?void 0:_e.toFixed(5))||"-"})]})]})]}),ze&&e.jsxs("div",{className:"px-4 pb-3 border-t border-gray-800 bg-dark-800",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 py-3 text-xs",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Open Price"}),e.jsx("p",{className:"text-white",children:($e=A.openPrice)==null?void 0:$e.toFixed(5)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Current Price"}),e.jsx("p",{className:"text-white",children:(_e==null?void 0:_e.toFixed(5))||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Volume"}),e.jsxs("p",{className:"text-white",children:[A.quantity," lots"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Margin Used"}),e.jsxs("p",{className:"text-white",children:["$",(A.marginUsed||0).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Swap"}),e.jsxs("p",{className:"text-white",children:["$",(A.swap||0).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Commission"}),e.jsxs("p",{className:"text-white",children:["$",(A.commission||0).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Stop Loss"}),e.jsx("p",{className:A.sl||A.stopLoss?"text-red-500":"text-gray-600",children:((pt=A.sl||A.stopLoss)==null?void 0:pt.toFixed(5))||"Not set"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Take Profit"}),e.jsx("p",{className:A.tp||A.takeProfit?"text-green-500":"text-gray-600",children:((Ks=A.tp||A.takeProfit)==null?void 0:Ks.toFixed(5))||"Not set"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:$s=>{$s.stopPropagation(),Ct(A)},className:"flex-1 py-2.5 bg-blue-500 text-white rounded-lg text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(Rc,{size:14}),"Modify SL/TP"]}),e.jsx("button",{onClick:$s=>{$s.stopPropagation(),St(A._id)},className:"flex-1 py-2.5 bg-red-500 text-white rounded-lg text-sm font-medium",children:"Close Trade"})]})]})]},A._id)})})),H==="pending"&&(h.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[e.jsx(Ht,{size:48,className:"mb-2 opacity-50"}),e.jsx("p",{children:"No pending orders"})]}):e.jsx("div",{className:"divide-y divide-gray-800",children:h.map(A=>{var ze,_e,De;const ge=vt(A.symbol),Ee=A.side==="BUY"?ge.ask:ge.bid;return e.jsxs("div",{className:"p-4 bg-dark-900",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-white font-medium",children:A.symbol}),e.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] ${A.side==="BUY"?"bg-blue-500/20 text-blue-500":"bg-red-500/20 text-red-500"}`,children:A.orderType})]}),e.jsx("span",{className:"text-yellow-500 text-xs font-medium",children:"PENDING"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Entry Price"}),e.jsx("p",{className:"text-white",children:(ze=A.pendingPrice)==null?void 0:ze.toFixed(5)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Current"}),e.jsx("p",{className:"text-white",children:(Ee==null?void 0:Ee.toFixed(5))||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Volume"}),e.jsxs("p",{className:"text-white",children:[A.quantity," lots"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Stop Loss"}),e.jsx("p",{className:A.sl||A.stopLoss?"text-red-500":"text-gray-600",children:((_e=A.sl||A.stopLoss)==null?void 0:_e.toFixed(5))||"Not set"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Take Profit"}),e.jsx("p",{className:A.tp||A.takeProfit?"text-green-500":"text-gray-600",children:((De=A.tp||A.takeProfit)==null?void 0:De.toFixed(5))||"Not set"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Created"}),e.jsx("p",{className:"text-white",children:new Date(A.createdAt).toLocaleDateString()})]})]}),e.jsxs("button",{onClick:()=>ht(A._id),className:"w-full py-2 bg-red-500/20 text-red-500 rounded-lg text-sm font-medium flex items-center justify-center gap-2",children:[e.jsx(Lt,{size:14}),"Cancel Order"]})]},A._id)})})),H==="history"&&(C.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[e.jsx(Ps,{size:48,className:"mb-2 opacity-50"}),e.jsx("p",{children:"No trade history"})]}):e.jsx("div",{className:"divide-y divide-gray-800",children:C.map(A=>{var ge;return e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-white font-medium",children:A.symbol}),e.jsx("span",{className:`text-xs ${A.side==="BUY"?"text-green-500":"text-red-500"}`,children:A.side}),A.closedBy==="ADMIN"&&e.jsx("span",{className:"text-xs bg-yellow-500/20 text-yellow-500 px-1.5 py-0.5 rounded",children:"Admin Close"})]}),e.jsxs("span",{className:`font-semibold ${A.realizedPnl>=0?"text-green-500":"text-red-500"}`,children:[A.realizedPnl>=0?"+":"","$",(ge=A.realizedPnl)==null?void 0:ge.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:[A.quantity," lots"]}),e.jsx("span",{children:new Date(A.closedAt).toLocaleDateString()})]})]},A._id)})}))]})]}),Is=A=>({EURUSD:"OANDA:EURUSD",GBPUSD:"OANDA:GBPUSD",USDJPY:"OANDA:USDJPY",USDCHF:"OANDA:USDCHF",AUDUSD:"OANDA:AUDUSD",NZDUSD:"OANDA:NZDUSD",USDCAD:"OANDA:USDCAD",EURGBP:"OANDA:EURGBP",EURJPY:"OANDA:EURJPY",GBPJPY:"OANDA:GBPJPY",XAUUSD:"OANDA:XAUUSD",XAGUSD:"OANDA:XAGUSD",BTCUSD:"COINBASE:BTCUSD",ETHUSD:"COINBASE:ETHUSD",LTCUSD:"COINBASE:LTCUSD",XRPUSD:"BITSTAMP:XRPUSD",BNBUSD:"BINANCE:BNBUSDT",SOLUSD:"COINBASE:SOLUSD",ADAUSD:"COINBASE:ADAUSD",DOGEUSD:"BINANCE:DOGEUSDT",DOTUSD:"COINBASE:DOTUSD",MATICUSD:"COINBASE:MATICUSD",AVAXUSD:"COINBASE:AVAXUSD",LINKUSD:"COINBASE:LINKUSD"})[A]||`OANDA:${A}`,Tt=()=>{var _e,De;const A=P.find($e=>$e.symbol===v),ge=(A==null?void 0:A.category)==="Forex",Ee=ge?5:2,ze=ge?1e4:1;return e.jsxs("div",{className:"flex flex-col h-screen",children:[e.jsxs("div",{className:"flex items-center bg-dark-800 border-b border-gray-800 overflow-x-auto shrink-0",style:{height:"40px"},children:[O.map($e=>e.jsxs("button",{onClick:()=>W($e.symbol),className:`flex items-center gap-2 px-3 py-2 text-xs whitespace-nowrap border-r border-gray-800 ${v===$e.symbol?"bg-dark-700 text-white":"text-gray-500"}`,children:[$e.symbol,O.length>1&&e.jsx(ye,{size:12,onClick:pt=>{pt.stopPropagation(),g(Ks=>Ks.filter($s=>$s.symbol!==$e.symbol)),v===$e.symbol&&O.length>1&&W(O[0].symbol)},className:"hover:text-red-500"})]},$e.symbol)),e.jsx("button",{onClick:()=>n("market"),className:"px-3 py-2 text-gray-500 hover:text-white",children:e.jsx(st,{size:16})})]}),e.jsx("div",{className:"flex-1 bg-[#0d0d0d] relative min-h-0",ref:G,children:e.jsx("iframe",{src:`https://s.tradingview.com/widgetembed/?frameElementId=tradingview_mobile&symbol=${Is(v)}&interval=5&hidesidetoolbar=1&hidetoptoolbar=0&symboledit=1&saveimage=0&toolbarbg=0d0d0d&studies=[]&theme=dark&style=1&timezone=Etc%2FUTC&withdateranges=0&showpopupbutton=0&studies_overrides={}&overrides={}&enabled_features=[]&disabled_features=["left_toolbar","header_fullscreen_button"]&locale=en&utm_source=localhost&utm_medium=widget_new&utm_campaign=chart`,style:{width:"100%",height:"100%",border:"none"},allowFullScreen:!0,title:"TradingView Chart"},v)}),e.jsxs("div",{className:"bg-dark-800 border-t border-gray-800 shrink-0",style:{paddingBottom:"64px"},children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-500 text-[10px]",children:"Bid"}),e.jsx("p",{className:"text-red-500 font-semibold text-sm",children:((_e=vt(v).bid)==null?void 0:_e.toFixed(Ee))||"-"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-500 text-[10px]",children:"Spread"}),e.jsx("p",{className:"text-white text-xs",children:((vt(v).ask-vt(v).bid)*ze).toFixed(1)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-500 text-[10px]",children:"Ask"}),e.jsx("p",{className:"text-green-500 font-semibold text-sm",children:((De=vt(v).ask)==null?void 0:De.toFixed(Ee))||"-"})]})]}),e.jsxs("div",{className:"flex gap-2 px-3 pb-2",children:[e.jsx("button",{onClick:()=>{const $e=P.find(pt=>pt.symbol===v)||{symbol:v,category:"Forex"};x($e),te("SELL"),c(!0)},className:"flex-1 py-3 bg-red-500 text-white font-semibold rounded-xl",children:"SELL"}),e.jsx("button",{onClick:()=>{const $e=P.find(pt=>pt.symbol===v)||{symbol:v,category:"Forex"};x($e),te("BUY"),c(!0)},className:"flex-1 py-3 bg-blue-500 text-white font-semibold rounded-xl",children:"BUY"})]})]})]})};return le?e.jsx("div",{className:"min-h-screen bg-dark-900 flex items-center justify-center",children:e.jsx(Ge,{size:32,className:"text-accent-green animate-spin"})}):e.jsxs("div",{className:"min-h-screen bg-dark-900 flex flex-col",children:[e.jsxs("main",{className:"flex-1 overflow-hidden",children:[a==="home"&&se(),a==="market"&&Ce(),a==="trade"&&bs(),a==="chart"&&Tt()]}),e.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-dark-800 border-t border-gray-800 z-40 safe-area-pb",children:e.jsx("div",{className:"flex items-center justify-around h-14",children:[{id:"home",icon:lr,label:"Home"},{id:"market",icon:tm,label:"Market"},{id:"trade",icon:mt,label:"Trade"},{id:"chart",icon:$o,label:"Chart"},{id:"more",icon:Ti,label:"More"}].map(A=>e.jsxs("button",{onClick:()=>{A.id==="more"?i(!0):n(A.id)},className:`flex flex-col items-center justify-center flex-1 h-full ${a===A.id?"text-accent-green":"text-gray-500"}`,children:[e.jsx(A.icon,{size:20}),e.jsx("span",{className:"text-[10px] mt-0.5",children:A.label})]},A.id))})}),d&&u&&e.jsxs("div",{className:"fixed inset-0 z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:()=>c(!1)}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-dark-800 rounded-t-3xl animate-slide-up max-h-[80vh] overflow-auto",children:[e.jsx("div",{className:"flex justify-center pt-3 pb-2",children:e.jsx("div",{className:"w-10 h-1 bg-gray-600 rounded-full"})}),e.jsxs("div",{className:"px-4 pb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:u.symbol}),e.jsx("p",{className:"text-gray-500 text-sm",children:u.name})]}),e.jsx("button",{onClick:()=>c(!1),className:"p-2",children:e.jsx(ye,{size:20,className:"text-gray-400"})})]}),e.jsxs("div",{className:"flex items-center justify-between bg-dark-700 rounded-lg px-4 py-2 mb-4",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Leverage"}),e.jsx("span",{className:"text-yellow-500 font-bold",children:(j==null?void 0:j.leverage)||"1:100"})]}),e.jsxs("div",{className:"flex gap-3 mb-4",children:[e.jsxs("button",{onClick:()=>{te("SELL"),ss()},disabled:z,className:"flex-1 py-3 bg-red-600 rounded-xl disabled:opacity-50",children:[e.jsx("p",{className:"text-white text-xs",children:"SELL"}),e.jsx("p",{className:"text-white text-lg font-bold",children:((Ft=vt(u.symbol).bid)==null?void 0:Ft.toFixed(u.category==="Forex"?5:2))||"-"})]}),e.jsxs("button",{onClick:()=>{te("BUY"),ss()},disabled:z,className:"flex-1 py-3 bg-blue-600 rounded-xl disabled:opacity-50",children:[e.jsx("p",{className:"text-white text-xs",children:"BUY"}),e.jsx("p",{className:"text-white text-lg font-bold",children:((gl=vt(u.symbol).ask)==null?void 0:gl.toFixed(u.category==="Forex"?5:2))||"-"})]})]}),e.jsxs("div",{className:"flex items-center justify-center mb-4 text-xs",children:[e.jsx("span",{className:"text-gray-500",children:"Spread: "}),e.jsxs("span",{className:"text-white ml-1",children:[((vt(u.symbol).ask-vt(u.symbol).bid)*(u.category==="Forex"?1e4:1)).toFixed(1)," pips"]})]}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("button",{onClick:()=>B("market"),className:`flex-1 py-2 rounded-lg text-sm font-medium ${Z==="market"?"bg-accent-green text-black":"bg-dark-700 text-gray-400"}`,children:"Market"}),e.jsx("button",{onClick:()=>B("pending"),className:`flex-1 py-2 rounded-lg text-sm font-medium ${Z==="pending"?"bg-accent-green text-black":"bg-dark-700 text-gray-400"}`,children:"Pending"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Volume (Lots)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>pe(A=>Math.max(.01,parseFloat(A)-.01).toFixed(2)),className:"p-3 bg-dark-700 rounded-lg",children:e.jsx(en,{size:18,className:"text-white"})}),e.jsx("input",{type:"text",value:ae,onChange:A=>pe(A.target.value),className:"flex-1 bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white text-center"}),e.jsx("button",{onClick:()=>pe(A=>(parseFloat(A)+.01).toFixed(2)),className:"p-3 bg-dark-700 rounded-lg",children:e.jsx(st,{size:18,className:"text-white"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Stop Loss"}),e.jsx("input",{type:"text",value:Y,onChange:A=>re(A.target.value),placeholder:"Optional",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Take Profit"}),e.jsx("input",{type:"text",value:Se,onChange:A=>Ie(A.target.value),placeholder:"Optional",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{te("SELL"),ss()},disabled:z,className:"flex-1 py-4 bg-red-500 text-white font-semibold rounded-xl disabled:opacity-50",children:z?"Executing...":"SELL"}),e.jsx("button",{onClick:()=>{te("BUY"),ss()},disabled:z,className:"flex-1 py-4 bg-blue-500 text-white font-semibold rounded-xl disabled:opacity-50",children:z?"Executing...":"BUY"})]})]})]})]}),l&&e.jsxs("div",{className:"fixed inset-0 z-50",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:()=>i(!1)}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-dark-800 rounded-t-3xl animate-slide-up",children:[e.jsx("div",{className:"flex justify-center pt-3 pb-2",children:e.jsx("div",{className:"w-10 h-1 bg-gray-600 rounded-full"})}),e.jsxs("div",{className:"px-4 pb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"More"}),e.jsx("button",{onClick:()=>i(!1),className:"p-2",children:e.jsx(ye,{size:20,className:"text-gray-400"})})]}),e.jsxs("div",{className:"space-y-1",children:[cr.map(A=>e.jsxs("button",{onClick:()=>{A.action?A.action():t(A.path),i(!1)},className:"w-full flex items-center justify-between p-4 rounded-xl hover:bg-dark-700",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-dark-700 rounded-full flex items-center justify-center",children:e.jsx(A.icon,{size:20,className:"text-accent-green"})}),e.jsx("span",{className:"text-white font-medium",children:A.name})]}),e.jsx(gr,{size:20,className:"text-gray-500"})]},A.name)),e.jsx("button",{onClick:cs,className:"w-full flex items-center justify-between p-4 rounded-xl hover:bg-red-500/10 mt-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-red-500/20 rounded-full flex items-center justify-center",children:e.jsx(fs,{size:20,className:"text-red-500"})}),e.jsx("span",{className:"text-red-500 font-medium",children:"Log Out"})]})})]})]})]})]}),q&&k&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end justify-center",onClick:()=>F(!1),children:e.jsxs("div",{className:"w-full bg-[#1c1c1e] rounded-t-3xl overflow-hidden animate-slide-up",onClick:A=>A.stopPropagation(),children:[e.jsx("div",{className:"flex justify-center pt-3 pb-2",children:e.jsx("div",{className:"w-10 h-1 bg-gray-600 rounded-full"})}),e.jsxs("div",{className:"px-4 py-3 border-b border-gray-700/50 text-center",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Modify Trade"}),e.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:[k.symbol,"  ",k.side,"  ",k.quantity," lots"]})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Stop Loss"}),e.jsx("input",{type:"number",value:ce,onChange:A=>je(A.target.value),placeholder:"Enter stop loss price",step:"0.00001",className:"w-full bg-[#2c2c2e] border border-gray-600 rounded-xl px-4 py-3 text-white text-base focus:outline-none focus:border-red-500 transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Take Profit"}),e.jsx("input",{type:"number",value:he,onChange:A=>Le(A.target.value),placeholder:"Enter take profit price",step:"0.00001",className:"w-full bg-[#2c2c2e] border border-gray-600 rounded-xl px-4 py-3 text-white text-base focus:outline-none focus:border-green-500 transition-colors"})]})]}),e.jsxs("div",{className:"border-t border-gray-700/50",children:[e.jsx("button",{onClick:ys,disabled:Be,className:"w-full py-4 text-blue-500 font-semibold text-lg border-b border-gray-700/50 disabled:opacity-50",children:Be?"Saving...":"Save Changes"}),e.jsx("button",{onClick:()=>F(!1),className:"w-full py-4 text-gray-400 font-medium text-lg",children:"Cancel"})]})]})}),e.jsx("div",{className:"fixed top-0 left-0 right-0 z-[100] pointer-events-none",children:ue.map((A,ge)=>e.jsx("div",{className:"pointer-events-auto mx-4 mt-4 animate-slide-down",style:{marginTop:`${ge*60+16}px`},children:e.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 rounded-2xl backdrop-blur-xl shadow-lg ${A.type==="success"?"bg-green-500/90":A.type==="error"?"bg-red-500/90":"bg-gray-800/90"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${A.type==="success","bg-white/20"}`,children:A.type==="success"?e.jsx(qe,{size:18,className:"text-white"}):e.jsx(ye,{size:18,className:"text-white"})}),e.jsx("p",{className:"text-white font-medium text-sm flex-1",children:A.message})]})},A.id))})]})},Zs="http://localhost:5001/api",$j=()=>{var ss,St,me,Ct,ys,ht,ka,cr,vt,Ds,Sa,Js,dr,Mt,qs,Gs;const t=ut(),[s]=Ki(),[r,a]=o.useState(!1),[n,l]=o.useState(""),[i,d]=o.useState("Account"),[c,u]=o.useState(!1),[x,b]=o.useState("Real"),[f,T]=o.useState([]),[w,j]=o.useState([]),[S,p]=o.useState([]),[m,h]=o.useState(!1),[N,C]=o.useState(0),[E,P]=o.useState(!0),[U,K]=o.useState(!1),[R,le]=o.useState(!1),[X,_]=o.useState(!1),[L,I]=o.useState(!1),[$,H]=o.useState(!1),[y,O]=o.useState(null),[g,v]=o.useState(!1),[W,Z]=o.useState(!1),[B,M]=o.useState(null),[te,ae]=o.useState(()=>{const J=localStorage.getItem("pinSecurityEnabled");return J!==null?JSON.parse(J):!0}),[pe,Y]=o.useState(null),[re,Se]=o.useState(null),[Ie,z]=o.useState(["","","",""]),[fe,Pe]=o.useState(["","","",""]),[Te,He]=o.useState(["","","",""]),[Oe,G]=o.useState(""),[q,F]=o.useState(["","","",""]),[k,ee]=o.useState(""),[ce,je]=o.useState(""),[he,Le]=o.useState(window.innerWidth<768);o.useEffect(()=>{const J=()=>Le(window.innerWidth<768);return window.addEventListener("resize",J),()=>window.removeEventListener("resize",J)},[]);const Be=m?["Real","Demo","Challenge","Archived"]:["Real","Demo","Archived"],V=JSON.parse(localStorage.getItem("user")||"{}"),ue=[{name:"Dashboard",icon:As,path:"/dashboard"},{name:"Account",icon:It,path:"/account"},{name:"Wallet",icon:nt,path:"/wallet"},{name:"IB",icon:et,path:"/ib"},{name:"Copytrade",icon:Jt,path:"/copytrade"},{name:"Profile",icon:nr,path:"/profile"},{name:"Support",icon:Cr,path:"/support"},{name:"Instructions",icon:Ps,path:"/instructions"}];o.useEffect(()=>{const J=s.get("failed"),se=s.get("reason");J==="true"&&se&&(l(decodeURIComponent(se)),a(!0),b("Challenge"),t("/account",{replace:!0})),ft(),ke(),V._id?(Ze(),Ue(),We()):P(!1)},[V._id]);const ke=async()=>{try{const se=await(await fetch(`${Zs}/prop/status`)).json();se.success&&h(se.enabled)}catch(J){console.error("Error fetching challenge status:",J)}},We=async()=>{try{const se=await(await fetch(`${Zs}/prop/my-accounts/${V._id}`)).json();se.success&&p(se.accounts||[])}catch(J){console.error("Error fetching challenge accounts:",J)}},Ue=async()=>{var J;try{const Ce=await(await fetch(`${Zs}/wallet/${V._id}`)).json();C(((J=Ce.wallet)==null?void 0:J.balance)||0)}catch(se){console.error("Error fetching wallet:",se)}},ft=async()=>{try{const se=await(await fetch(`${Zs}/account-types`)).json();T(se.accountTypes||[])}catch(J){console.error("Error fetching account types:",J)}},Ze=async()=>{P(!0);try{const se=await(await fetch(`${Zs}/trading-accounts/user/${V._id}`)).json();j(se.accounts||[])}catch(J){console.error("Error fetching accounts:",J)}P(!1)},Xe=(J,se,Ce,bs,Is="pin")=>{if(se.length>1&&(se=se.slice(-1)),se&&!/^\d$/.test(se))return;const Tt=[...Ce];if(Tt[J]=se,bs(Tt),se&&J<3){const Ft=document.getElementById(`${Is}-${J+1}`);Ft&&(Ft.focus(),Ft.select())}},ts=(J,se,Ce,bs,Is="pin")=>{if(J.key==="Backspace"){if(!Ce[se]&&se>0){const Tt=document.getElementById(`${Is}-${se-1}`);if(Tt){const Ft=[...Ce];Ft[se-1]="",bs(Ft),Tt.focus()}}}else if(J.key==="ArrowLeft"&&se>0){const Tt=document.getElementById(`${Is}-${se-1}`);Tt&&Tt.focus()}else if(J.key==="ArrowRight"&&se<3){const Tt=document.getElementById(`${Is}-${se+1}`);Tt&&Tt.focus()}else J.key==="Enter"&&Ce.every(Ft=>Ft!=="")&&(U?Q():X?Re():L?Qe():R&&ve())},Nt=J=>{J.target.select()},Q=async()=>{if(!pe){ee("Please select an account type");return}const J=Ie.join("");if(J.length!==4){ee("Please enter a 4-digit PIN");return}if(!V._id){ee("Please login to create an account");return}try{const se=await fetch(`${Zs}/trading-accounts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:V._id,accountTypeId:pe._id,pin:J})}),Ce=await se.json();se.ok?(je("Account created successfully!"),K(!1),z(["","","",""]),Y(null),Ze(),setTimeout(()=>je(""),3e3)):ee(Ce.message||"Failed to create account")}catch(se){console.error("Account creation error:",se),ee("Error creating account. Please try again.")}},ve=async()=>{const J=Te.join(""),se=fe.join("");if(J.length!==4||se.length!==4){ee("Please enter valid 4-digit PINs");return}try{const Ce=await fetch(`${Zs}/trading-accounts/${re._id}/change-pin`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPin:J,newPin:se})}),bs=await Ce.json();Ce.ok?(je("PIN changed successfully!"),le(!1),He(["","","",""]),Pe(["","","",""]),Se(null),setTimeout(()=>je(""),3e3)):ee(bs.message)}catch{ee("Error changing PIN")}},Re=async()=>{const J=q.join("");if(!Oe||parseFloat(Oe)<=0){ee("Please enter a valid amount");return}if(parseFloat(Oe)>N){ee("Insufficient wallet balance");return}if(te&&J.length!==4){ee("Please enter your 4-digit PIN");return}try{const se=await fetch(`${Zs}/trading-accounts/${re._id}/transfer`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:V._id,amount:parseFloat(Oe),pin:te?J:"0000",direction:"deposit",skipPinVerification:!te})}),Ce=await se.json();se.ok?(je("Funds transferred successfully!"),_(!1),G(""),F(["","","",""]),Se(null),Ze(),Ue(),setTimeout(()=>je(""),3e3)):ee(Ce.message||"Transfer failed")}catch(se){console.error("Transfer error:",se),ee("Error transferring funds")}},Qe=async()=>{const J=q.join("");if(!Oe||parseFloat(Oe)<=0){ee("Please enter a valid amount");return}if(parseFloat(Oe)>re.balance){ee("Insufficient account balance");return}if(te&&J.length!==4){ee("Please enter your 4-digit PIN");return}try{const se=await fetch(`${Zs}/trading-accounts/${re._id}/transfer`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:V._id,amount:parseFloat(Oe),pin:te?J:"0000",direction:"withdraw",skipPinVerification:!te})}),Ce=await se.json();se.ok?(je("Funds withdrawn to main wallet!"),I(!1),G(""),F(["","","",""]),Se(null),Ze(),Ue(),setTimeout(()=>je(""),3e3)):ee(Ce.message||"Withdrawal failed")}catch(se){console.error("Withdraw error:",se),ee("Error withdrawing funds")}},cs=async()=>{const J=q.join("");if(!Oe||parseFloat(Oe)<=0){ee("Please enter a valid amount");return}if(!y){ee("Please select a target account");return}if(parseFloat(Oe)>re.balance){ee("Insufficient account balance");return}if(te&&J.length!==4){ee("Please enter your 4-digit PIN");return}try{const se=await fetch(`${Zs}/trading-accounts/account-transfer`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:V._id,fromAccountId:re._id,toAccountId:y._id,amount:parseFloat(Oe),pin:te?J:"0000",skipPinVerification:!te})}),Ce=await se.json();se.ok?(je(`$${Oe} transferred from ${re.accountId} to ${y.accountId}!`),H(!1),G(""),F(["","","",""]),Se(null),O(null),Ze(),setTimeout(()=>je(""),3e3)):ee(Ce.message||"Transfer failed")}catch(se){console.error("Account transfer error:",se),ee("Error transferring funds")}},or=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t("/user/login")};return e.jsxs("div",{className:"min-h-screen bg-dark-900 flex flex-col md:flex-row",children:[he&&e.jsxs("header",{className:"fixed top-0 left-0 right-0 z-40 bg-dark-800 border-b border-gray-800 px-4 py-3 flex items-center gap-4",children:[e.jsx("button",{onClick:()=>t("/mobile"),className:"p-2 -ml-2 hover:bg-dark-700 rounded-lg",children:e.jsx(ea,{size:22,className:"text-white"})}),e.jsx("h1",{className:"text-white font-semibold text-lg flex-1",children:"Account"}),e.jsx("button",{onClick:()=>t("/mobile"),className:"p-2 hover:bg-dark-700 rounded-lg",children:e.jsx(lr,{size:20,className:"text-gray-400"})})]}),!he&&e.jsxs("aside",{className:`${c?"w-48":"w-16"} bg-dark-900 border-r border-gray-800 flex flex-col transition-all duration-300 ease-in-out`,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),children:[e.jsx("div",{className:"p-4 flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 bg-accent-green rounded flex items-center justify-center",children:e.jsx("span",{className:"text-black font-bold text-sm",children:"X"})})}),e.jsx("nav",{className:"flex-1 px-2",children:ue.map(J=>e.jsxs("button",{onClick:()=>t(J.path),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-colors ${i===J.name?"bg-accent-green text-black":"text-gray-400 hover:text-white hover:bg-dark-700"}`,title:c?"":J.name,children:[e.jsx(J.icon,{size:18,className:"flex-shrink-0"}),c&&e.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:J.name})]},J.name))}),e.jsx("div",{className:"p-2 border-t border-gray-800",children:e.jsxs("button",{onClick:or,className:"w-full flex items-center gap-3 px-3 py-2.5 text-gray-400 hover:text-white transition-colors rounded-lg",title:c?"":"Log Out",children:[e.jsx(fs,{size:18,className:"flex-shrink-0"}),c&&e.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:"Log Out"})]})})]}),e.jsx("main",{className:`flex-1 overflow-auto ${he?"pt-14":""}`,children:e.jsxs("div",{className:`${he?"p-4":"p-6"}`,children:[ce&&e.jsxs("div",{className:`mb-4 p-3 bg-green-500/20 border border-green-500/50 rounded-lg text-green-500 flex items-center gap-2 ${he?"text-sm":""}`,children:[e.jsx(qe,{size:18})," ",ce]}),k&&e.jsx("div",{className:`mb-4 p-3 bg-red-500/20 border border-red-500/50 rounded-lg text-red-500 ${he?"text-sm":""}`,children:k}),e.jsxs("div",{className:`flex ${he?"flex-col gap-3":"items-center justify-between"} mb-4`,children:[!he&&e.jsx("h1",{className:"text-2xl font-semibold text-white",children:"My Accounts"}),e.jsxs("div",{className:`flex items-center ${he?"justify-between":"gap-3"}`,children:[e.jsx("button",{onClick:Ze,className:"p-2 hover:bg-dark-700 rounded-lg transition-colors",children:e.jsx(Ge,{size:18,className:`text-gray-400 ${E?"animate-spin":""}`})}),e.jsxs("button",{onClick:()=>{ft(),K(!0)},className:`flex items-center gap-2 bg-accent-green text-black font-medium ${he?"px-3 py-2 text-sm":"px-4 py-2.5"} rounded-lg hover:bg-accent-green/90 transition-colors`,children:[e.jsx(st,{size:he?16:18})," ",he?"New Account":"Open Account"]})]})]}),e.jsx("div",{className:`flex items-center ${he?"gap-1 overflow-x-auto pb-2":"gap-1"} mb-4`,children:Be.map(J=>e.jsx("button",{onClick:()=>b(J),className:`${he?"px-3 py-1.5 text-xs whitespace-nowrap":"px-4 py-2 text-sm"} rounded-lg font-medium transition-colors ${x===J?"bg-dark-700 text-white border border-gray-600":"text-gray-400 hover:text-white hover:bg-dark-800"}`,children:J},J))}),E?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx(Ge,{size:24,className:"text-gray-500 animate-spin"})}):x==="Challenge"?e.jsxs("div",{children:[e.jsx("div",{className:"mb-6 bg-gradient-to-r from-yellow-500/20 to-orange-500/20 border border-yellow-500/30 rounded-xl p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 bg-yellow-500/20 rounded-xl flex items-center justify-center",children:e.jsx(At,{size:28,className:"text-yellow-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Prop Trading Challenge"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Get funded up to $200,000. Keep up to 80% of profits."})]})]}),e.jsxs("button",{onClick:()=>t("/buy-challenge"),className:"flex items-center gap-2 bg-yellow-500 text-black font-bold px-6 py-3 rounded-xl hover:bg-yellow-400 transition-colors",children:[e.jsx(At,{size:18})," Buy Challenge"]})]})}),S.length===0?e.jsxs("div",{className:`border border-dashed border-gray-700 rounded-xl ${he?"p-8":"p-16"} text-center`,children:[e.jsx("div",{className:`${he?"w-12 h-12":"w-14 h-14"} bg-dark-700 rounded-full flex items-center justify-center mx-auto mb-4`,children:e.jsx(At,{size:he?20:24,className:"text-gray-500"})}),e.jsx("h3",{className:`text-white font-medium ${he?"text-base":"text-lg"} mb-2`,children:"No challenge accounts yet"}),e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"Buy a challenge to start your prop trading journey"}),e.jsxs("button",{onClick:()=>t("/buy-challenge"),className:"inline-flex items-center gap-2 text-yellow-500 hover:text-yellow-400 font-medium transition-colors text-sm",children:["Buy your first challenge ",e.jsx(yn,{size:16})]})]}):e.jsx("div",{className:`grid ${he?"grid-cols-1 gap-3":"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"}`,children:S.map(J=>{var se;return e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-800",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${J.status==="FUNDED"?"bg-purple-500/20":J.status==="PASSED"?"bg-green-500/20":J.status==="FAILED"?"bg-red-500/20":"bg-yellow-500/20"}`,children:e.jsx(At,{size:20,className:J.status==="FUNDED"?"text-purple-500":J.status==="PASSED"?"text-green-500":J.status==="FAILED"?"text-red-500":"text-yellow-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:J.accountId}),e.jsxs("p",{className:"text-gray-500 text-xs uppercase",children:[((se=J.challengeId)==null?void 0:se.name)||"Challenge","  Phase ",J.currentPhase,"/",J.totalPhases]})]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${J.status==="FUNDED"?"bg-purple-500/20 text-purple-500":J.status==="PASSED"?"bg-green-500/20 text-green-500":J.status==="FAILED"?"bg-red-500/20 text-red-500":J.status==="EXPIRED"?"bg-orange-500/20 text-orange-500":"bg-blue-500/20 text-blue-500"}`,children:J.status})]})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsxs("p",{className:"text-white text-2xl font-bold",children:["$",(J.currentBalance||0).toLocaleString()]}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Balance"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"bg-dark-700 rounded-lg p-2 text-center",children:[e.jsx("p",{className:"text-gray-400 text-xs",children:"Profit"}),e.jsxs("p",{className:`font-medium ${J.currentProfitPercent>=0?"text-green-500":"text-red-500"}`,children:[J.currentProfitPercent>=0?"+":"",(J.currentProfitPercent||0).toFixed(2),"%"]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-2 text-center",children:[e.jsx("p",{className:"text-gray-400 text-xs",children:"Daily DD"}),e.jsxs("p",{className:"text-red-500 font-medium",children:[(J.currentDailyDrawdownPercent||0).toFixed(2),"%"]})]})]})]}),e.jsx("div",{className:"flex border-t border-gray-800",children:J.status==="ACTIVE"||J.status==="FUNDED"?e.jsxs("button",{onClick:()=>{M(J),Z(!0)},className:"flex-1 flex items-center justify-center gap-2 py-3 bg-yellow-500 text-black font-medium hover:bg-yellow-400 transition-colors",children:[e.jsx(yn,{size:16})," Start Trading"]}):e.jsx("div",{className:"flex-1 flex items-center justify-center gap-2 py-3 text-gray-500 bg-dark-700",children:J.status==="PASSED"?"Awaiting Funded Account":J.status})})]},J._id)})})]}):w.length===0?e.jsxs("div",{className:"border border-dashed border-gray-700 rounded-xl p-16 text-center",children:[e.jsx("div",{className:"w-14 h-14 bg-dark-700 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(mt,{size:24,className:"text-gray-500"})}),e.jsxs("h3",{className:"text-white font-medium text-lg mb-2",children:["No ",x.toLowerCase()," accounts yet"]}),e.jsxs("p",{className:"text-gray-500 text-sm mb-6",children:["Open your first ",x.toLowerCase()," trading account to start trading"]}),e.jsxs("button",{onClick:()=>{ft(),K(!0)},className:"inline-flex items-center gap-2 text-accent-green hover:text-accent-green/80 font-medium transition-colors",children:["Open your first ",x.toLowerCase()," account ",e.jsx(yn,{size:18})]})]}):e.jsx("div",{className:`grid ${he?"grid-cols-1 gap-3":"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"}`,children:w.filter(J=>{var se,Ce;return x==="Real"?((se=J.accountTypeId)==null?void 0:se.category)!=="Demo"&&J.status==="Active":x==="Demo"?((Ce=J.accountTypeId)==null?void 0:Ce.category)==="Demo":x==="Archived"?J.status!=="Active":!0}).map(J=>{var se;return e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:`${he?"p-3":"p-4"} border-b border-gray-800`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`${he?"w-8 h-8":"w-10 h-10"} bg-blue-500/20 rounded-lg flex items-center justify-center`,children:e.jsx(mt,{size:he?16:20,className:"text-blue-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-white font-semibold ${he?"text-sm":""}`,children:J.accountId}),e.jsx("p",{className:"text-gray-500 text-xs uppercase",children:((se=J.accountTypeId)==null?void 0:se.name)||"STANDARD"})]})]}),e.jsx("button",{className:"text-gray-500 hover:text-white p-1",children:e.jsx(Ti,{size:18})})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${J.status==="Active"?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:`text-xs ${J.status==="Active"?"text-green-500":"text-red-500"}`,children:J.status==="Active"?"Live":J.status})]})]}),e.jsxs("div",{className:`${he?"p-3":"p-4"} text-center`,children:[e.jsxs("p",{className:`text-white font-bold ${he?"text-2xl":"text-3xl"}`,children:["$",J.balance.toLocaleString()]}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Balance"})]}),e.jsxs("div",{className:"flex border-t border-gray-800",children:[e.jsxs("button",{onClick:()=>t(he?`/mobile?account=${J._id}`:`/trade/${J._id}`),className:`flex-1 flex items-center justify-center gap-1 ${he?"py-2 text-xs":"py-3"} bg-accent-green text-black font-medium hover:bg-accent-green/90 transition-colors`,children:[e.jsx(yn,{size:he?12:16})," Trade"]}),e.jsxs("button",{onClick:()=>{Se(J),_(!0)},className:`flex-1 flex items-center justify-center gap-1 ${he?"py-2 text-xs":"py-3"} text-gray-400 hover:text-white hover:bg-dark-700 transition-colors border-l border-gray-800`,children:[e.jsx(st,{size:he?12:16})," Deposit"]}),e.jsxs("button",{onClick:()=>{Se(J),I(!0)},className:`flex-1 flex items-center justify-center gap-1 ${he?"py-2 text-xs":"py-3"} text-gray-400 hover:text-white hover:bg-dark-700 transition-colors border-l border-gray-800`,children:[e.jsx(en,{size:he?12:16})," Withdraw"]}),e.jsxs("button",{onClick:()=>{Se(J),H(!0)},className:`flex-1 flex items-center justify-center gap-1 ${he?"py-2 text-xs":"py-3"} text-blue-400 hover:text-blue-300 hover:bg-dark-700 transition-colors border-l border-gray-800`,children:[e.jsx(Jt,{size:he?12:16})," Transfer"]})]})]},J._id)})})]})}),U&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 w-full max-w-lg border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Open New Account"}),e.jsx("button",{onClick:()=>{K(!1),z(["","","",""]),Y(null),ee("")},className:"text-gray-400 hover:text-white",children:e.jsx(ye,{size:20})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-3",children:"Select Account Type"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:f.length===0?e.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"No account types available"}):f.map(J=>e.jsxs("button",{onClick:()=>Y(J),className:`w-full p-4 rounded-lg border text-left transition-colors ${(pe==null?void 0:pe._id)===J._id?"border-accent-green bg-accent-green/10":"border-gray-700 bg-dark-700 hover:border-gray-600"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-white font-medium",children:J.name}),e.jsxs("span",{className:"text-gray-400 text-sm",children:["Min: $",J.minDeposit]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-1 text-xs text-gray-500",children:[e.jsxs("span",{children:["Leverage: ",J.leverage]}),J.exposureLimit>0&&e.jsxs("span",{children:["Exposure: $",J.exposureLimit]})]})]},J._id))})]}),pe&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-400",children:"Account Type:"}),e.jsx("span",{className:"text-white font-medium",children:pe.name})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Leverage:"}),e.jsx("span",{className:"text-white font-medium",children:pe.leverage})]})]}),e.jsx("div",{className:"p-3 bg-blue-500/10 border border-blue-500/30 rounded-lg mb-4",children:e.jsx("p",{className:"text-blue-400 text-sm",children:"Account will be created with $0 balance. You can deposit funds after creation."})}),e.jsx("label",{className:"block text-gray-400 text-sm mb-3",children:"Set 4-digit Account PIN"}),e.jsx("div",{className:"flex gap-3 justify-center",children:Ie.map((J,se)=>e.jsx("input",{id:`pin-${se}`,type:"password",inputMode:"numeric",maxLength:1,value:J,onChange:Ce=>Xe(se,Ce.target.value,Ie,z,"pin"),onKeyDown:Ce=>ts(Ce,se,Ie,z,"pin"),onFocus:Nt,autoFocus:se===0,className:"w-14 h-14 bg-dark-700 border border-gray-700 rounded-lg text-center text-white text-2xl focus:outline-none focus:border-accent-green"},se))})]}),k&&e.jsx("p",{className:"text-red-500 text-sm mb-4",children:k}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{K(!1),z(["","","",""]),Y(null),ee("")},className:"flex-1 bg-dark-700 text-white py-3 rounded-lg hover:bg-dark-600 transition-colors",children:"Cancel"}),pe&&e.jsx("button",{onClick:Q,className:"flex-1 bg-accent-green text-black font-medium py-3 rounded-lg hover:bg-accent-green/90 transition-colors",children:"Create Account"})]})]})}),R&&re&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 w-full max-w-md border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Change PIN"}),e.jsx("button",{onClick:()=>{le(!1),He(["","","",""]),Pe(["","","",""]),ee("")},className:"text-gray-400 hover:text-white",children:e.jsx(ye,{size:20})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-3",children:"Current PIN"}),e.jsx("div",{className:"flex gap-3 justify-center",children:Te.map((J,se)=>e.jsx("input",{id:`currentpin-${se}`,type:"password",inputMode:"numeric",maxLength:1,value:J,onChange:Ce=>Xe(se,Ce.target.value,Te,He,"currentpin"),onKeyDown:Ce=>ts(Ce,se,Te,He,"currentpin"),onFocus:Nt,autoFocus:se===0,className:"w-12 h-12 bg-dark-700 border border-gray-700 rounded-lg text-center text-white text-xl focus:outline-none focus:border-accent-green"},`current-${se}`))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-3",children:"New PIN"}),e.jsx("div",{className:"flex gap-3 justify-center",children:fe.map((J,se)=>e.jsx("input",{id:`newpin-${se}`,type:"password",inputMode:"numeric",maxLength:1,value:J,onChange:Ce=>Xe(se,Ce.target.value,fe,Pe,"newpin"),onKeyDown:Ce=>ts(Ce,se,fe,Pe,"newpin"),onFocus:Nt,className:"w-12 h-12 bg-dark-700 border border-gray-700 rounded-lg text-center text-white text-xl focus:outline-none focus:border-accent-green"},`new-${se}`))})]}),k&&e.jsx("p",{className:"text-red-500 text-sm mb-4",children:k}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{le(!1),He(["","","",""]),Pe(["","","",""]),ee("")},className:"flex-1 bg-dark-700 text-white py-3 rounded-lg hover:bg-dark-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:ve,className:"flex-1 bg-accent-green text-black font-medium py-3 rounded-lg hover:bg-accent-green/90 transition-colors",children:"Change PIN"})]})]})}),X&&re&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 w-full max-w-md border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Transfer to Account"}),e.jsx("button",{onClick:()=>{_(!1),G(""),F(["","","",""]),ee("")},className:"text-gray-400 hover:text-white",children:e.jsx(ye,{size:20})})]}),e.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500/20 rounded flex items-center justify-center",children:e.jsx(mt,{size:16,className:"text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:re.accountId}),e.jsx("p",{className:"text-gray-500 text-xs",children:(ss=re.accountTypeId)==null?void 0:ss.name})]})]}),e.jsxs("div",{className:"flex justify-between text-sm mt-3 pt-3 border-t border-gray-600",children:[e.jsx("span",{className:"text-gray-400",children:"Account Balance:"}),e.jsxs("span",{className:"text-white font-medium",children:["$",re.balance.toLocaleString()]})]})]}),e.jsx("div",{className:"p-3 bg-accent-green/10 border border-accent-green/30 rounded-lg mb-4",children:e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"Main Wallet Balance:"}),e.jsxs("span",{className:"text-accent-green font-medium",children:["$",N.toLocaleString()]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Transfer Amount"}),e.jsx("input",{type:"text",inputMode:"decimal",value:Oe,onChange:J=>{const se=J.target.value.replace(/,/g,".");(se===""||/^\d*\.?\d*$/.test(se))&&G(se)},placeholder:"Enter amount (e.g., 100.50)",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-accent-green"}),e.jsx("div",{className:"flex justify-between mt-2",children:e.jsxs("button",{type:"button",onClick:()=>G(N.toString()),className:"text-accent-green text-xs hover:underline",children:["Max: $",N.toLocaleString()]})})]}),te&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-3",children:"Enter Account PIN"}),e.jsx("div",{className:"flex gap-3 justify-center",children:q.map((J,se)=>e.jsx("input",{id:`transferpin-${se}`,type:"password",inputMode:"numeric",maxLength:1,value:J,onChange:Ce=>Xe(se,Ce.target.value,q,F,"transferpin"),onKeyDown:Ce=>ts(Ce,se,q,F,"transferpin"),onFocus:Nt,autoFocus:se===0,className:"w-12 h-12 bg-dark-700 border border-gray-700 rounded-lg text-center text-white text-xl focus:outline-none focus:border-accent-green"},`transfer-${se}`))})]}),k&&e.jsx("p",{className:"text-red-500 text-sm mb-4",children:k}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{_(!1),G(""),F(["","","",""]),ee("")},className:"flex-1 bg-dark-700 text-white py-3 rounded-lg hover:bg-dark-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Re,className:"flex-1 bg-accent-green text-black font-medium py-3 rounded-lg hover:bg-accent-green/90 transition-colors",children:"Transfer Funds"})]})]})}),L&&re&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 w-full max-w-md border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Withdraw to Main Wallet"}),e.jsx("button",{onClick:()=>{I(!1),G(""),F(["","","",""]),ee("")},className:"text-gray-400 hover:text-white",children:e.jsx(ye,{size:20})})]}),e.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500/20 rounded flex items-center justify-center",children:e.jsx(mt,{size:16,className:"text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:re.accountId}),e.jsx("p",{className:"text-gray-500 text-xs",children:(St=re.accountTypeId)==null?void 0:St.name})]})]}),e.jsxs("div",{className:"flex justify-between text-sm mt-3 pt-3 border-t border-gray-600",children:[e.jsx("span",{className:"text-gray-400",children:"Available Balance:"}),e.jsxs("span",{className:"text-white font-medium",children:["$",re.balance.toLocaleString()]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Withdraw Amount"}),e.jsx("input",{type:"text",inputMode:"decimal",value:Oe,onChange:J=>{const se=J.target.value.replace(/,/g,".");(se===""||/^\d*\.?\d*$/.test(se))&&G(se)},placeholder:"Enter amount (e.g., 100.50)",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-accent-green"}),e.jsx("div",{className:"flex justify-between mt-2",children:e.jsxs("button",{type:"button",onClick:()=>G(re.balance.toString()),className:"text-accent-green text-xs hover:underline",children:["Max: $",re.balance.toLocaleString()]})})]}),te&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-3",children:"Enter Account PIN"}),e.jsx("div",{className:"flex gap-3 justify-center",children:q.map((J,se)=>e.jsx("input",{id:`withdrawpin-${se}`,type:"password",inputMode:"numeric",maxLength:1,value:J,onChange:Ce=>Xe(se,Ce.target.value,q,F,"withdrawpin"),onKeyDown:Ce=>ts(Ce,se,q,F,"withdrawpin"),onFocus:Nt,autoFocus:se===0,className:"w-12 h-12 bg-dark-700 border border-gray-700 rounded-lg text-center text-white text-xl focus:outline-none focus:border-accent-green"},`withdraw-${se}`))})]}),k&&e.jsx("p",{className:"text-red-500 text-sm mb-4",children:k}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{I(!1),G(""),F(["","","",""]),ee("")},className:"flex-1 bg-dark-700 text-white py-3 rounded-lg hover:bg-dark-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Qe,className:"flex-1 bg-accent-green text-black font-medium py-3 rounded-lg hover:bg-accent-green/90 transition-colors",children:"Withdraw"})]})]})}),$&&re&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 w-full max-w-md border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Transfer Between Accounts"}),e.jsx("button",{onClick:()=>{H(!1),G(""),F(["","","",""]),O(null),ee("")},className:"text-gray-400 hover:text-white",children:e.jsx(ye,{size:20})})]}),e.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg mb-4",children:[e.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"From Account"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(mt,{size:16,className:"text-blue-500"}),e.jsx("span",{className:"text-white font-medium",children:re.accountId})]}),e.jsxs("span",{className:"text-white",children:["$",re.balance.toLocaleString()]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"To Account"}),e.jsxs("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:[w.filter(J=>J._id!==re._id&&J.status==="Active").map(J=>{var se;return e.jsxs("button",{onClick:()=>O(J),className:`w-full p-3 rounded-lg border flex items-center justify-between ${(y==null?void 0:y._id)===J._id?"border-blue-500 bg-blue-500/10":"border-gray-700 bg-dark-700 hover:border-gray-600"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(mt,{size:14,className:"text-gray-400"}),e.jsx("span",{className:"text-white text-sm",children:J.accountId}),e.jsxs("span",{className:"text-gray-500 text-xs",children:["(",(se=J.accountTypeId)==null?void 0:se.name,")"]})]}),e.jsxs("span",{className:"text-gray-400 text-sm",children:["$",J.balance.toLocaleString()]})]},J._id)}),w.filter(J=>J._id!==re._id&&J.status==="Active").length===0&&e.jsx("p",{className:"text-gray-500 text-sm text-center py-2",children:"No other accounts available"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Transfer Amount"}),e.jsx("input",{type:"text",inputMode:"decimal",value:Oe,onChange:J=>{const se=J.target.value.replace(/[^0-9.]/g,"");G(se)},placeholder:"Enter amount",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500"}),e.jsxs("button",{type:"button",onClick:()=>G(re.balance.toString()),className:"text-blue-400 text-xs hover:underline mt-2",children:["Max: $",re.balance.toLocaleString()]})]}),te&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-3",children:"Enter Source Account PIN"}),e.jsx("div",{className:"flex gap-3 justify-center",children:q.map((J,se)=>e.jsx("input",{id:`acctransferpin-${se}`,type:"password",inputMode:"numeric",maxLength:1,value:J,onChange:Ce=>Xe(se,Ce.target.value,q,F,"acctransferpin"),onKeyDown:Ce=>ts(Ce,se,q,F,"acctransferpin"),onFocus:Nt,autoFocus:se===0,className:"w-12 h-12 bg-dark-700 border border-gray-700 rounded-lg text-center text-white text-xl focus:outline-none focus:border-blue-500"},`acctransfer-${se}`))})]}),k&&e.jsx("p",{className:"text-red-500 text-sm mb-4",children:k}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{H(!1),G(""),F(["","","",""]),O(null),ee("")},className:"flex-1 bg-dark-700 text-white py-3 rounded-lg hover:bg-dark-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:cs,disabled:!y,className:"flex-1 bg-blue-500 text-white font-medium py-3 rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Transfer"})]})]})}),W&&B&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto border border-gray-700",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800 flex items-center justify-between sticky top-0 bg-dark-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-500/20 rounded-lg flex items-center justify-center",children:e.jsx(At,{size:20,className:"text-yellow-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Challenge Rules"}),e.jsx("p",{className:"text-gray-500 text-sm",children:B.accountId})]})]}),e.jsx("button",{onClick:()=>Z(!1),className:"text-gray-400 hover:text-white",children:e.jsx(ye,{size:24})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"bg-dark-700 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-xs",children:"Account Size"}),e.jsxs("p",{className:"text-white font-bold",children:["$",(B.initialBalance||0).toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-xs",children:"Current Balance"}),e.jsxs("p",{className:"text-white font-bold",children:["$",(B.currentBalance||0).toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-xs",children:"Phase"}),e.jsxs("p",{className:"text-white font-bold",children:[B.currentPhase,"/",B.totalPhases]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-xs",children:"Status"}),e.jsx("p",{className:`font-bold ${B.status==="ACTIVE"?"text-blue-500":B.status==="FUNDED"?"text-purple-500":"text-gray-400"}`,children:B.status})]})]})}),e.jsx("h3",{className:"text-white font-semibold mb-4",children:"Trading Rules You Must Follow"}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between bg-dark-700 rounded-lg p-3",children:[e.jsx("span",{className:"text-gray-400",children:"Daily Drawdown Limit"}),e.jsxs("span",{className:"text-red-500 font-bold",children:[((Ct=(me=B.challengeId)==null?void 0:me.rules)==null?void 0:Ct.maxDailyDrawdownPercent)||5,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between bg-dark-700 rounded-lg p-3",children:[e.jsx("span",{className:"text-gray-400",children:"Overall Drawdown Limit"}),e.jsxs("span",{className:"text-red-500 font-bold",children:[((ht=(ys=B.challengeId)==null?void 0:ys.rules)==null?void 0:ht.maxOverallDrawdownPercent)||10,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between bg-dark-700 rounded-lg p-3",children:[e.jsx("span",{className:"text-gray-400",children:"Profit Target"}),e.jsxs("span",{className:"text-green-500 font-bold",children:[((cr=(ka=B.challengeId)==null?void 0:ka.rules)==null?void 0:cr.profitTargetPhase1Percent)||8,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between bg-dark-700 rounded-lg p-3",children:[e.jsx("span",{className:"text-gray-400",children:"Min Lot Size"}),e.jsx("span",{className:"text-white font-bold",children:((Ds=(vt=B.challengeId)==null?void 0:vt.rules)==null?void 0:Ds.minLotSize)||.01})]}),e.jsxs("div",{className:"flex items-center justify-between bg-dark-700 rounded-lg p-3",children:[e.jsx("span",{className:"text-gray-400",children:"Max Lot Size"}),e.jsx("span",{className:"text-white font-bold",children:((Js=(Sa=B.challengeId)==null?void 0:Sa.rules)==null?void 0:Js.maxLotSize)||100})]}),e.jsxs("div",{className:"flex items-center justify-between bg-dark-700 rounded-lg p-3",children:[e.jsx("span",{className:"text-gray-400",children:"Max Leverage"}),e.jsxs("span",{className:"text-white font-bold",children:["1:",((Mt=(dr=B.challengeId)==null?void 0:dr.rules)==null?void 0:Mt.maxLeverage)||100]})]}),((Gs=(qs=B.challengeId)==null?void 0:qs.rules)==null?void 0:Gs.stopLossMandatory)&&e.jsxs("div",{className:"flex items-center gap-2 bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3",children:[e.jsx(qe,{size:18,className:"text-yellow-500"}),e.jsx("span",{className:"text-yellow-500",children:"Stop Loss is REQUIRED on all trades"})]})]}),e.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-4 mb-6",children:[e.jsx("p",{className:"text-red-500 font-medium mb-2",children:" Important Warning"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Breaking any of the above rules will result in immediate account failure. Your challenge will be terminated and no refund will be provided."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>Z(!1),className:"flex-1 py-3 bg-dark-700 text-white rounded-lg hover:bg-dark-600 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:()=>{Z(!1),t(he?`/mobile?account=${B._id}`:`/trade/${B._id}?type=challenge`)},className:"flex-1 py-3 bg-yellow-500 text-black font-bold rounded-lg hover:bg-yellow-400 transition-colors flex items-center justify-center gap-2",children:["I Agree, Start Trading ",e.jsx(yn,{size:18})]})]})]})]})}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-2xl w-full max-w-md border border-red-500/30",children:[e.jsx("div",{className:"p-6 border-b border-gray-800 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-red-500/20 rounded-full flex items-center justify-center",children:e.jsx(ye,{size:24,className:"text-red-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-red-500",children:"Challenge Failed"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Your challenge account has been terminated"})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-4 mb-6",children:[e.jsx("p",{className:"text-red-400 font-medium mb-2",children:"Reason for Failure:"}),e.jsx("p",{className:"text-white",children:n})]}),e.jsxs("div",{className:"bg-dark-700 rounded-xl p-4 mb-6",children:[e.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"What happened?"}),e.jsx("p",{className:"text-gray-300 text-sm",children:"You violated the challenge rules multiple times. After 3 warnings for the same rule violation, your challenge account is automatically failed. No refund is available for failed challenges."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>a(!1),className:"w-full py-3 bg-dark-700 text-white rounded-lg hover:bg-dark-600 transition-colors",children:"View My Accounts"}),e.jsx("button",{onClick:()=>{a(!1),t("/challenge")},className:"w-full py-3 bg-yellow-500 text-black font-bold rounded-lg hover:bg-yellow-400 transition-colors",children:"Try a New Challenge"})]})]})]})})]})},ta="http://localhost:5001/api",Lj=()=>{var Pe,Te,He,Oe;const t=ut(),[s,r]=o.useState("Wallet"),[a,n]=o.useState(!1),[l,i]=o.useState(null),[d,c]=o.useState([]),[u,x]=o.useState(window.innerWidth<768),[b,f]=o.useState([]),[T,w]=o.useState(!0),[j,S]=o.useState(!1),[p,m]=o.useState(!1),[h,N]=o.useState(null),[C,E]=o.useState(""),[P,U]=o.useState(""),[K,R]=o.useState(""),[le,X]=o.useState(""),[_,L]=o.useState(!1),[I,$]=o.useState([]),[H,y]=o.useState(null),[O,g]=o.useState(""),v=JSON.parse(localStorage.getItem("user")||"{}"),W=[{name:"Dashboard",icon:As,path:"/dashboard"},{name:"Account",icon:It,path:"/account"},{name:"Wallet",icon:nt,path:"/wallet"},{name:"IB",icon:et,path:"/ib"},{name:"Copytrade",icon:Jt,path:"/copytrade"},{name:"Profile",icon:nr,path:"/profile"},{name:"Support",icon:Cr,path:"/support"},{name:"Instructions",icon:Ps,path:"/instructions"}];o.useEffect(()=>{const G=()=>x(window.innerWidth<768);return window.addEventListener("resize",G),()=>window.removeEventListener("resize",G)},[]),o.useEffect(()=>{M(),v._id&&(te(),ae()),pe(),Z()},[v._id]);const Z=async()=>{try{const q=await(await fetch(`${ta}/payment-methods/currencies/active`)).json();$(q.currencies||[]),(!q.currencies||q.currencies.length===0)&&y({currency:"USD",symbol:"$",rateToUSD:1,markup:0})}catch(G){console.error("Error fetching currencies:",G)}},B=(G,q)=>{if(!q||q.currency==="USD")return G;const F=q.rateToUSD*(1+(q.markup||0)/100);return G/F},M=async()=>{try{const q=await(await fetch(`${ta}/prop/status`)).json();q.success&&L(q.enabled)}catch(G){console.error("Error fetching challenge status:",G)}},te=async()=>{try{const q=await(await fetch(`${ta}/wallet/${v._id}`)).json();i(q.wallet)}catch(G){console.error("Error fetching wallet:",G)}},ae=async()=>{w(!0);try{const q=await(await fetch(`${ta}/wallet/transactions/${v._id}`)).json();c(q.transactions||[])}catch(G){console.error("Error fetching transactions:",G)}w(!1)},pe=async()=>{try{const q=await(await fetch(`${ta}/payment-methods`)).json();f(q.paymentMethods||[])}catch(G){console.error("Error fetching payment methods:",G)}},Y=async()=>{if(!v._id){R("Please login to make a deposit");return}if(!O||parseFloat(O)<=0){R("Please enter a valid amount");return}if(!h){R("Please select a payment method");return}const G=H&&H.currency!=="USD"?B(parseFloat(O),H):parseFloat(O);try{const q=await fetch(`${ta}/wallet/deposit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:v._id,amount:G,localAmount:parseFloat(O),currency:(H==null?void 0:H.currency)||"USD",currencySymbol:(H==null?void 0:H.symbol)||"$",exchangeRate:(H==null?void 0:H.rateToUSD)||1,markup:(H==null?void 0:H.markup)||0,paymentMethod:h.type,transactionRef:P})}),F=await q.json();q.ok?(X("Deposit request submitted successfully!"),S(!1),E(""),g(""),U(""),N(null),y(null),te(),ae(),setTimeout(()=>X(""),3e3)):R(F.message||"Failed to create deposit")}catch(q){console.error("Deposit error:",q),R("Error submitting deposit. Please try again.")}},re=async()=>{if(!C||parseFloat(C)<=0){R("Please enter a valid amount");return}if(!h){R("Please select a payment method");return}if(l&&parseFloat(C)>l.balance){R("Insufficient balance");return}try{const G=await fetch(`${ta}/wallet/withdraw`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:v._id,amount:parseFloat(C),paymentMethod:h.type})}),q=await G.json();G.ok?(X("Withdrawal request submitted successfully!"),m(!1),E(""),N(null),te(),ae(),setTimeout(()=>X(""),3e3)):R(q.message)}catch{R("Error submitting withdrawal")}},Se=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t("/user/login")},Ie=G=>{switch(G){case"Approved":case"Completed":return e.jsx(qe,{size:16,className:"text-green-500"});case"Rejected":return e.jsx(yr,{size:16,className:"text-red-500"});default:return e.jsx(Ht,{size:16,className:"text-yellow-500"})}},z=G=>{switch(G){case"Bank Transfer":return e.jsx(W0,{size:18});case"UPI":return e.jsx(Hr,{size:18});case"QR Code":return e.jsx(Ai,{size:18});default:return e.jsx(nt,{size:18})}},fe=G=>new Date(G).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"min-h-screen bg-dark-900 flex",children:[u&&e.jsxs("header",{className:"fixed top-0 left-0 right-0 z-40 bg-dark-800 border-b border-gray-800 px-4 py-3 flex items-center gap-4",children:[e.jsx("button",{onClick:()=>t("/mobile"),className:"p-2 -ml-2 hover:bg-dark-700 rounded-lg",children:e.jsx(ea,{size:22,className:"text-white"})}),e.jsx("h1",{className:"text-white font-semibold text-lg flex-1",children:"Wallet"}),e.jsx("button",{onClick:()=>t("/mobile"),className:"p-2 hover:bg-dark-700 rounded-lg",children:e.jsx(lr,{size:20,className:"text-gray-400"})})]}),!u&&e.jsxs("aside",{className:`${a?"w-48":"w-16"} bg-dark-900 border-r border-gray-800 flex flex-col transition-all duration-300 ease-in-out`,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[e.jsx("div",{className:"p-4 flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 bg-accent-green rounded flex items-center justify-center",children:e.jsx("span",{className:"text-black font-bold text-sm",children:"X"})})}),e.jsx("nav",{className:"flex-1 px-2",children:W.map(G=>e.jsxs("button",{onClick:()=>t(G.path),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-colors ${s===G.name?"bg-accent-green text-black":"text-gray-400 hover:text-white hover:bg-dark-700"}`,title:a?"":G.name,children:[e.jsx(G.icon,{size:18,className:"flex-shrink-0"}),a&&e.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:G.name})]},G.name))}),e.jsx("div",{className:"p-2 border-t border-gray-800",children:e.jsxs("button",{onClick:Se,className:"w-full flex items-center gap-3 px-3 py-2.5 text-gray-400 hover:text-white transition-colors rounded-lg",title:a?"":"Log Out",children:[e.jsx(fs,{size:18,className:"flex-shrink-0"}),a&&e.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:"Log Out"})]})})]}),e.jsxs("main",{className:`flex-1 overflow-auto ${u?"pt-14":""}`,children:[!u&&e.jsx("header",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-800",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-white",children:"Wallet"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Manage your funds"})]})}),e.jsxs("div",{className:`${u?"p-4":"p-6"}`,children:[le&&e.jsxs("div",{className:"mb-4 p-3 bg-green-500/20 border border-green-500/50 rounded-lg text-green-500 flex items-center gap-2 text-sm",children:[e.jsx(qe,{size:18})," ",le]}),K&&e.jsx("div",{className:"mb-4 p-3 bg-red-500/20 border border-red-500/50 rounded-lg text-red-500 text-sm",children:K}),e.jsx("div",{className:`bg-dark-800 rounded-xl ${u?"p-4":"p-6"} border border-gray-800 mb-4`,children:e.jsxs("div",{className:`${u?"":"flex items-center justify-between"}`,children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"Available Balance"}),e.jsxs("p",{className:`text-white font-bold ${u?"text-2xl":"text-4xl"}`,children:["$",((Pe=l==null?void 0:l.balance)==null?void 0:Pe.toLocaleString())||"0.00"]}),e.jsxs("div",{className:`flex ${u?"gap-4":"gap-6"} mt-3`,children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Pending Deposits"}),e.jsxs("p",{className:"text-yellow-500 font-medium text-sm",children:["$",((Te=l==null?void 0:l.pendingDeposits)==null?void 0:Te.toLocaleString())||"0.00"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Pending Withdrawals"}),e.jsxs("p",{className:"text-orange-500 font-medium text-sm",children:["$",((He=l==null?void 0:l.pendingWithdrawals)==null?void 0:He.toLocaleString())||"0.00"]})]})]})]}),e.jsxs("div",{className:`flex gap-2 ${u?"mt-4":""}`,children:[e.jsxs("button",{onClick:()=>{S(!0),R("")},className:`flex items-center gap-2 bg-accent-green text-black font-medium ${u?"px-4 py-2 text-sm":"px-6 py-3"} rounded-lg hover:bg-accent-green/90 transition-colors`,children:[e.jsx(On,{size:u?16:20})," Deposit"]}),e.jsxs("button",{onClick:()=>{m(!0),R("")},className:`flex items-center gap-2 bg-dark-700 text-white font-medium ${u?"px-4 py-2 text-sm":"px-6 py-3"} rounded-lg hover:bg-dark-600 transition-colors border border-gray-700`,children:[e.jsx(Bn,{size:u?16:20})," Withdraw"]})]})]})}),e.jsxs("div",{className:`bg-dark-800 rounded-xl ${u?"p-4":"p-5"} border border-gray-800`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-white font-semibold text-lg",children:"Transaction History"}),e.jsx("button",{onClick:ae,className:"p-2 hover:bg-dark-700 rounded-lg transition-colors",children:e.jsx(Ge,{size:18,className:`text-gray-400 ${T?"animate-spin":""}`})})]}),T?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Ge,{size:24,className:"text-gray-500 animate-spin"})}):d.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(nt,{size:48,className:"text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No transactions yet"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Type"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Amount"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Method"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Status"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Date"})]})}),e.jsx("tbody",{children:d.map(G=>e.jsxs("tr",{className:"border-b border-gray-800",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[G.type==="Deposit"&&e.jsx(On,{size:18,className:"text-green-500"}),G.type==="Withdrawal"&&e.jsx(Bn,{size:18,className:"text-red-500"}),G.type==="Transfer_To_Account"&&e.jsx(Di,{size:18,className:"text-blue-500"}),G.type==="Transfer_From_Account"&&e.jsx(xb,{size:18,className:"text-purple-500"}),G.type==="Account_Transfer_Out"&&e.jsx(Bn,{size:18,className:"text-orange-500"}),G.type==="Account_Transfer_In"&&e.jsx(On,{size:18,className:"text-teal-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-white",children:G.type==="Transfer_To_Account"?"To Trading Account":G.type==="Transfer_From_Account"?"From Trading Account":G.type==="Account_Transfer_Out"?"Account Transfer (Out)":G.type==="Account_Transfer_In"?"Account Transfer (In)":G.type}),G.tradingAccountName&&e.jsx("p",{className:"text-gray-500 text-xs",children:G.tradingAccountName}),G.type==="Account_Transfer_Out"&&G.toTradingAccountName&&e.jsxs("p",{className:"text-gray-500 text-xs",children:[" ",G.toTradingAccountName]}),G.type==="Account_Transfer_In"&&G.fromTradingAccountName&&e.jsxs("p",{className:"text-gray-500 text-xs",children:[" ",G.fromTradingAccountName]})]})]})}),e.jsxs("td",{className:`py-4 px-4 font-medium ${G.type==="Deposit"||G.type==="Transfer_From_Account"||G.type==="Account_Transfer_In"?"text-green-500":"text-red-500"}`,children:[G.type==="Deposit"||G.type==="Transfer_From_Account"||G.type==="Account_Transfer_In"?"+":"-","$",G.amount.toLocaleString()]}),e.jsx("td",{className:"py-4 px-4 text-gray-400",children:G.type==="Transfer_To_Account"||G.type==="Transfer_From_Account"||G.type==="Account_Transfer_Out"||G.type==="Account_Transfer_In"?"Internal":G.paymentMethod}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[Ie(G.status),e.jsx("span",{className:`${G.status==="Approved"||G.status==="Completed"?"text-green-500":G.status==="Rejected"?"text-red-500":"text-yellow-500"}`,children:G.status})]})}),e.jsx("td",{className:"py-4 px-4 text-gray-400 text-sm",children:fe(G.createdAt)})]},G._id))})]})})]})]})]}),j&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 w-full max-w-lg border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Deposit Funds"}),e.jsx("button",{onClick:()=>{S(!1),E(""),U(""),N(null),R("")},className:"text-gray-400 hover:text-white",children:e.jsx(ye,{size:20})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Select Your Currency"}),e.jsxs("div",{className:"grid grid-cols-5 gap-2 max-h-40 overflow-y-auto p-1",children:[e.jsxs("button",{onClick:()=>y({currency:"USD",symbol:"$",rateToUSD:1,markup:0}),className:`p-2 rounded-lg border transition-colors flex flex-col items-center gap-0.5 ${!H||H.currency==="USD"?"border-accent-green bg-accent-green/10":"border-gray-700 bg-dark-700 hover:border-gray-600"}`,children:[e.jsx("span",{className:"text-lg",children:"$"}),e.jsx("span",{className:"text-white text-[10px]",children:"USD"})]}),I.map(G=>e.jsxs("button",{onClick:()=>y(G),className:`p-2 rounded-lg border transition-colors flex flex-col items-center gap-0.5 ${(H==null?void 0:H.currency)===G.currency?"border-accent-green bg-accent-green/10":"border-gray-700 bg-dark-700 hover:border-gray-600"}`,children:[e.jsx("span",{className:"text-lg",children:G.symbol}),e.jsx("span",{className:"text-white text-[10px]",children:G.currency})]},G._id))]}),I.length===0&&e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Only USD available. Admin can add more currencies."})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-gray-400 text-sm mb-2",children:["Amount ",H?`(${H.symbol} ${H.currency})`:"($ USD)"]}),e.jsx("input",{type:"number",value:O,onChange:G=>g(G.target.value),placeholder:`Enter amount in ${(H==null?void 0:H.currency)||"USD"}`,className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-accent-green"}),H&&H.currency!=="USD"&&O&&parseFloat(O)>0&&e.jsx("div",{className:"mt-2 p-3 bg-accent-green/10 rounded-lg border border-accent-green/30",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"You will receive"}),e.jsxs("p",{className:"text-green-400 font-bold text-2xl",children:["$",B(parseFloat(O),H).toFixed(2)," USD"]}),e.jsxs("p",{className:"text-gray-500 text-xs mt-2",children:["Exchange Rate: 1 USD = ",H.symbol,(H.rateToUSD*(1+(H.markup||0)/100)).toFixed(2)," ",H.currency]})]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Payment Method"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:b.map(G=>e.jsxs("button",{onClick:()=>N(G),className:`p-4 rounded-lg border transition-colors flex flex-col items-center gap-2 ${(h==null?void 0:h._id)===G._id?"border-accent-green bg-accent-green/10":"border-gray-700 bg-dark-700 hover:border-gray-600"}`,children:[z(G.type),e.jsx("span",{className:"text-white text-sm",children:G.type})]},G._id))}),b.length===0&&e.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"No payment methods available"})]}),h&&e.jsxs("div",{className:"mb-4 p-4 bg-dark-700 rounded-lg",children:[h.type==="Bank Transfer"&&e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{className:"text-gray-400",children:["Bank: ",e.jsx("span",{className:"text-white",children:h.bankName})]}),e.jsxs("p",{className:"text-gray-400",children:["Account: ",e.jsx("span",{className:"text-white",children:h.accountNumber})]}),e.jsxs("p",{className:"text-gray-400",children:["Name: ",e.jsx("span",{className:"text-white",children:h.accountHolderName})]}),e.jsxs("p",{className:"text-gray-400",children:["IFSC: ",e.jsx("span",{className:"text-white",children:h.ifscCode})]})]}),h.type==="UPI"&&e.jsxs("p",{className:"text-gray-400",children:["UPI ID: ",e.jsx("span",{className:"text-white",children:h.upiId})]}),h.type==="QR Code"&&h.qrCodeImage&&e.jsx("img",{src:h.qrCodeImage,alt:"QR Code",className:"mx-auto max-w-48"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Transaction Reference (Optional)"}),e.jsx("input",{type:"text",value:P,onChange:G=>U(G.target.value),placeholder:"Enter transaction ID or reference",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-accent-green"})]}),K&&e.jsx("p",{className:"text-red-500 text-sm mb-4",children:K}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{S(!1),E(""),U(""),N(null),R("")},className:"flex-1 bg-dark-700 text-white py-3 rounded-lg hover:bg-dark-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Y,className:"flex-1 bg-accent-green text-black font-medium py-3 rounded-lg hover:bg-accent-green/90 transition-colors",children:"Submit Deposit"})]})]})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 w-full max-w-lg border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Withdraw Funds"}),e.jsx("button",{onClick:()=>{m(!1),E(""),N(null),R("")},className:"text-gray-400 hover:text-white",children:e.jsx(ye,{size:20})})]}),e.jsxs("div",{className:"mb-2 p-3 bg-dark-700 rounded-lg",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Available Balance"}),e.jsxs("p",{className:"text-white text-xl font-bold",children:["$",((Oe=l==null?void 0:l.balance)==null?void 0:Oe.toLocaleString())||"0.00"]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Amount"}),e.jsx("input",{type:"number",value:C,onChange:G=>E(G.target.value),placeholder:"Enter amount",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-accent-green"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Withdrawal Method"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:b.map(G=>e.jsxs("button",{onClick:()=>N(G),className:`p-4 rounded-lg border transition-colors flex flex-col items-center gap-2 ${(h==null?void 0:h._id)===G._id?"border-accent-green bg-accent-green/10":"border-gray-700 bg-dark-700 hover:border-gray-600"}`,children:[z(G.type),e.jsx("span",{className:"text-white text-sm",children:G.type})]},G._id))})]}),K&&e.jsx("p",{className:"text-red-500 text-sm mb-4",children:K}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{m(!1),E(""),N(null),R("")},className:"flex-1 bg-dark-700 text-white py-3 rounded-lg hover:bg-dark-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:re,className:"flex-1 bg-accent-green text-black font-medium py-3 rounded-lg hover:bg-accent-green/90 transition-colors",children:"Submit Withdrawal"})]})]})})]})};class Uj{constructor(){this.ws=null,this.prices=new Map,this.subscribers=new Map,this.isConnected=!1,this.reconnectAttempts=0,this.maxReconnectAttempts=5}toBinanceSymbol(s){return{BTCUSD:"btcusdt",ETHUSD:"ethusdt",LTCUSD:"ltcusdt",XRPUSD:"xrpusdt",BCHUSD:"bchusdt",BNBUSD:"bnbusdt",ADAUSD:"adausdt",DOTUSD:"dotusdt",SOLUSD:"solusdt",DOGEUSD:"dogeusdt",MATICUSD:"maticusdt",AVAXUSD:"avaxusdt",LINKUSD:"linkusdt",UNIUSD:"uniusdt",ATOMUSD:"atomusdt",XLMUSD:"xlmusdt",ALGOUSD:"algousdt",VETUSD:"vetusdt",ICPUSD:"icpusdt",FILUSD:"filusdt",TRXUSD:"trxusdt",ETCUSD:"etcusdt",XMRUSD:"xmrusdt",EOSUSD:"eosusdt",AAVEUSD:"aaveusdt",MKRUSD:"mkrusdt",COMPUSD:"compusdt",SNXUSD:"snxusdt",YFIUSD:"yfiusdt",SUSHIUSD:"sushiusdt",NEARUSD:"nearusdt",FTMUSD:"ftmusdt",SANDUSD:"sandusdt",MANAUSD:"manausdt",AXSUSD:"axsusdt",GALAUSD:"galausdt",APEUSD:"apeusdt",GMTUSD:"gmtusdt",OPUSD:"opusdt",ARBUSD:"arbusdt",PEPEUSD:"pepeusdt",SHIBUSD:"shibusdt"}[s]||s.toLowerCase().replace("usd","usdt")}fromBinanceSymbol(s){return s.toUpperCase().replace("USDT","USD")}getCryptoSymbols(){return[{symbol:"BTCUSD",name:"Bitcoin",category:"Crypto"},{symbol:"ETHUSD",name:"Ethereum",category:"Crypto"},{symbol:"BNBUSD",name:"BNB",category:"Crypto"},{symbol:"SOLUSD",name:"Solana",category:"Crypto"},{symbol:"XRPUSD",name:"XRP",category:"Crypto"},{symbol:"ADAUSD",name:"Cardano",category:"Crypto"},{symbol:"DOGEUSD",name:"Dogecoin",category:"Crypto"},{symbol:"DOTUSD",name:"Polkadot",category:"Crypto"},{symbol:"MATICUSD",name:"Polygon",category:"Crypto"},{symbol:"LTCUSD",name:"Litecoin",category:"Crypto"},{symbol:"SHIBUSD",name:"Shiba Inu",category:"Crypto"},{symbol:"AVAXUSD",name:"Avalanche",category:"Crypto"},{symbol:"LINKUSD",name:"Chainlink",category:"Crypto"},{symbol:"UNIUSD",name:"Uniswap",category:"Crypto"},{symbol:"ATOMUSD",name:"Cosmos",category:"Crypto"},{symbol:"XLMUSD",name:"Stellar",category:"Crypto"},{symbol:"NEARUSD",name:"NEAR Protocol",category:"Crypto"},{symbol:"FTMUSD",name:"Fantom",category:"Crypto"},{symbol:"ALGOUSD",name:"Algorand",category:"Crypto"},{symbol:"VETUSD",name:"VeChain",category:"Crypto"},{symbol:"ICPUSD",name:"Internet Computer",category:"Crypto"},{symbol:"FILUSD",name:"Filecoin",category:"Crypto"},{symbol:"TRXUSD",name:"TRON",category:"Crypto"},{symbol:"ETCUSD",name:"Ethereum Classic",category:"Crypto"},{symbol:"AAVEUSD",name:"Aave",category:"Crypto"},{symbol:"SANDUSD",name:"The Sandbox",category:"Crypto"},{symbol:"MANAUSD",name:"Decentraland",category:"Crypto"},{symbol:"AXSUSD",name:"Axie Infinity",category:"Crypto"},{symbol:"APEUSD",name:"ApeCoin",category:"Crypto"},{symbol:"ARBUSD",name:"Arbitrum",category:"Crypto"},{symbol:"OPUSD",name:"Optimism",category:"Crypto"},{symbol:"PEPEUSD",name:"Pepe",category:"Crypto"}]}async getSymbolPrice(s){try{const r=this.toBinanceSymbol(s),a=await fetch(`https://api.binance.com/api/v3/ticker/bookTicker?symbol=${r.toUpperCase()}`);if(!a.ok)throw new Error("Failed to fetch price");const n=await a.json(),l={bid:parseFloat(n.bidPrice),ask:parseFloat(n.askPrice),spread:parseFloat(n.askPrice)-parseFloat(n.bidPrice)};return this.prices.set(s,l),l}catch(r){return console.error(`Error fetching ${s} price:`,r),null}}async getAllPrices(s){const r={};try{const a=await fetch("https://api.binance.com/api/v3/ticker/bookTicker");if(!a.ok)throw new Error("Failed to fetch prices");const n=await a.json(),l=new Map(n.map(i=>[i.symbol.toLowerCase(),i]));for(const i of s){const d=this.toBinanceSymbol(i),c=l.get(d);c&&(r[i]={bid:parseFloat(c.bidPrice),ask:parseFloat(c.askPrice),spread:parseFloat(c.askPrice)-parseFloat(c.bidPrice)},this.prices.set(i,r[i]))}}catch(a){console.error("Error fetching all prices:",a)}return r}connect(s=[]){if(this.ws&&this.ws.readyState===WebSocket.OPEN||s.length===0)return;const a=`wss://stream.binance.com:9443/stream?streams=${s.map(n=>`${this.toBinanceSymbol(n)}@bookTicker`).join("/")}`;this.ws=new WebSocket(a),this.ws.onopen=()=>{console.log("Binance WebSocket connected"),this.isConnected=!0,this.reconnectAttempts=0},this.ws.onmessage=n=>{try{const l=JSON.parse(n.data);l.data&&this.handleMessage(l.data)}catch(l){console.error("Error parsing WebSocket message:",l)}},this.ws.onerror=n=>{console.error("Binance WebSocket error:",n)},this.ws.onclose=()=>{console.log("Binance WebSocket disconnected"),this.isConnected=!1,this.reconnectAttempts<this.maxReconnectAttempts&&(this.reconnectAttempts++,setTimeout(()=>{console.log(`Reconnecting to Binance... Attempt ${this.reconnectAttempts}`),this.connect(Array.from(this.subscribers.keys()))},3e3*this.reconnectAttempts))}}handleMessage(s){const r=this.fromBinanceSymbol(s.s),a={bid:parseFloat(s.b),ask:parseFloat(s.a),spread:parseFloat(s.a)-parseFloat(s.b),time:new Date().toISOString()};this.prices.set(r,a);const n=this.subscribers.get(r);n&&n(a)}subscribe(s,r){this.subscribers.set(s,r)}unsubscribe(s){this.subscribers.delete(s)}disconnect(){this.ws&&(this.ws.close(),this.ws=null),this.subscribers.clear(),this.isConnected=!1}getPrice(s){return this.prices.get(s)}}const hm=new Uj,Gt="http://localhost:5001/api",zj=()=>{var tu,su,ru,au,nu,lu,iu,ou,cu,du,uu,xu,mu,hu,pu,gu,fu,yu,bu,ju,Nu,vu,wu,ku,Su,Cu,Tu,Eu,Pu,Au,Du,Iu,$u,Lu,Uu;const t=ut(),{accountId:s}=Hd(),[r]=Ki(),a=r.get("type"),[n,l]=o.useState(null),[i,d]=o.useState(null),[c,u]=o.useState(null),[x,b]=o.useState(!0),[f,T]=o.useState(!1),[w,j]=o.useState({symbol:"XAUUSD",name:"CFDs on Gold (US$ / OZ)",bid:0,ask:0,spread:0}),[S,p]=o.useState(window.innerWidth>=768),[m,h]=o.useState(window.innerWidth>=768),[N,C]=o.useState("Market"),[E,P]=o.useState("0.01"),[U,K]=o.useState("1:100"),[R,le]=o.useState(""),[X,_]=o.useState("All"),[L,I]=o.useState("Positions"),[$,H]=o.useState(!1),[y,O]=o.useState("BUY"),[g,v]=o.useState([{symbol:"XAUUSD",name:"CFDs on Gold (US$ / OZ)",bid:0,ask:0,spread:0}]),[W,Z]=o.useState("XAUUSD"),[B,M]=o.useState(!1),[te,ae]=o.useState(!1),[pe,Y]=o.useState(""),[re,Se]=o.useState(""),[Ie,z]=o.useState("BUY LIMIT"),[fe,Pe]=o.useState(""),[Te,He]=o.useState([{symbol:"EURUSD",bid:0,ask:0,spread:0,change:0,category:"Forex",starred:!0},{symbol:"GBPUSD",bid:0,ask:0,spread:0,change:0,category:"Forex",starred:!0},{symbol:"USDJPY",bid:0,ask:0,spread:0,change:0,category:"Forex",starred:!1},{symbol:"USDCHF",bid:0,ask:0,spread:0,change:0,category:"Forex",starred:!1},{symbol:"AUDUSD",bid:0,ask:0,spread:0,change:0,category:"Forex",starred:!1},{symbol:"NZDUSD",bid:0,ask:0,spread:0,change:0,category:"Forex",starred:!1},{symbol:"USDCAD",bid:0,ask:0,spread:0,change:0,category:"Forex",starred:!1},{symbol:"EURGBP",bid:0,ask:0,spread:0,change:0,category:"Forex",starred:!1},{symbol:"EURJPY",bid:0,ask:0,spread:0,change:0,category:"Forex",starred:!1},{symbol:"GBPJPY",bid:0,ask:0,spread:0,change:0,category:"Forex",starred:!1},{symbol:"XAUUSD",bid:0,ask:0,spread:0,change:0,category:"Metals",starred:!0},{symbol:"XAGUSD",bid:0,ask:0,spread:0,change:0,category:"Metals",starred:!1},{symbol:"BTCUSD",bid:0,ask:0,spread:0,change:0,category:"Crypto",starred:!0},{symbol:"ETHUSD",bid:0,ask:0,spread:0,change:0,category:"Crypto",starred:!1},{symbol:"BNBUSD",bid:0,ask:0,spread:0,change:0,category:"Crypto",starred:!1},{symbol:"SOLUSD",bid:0,ask:0,spread:0,change:0,category:"Crypto",starred:!1},{symbol:"XRPUSD",bid:0,ask:0,spread:0,change:0,category:"Crypto",starred:!1},{symbol:"ADAUSD",bid:0,ask:0,spread:0,change:0,category:"Crypto",starred:!1},{symbol:"DOGEUSD",bid:0,ask:0,spread:0,change:0,category:"Crypto",starred:!1},{symbol:"DOTUSD",bid:0,ask:0,spread:0,change:0,category:"Crypto",starred:!1},{symbol:"MATICUSD",bid:0,ask:0,spread:0,change:0,category:"Crypto",starred:!1},{symbol:"LTCUSD",bid:0,ask:0,spread:0,change:0,category:"Crypto",starred:!1},{symbol:"AVAXUSD",bid:0,ask:0,spread:0,change:0,category:"Crypto",starred:!1},{symbol:"LINKUSD",bid:0,ask:0,spread:0,change:0,category:"Crypto",starred:!1}]),[Oe,G]=o.useState(!0),[q,F]=o.useState(["XAUUSD","EURUSD","GBPUSD"]),[k,ee]=o.useState(window.innerWidth<768),[ce,je]=o.useState([]),[he,Le]=o.useState([]),[Be,V]=o.useState([]),[ue,ke]=o.useState(!1),[We,Ue]=o.useState(""),[ft,Ze]=o.useState(""),[Xe,ts]=o.useState({balance:0,credit:0,equity:0,usedMargin:0,freeMargin:0,floatingPnl:0}),[Nt,Q]=o.useState({}),[ve,Re]=o.useState(!1),[Qe,cs]=o.useState(!1),[or,ss]=o.useState(!1),[St,me]=o.useState(null),[Ct,ys]=o.useState(null),[ht,ka]=o.useState("all"),[cr,vt]=o.useState(""),[Ds,Sa]=o.useState(""),[Js,dr]=o.useState(!1),[Mt,qs]=o.useState(!1),[Gs,J]=o.useState(null),[se,Ce]=o.useState({value:30,unit:"minutes"}),[bs,Is]=o.useState(""),[Tt,Ft]=o.useState(""),gl=["All","Forex","Metals","Crypto"],A=JSON.parse(localStorage.getItem("user")||"{}");o.useEffect(()=>(bp(),ge(),()=>{tn.disconnect()}),[s]),o.useEffect(()=>{if(s){ze(),_e(),De(),$e();const D=setInterval(()=>{ze(),$e()},5e3);return()=>clearInterval(D)}},[s]),o.useEffect(()=>{const D=()=>{const ne=window.innerWidth<768;ee(ne)};return window.addEventListener("resize",D),()=>window.removeEventListener("resize",D)},[]),o.useEffect(()=>{const D=Zd.subscribe("tradingPage",(ne,xe,be)=>{if(!ne||Object.keys(ne).length===0)return;Q(Ne=>{const Ae={...Ne};return Object.entries(ne).forEach(([tt,Ye])=>{Ye&&Ye.bid&&(Ae[tt]=Ye)}),Ae}),He(Ne=>Ne.map(Ae=>{const tt=ne[Ae.symbol];if(tt&&tt.bid&&tt.bid>0){const Ye=tt.bid,Xs=tt.ask||tt.bid,Sp=Math.abs(Xs-Ye)||Ye*1e-4;return{...Ae,bid:Ye,ask:Xs,spread:Sp}}return Ae}));const de=ne[w==null?void 0:w.symbol];de&&de.bid&&de.bid>0&&j(Ne=>({...Ne,bid:de.bid,ask:de.ask||de.bid,spread:Math.abs((de.ask||de.bid)-de.bid)}))});return ge(),()=>D()},[w==null?void 0:w.symbol]),o.useEffect(()=>{(async()=>{const xe=localStorage.getItem("token"),be=JSON.parse(localStorage.getItem("user")||"{}");if(!xe||!be._id){t("/user/login");return}try{const de=await fetch(`${Gt}/auth/me`,{headers:{Authorization:`Bearer ${xe}`}}),Ne=await de.json();if(Ne.forceLogout||de.status===403){alert(Ne.message||"Session expired. Please login again."),localStorage.removeItem("token"),localStorage.removeItem("user"),t("/user/login");return}}catch(de){console.error("Auth check error:",de)}})();const ne=localStorage.getItem(`killSwitch_${s}`);if(ne){const xe=parseInt(ne);xe>Date.now()?(qs(!0),J(xe)):localStorage.removeItem(`killSwitch_${s}`)}},[s]),o.useEffect(()=>{if(!Mt||!Gs)return;const D=()=>{const xe=Date.now(),be=Gs-xe;if(be<=0){qs(!1),J(null),Is(""),localStorage.removeItem(`killSwitch_${s}`);return}const de=Math.floor(be/(1e3*60*60*24)),Ne=Math.floor(be%(1e3*60*60*24)/(1e3*60*60)),Ae=Math.floor(be%(1e3*60*60)/(1e3*60)),tt=Math.floor(be%(1e3*60)/1e3);let Ye="";de>0&&(Ye+=`${de}d `),(Ne>0||de>0)&&(Ye+=`${Ne}h `),(Ae>0||Ne>0||de>0)&&(Ye+=`${Ae}m `),Ye+=`${tt}s`,Is(Ye.trim())};D();const ne=setInterval(D,1e3);return()=>clearInterval(ne)},[Mt,Gs,s]),o.useEffect(()=>{if(Object.keys(Nt).length===0)return;let D=0,ne=0,xe=!1;if(ce.length>0&&ce.forEach(Ne=>{const Ae=Nt[Ne.symbol],tt=Te.find(Xs=>Xs.symbol===Ne.symbol),Ye=Ae!=null&&Ae.bid?Ne.side==="BUY"?Ae.bid:Ae.ask:tt!=null&&tt.bid?Ne.side==="BUY"?tt.bid:tt.ask:null;if(Ye&&Ye>0){xe=!0;const Xs=Ne.side==="BUY"?(Ye-Ne.openPrice)*Ne.quantity*Ne.contractSize:(Ne.openPrice-Ye)*Ne.quantity*Ne.contractSize;D+=Xs-(Ne.commission||0)-(Ne.swap||0)}ne+=Ne.marginUsed||0}),!xe&&ce.length>0)return;const be=Math.round((Xe.balance+(Xe.credit||0)+D)*100)/100,de=Math.round((Xe.balance+(Xe.credit||0)+D-ne)*100)/100;ts(Ne=>({...Ne,floatingPnl:Math.round(D*100)/100,usedMargin:Math.round(ne*100)/100,equity:be,freeMargin:de})),ce.length>0&&(be<=0||de<-ne)&&pt()},[Nt,Te,ce]);const ge=async()=>{try{const D=Te.map(xe=>xe.symbol),ne=await tn.getAllPrices(D);if(Object.keys(ne).length>0&&(G(!1),Q(xe=>({...xe,...ne})),He(xe=>xe.map(be=>{const de=ne[be.symbol];if(de&&de.bid){const Ne=de.bid,Ae=de.ask||de.bid,tt=Math.abs(Ae-Ne)||Ne*1e-4;return{...be,bid:Ne,ask:Ae,spread:tt}}return be})),j(xe=>{const be=ne[xe.symbol];if(be&&be.bid){const de=be.bid,Ne=be.ask||be.bid;return{...xe,bid:de,ask:Ne,spread:Math.abs(Ne-de)||de*1e-4}}return xe}),v(xe=>xe.map(be=>{const de=ne[be.symbol];if(de&&de.bid){const Ne=de.bid,Ae=de.ask||de.bid;return{...be,bid:Ne,ask:Ae,spread:Math.abs(Ae-Ne)||Ne*1e-4}}return be})),Object.keys(ne).length>0))try{const be=await(await fetch(`${Gt}/trade/check-pending`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prices:ne})})).json();be.success&&be.executedCount>0&&(ze(),_e(),be.executedTrades.forEach(Ae=>{var tt;Ze(`${Ae.orderType} executed: ${Ae.symbol} ${Ae.side} @ ${(tt=Ae.executionPrice)==null?void 0:tt.toFixed(5)}`)}));const Ne=await(await fetch(`${Gt}/trade/check-sltp`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prices:ne})})).json();Ne.success&&Ne.closedCount>0&&(ze(),De(),Ne.closedTrades.forEach(Ae=>{Ze(`Trade ${Ae.symbol} closed by ${Ae.reason}: ${Ae.pnl>=0?"+":""}$${Ae.pnl.toFixed(2)}`)}))}catch{}}catch(D){console.error("Live prices error:",D)}},Ee=D=>["XAUUSD","XAGUSD","XPTUSD","XPDUSD"].includes(D)?"Metals":["BTCUSD","ETHUSD","LTCUSD","XRPUSD","BCHUSD"].includes(D)?"Crypto":"Forex",ze=async()=>{try{const ne=await(await fetch(`${Gt}/trade/open/${s}`)).json();ne.success&&je(ne.trades||[])}catch(D){console.error("Error fetching open trades:",D)}},_e=async()=>{try{const ne=await(await fetch(`${Gt}/trade/pending/${s}`)).json();ne.success&&Le(ne.trades||[])}catch(D){console.error("Error fetching pending orders:",D)}},De=async()=>{try{const ne=await(await fetch(`${Gt}/trade/history/${s}`)).json();ne.success&&V(ne.trades||[])}catch(D){console.error("Error fetching trade history:",D)}},$e=async()=>{try{const D={};Te.forEach(de=>{de.bid&&de.ask&&(D[de.symbol]={bid:de.bid,ask:de.ask})});const ne=encodeURIComponent(JSON.stringify(D)),be=await(await fetch(`${Gt}/trade/summary/${s}?prices=${ne}`)).json();be.success&&ts(be.summary)}catch(D){console.error("Error fetching account summary:",D)}},pt=async()=>{try{const D={};Te.forEach(be=>{be.bid&&be.ask&&(D[be.symbol]={bid:be.bid,ask:be.ask})});const xe=await(await fetch(`${Gt}/trade/check-stopout`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tradingAccountId:s,prices:D})})).json();xe.success&&xe.stopOutTriggered&&(alert(` STOP OUT: ${xe.message}

All your trades have been closed to prevent further losses.`),ze(),$e(),De())}catch(D){console.error("Error checking stop out:",D)}},Ks=(D=null)=>{const ne={seconds:1e3,minutes:6e4,hours:36e5,days:864e5},xe=D||se,be=xe.value*ne[xe.unit],de=Date.now()+be;qs(!0),J(de),localStorage.setItem(`killSwitch_${s}`,de.toString()),dr(!1);const Ne=`${xe.value} ${xe.unit}`;Ft(` Kill Switch activated for ${Ne}! Trading is now blocked.`),setTimeout(()=>Ft(""),5e3)},$s=()=>{Ks({value:30,unit:"minutes"})},up=()=>{qs(!1),J(null),Is(""),localStorage.removeItem(`killSwitch_${s}`),Ft(" Kill Switch deactivated. Trading is now enabled."),setTimeout(()=>Ft(""),3e3)},cn=async D=>{if(Mt){Ue(`Trading blocked! Kill Switch active for ${bs}`);return}ke(!0),Ue(""),Ze("");try{const ne=Ee(w.symbol),xe=Nt[w.symbol],be=(xe==null?void 0:xe.bid)||w.bid,de=(xe==null?void 0:xe.ask)||w.ask;if(!be||!de||be<=0||de<=0||isNaN(be)||isNaN(de)){Ue("Market is closed or no price data available. Trading is not available at this time."),ke(!1);return}const Ae=await(await fetch(`${Gt}/trade/open`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:A._id,tradingAccountId:s,symbol:w.symbol,segment:ne,side:D,orderType:"MARKET",quantity:parseFloat(E),bid:be,ask:de,sl:te&&re?parseFloat(re):null,tp:B&&pe?parseFloat(pe):null})})).json();if(Ae.success)Ze(`${D} order executed successfully!`),ze(),$e(),Se(""),Y(""),ae(!1),M(!1);else{if(Ae.accountFailed){t(`/account?failed=true&reason=${encodeURIComponent(Ae.failReason||Ae.message)}`);return}Ae.warningCount>0?Ue(`${Ae.message} (Warning ${Ae.warningCount}/3 - ${Ae.remainingWarnings} remaining before account fails)`):Ue(Ae.message||"Failed to execute order")}}catch(ne){console.error("Error executing trade:",ne),Ue("Failed to execute order. Please try again.")}ke(!1),setTimeout(()=>{Ue(""),Ze("")},3e3)},xp=async()=>{if(Mt){Ue(`Trading blocked! Kill Switch active for ${bs}`);return}ke(!0),Ue(""),Ze("");try{const D=Ee(w.symbol),ne=Ie.includes("BUY")?"BUY":"SELL",xe=Ie.replace(" ","_"),be=fe?parseFloat(fe):null,de=Nt[w.symbol],Ne=(de==null?void 0:de.bid)||w.bid,Ae=(de==null?void 0:de.ask)||w.ask,Ye=await(await fetch(`${Gt}/trade/open`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:A._id,tradingAccountId:s,symbol:w.symbol,segment:D,side:ne,orderType:xe,quantity:parseFloat(E),bid:be||Ne,ask:be||Ae,sl:te&&re?parseFloat(re):null,tp:B&&pe?parseFloat(pe):null})})).json();Ye.success?(Ze(`${Ie} order placed successfully!`),_e(),Pe("")):Ue(Ye.message||"Failed to place order")}catch(D){console.error("Error placing pending order:",D),Ue("Failed to place order. Please try again.")}ke(!1),setTimeout(()=>{Ue(""),Ze("")},3e3)},eu=async D=>{var ne;try{const xe=ce.find(Xs=>Xs._id===D);if(!xe)return;const be=Nt[xe.symbol],de=Te.find(Xs=>Xs.symbol===xe.symbol)||w,Ne=(be==null?void 0:be.bid)||de.bid,Ae=(be==null?void 0:be.ask)||de.ask;if(!Ne||!Ae||Ne===0||Ae===0){Ue("Price not available. Please wait for prices to load.");return}const Ye=await(await fetch(`${Gt}/trade/close`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tradeId:D,bid:Ne,ask:Ae})})).json();Ye.success?(Ze(`Trade closed. P/L: $${(ne=Ye.realizedPnl)==null?void 0:ne.toFixed(2)}`),ze(),De(),$e()):Ue(Ye.message||"Failed to close trade")}catch(xe){console.error("Error closing trade:",xe),Ue("Failed to close trade")}setTimeout(()=>{Ue(""),Ze("")},3e3)},mp=async D=>{try{const xe=await(await fetch(`${Gt}/trade/cancel`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tradeId:D})})).json();xe.success?(Ze("Order cancelled"),_e()):Ue(xe.message||"Failed to cancel order")}catch(ne){console.error("Error cancelling order:",ne),Ue("Failed to cancel order")}setTimeout(()=>{Ue(""),Ze("")},3e3)},hp=D=>{var ne,xe;me(D),vt(((ne=D.sl||D.stopLoss)==null?void 0:ne.toString())||""),Sa(((xe=D.tp||D.takeProfit)==null?void 0:xe.toString())||""),Re(!0)},pp=async()=>{var D,ne;if(console.log("handleModifyTrade called"),!St){console.log("No trade selected for modify"),Ue("No trade selected");return}console.log("Modifying trade:",St._id,"SL:",cr,"TP:",Ds),Ue("");try{const xe={tradeId:St._id,sl:cr?parseFloat(cr):null,tp:Ds?parseFloat(Ds):null};console.log("Request body:",JSON.stringify(xe));const be=await fetch(`${Gt}/trade/modify`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(xe)});console.log("Response status:",be.status);const de=await be.json();console.log("Response data:",de),de.success?(Ze("Trade modified successfully"),ze(),Re(!1)):(console.log("Modify failed:",de.message),(D=de.message)!=null&&D.includes("not open")||(ne=de.message)!=null&&ne.includes("not found")?(ze(),Ue("This trade is no longer open. Refreshing..."),setTimeout(()=>Re(!1),1500)):Ue(de.message||"Failed to modify trade"))}catch(xe){console.error("Error modifying trade:",xe),Ue("Failed to modify trade: "+xe.message)}setTimeout(()=>{Ue(""),Ze("")},3e3)},gp=D=>{ys(D),cs(!0)},fp=async()=>{Ct&&(await eu(Ct._id),cs(!1))},eo=async D=>{ka(D),ss(!0)},yp=async()=>{const D=ce.filter(ne=>{const xe=Nt[ne.symbol],be=Te.find(Ae=>Ae.symbol===ne.symbol)||w,de=xe?ne.side==="BUY"?xe.bid:xe.ask:ne.side==="BUY"?be.bid:be.ask,Ne=ne.side==="BUY"?(de-ne.openPrice)*ne.quantity*ne.contractSize:(ne.openPrice-de)*ne.quantity*ne.contractSize;return ht==="profit"?Ne>0:ht==="loss"?Ne<0:!0});for(const ne of D)await eu(ne._id);ss(!1),Ze(`Closed ${D.length} trade(s)`),setTimeout(()=>Ze(""),3e3)},bp=async()=>{var D,ne,xe;b(!0);try{if(a==="challenge"){const de=await(await fetch(`${Gt}/prop/account/${s}`)).json();de.success&&de.account?(d(de),u(de.rules||{}),l({_id:de.account._id,accountId:de.account.accountId,balance:((D=de.balance)==null?void 0:D.current)||0,equity:((ne=de.balance)==null?void 0:ne.equity)||0,leverage:"1:100",accountType:"CHALLENGE",status:de.account.status}),K("1:100")):t("/account")}else{const Ne=(xe=(await(await fetch(`${Gt}/trading-accounts/user/${A._id}`)).json()).accounts)==null?void 0:xe.find(Ae=>Ae._id===s);Ne?(l(Ne),K(Ne.leverage||"1:100")):t("/account")}}catch(be){console.error("Error fetching account:",be)}b(!1)},jp=D=>({EURUSD:"OANDA:EURUSD",GBPUSD:"OANDA:GBPUSD",USDJPY:"OANDA:USDJPY",USDCHF:"OANDA:USDCHF",AUDUSD:"OANDA:AUDUSD",NZDUSD:"OANDA:NZDUSD",USDCAD:"OANDA:USDCAD",EURGBP:"OANDA:EURGBP",EURJPY:"OANDA:EURJPY",GBPJPY:"OANDA:GBPJPY",EURCHF:"OANDA:EURCHF",EURAUD:"OANDA:EURAUD",EURCAD:"OANDA:EURCAD",GBPAUD:"OANDA:GBPAUD",GBPCAD:"OANDA:GBPCAD",AUDCAD:"OANDA:AUDCAD",AUDJPY:"OANDA:AUDJPY",CADJPY:"OANDA:CADJPY",CHFJPY:"OANDA:CHFJPY",NZDJPY:"OANDA:NZDJPY",XAUUSD:"OANDA:XAUUSD",XAGUSD:"OANDA:XAGUSD",BTCUSD:"COINBASE:BTCUSD",ETHUSD:"COINBASE:ETHUSD",LTCUSD:"COINBASE:LTCUSD",XRPUSD:"BITSTAMP:XRPUSD",BCHUSD:"COINBASE:BCHUSD"})[D]||`OANDA:${D}`,to=Te.filter(D=>{const ne=D.symbol.toLowerCase().includes(R.toLowerCase()),xe=X==="All"||D.category===X;return ne&&xe}),Np=D=>{g.find(xe=>xe.symbol===D.symbol)||v([...g,D]),Z(D.symbol),j(D)},vp=D=>{Z(D);const ne=g.find(xe=>xe.symbol===D);ne&&j(ne)},wp=(D,ne)=>{if(D.stopPropagation(),g.length===1)return;const xe=g.filter(be=>be.symbol!==ne);v(xe),W===ne&&(Z(xe[0].symbol),j(xe[0]))},kp=()=>{const D=parseFloat(E)||0,ne=w.ask||0,xe=parseInt(U==null?void 0:U.split(":")[1])||100;return(D*1e5*ne/xe).toFixed(2)};return x?e.jsx("div",{className:"h-screen bg-black flex items-center justify-center",children:e.jsx("div",{className:"text-white",children:"Loading..."})}):e.jsxs("div",{className:"h-screen bg-black flex overflow-hidden text-sm",children:[e.jsxs("div",{className:"w-12 bg-[#0a0a0a] border-r border-gray-800 flex flex-col items-center py-3 shrink-0",children:[e.jsx("button",{onClick:()=>t("/account"),className:"w-9 h-9 flex items-center justify-center text-gray-500 hover:text-white hover:bg-[#1a1a1a] rounded-lg mb-2 transition-colors",title:"Home",children:e.jsx(lr,{size:20})}),e.jsx("button",{onClick:()=>p(!S),className:`w-9 h-9 flex items-center justify-center rounded-lg mb-2 transition-colors ${S?"text-white bg-[#1a1a1a]":"text-gray-500 hover:text-white hover:bg-[#1a1a1a]"}`,title:"Instruments",children:e.jsx(gb,{size:20})}),e.jsx("button",{onClick:()=>t("/account"),className:"w-9 h-9 flex items-center justify-center text-gray-500 hover:text-white hover:bg-[#1a1a1a] rounded-lg mb-2 transition-colors",title:"Wallet",children:e.jsx(nt,{size:20})}),e.jsx("button",{className:"w-9 h-9 flex items-center justify-center text-gray-500 hover:text-white hover:bg-[#1a1a1a] rounded-lg mb-2 transition-colors",title:"Charts",children:e.jsx(Yd,{size:20})}),e.jsx("div",{className:"flex-1"}),e.jsx("div",{className:"w-6 h-6 rounded bg-red-500 flex items-center justify-center text-white text-xs font-bold cursor-pointer hover:bg-red-600",onClick:()=>p(!1),children:e.jsx(ye,{size:14})})]}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[Tt&&e.jsx("div",{className:"fixed top-0 left-0 right-0 z-[100] animate-slide-down",children:e.jsx("div",{className:`px-4 py-3 text-center font-medium text-sm shadow-lg ${Tt.includes("")?"bg-red-600 text-white":"bg-green-600 text-white"}`,children:Tt})}),a==="challenge"&&i&&e.jsxs("div",{className:"bg-gradient-to-r from-yellow-500/20 to-orange-500/20 border-b border-yellow-500/30 px-3 py-2 flex items-center justify-between shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(At,{size:18,className:"text-yellow-500"}),e.jsxs("span",{className:"text-yellow-500 font-medium text-sm",children:[((tu=i.challenge)==null?void 0:tu.name)||"Challenge"," - Phase ",(su=i.account)==null?void 0:su.currentPhase,"/",(ru=i.account)==null?void 0:ru.totalPhases]}),e.jsx("span",{className:"text-gray-400 text-xs",children:"|"}),e.jsxs("span",{className:"text-gray-300 text-xs",children:["Daily DD: ",e.jsxs("span",{className:((au=i.drawdown)==null?void 0:au.dailyUsed)>3?"text-red-500":"text-green-500",children:[((lu=(nu=i.drawdown)==null?void 0:nu.dailyUsed)==null?void 0:lu.toFixed(2))||0,"%"]})," / ",((iu=i.drawdown)==null?void 0:iu.dailyMax)||5,"%"]}),e.jsx("span",{className:"text-gray-400 text-xs",children:"|"}),e.jsxs("span",{className:"text-gray-300 text-xs",children:["Overall DD: ",e.jsxs("span",{className:((ou=i.drawdown)==null?void 0:ou.overallUsed)>6?"text-red-500":"text-green-500",children:[((du=(cu=i.drawdown)==null?void 0:cu.overallUsed)==null?void 0:du.toFixed(2))||0,"%"]})," / ",((uu=i.drawdown)==null?void 0:uu.overallMax)||10,"%"]}),e.jsx("span",{className:"text-gray-400 text-xs",children:"|"}),e.jsxs("span",{className:"text-gray-300 text-xs",children:["Profit: ",e.jsxs("span",{className:"text-green-500",children:[((mu=(xu=i.profit)==null?void 0:xu.currentPercent)==null?void 0:mu.toFixed(2))||0,"%"]})," / ",((hu=i.profit)==null?void 0:hu.targetPercent)||8,"%"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-gray-400",children:[((pu=i.time)==null?void 0:pu.remainingDays)||0," days left"]}),(c==null?void 0:c.stopLossMandatory)&&e.jsxs("span",{className:"bg-red-500/20 text-red-400 text-xs px-2 py-0.5 rounded flex items-center gap-1",children:[e.jsx(Xi,{size:12})," SL Required"]})]})]}),e.jsxs("header",{className:"h-10 sm:h-8 bg-black border-b border-gray-800 flex items-center px-2 sm:px-3 shrink-0",children:[e.jsx("span",{className:"text-white font-medium text-sm sm:text-base",children:w.symbol}),!k&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:`ml-3 text-xs ${a==="challenge"?"text-yellow-500":"text-teal-400"}`,children:[a==="challenge"?"Challenge":"Standard"," - ",n==null?void 0:n.accountId]}),e.jsxs("span",{className:"text-gray-400 ml-3 text-xs",children:["Balance: ",e.jsxs("span",{className:"text-white",children:["$",((gu=Xe.balance)==null?void 0:gu.toFixed(2))||"0.00"]})]})]}),e.jsx("div",{className:"flex-1"}),e.jsx("span",{className:"text-red-500 font-mono text-xs sm:text-sm mr-1 sm:mr-2",children:(fu=w.bid)==null?void 0:fu.toFixed(2)}),e.jsx("span",{className:"text-green-500 font-mono text-xs sm:text-sm mr-2 sm:mr-4",children:(yu=w.ask)==null?void 0:yu.toFixed(2)}),e.jsx("button",{onClick:()=>h(!m),className:"bg-teal-500 hover:bg-teal-600 text-white text-xs px-2 sm:px-3 py-1 rounded",children:k?"Order":"New Order"}),e.jsx("button",{onClick:()=>Mt?up():$s(),onContextMenu:D=>{D.preventDefault(),Mt||dr(!0)},className:`ml-2 text-xs px-2 sm:px-3 py-1 rounded flex items-center gap-1 ${Mt?"bg-red-600 hover:bg-red-700 text-white animate-pulse":"bg-orange-500 hover:bg-orange-600 text-white"}`,title:Mt?`Click to deactivate (${bs} left)`:"Click: Activate 30min | Right-click: Custom duration",children:Mt?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"hidden sm:inline",children:[" ",bs]}),e.jsx("span",{className:"sm:hidden",children:""})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden sm:inline",children:" Kill Switch"}),e.jsx("span",{className:"sm:hidden",children:""})]})}),e.jsx("button",{onClick:()=>h(!m),className:"ml-1 sm:ml-2 text-gray-400 hover:text-white",children:e.jsx(Gr,{size:16})})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[S&&e.jsxs("div",{className:`${k?"absolute inset-0 z-20":"w-[280px]"} bg-[#0d0d0d] border-r border-gray-800 flex flex-col shrink-0`,children:[e.jsxs("div",{className:"px-3 py-3 border-b border-gray-800 flex items-center justify-between",children:[e.jsx("span",{className:"text-white text-sm font-medium",children:"Instruments"}),e.jsx("button",{onClick:()=>p(!1),className:"text-gray-500 hover:text-white",children:e.jsx(ye,{size:16})})]}),e.jsx("div",{className:"px-3 py-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(_t,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search instruments",value:R,onChange:D=>le(D.target.value),className:"w-full bg-[#1a1a1a] border border-gray-700 rounded pl-9 pr-3 py-2 text-white text-sm placeholder-gray-500 focus:outline-none focus:border-gray-600"})]})}),e.jsxs("div",{className:"flex items-center gap-1 px-3 py-2 border-b border-gray-800 overflow-x-auto",children:[e.jsx("button",{className:"text-gray-600 hover:text-yellow-500 shrink-0",children:e.jsx(ol,{size:14})}),gl.map(D=>e.jsx("button",{onClick:()=>_(D),className:`px-2 py-1 rounded text-xs font-medium transition-colors shrink-0 ${X===D?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:D},D))]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-2",children:Oe?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"text-gray-500 text-sm",children:"Loading instruments..."})}):to.length===0?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"text-gray-500 text-sm",children:"No instruments found"})}):to.map(D=>{var ne;return e.jsxs("button",{onClick:()=>Np(D),className:`w-full px-3 py-2.5 my-1 flex items-center rounded-lg border border-gray-700 hover:border-gray-600 hover:bg-[#1a1a1a] transition-colors ${w.symbol===D.symbol?"bg-[#1a1a1a] border-blue-500":""}`,children:[e.jsx(ol,{size:12,className:`shrink-0 mr-2 ${D.starred?"text-yellow-500 fill-yellow-500":"text-gray-700"}`}),e.jsxs("div",{className:"text-left min-w-[55px]",children:[e.jsx("div",{className:"text-white text-xs font-medium",children:D.symbol}),e.jsxs("div",{className:"text-green-500 text-[10px]",children:["+",((ne=D.change)==null?void 0:ne.toFixed(2))||"0.00","%"]})]}),e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"text-right w-16",children:[e.jsx("div",{className:"text-red-500 text-xs font-mono",children:D.bid>0?D.bid.toFixed(D.bid>100?2:5):"..."}),e.jsx("div",{className:"text-gray-600 text-[9px]",children:"Bid"})]}),e.jsx("div",{className:"bg-[#2a2a2a] px-1.5 py-0.5 rounded text-cyan-400 text-[10px] font-medium min-w-[28px] text-center mx-2",children:D.spread>0?D.symbol.includes("JPY")?(D.spread*100).toFixed(1):D.bid>100?D.spread.toFixed(2):(D.spread*1e4).toFixed(1):"-"}),e.jsxs("div",{className:"text-right w-14",children:[e.jsx("div",{className:"text-green-500 text-xs font-mono",children:D.ask>0?D.ask.toFixed(D.ask>100?2:5):"..."}),e.jsx("div",{className:"text-gray-600 text-[9px]",children:"Ask"})]})]},D.symbol)})}),e.jsxs("div",{className:"px-3 py-2 border-t border-gray-800 flex items-center justify-between shrink-0",children:[e.jsxs("span",{className:"text-gray-500 text-xs",children:[to.length," instruments"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-green-500 text-xs",children:"Live"})]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0 bg-[#0d0d0d]",children:[e.jsxs("div",{className:"h-9 bg-[#0d0d0d] border-b border-gray-800 flex items-center px-2 shrink-0 gap-1",children:[g.map(D=>e.jsxs("div",{onClick:()=>vp(D.symbol),className:`flex items-center gap-2 px-3 py-1.5 rounded cursor-pointer transition-colors ${W===D.symbol?"bg-blue-600 text-white":"bg-[#1a1a1a] text-gray-400 hover:bg-[#252525] hover:text-white"}`,children:[e.jsx("span",{className:"text-sm font-medium",children:D.symbol}),g.length>1&&e.jsx("button",{onClick:ne=>wp(ne,D.symbol),className:"hover:text-red-400 ml-1",children:e.jsx(ye,{size:12})})]},D.symbol)),e.jsx("button",{className:"ml-1 text-gray-500 hover:text-white p-1.5 hover:bg-[#1a1a1a] rounded",children:e.jsx(st,{size:16})})]}),e.jsx("div",{className:"flex-1 min-h-0 bg-[#0d0d0d] relative",children:e.jsx("iframe",{src:`https://s.tradingview.com/widgetembed/?frameElementId=tradingview_chart&symbol=${jp(w.symbol)}&interval=5&hidesidetoolbar=0&hidetoptoolbar=0&symboledit=1&saveimage=1&toolbarbg=0d0d0d&studies=[]&theme=dark&style=1&timezone=Etc%2FUTC&withdateranges=1&showpopupbutton=1&studies_overrides={}&overrides={}&enabled_features=["left_toolbar","header_widget"]&disabled_features=[]&locale=en&utm_source=localhost&utm_medium=widget_new&utm_campaign=chart&hide_side_toolbar=0`,style:{width:"100%",height:"100%",border:"none"},allowFullScreen:!0,title:"TradingView Chart"},w.symbol)}),e.jsxs("div",{className:`${k?"h-32":"h-44"} bg-[#0d0d0d] border-t border-gray-800 flex flex-col shrink-0`,children:[e.jsxs("div",{className:"h-10 flex items-center justify-between px-2 sm:px-4 border-b border-gray-800 overflow-x-auto",children:[e.jsx("div",{className:"flex gap-2 sm:gap-6",children:[{name:"Positions",count:ce.length},{name:"Pending",count:he.length},{name:"History",count:Be.length},{name:"Cancelled",count:0}].map(D=>e.jsx("button",{onClick:()=>I(D.name),className:`text-xs sm:text-sm whitespace-nowrap ${L===D.name?"text-white":"text-gray-500 hover:text-white"}`,children:k?`${D.name.split(" ")[0]}(${D.count})`:`${D.name}(${D.count})`},D.name))}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 shrink-0",children:[!k&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"One Click"}),e.jsx("button",{onClick:()=>H(!$),className:`w-10 h-5 rounded-full relative transition-colors ${$?"bg-blue-600":"bg-gray-600"}`,children:e.jsx("div",{className:`absolute top-0.5 w-4 h-4 bg-white rounded-full transition-all ${$?"left-5":"left-0.5"}`})}),$&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>cn("SELL"),disabled:ue,className:"w-8 h-8 rounded-full bg-red-500 text-white text-sm font-bold hover:bg-red-600 transition-colors disabled:opacity-50",children:"S"}),e.jsx("input",{type:"text",value:E,onChange:D=>P(D.target.value),className:"w-14 h-7 bg-[#1a1a1a] border border-gray-600 rounded text-center text-white text-sm font-medium focus:outline-none focus:border-blue-500"}),e.jsx("button",{onClick:()=>cn("BUY"),disabled:ue,className:"w-8 h-8 rounded-full bg-blue-500 text-white text-sm font-bold hover:bg-blue-600 transition-colors disabled:opacity-50",children:"B"})]})]}),e.jsxs("span",{className:"text-xs sm:text-sm text-gray-500",children:["P/L: ",e.jsxs("span",{className:Xe.floatingPnl>=0?"text-green-500":"text-red-500",children:[Xe.floatingPnl>=0?"+":"","$",((bu=Xe.floatingPnl)==null?void 0:bu.toFixed(2))||"0.00"]})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-auto",children:[L==="Positions"&&e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"text-gray-500 border-b border-gray-800 sticky top-0 bg-[#0d0d0d]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Time"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Symbol"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Side"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Lots"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Entry"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Current"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"SL"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"TP"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Charges"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Swap"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"P/L"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Action"})]})}),e.jsx("tbody",{children:ce.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"12",className:"text-center py-8 text-gray-500",children:"No open positions"})}):ce.map(D=>{var Ae,tt;const ne=Nt[D.symbol],xe=Te.find(Ye=>Ye.symbol===D.symbol)||w,be=ne?D.side==="BUY"?ne.bid:ne.ask:D.side==="BUY"?xe.bid:xe.ask,de=D.side==="BUY"?(be-D.openPrice)*D.quantity*D.contractSize:(D.openPrice-be)*D.quantity*D.contractSize,Ne=Ye=>Ye?D.symbol.includes("JPY")?Ye.toFixed(3):["BTCUSD","ETHUSD","XAUUSD"].includes(D.symbol)?Ye.toFixed(2):["XAGUSD"].includes(D.symbol)?Ye.toFixed(4):Ye.toFixed(5):"-";return e.jsxs("tr",{className:"border-t border-gray-800 hover:bg-[#1a1a1a]",children:[e.jsx("td",{className:"py-2 px-3 text-xs",children:new Date(D.openedAt).toLocaleTimeString()}),e.jsx("td",{className:"py-2 px-3 text-xs font-medium",children:D.symbol}),e.jsx("td",{className:`py-2 px-3 text-xs font-medium ${D.side==="BUY"?"text-blue-400":"text-red-400"}`,children:D.side}),e.jsx("td",{className:"py-2 px-3 text-xs",children:D.quantity}),e.jsx("td",{className:"py-2 px-3 text-xs",children:Ne(D.openPrice)}),e.jsx("td",{className:"py-2 px-3 text-xs",children:Ne(be)}),e.jsx("td",{className:"py-2 px-3 text-xs",children:D.stopLoss?Ne(D.stopLoss):"-"}),e.jsx("td",{className:"py-2 px-3 text-xs",children:D.takeProfit?Ne(D.takeProfit):"-"}),e.jsxs("td",{className:"py-2 px-3 text-xs",children:["$",((Ae=D.commission)==null?void 0:Ae.toFixed(2))||"0.00"]}),e.jsxs("td",{className:"py-2 px-3 text-xs",children:["$",((tt=D.swap)==null?void 0:tt.toFixed(2))||"0.00"]}),e.jsxs("td",{className:`py-2 px-3 text-xs font-medium ${de>=0?"text-green-400":"text-red-400"}`,children:["$",de.toFixed(2)]}),e.jsx("td",{className:"py-2 px-3",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>hp(D),className:"p-1.5 bg-blue-500/20 text-blue-400 rounded hover:bg-blue-500/30 transition-colors",title:"Modify SL/TP",children:e.jsx(Rc,{size:12})}),e.jsx("button",{onClick:()=>gp(D),className:"p-1.5 bg-red-500/20 text-red-400 rounded hover:bg-red-500/30 transition-colors",title:"Close Trade",children:e.jsx(ye,{size:12})})]})})]},D._id)})})]}),L==="History"&&e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"text-gray-500 border-b border-gray-800 sticky top-0 bg-[#0d0d0d]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Closed"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Symbol"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Side"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Lots"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Entry"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Close"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Charges"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Swap"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"P/L"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Closed By"})]})}),e.jsx("tbody",{children:Be.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"10",className:"text-center py-8 text-gray-500",children:"No trade history"})}):Be.map(D=>{var xe,be,de;const ne=Ne=>Ne?D.symbol.includes("JPY")?Ne.toFixed(3):["BTCUSD","ETHUSD","XAUUSD"].includes(D.symbol)?Ne.toFixed(2):["XAGUSD"].includes(D.symbol)?Ne.toFixed(4):Ne.toFixed(5):"-";return e.jsxs("tr",{className:"border-t border-gray-800 hover:bg-[#1a1a1a]",children:[e.jsx("td",{className:"py-2 px-3 text-xs",children:new Date(D.closedAt).toLocaleString()}),e.jsx("td",{className:"py-2 px-3 text-xs font-medium",children:D.symbol}),e.jsx("td",{className:`py-2 px-3 text-xs font-medium ${D.side==="BUY"?"text-blue-400":"text-red-400"}`,children:D.side}),e.jsx("td",{className:"py-2 px-3 text-xs",children:D.quantity}),e.jsx("td",{className:"py-2 px-3 text-xs",children:ne(D.openPrice)}),e.jsx("td",{className:"py-2 px-3 text-xs",children:ne(D.closePrice)}),e.jsxs("td",{className:"py-2 px-3 text-xs",children:["$",((xe=D.commission)==null?void 0:xe.toFixed(2))||"0.00"]}),e.jsxs("td",{className:"py-2 px-3 text-xs",children:["$",((be=D.swap)==null?void 0:be.toFixed(2))||"0.00"]}),e.jsxs("td",{className:`py-2 px-3 text-xs font-medium ${D.realizedPnl>=0?"text-green-400":"text-red-400"}`,children:["$",((de=D.realizedPnl)==null?void 0:de.toFixed(2))||"0.00"]}),e.jsx("td",{className:"py-2 px-3 text-xs text-gray-400",children:D.closedBy||"USER"})]},D._id)})})]}),L==="Pending"&&e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"text-gray-500 border-b border-gray-800 sticky top-0 bg-[#0d0d0d]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Time"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Symbol"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Type"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Lots"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Price"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"SL"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"TP"}),e.jsx("th",{className:"text-left py-2 px-3 font-normal",children:"Action"})]})}),e.jsx("tbody",{children:he.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"text-center py-8 text-gray-500",children:"No pending orders"})}):he.map(D=>{var ne;return e.jsxs("tr",{className:"border-t border-gray-800 hover:bg-[#1a1a1a]",children:[e.jsx("td",{className:"py-2 px-3 text-xs",children:new Date(D.createdAt).toLocaleTimeString()}),e.jsx("td",{className:"py-2 px-3 text-xs font-medium",children:D.symbol}),e.jsx("td",{className:`py-2 px-3 text-xs font-medium ${D.orderType.includes("BUY")?"text-blue-400":"text-red-400"}`,children:D.orderType}),e.jsx("td",{className:"py-2 px-3 text-xs",children:D.quantity}),e.jsx("td",{className:"py-2 px-3 text-xs",children:(ne=D.pendingPrice)==null?void 0:ne.toFixed(5)}),e.jsx("td",{className:"py-2 px-3 text-xs",children:D.stopLoss||"-"}),e.jsx("td",{className:"py-2 px-3 text-xs",children:D.takeProfit||"-"}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("button",{onClick:()=>mp(D._id),className:"p-1.5 bg-red-500/20 text-red-400 rounded hover:bg-red-500/30 transition-colors",title:"Cancel Order",children:e.jsx(ye,{size:12})})})]},D._id)})})]}),L==="Cancelled"&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No cancelled orders"})]})]})]}),m&&e.jsxs("div",{className:`${k?"absolute inset-0 z-20":"w-72"} bg-[#0d0d0d] border-l border-gray-800 flex flex-col shrink-0`,children:[e.jsxs("div",{className:"px-4 py-4 border-b border-gray-800 flex items-center justify-between",children:[e.jsxs("span",{className:"text-white text-base font-medium",children:[w.symbol," order"]}),e.jsx("button",{onClick:()=>h(!1),className:"text-gray-500 hover:text-white",children:e.jsx(ye,{size:18})})]}),e.jsxs("div",{className:"flex border-b border-gray-800",children:[e.jsx("button",{onClick:()=>C("Market"),className:`flex-1 py-3 text-sm font-medium ${N==="Market"?"text-white border-b-2 border-blue-500":"text-gray-500"}`,children:"Market"}),e.jsx("button",{onClick:()=>C("Pending"),className:`flex-1 py-3 text-sm font-medium ${N==="Pending"?"text-white border-b-2 border-blue-500":"text-gray-500"}`,children:"Pending"})]}),N==="Market"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-3 flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between bg-[#1a1a1a] border border-gray-700 rounded px-3 py-2 mb-3",children:[e.jsx("span",{className:"text-gray-400 text-xs",children:"Leverage"}),e.jsx("span",{className:"text-yellow-500 font-semibold text-sm",children:(n==null?void 0:n.leverage)||"1:100"})]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsxs("button",{onClick:()=>cn("SELL"),disabled:ue,className:"flex-1 rounded py-3 text-center transition-colors bg-red-600 hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("div",{className:"text-white text-[10px] font-medium",children:"SELL"}),e.jsx("div",{className:"text-white font-mono text-lg font-bold",children:(ju=w.symbol)!=null&&ju.includes("JPY")?(Nu=w.bid)==null?void 0:Nu.toFixed(3):["BTCUSD","ETHUSD","XAUUSD"].includes(w.symbol)?(vu=w.bid)==null?void 0:vu.toFixed(2):(wu=w.bid)==null?void 0:wu.toFixed(5)})]}),e.jsxs("button",{onClick:()=>cn("BUY"),disabled:ue,className:"flex-1 rounded py-3 text-center transition-colors bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("div",{className:"text-white text-[10px] font-medium",children:"BUY"}),e.jsx("div",{className:"text-white font-mono text-lg font-bold",children:(ku=w.symbol)!=null&&ku.includes("JPY")?(Su=w.ask)==null?void 0:Su.toFixed(3):["BTCUSD","ETHUSD","XAUUSD"].includes(w.symbol)?(Cu=w.ask)==null?void 0:Cu.toFixed(2):(Tu=w.ask)==null?void 0:Tu.toFixed(5)})]})]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("button",{onClick:()=>O("SELL"),className:`flex-1 rounded py-1.5 text-center text-xs transition-colors ${y==="SELL"?"bg-red-500/20 border border-red-500 text-red-400":"bg-[#1a1a1a] border border-gray-600 text-gray-400 hover:border-red-500/50"}`,children:"Sell Side"}),e.jsx("button",{onClick:()=>O("BUY"),className:`flex-1 rounded py-1.5 text-center text-xs transition-colors ${y==="BUY"?"bg-blue-500/20 border border-blue-500 text-blue-400":"bg-[#1a1a1a] border border-gray-600 text-gray-400 hover:border-blue-500/50"}`,children:"Buy Side"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"text-white text-xs mb-1 block",children:"Volume"}),e.jsxs("div",{className:"flex items-center bg-[#1a1a1a] border border-gray-700 rounded",children:[e.jsx("button",{onClick:()=>P(Math.max(.01,parseFloat(E)-.01).toFixed(2)),className:"px-3 py-2 text-gray-400 hover:text-white border-r border-gray-700",children:e.jsx(en,{size:14})}),e.jsx("input",{type:"text",value:E,onChange:D=>P(D.target.value),className:"flex-1 bg-transparent text-center text-white text-sm font-medium focus:outline-none py-2"}),e.jsx("button",{onClick:()=>P((parseFloat(E)+.01).toFixed(2)),className:"px-3 py-2 text-gray-400 hover:text-white border-l border-gray-700",children:e.jsx(st,{size:14})})]}),e.jsxs("div",{className:"text-right text-gray-500 text-[10px] mt-1",children:[E," lot"]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Leverage (Max: 100x)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:U,onChange:D=>K(D.target.value),className:"flex-1 bg-[#1a1a1a] border border-gray-700 rounded px-3 py-2 text-white text-sm focus:outline-none",children:[e.jsx("option",{value:"1:50",children:"1:50"}),e.jsx("option",{value:"1:100",children:"1:100"}),e.jsx("option",{value:"1:200",children:"1:200"}),e.jsx("option",{value:"1:500",children:"1:500"})]}),e.jsxs("div",{className:"bg-[#1a1a1a] border border-gray-700 rounded px-3 py-2 text-green-500 text-sm font-medium",children:["$",(()=>{const D=parseInt(U.replace("1:",""))||100,ne=["BTCUSD","ETHUSD","LTCUSD","XRPUSD"].includes(w.symbol)?1:w.symbol==="XAUUSD"?100:w.symbol==="XAGUSD"?5e3:1e5;return(parseFloat(E||0)*ne*(w.ask||0)/D).toFixed(2)})()]})]}),e.jsxs("div",{className:"text-gray-500 text-[10px] mt-1",children:["Margin Required | Free: $",((Eu=Xe.freeMargin)==null?void 0:Eu.toFixed(2))||"0.00"]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("button",{onClick:()=>M(!B),className:"flex items-center justify-between w-full py-2",children:[e.jsx("span",{className:"text-green-500 text-sm",children:"Take profit"}),e.jsx(st,{size:16,className:`text-green-500 transition-transform ${B?"rotate-45":""}`})]}),B&&e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx("input",{type:"text",value:pe,onChange:D=>Y(D.target.value),placeholder:"Price",className:"flex-1 bg-[#1a1a1a] border border-green-500/50 rounded px-3 py-2 text-white text-sm focus:outline-none focus:border-green-500"}),e.jsx("input",{type:"text",placeholder:"Pips",className:"w-16 bg-[#1a1a1a] border border-gray-700 rounded px-2 py-2 text-white text-sm focus:outline-none"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("button",{onClick:()=>ae(!te),className:"flex items-center justify-between w-full py-2",children:[e.jsx("span",{className:"text-red-500 text-sm",children:"Stop loss"}),e.jsx(st,{size:16,className:`text-red-500 transition-transform ${te?"rotate-45":""}`})]}),te&&e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx("input",{type:"text",value:re,onChange:D=>Se(D.target.value),placeholder:"Price",className:"flex-1 bg-[#1a1a1a] border border-red-500/50 rounded px-3 py-2 text-white text-sm focus:outline-none focus:border-red-500"}),e.jsx("input",{type:"text",placeholder:"Pips",className:"w-16 bg-[#1a1a1a] border border-gray-700 rounded px-2 py-2 text-white text-sm focus:outline-none"})]})]}),e.jsxs("div",{className:"bg-[#1a1a1a] rounded p-3 mb-3",children:[e.jsx("div",{className:"text-white text-xs font-medium mb-2",children:"Trading Charges"}),e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{className:"text-gray-400",children:"Spread"}),e.jsx("span",{className:"text-white",children:"10 pips"})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-400",children:"Commission"}),e.jsx("span",{className:"text-white",children:"$0.10 ($10/lot)"})]})]}),e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-gray-400 text-xs",children:"Margin Required"}),e.jsxs("span",{className:"text-white text-base font-semibold",children:["$",kp()]})]})]}),We&&e.jsx("div",{className:"mx-3 mb-2 p-2 bg-red-500/20 border border-red-500 rounded text-red-400 text-xs text-center",children:We}),ft&&e.jsx("div",{className:"mx-3 mb-2 p-2 bg-green-500/20 border border-green-500 rounded text-green-400 text-xs text-center",children:ft}),e.jsxs("div",{className:"p-3 border-t border-gray-800",children:[e.jsx("button",{onClick:()=>cn(y),disabled:ue,className:`w-full py-3 rounded font-medium text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${y==="BUY"?"bg-blue-600/20 border border-blue-600 hover:bg-blue-600/30 text-blue-400":"bg-red-600/20 border border-red-600 hover:bg-red-600/30 text-red-400"}`,children:ue?"Executing...":`Open ${y} Order`}),e.jsxs("div",{className:"text-center text-gray-500 text-xs mt-2",children:[E," lots @ ",y==="BUY"?(Pu=w.ask)==null?void 0:Pu.toFixed(2):(Au=w.bid)==null?void 0:Au.toFixed(2)]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-3 flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-gray-400 text-xs mb-2",children:"Order type"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["BUY LIMIT","SELL LIMIT","BUY STOP","SELL STOP"].map(D=>e.jsx("button",{onClick:()=>z(D),className:`py-2 rounded text-xs font-medium transition-colors ${Ie===D?D.includes("BUY")?"bg-blue-600 text-white":"bg-red-600 text-white":D.includes("BUY")?"bg-[#1a1a1a] border border-blue-500/30 text-blue-400 hover:bg-blue-500/10":"bg-[#1a1a1a] border border-red-500/30 text-red-400 hover:bg-red-500/10"}`,children:D},D))})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Entry price"}),e.jsx("input",{type:"text",value:fe,onChange:D=>Pe(D.target.value),placeholder:"Enter price",className:"w-full bg-[#1a1a1a] border border-gray-700 rounded px-3 py-2.5 text-white text-sm focus:outline-none focus:border-gray-600"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Order volume"}),e.jsxs("div",{className:"flex items-center bg-[#1a1a1a] border border-gray-700 rounded",children:[e.jsx("input",{type:"text",value:E,onChange:D=>P(D.target.value),className:"flex-1 bg-transparent text-center text-white text-sm font-medium focus:outline-none py-2"}),e.jsx("button",{onClick:()=>P(Math.max(.01,parseFloat(E)-.01).toFixed(2)),className:"px-3 py-2 text-gray-400 hover:text-white border-l border-gray-700",children:e.jsx(en,{size:14})}),e.jsx("button",{onClick:()=>P((parseFloat(E)+.01).toFixed(2)),className:"px-3 py-2 text-gray-400 hover:text-white border-l border-gray-700",children:e.jsx(st,{size:14})})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Leverage (Max: 100x)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:U,onChange:D=>K(D.target.value),className:"flex-1 bg-[#1a1a1a] border border-gray-700 rounded px-3 py-2 text-white text-sm focus:outline-none",children:[e.jsx("option",{value:"1:50",children:"1:50"}),e.jsx("option",{value:"1:100",children:"1:100"}),e.jsx("option",{value:"1:200",children:"1:200"}),e.jsx("option",{value:"1:500",children:"1:500"})]}),e.jsx("div",{className:"bg-[#1a1a1a] border border-gray-700 rounded px-3 py-2 text-green-500 text-sm",children:"$0"})]}),e.jsx("div",{className:"text-gray-500 text-[10px] mt-1",children:"Trading power: $0.00  100 = $0"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("button",{onClick:()=>M(!B),className:"flex items-center justify-between w-full py-2",children:[e.jsx("span",{className:"text-green-500 text-sm",children:"Take profit"}),e.jsx(st,{size:16,className:`text-green-500 transition-transform ${B?"rotate-45":""}`})]}),B&&e.jsx("div",{className:"flex gap-2 mt-1",children:e.jsx("input",{type:"text",value:pe,onChange:D=>Y(D.target.value),placeholder:"Price",className:"flex-1 bg-[#1a1a1a] border border-green-500/50 rounded px-3 py-2 text-white text-sm focus:outline-none focus:border-green-500"})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("button",{onClick:()=>ae(!te),className:"flex items-center justify-between w-full py-2",children:[e.jsx("span",{className:"text-red-500 text-sm",children:"Stop loss"}),e.jsx(st,{size:16,className:`text-red-500 transition-transform ${te?"rotate-45":""}`})]}),te&&e.jsx("div",{className:"flex gap-2 mt-1",children:e.jsx("input",{type:"text",value:re,onChange:D=>Se(D.target.value),placeholder:"Price",className:"flex-1 bg-[#1a1a1a] border border-red-500/50 rounded px-3 py-2 text-white text-sm focus:outline-none focus:border-red-500"})})]}),e.jsxs("div",{className:"bg-[#1a1a1a] rounded p-3 mb-3",children:[e.jsx("div",{className:"text-white text-xs font-medium mb-2",children:"Trading Charges"}),e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{className:"text-gray-400",children:"Spread"}),e.jsx("span",{className:"text-white",children:"10 pips"})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-400",children:"Commission"}),e.jsx("span",{className:"text-white",children:"$0.10 ($10/lot)"})]})]})]}),We&&e.jsx("div",{className:"mx-3 mb-2 p-2 bg-red-500/20 border border-red-500 rounded text-red-400 text-xs text-center",children:We}),ft&&e.jsx("div",{className:"mx-3 mb-2 p-2 bg-green-500/20 border border-green-500 rounded text-green-400 text-xs text-center",children:ft}),e.jsxs("div",{className:"p-3 border-t border-gray-800",children:[e.jsx("button",{onClick:xp,disabled:ue,className:"w-full bg-blue-600/20 border border-blue-600 hover:bg-blue-600/30 text-blue-400 py-3 rounded font-medium text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:ue?"Placing...":`Place ${Ie}`}),e.jsxs("div",{className:"text-center text-gray-500 text-xs mt-2",children:[E," lots @ ",fe||"--.--"]})]})]})]})]}),e.jsxs("footer",{className:"h-6 bg-black border-t border-gray-800 flex items-center px-2 sm:px-3 text-[10px] sm:text-xs shrink-0 overflow-x-auto",children:[e.jsx("span",{className:"text-white font-medium shrink-0",children:w.symbol}),e.jsxs("span",{className:"text-gray-500 ml-2 sm:ml-4 shrink-0",children:["Bal: ",e.jsxs("span",{className:"text-white",children:["$",((Du=Xe.balance)==null?void 0:Du.toFixed(2))||"0.00"]})]}),!k&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-gray-500 ml-4 shrink-0",children:["Credit: ",e.jsxs("span",{className:"text-purple-400",children:["$",((Iu=Xe.credit)==null?void 0:Iu.toFixed(2))||"0.00"]})]}),e.jsxs("span",{className:"text-gray-500 ml-4 shrink-0",children:["Eq: ",e.jsxs("span",{className:Xe.floatingPnl>=0?"text-green-500":"text-red-500",children:["$",(($u=Xe.equity)==null?void 0:$u.toFixed(2))||"0.00"]})]}),e.jsxs("span",{className:"text-gray-500 ml-4 shrink-0",children:["Margin: ",e.jsxs("span",{className:"text-yellow-500",children:["$",((Lu=Xe.usedMargin)==null?void 0:Lu.toFixed(2))||"0.00"]})]}),e.jsxs("span",{className:"text-gray-500 ml-4 shrink-0",children:["Free: ",e.jsxs("span",{className:Xe.freeMargin>=0?"text-blue-400":"text-red-500",children:["$",((Uu=Xe.freeMargin)==null?void 0:Uu.toFixed(2))||"0.00"]})]})]}),e.jsx("div",{className:"flex-1"}),!k&&e.jsxs("span",{className:"text-gray-400 shrink-0",children:["Standard - ",n==null?void 0:n.accountId]}),e.jsxs("span",{className:"text-green-500 ml-2 sm:ml-3 shrink-0 flex items-center gap-1",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"}),"Live"]})]})]}),ve&&St&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end sm:items-center justify-center",onClick:()=>Re(!1),children:e.jsxs("div",{className:"w-full sm:w-96 bg-[#1c1c1e] sm:rounded-2xl rounded-t-2xl overflow-hidden animate-slide-up",onClick:D=>D.stopPropagation(),children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-700/50 text-center",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Modify Trade"}),e.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:[St.symbol,"  ",St.side,"  ",St.quantity," lots"]})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[We&&e.jsx("div",{className:"bg-red-500/20 border border-red-500/50 rounded-lg p-3 text-red-400 text-sm",children:We}),ft&&e.jsx("div",{className:"bg-green-500/20 border border-green-500/50 rounded-lg p-3 text-green-400 text-sm",children:ft}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Stop Loss"}),e.jsx("input",{type:"number",value:cr,onChange:D=>vt(D.target.value),placeholder:"Enter stop loss price",step:"0.00001",className:"w-full bg-[#2c2c2e] border border-gray-600 rounded-xl px-4 py-3 text-white text-base focus:outline-none focus:border-red-500 transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Take Profit"}),e.jsx("input",{type:"number",value:Ds,onChange:D=>Sa(D.target.value),placeholder:"Enter take profit price",step:"0.00001",className:"w-full bg-[#2c2c2e] border border-gray-600 rounded-xl px-4 py-3 text-white text-base focus:outline-none focus:border-green-500 transition-colors"})]})]}),e.jsx("div",{className:"border-t border-gray-700/50",children:e.jsx("button",{type:"button",onClick:async D=>{D.preventDefault(),D.stopPropagation(),console.log("Save Changes clicked, trade:",St==null?void 0:St._id),await pp()},className:"w-full py-4 text-blue-500 font-semibold text-lg hover:bg-[#2c2c2e] transition-colors cursor-pointer active:bg-[#3c3c3e]",children:"Save Changes"})}),e.jsx("div",{className:"border-t border-gray-700/50",children:e.jsx("button",{onClick:()=>Re(!1),className:"w-full py-4 text-gray-400 font-medium text-lg hover:bg-[#2c2c2e] transition-colors",children:"Cancel"})})]})}),Qe&&Ct&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end sm:items-center justify-center",children:e.jsxs("div",{className:"w-full sm:w-80 bg-[#1c1c1e] sm:rounded-2xl rounded-t-2xl overflow-hidden animate-slide-up",children:[e.jsxs("div",{className:"px-4 py-4 text-center",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Close Trade?"}),e.jsxs("p",{className:"text-gray-400 text-sm mt-2",children:[Ct.symbol,"  ",Ct.side,"  ",Ct.quantity," lots"]}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"This action cannot be undone"})]}),e.jsx("div",{className:"border-t border-gray-700/50",children:e.jsx("button",{onClick:fp,className:"w-full py-4 text-red-500 font-semibold text-lg hover:bg-[#2c2c2e] transition-colors",children:"Close Trade"})}),ce.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t border-gray-700/50",children:e.jsxs("button",{onClick:()=>{cs(!1),eo("all")},className:"w-full py-4 text-orange-500 font-medium text-lg hover:bg-[#2c2c2e] transition-colors",children:["Close All (",ce.length,")"]})}),e.jsx("div",{className:"border-t border-gray-700/50",children:e.jsx("button",{onClick:()=>{cs(!1),eo("profit")},className:"w-full py-4 text-green-500 font-medium text-lg hover:bg-[#2c2c2e] transition-colors",children:"Close Profit"})}),e.jsx("div",{className:"border-t border-gray-700/50",children:e.jsx("button",{onClick:()=>{cs(!1),eo("loss")},className:"w-full py-4 text-red-400 font-medium text-lg hover:bg-[#2c2c2e] transition-colors",children:"Close Loss"})})]}),e.jsx("div",{className:"border-t border-gray-700/50",children:e.jsx("button",{onClick:()=>cs(!1),className:"w-full py-4 text-blue-500 font-medium text-lg hover:bg-[#2c2c2e] transition-colors",children:"Cancel"})})]})}),or&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end sm:items-center justify-center",children:e.jsxs("div",{className:"w-full sm:w-80 bg-[#1c1c1e] sm:rounded-2xl rounded-t-2xl overflow-hidden animate-slide-up",children:[e.jsxs("div",{className:"px-4 py-4 text-center",children:[e.jsxs("h3",{className:"text-white font-semibold text-lg",children:[ht==="all"&&"Close All Trades?",ht==="profit"&&"Close Winning Trades?",ht==="loss"&&"Close Losing Trades?"]}),e.jsxs("p",{className:"text-gray-400 text-sm mt-2",children:[ht==="all"&&`This will close all ${ce.length} open trade(s)`,ht==="profit"&&"This will close all trades currently in profit",ht==="loss"&&"This will close all trades currently in loss"]}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"This action cannot be undone"})]}),e.jsx("div",{className:"border-t border-gray-700/50",children:e.jsxs("button",{onClick:yp,className:`w-full py-4 font-semibold text-lg hover:bg-[#2c2c2e] transition-colors ${ht==="profit"?"text-green-500":ht==="loss"?"text-red-500":"text-orange-500"}`,children:[ht==="all"&&"Close All",ht==="profit"&&"Close Winners",ht==="loss"&&"Close Losers"]})}),e.jsx("div",{className:"border-t border-gray-700/50",children:e.jsx("button",{onClick:()=>ss(!1),className:"w-full py-4 text-blue-500 font-medium text-lg hover:bg-[#2c2c2e] transition-colors",children:"Cancel"})})]})}),Js&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-end sm:items-center justify-center",children:e.jsxs("div",{className:"w-full sm:w-96 bg-[#1c1c1e] sm:rounded-2xl rounded-t-2xl overflow-hidden animate-slide-up",children:[e.jsxs("div",{className:"px-4 py-4 text-center border-b border-gray-700/50",children:[e.jsx("div",{className:"text-4xl mb-2",children:""}),e.jsx("h3",{className:"text-white text-lg font-semibold",children:"Kill Switch"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Block all trading for a set period to prevent emotional decisions"})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs mb-2 block",children:"Duration"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",min:"1",max:"999",value:se.value,onChange:D=>Ce(ne=>({...ne,value:parseInt(D.target.value)||1})),className:"flex-1 bg-[#2c2c2e] text-white px-3 py-2 rounded-lg text-center text-lg font-mono"}),e.jsxs("select",{value:se.unit,onChange:D=>Ce(ne=>({...ne,unit:D.target.value})),className:"bg-[#2c2c2e] text-white px-3 py-2 rounded-lg",children:[e.jsx("option",{value:"seconds",children:"Seconds"}),e.jsx("option",{value:"minutes",children:"Minutes"}),e.jsx("option",{value:"hours",children:"Hours"}),e.jsx("option",{value:"days",children:"Days"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-xs mb-2 block",children:"Quick Select"}),e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsx("button",{onClick:()=>Ce({value:30,unit:"seconds"}),className:"bg-[#2c2c2e] hover:bg-[#3c3c3e] text-white py-2 rounded-lg text-xs",children:"30s"}),e.jsx("button",{onClick:()=>Ce({value:5,unit:"minutes"}),className:"bg-[#2c2c2e] hover:bg-[#3c3c3e] text-white py-2 rounded-lg text-xs",children:"5m"}),e.jsx("button",{onClick:()=>Ce({value:30,unit:"minutes"}),className:"bg-[#2c2c2e] hover:bg-[#3c3c3e] text-white py-2 rounded-lg text-xs",children:"30m"}),e.jsx("button",{onClick:()=>Ce({value:1,unit:"hours"}),className:"bg-[#2c2c2e] hover:bg-[#3c3c3e] text-white py-2 rounded-lg text-xs",children:"1h"}),e.jsx("button",{onClick:()=>Ce({value:4,unit:"hours"}),className:"bg-[#2c2c2e] hover:bg-[#3c3c3e] text-white py-2 rounded-lg text-xs",children:"4h"}),e.jsx("button",{onClick:()=>Ce({value:12,unit:"hours"}),className:"bg-[#2c2c2e] hover:bg-[#3c3c3e] text-white py-2 rounded-lg text-xs",children:"12h"}),e.jsx("button",{onClick:()=>Ce({value:1,unit:"days"}),className:"bg-[#2c2c2e] hover:bg-[#3c3c3e] text-white py-2 rounded-lg text-xs",children:"1d"}),e.jsx("button",{onClick:()=>Ce({value:7,unit:"days"}),className:"bg-[#2c2c2e] hover:bg-[#3c3c3e] text-white py-2 rounded-lg text-xs",children:"7d"})]})]}),e.jsx("div",{className:"bg-orange-500/10 border border-orange-500/30 rounded-lg p-3",children:e.jsx("p",{className:"text-orange-400 text-xs",children:" Once activated, you won't be able to open new trades until the timer expires. You can still close existing trades."})})]}),e.jsx("div",{className:"border-t border-gray-700/50",children:e.jsx("button",{onClick:Ks,className:"w-full py-4 text-red-500 font-semibold text-lg hover:bg-[#2c2c2e] transition-colors",children:"Activate Kill Switch"})}),e.jsx("div",{className:"border-t border-gray-700/50",children:e.jsx("button",{onClick:()=>dr(!1),className:"w-full py-4 text-blue-500 font-medium text-lg hover:bg-[#2c2c2e] transition-colors",children:"Cancel"})})]})}),e.jsx("style",{children:`
        @keyframes slide-up {
          from {
            transform: translateY(100%);
            opacity: 0;
          }
          to {
            transform: translateY(0);
            opacity: 1;
          }
        }
        .animate-slide-up {
          animation: slide-up 0.3s ease-out;
        }
      `})]})},zs="http://localhost:5001/api",_j=()=>{var q;const t=ut(),[s,r]=o.useState(!1),[a,n]=o.useState("discover"),[l,i]=o.useState([]),[d,c]=o.useState([]),[u,x]=o.useState([]),[b,f]=o.useState([]),[T,w]=o.useState(!0),[j,S]=o.useState(!1),[p,m]=o.useState(null),[h,N]=o.useState("FIXED_LOT"),[C,E]=o.useState("0.01"),[P,U]=o.useState([]),[K,R]=o.useState(""),[le,X]=o.useState(""),[_,L]=o.useState(!1),[I,$]=o.useState(null),[H,y]=o.useState(!1),[O,g]=o.useState({displayName:"",description:"",tradingAccountId:"",requestedCommissionPercentage:10}),[v,W]=o.useState(!1),[Z,B]=o.useState(window.innerWidth<768),M=JSON.parse(localStorage.getItem("user")||"{}"),te=[{name:"Dashboard",icon:As,path:"/dashboard"},{name:"Account",icon:It,path:"/account"},{name:"Wallet",icon:nt,path:"/wallet"},{name:"IB",icon:et,path:"/ib"},{name:"Copytrade",icon:Jt,path:"/copytrade"},{name:"Profile",icon:nr,path:"/profile"},{name:"Support",icon:Cr,path:"/support"},{name:"Instructions",icon:Ps,path:"/instructions"}];o.useEffect(()=>{const F=()=>B(window.innerWidth<768);return window.addEventListener("resize",F),()=>window.removeEventListener("resize",F)},[]),o.useEffect(()=>{pe(),Y(),re(),Se(),Ie(),z()},[]),o.useEffect(()=>{I!=null&&I._id&&ae()},[I]);const ae=async()=>{if(I!=null&&I._id)try{const k=await(await fetch(`${zs}/copy/my-followers/${I._id}`)).json();f(k.followers||[])}catch(F){console.error("Error fetching my followers:",F)}},pe=async()=>{try{const k=await(await fetch(`${zs}/prop/status`)).json();k.success&&L(k.enabled)}catch(F){console.error("Error:",F)}},Y=async()=>{try{const k=await(await fetch(`${zs}/copy/masters`)).json();i(k.masters||[])}catch(F){console.error("Error fetching masters:",F)}w(!1)},re=async()=>{try{const k=await(await fetch(`${zs}/copy/my-subscriptions/${M._id}`)).json();c(k.subscriptions||[])}catch(F){console.error("Error fetching subscriptions:",F)}},Se=async()=>{try{const k=await(await fetch(`${zs}/copy/my-copy-trades/${M._id}?limit=50`)).json();x(k.copyTrades||[])}catch(F){console.error("Error fetching copy trades:",F)}},Ie=async()=>{var F;try{const ee=await(await fetch(`${zs}/trading-accounts/user/${M._id}`)).json();U(ee.accounts||[]),((F=ee.accounts)==null?void 0:F.length)>0&&(R(ee.accounts[0]._id),g(ce=>({...ce,tradingAccountId:ee.accounts[0]._id})))}catch(k){console.error("Error fetching accounts:",k)}},z=async()=>{try{const k=await(await fetch(`${zs}/copy/master/my-profile/${M._id}`)).json();k.master&&$(k.master)}catch{console.log("No master profile found")}},fe=async()=>{const F=O.tradingAccountId||(P.length>0?P[0]._id:"");if(!O.displayName.trim()){alert("Please enter a display name");return}if(!F){alert("Please select a trading account");return}const k={...O,tradingAccountId:F};W(!0);try{const ce=await(await fetch(`${zs}/copy/master/apply`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:M._id,...k})})).json();ce.master?(alert("Application submitted successfully! Please wait for admin approval."),y(!1),z()):alert(ce.message||"Failed to submit application")}catch(ee){console.error("Error applying as master:",ee),alert("Failed to submit application")}W(!1)},Pe=async()=>{if(!(!p||!K))try{const k=await(await fetch(`${zs}/copy/follow`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({followerUserId:M._id,masterId:p._id,followerAccountId:K,copyMode:h,copyValue:parseFloat(C)})})).json();k.follower?(alert("Successfully following master!"),S(!1),re()):alert(k.message||"Failed to follow")}catch(F){console.error("Error following master:",F),alert("Failed to follow master")}},Te=async(F,k)=>{const ee=k==="ACTIVE"?"pause":"resume";try{(await(await fetch(`${zs}/copy/follow/${F}/${ee}`,{method:"PUT"})).json()).follower&&re()}catch(ce){console.error("Error updating subscription:",ce)}},He=async F=>{if(confirm("Are you sure you want to stop following this master?"))try{(await(await fetch(`${zs}/copy/follow/${F}/stop`,{method:"PUT"})).json()).follower&&re()}catch(k){console.error("Error stopping subscription:",k)}},Oe=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t("/user/login")},G=l.filter(F=>{var k;return(k=F.displayName)==null?void 0:k.toLowerCase().includes(le.toLowerCase())});return e.jsxs("div",{className:"min-h-screen bg-dark-900 flex flex-col md:flex-row",children:[Z&&e.jsxs("header",{className:"fixed top-0 left-0 right-0 z-40 bg-dark-800 border-b border-gray-800 px-4 py-3 flex items-center gap-4",children:[e.jsx("button",{onClick:()=>t("/mobile"),className:"p-2 -ml-2 hover:bg-dark-700 rounded-lg",children:e.jsx(ea,{size:22,className:"text-white"})}),e.jsx("h1",{className:"text-white font-semibold text-lg flex-1",children:"Copy Trading"}),e.jsx("button",{onClick:()=>t("/mobile"),className:"p-2 hover:bg-dark-700 rounded-lg",children:e.jsx(lr,{size:20,className:"text-gray-400"})})]}),!Z&&e.jsxs("aside",{className:`${s?"w-48":"w-16"} bg-dark-900 border-r border-gray-800 flex flex-col transition-all duration-300`,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[e.jsx("div",{className:"p-4 flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 bg-accent-green rounded flex items-center justify-center",children:e.jsx("span",{className:"text-black font-bold text-sm",children:"CL"})})}),e.jsx("nav",{className:"flex-1 px-2",children:te.map(F=>e.jsxs("button",{onClick:()=>t(F.path),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-colors ${F.name==="Copytrade"?"bg-accent-green text-black":"text-gray-400 hover:text-white hover:bg-dark-700"}`,children:[e.jsx(F.icon,{size:18,className:"flex-shrink-0"}),s&&e.jsx("span",{className:"text-sm font-medium",children:F.name})]},F.name))}),e.jsx("div",{className:"p-2 border-t border-gray-800",children:e.jsxs("button",{onClick:Oe,className:"w-full flex items-center gap-3 px-3 py-2.5 text-gray-400 hover:text-white rounded-lg",children:[e.jsx(fs,{size:18}),s&&e.jsx("span",{className:"text-sm",children:"Log Out"})]})})]}),e.jsxs("main",{className:`flex-1 overflow-auto ${Z?"pt-14":""}`,children:[!Z&&e.jsx("header",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-800",children:e.jsx("h1",{className:"text-xl font-semibold text-white",children:"Copy Trading"})}),e.jsxs("div",{className:`${Z?"p-4":"p-6"}`,children:[!I&&e.jsx("div",{className:`bg-gradient-to-r from-yellow-500/20 to-orange-500/20 rounded-xl ${Z?"p-4":"p-5"} border border-yellow-500/30 mb-4`,children:e.jsxs("div",{className:`${Z?"flex flex-col gap-3":"flex items-center justify-between"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`${Z?"w-10 h-10":"w-12 h-12"} bg-yellow-500/20 rounded-full flex items-center justify-center`,children:e.jsx(Ll,{size:Z?20:24,className:"text-yellow-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-white font-semibold ${Z?"text-sm":""}`,children:"Become a Master Trader"}),e.jsx("p",{className:"text-gray-400 text-xs",children:"Share your trades and earn commission"})]})]}),e.jsxs("button",{onClick:()=>y(!0),className:`bg-yellow-500 text-black ${Z?"px-4 py-2 text-sm w-full":"px-6 py-2"} rounded-lg font-medium hover:bg-yellow-400 flex items-center justify-center gap-2`,children:[e.jsx(Ll,{size:16}),"Apply Now"]})]})}),I&&e.jsxs("div",{className:`rounded-xl ${Z?"p-4":"p-5"} border mb-4 ${I.status==="ACTIVE"?"bg-green-500/10 border-green-500/30":I.status==="PENDING"?"bg-yellow-500/10 border-yellow-500/30":I.status==="REJECTED"?"bg-red-500/10 border-red-500/30":"bg-gray-500/10 border-gray-500/30"}`,children:[e.jsxs("div",{className:`${Z?"flex flex-col gap-3":"flex items-center justify-between"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`${Z?"w-10 h-10":"w-12 h-12"} rounded-full flex items-center justify-center ${I.status==="ACTIVE"?"bg-green-500/20":I.status==="PENDING"?"bg-yellow-500/20":"bg-red-500/20"}`,children:e.jsx(Ll,{size:Z?20:24,className:I.status==="ACTIVE"?"text-green-500":I.status==="PENDING"?"text-yellow-500":"text-red-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-white font-semibold ${Z?"text-sm":""}`,children:I.displayName}),e.jsxs("p",{className:"text-gray-400 text-xs",children:[e.jsx("span",{className:I.status==="ACTIVE"?"text-green-500":I.status==="PENDING"?"text-yellow-500":"text-red-500",children:I.status}),I.status==="ACTIVE"&&`  ${((q=I.stats)==null?void 0:q.activeFollowers)||0} followers`]})]})]}),I.status==="ACTIVE"&&e.jsx("div",{className:Z?"":"text-right",children:e.jsxs("p",{className:"text-gray-400 text-xs",children:["Commission: ",e.jsxs("span",{className:"text-white font-semibold",children:[I.approvedCommissionPercentage,"%"]})]})})]}),I.status==="REJECTED"&&I.rejectionReason&&e.jsxs("p",{className:"text-red-400 text-xs mt-2",children:["Reason: ",I.rejectionReason]})]}),e.jsx("div",{className:`flex ${Z?"gap-2 overflow-x-auto pb-2":"gap-4"} mb-4`,children:["discover","subscriptions","trades",...(I==null?void 0:I.status)==="ACTIVE"?["my-followers"]:[]].map(F=>e.jsx("button",{onClick:()=>n(F),className:`${Z?"px-3 py-1.5 text-xs whitespace-nowrap":"px-4 py-2"} rounded-lg font-medium transition-colors ${a===F?"bg-accent-green text-black":"bg-dark-800 text-gray-400 hover:text-white"}`,children:F==="discover"?"Discover":F==="subscriptions"?"Subscriptions":F==="trades"?"Trades":"Followers"},F))}),a==="discover"&&e.jsxs("div",{children:[e.jsx("div",{className:`flex ${Z?"gap-2":"gap-4"} mb-4`,children:e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(_t,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:16}),e.jsx("input",{type:"text",placeholder:"Search masters...",value:le,onChange:F=>X(F.target.value),className:`w-full bg-dark-800 border border-gray-700 rounded-lg pl-9 pr-3 ${Z?"py-2 text-sm":"py-2"} text-white`})]})}),T?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"Loading masters..."}):G.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Jt,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No master traders available yet"}),e.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"Check back later for trading experts to follow"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:G.map(F=>{var ee,ce,je,he,Le,Be,V;const k=d.some(ue=>{var ke;return((ke=ue.masterId)==null?void 0:ke._id)===F._id||ue.masterId===F._id});return e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-accent-green/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-accent-green font-bold",children:(ee=F.displayName)==null?void 0:ee.charAt(0)})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-white font-semibold",children:F.displayName}),e.jsxs("p",{className:"text-gray-500 text-sm",children:[((ce=F.stats)==null?void 0:ce.activeFollowers)||0," followers"]})]}),k&&e.jsx("span",{className:"px-2 py-1 bg-green-500/20 text-green-500 text-xs rounded-full font-medium",children:"Following"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3",children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Win Rate"}),e.jsxs("p",{className:"text-white font-semibold",children:[((he=(je=F.stats)==null?void 0:je.winRate)==null?void 0:he.toFixed(1))||0,"%"]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3",children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Total Trades"}),e.jsx("p",{className:"text-white font-semibold",children:((Le=F.stats)==null?void 0:Le.totalTrades)||0})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3",children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Commission"}),e.jsxs("p",{className:"text-white font-semibold",children:[F.approvedCommissionPercentage||0,"%"]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3",children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Profit"}),e.jsxs("p",{className:"text-accent-green font-semibold",children:["$",((V=(Be=F.stats)==null?void 0:Be.totalProfitGenerated)==null?void 0:V.toFixed(2))||"0.00"]})]})]}),k?e.jsx("button",{onClick:()=>n("subscriptions"),className:"w-full bg-green-500/20 text-green-500 py-2 rounded-lg font-medium border border-green-500/50 hover:bg-green-500/30",children:" Following"}):e.jsx("button",{onClick:()=>{m(F),S(!0)},className:"w-full bg-accent-green text-black py-2 rounded-lg font-medium hover:bg-accent-green/90",children:"Follow"})]},F._id)})})]}),a==="subscriptions"&&e.jsx("div",{children:d.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(et,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"You're not following any masters yet"}),e.jsx("button",{onClick:()=>n("discover"),className:"mt-4 text-accent-green hover:underline",children:"Discover Masters "})]}):e.jsx("div",{className:"space-y-4",children:d.map(F=>{var k,ee,ce,je,he,Le,Be,V,ue,ke,We;return e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-accent-green/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-accent-green font-bold",children:(ee=(k=F.masterId)==null?void 0:k.displayName)==null?void 0:ee.charAt(0)})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:(ce=F.masterId)==null?void 0:ce.displayName}),e.jsx("p",{className:"text-gray-500 text-sm",children:F.copyMode==="FIXED_LOT"?`Fixed: ${F.copyValue} lots`:`Multiplier: ${F.copyValue}x`})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${F.status==="ACTIVE"?"bg-green-500/20 text-green-500":F.status==="PAUSED"?"bg-yellow-500/20 text-yellow-500":"bg-red-500/20 text-red-500"}`,children:F.status}),e.jsx("button",{onClick:()=>Te(F._id,F.status),className:"p-2 bg-dark-700 rounded-lg hover:bg-dark-600",children:F.status==="ACTIVE"?e.jsx(bb,{size:16,className:"text-yellow-500"}):e.jsx(Nb,{size:16,className:"text-green-500"})}),e.jsx("button",{onClick:()=>He(F._id),className:"p-2 bg-dark-700 rounded-lg hover:bg-red-500/20",children:e.jsx(ye,{size:16,className:"text-red-500"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-3 mt-4 pt-4 border-t border-gray-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Total Trades"}),e.jsx("p",{className:"text-white font-semibold",children:((je=F.stats)==null?void 0:je.totalCopiedTrades)||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Open / Closed"}),e.jsxs("p",{className:"text-white font-semibold",children:[e.jsx("span",{className:"text-blue-400",children:((he=F.stats)==null?void 0:he.openTrades)||0})," / ",e.jsx("span",{className:"text-gray-400",children:((Le=F.stats)==null?void 0:Le.closedTrades)||0})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Total Profit"}),e.jsxs("p",{className:"text-green-500 font-semibold",children:["+$",(((Be=F.stats)==null?void 0:Be.totalProfit)||0).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Total Loss"}),e.jsxs("p",{className:"text-red-500 font-semibold",children:["-$",(((V=F.stats)==null?void 0:V.totalLoss)||0).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Net P&L"}),e.jsxs("p",{className:`font-semibold ${(((ue=F.stats)==null?void 0:ue.netPnl)||0)>=0?"text-green-500":"text-red-500"}`,children:[(((ke=F.stats)==null?void 0:ke.netPnl)||0)>=0?"+":"","$",(((We=F.stats)==null?void 0:We.netPnl)||0).toFixed(2)]})]})]})]},F._id)})})}),a==="trades"&&e.jsx("div",{children:u.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(mt,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No copy trades yet"})]}):e.jsx("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-dark-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left text-gray-400 text-xs font-medium px-4 py-3",children:"Master"}),e.jsx("th",{className:"text-left text-gray-400 text-xs font-medium px-4 py-3",children:"Symbol"}),e.jsx("th",{className:"text-left text-gray-400 text-xs font-medium px-4 py-3",children:"Side"}),e.jsx("th",{className:"text-left text-gray-400 text-xs font-medium px-4 py-3",children:"Lots"}),e.jsx("th",{className:"text-left text-gray-400 text-xs font-medium px-4 py-3",children:"Open Price"}),e.jsx("th",{className:"text-left text-gray-400 text-xs font-medium px-4 py-3",children:"Close Price"}),e.jsx("th",{className:"text-left text-gray-400 text-xs font-medium px-4 py-3",children:"P/L"}),e.jsx("th",{className:"text-left text-gray-400 text-xs font-medium px-4 py-3",children:"Status"})]})}),e.jsx("tbody",{children:u.map(F=>{var k,ee,ce,je;return e.jsxs("tr",{className:"border-t border-gray-800",children:[e.jsx("td",{className:"px-4 py-3 text-white text-sm",children:((k=F.masterId)==null?void 0:k.displayName)||"-"}),e.jsx("td",{className:"px-4 py-3 text-white text-sm",children:F.symbol}),e.jsx("td",{className:`px-4 py-3 text-sm ${F.side==="BUY"?"text-green-500":"text-red-500"}`,children:F.side}),e.jsx("td",{className:"px-4 py-3 text-white text-sm",children:F.followerLotSize}),e.jsx("td",{className:"px-4 py-3 text-white text-sm",children:(ee=F.followerOpenPrice)==null?void 0:ee.toFixed(5)}),e.jsx("td",{className:"px-4 py-3 text-white text-sm",children:((ce=F.followerClosePrice)==null?void 0:ce.toFixed(5))||"-"}),e.jsxs("td",{className:`px-4 py-3 text-sm font-medium ${F.followerPnl>=0?"text-green-500":"text-red-500"}`,children:["$",((je=F.followerPnl)==null?void 0:je.toFixed(2))||"0.00"]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${F.status==="OPEN"?"bg-blue-500/20 text-blue-500":F.status==="CLOSED"?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:F.status})})]},F._id)})})]})})}),a==="my-followers"&&(I==null?void 0:I.status)==="ACTIVE"&&e.jsx("div",{children:b.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(et,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No followers yet"}),e.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"Share your profile to attract followers"})]}):e.jsx("div",{className:"space-y-4",children:b.map(F=>{var k,ee,ce,je,he,Le,Be,V,ue,ke,We,Ue,ft;return e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-500 font-bold",children:((ee=(k=F.followerId)==null?void 0:k.firstName)==null?void 0:ee.charAt(0))||"U"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-white font-semibold",children:[(ce=F.followerId)==null?void 0:ce.firstName," ",(je=F.followerId)==null?void 0:je.lastName]}),e.jsx("p",{className:"text-gray-500 text-sm",children:(he=F.followerId)==null?void 0:he.email}),e.jsx("p",{className:"text-gray-600 text-xs mt-1",children:F.copyMode==="FIXED_LOT"?`Fixed: ${F.copyValue} lots`:`Multiplier: ${F.copyValue}x`})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${F.status==="ACTIVE"?"bg-green-500/20 text-green-500":F.status==="PAUSED"?"bg-yellow-500/20 text-yellow-500":"bg-red-500/20 text-red-500"}`,children:F.status}),e.jsxs("p",{className:"text-gray-500 text-xs mt-2",children:["Account: ",(Le=F.followerAccountId)==null?void 0:Le.accountId]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mt-4 pt-4 border-t border-gray-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Copied Trades"}),e.jsx("p",{className:"text-white font-semibold",children:((Be=F.stats)==null?void 0:Be.totalCopiedTrades)||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Their Profit"}),e.jsxs("p",{className:"text-accent-green font-semibold",children:["$",((ue=(V=F.stats)==null?void 0:V.totalProfit)==null?void 0:ue.toFixed(2))||"0.00"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Their Loss"}),e.jsxs("p",{className:"text-red-500 font-semibold",children:["$",((We=(ke=F.stats)==null?void 0:ke.totalLoss)==null?void 0:We.toFixed(2))||"0.00"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Commission Earned"}),e.jsxs("p",{className:"text-purple-400 font-semibold",children:["$",((ft=(Ue=F.stats)==null?void 0:Ue.totalCommissionPaid)==null?void 0:ft.toFixed(2))||"0.00"]})]})]})]},F._id)})})})]})]}),j&&p&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 w-full max-w-md border border-gray-700",children:[e.jsxs("h2",{className:"text-xl font-semibold text-white mb-4",children:["Follow ",p.displayName]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Trading Account"}),e.jsx("select",{value:K,onChange:F=>R(F.target.value),className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white",children:P.map(F=>{var k;return e.jsxs("option",{value:F._id,children:[F.accountId," - $",(k=F.balance)==null?void 0:k.toFixed(2)]},F._id)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Copy Mode"}),e.jsxs("select",{value:h,onChange:F=>N(F.target.value),className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white",children:[e.jsx("option",{value:"FIXED_LOT",children:"Fixed Lot Size"}),e.jsx("option",{value:"LOT_MULTIPLIER",children:"Lot Multiplier"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:h==="FIXED_LOT"?"Lot Size":"Multiplier"}),e.jsx("input",{type:"number",value:C,onChange:F=>E(F.target.value),step:"0.01",min:"0.01",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white"}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:h==="FIXED_LOT"?"Each copied trade will use this lot size":"Your lot size = Master lot  this value"})]}),e.jsx("div",{className:"bg-dark-700 rounded-lg p-3",children:e.jsxs("p",{className:"text-gray-400 text-sm",children:["Commission: ",e.jsxs("span",{className:"text-white",children:[p.approvedCommissionPercentage,"%"]})," of daily profit"]})})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>S(!1),className:"flex-1 bg-dark-700 text-white py-2 rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:Pe,className:"flex-1 bg-accent-green text-black py-2 rounded-lg font-medium hover:bg-accent-green/90",children:"Start Following"})]})]})}),H&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 w-full max-w-md border border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-500/20 rounded-full flex items-center justify-center",children:e.jsx(Ll,{size:20,className:"text-yellow-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Become a Master Trader"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Share your trades with followers"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Display Name *"}),e.jsx("input",{type:"text",value:O.displayName,onChange:F=>g(k=>({...k,displayName:F.target.value})),placeholder:"Your trading name",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Description"}),e.jsx("textarea",{value:O.description,onChange:F=>g(k=>({...k,description:F.target.value})),placeholder:"Tell followers about your trading strategy...",rows:3,className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Trading Account *"}),e.jsxs("select",{value:O.tradingAccountId||(P.length>0?P[0]._id:""),onChange:F=>g(k=>({...k,tradingAccountId:F.target.value})),className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white",children:[P.length===0&&e.jsx("option",{value:"",children:"No accounts available"}),P.map(F=>{var k;return e.jsxs("option",{value:F._id,children:[F.accountId," - $",(k=F.balance)==null?void 0:k.toFixed(2)]},F._id)})]}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Trades from this account will be copied to followers"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Requested Commission (%)"}),e.jsx("input",{type:"number",value:O.requestedCommissionPercentage,onChange:F=>g(k=>({...k,requestedCommissionPercentage:parseFloat(F.target.value)||0})),min:"0",max:"50",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white"}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Commission you'll earn from followers' daily profits (0-50%)"})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4 space-y-2",children:[e.jsx("p",{className:"text-white text-sm font-medium",children:"Requirements:"}),e.jsxs("ul",{className:"text-gray-400 text-xs space-y-1",children:[e.jsx("li",{children:" Minimum account balance may be required"}),e.jsx("li",{children:" Trading history will be reviewed"}),e.jsx("li",{children:" Admin approval is required"})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>y(!1),className:"flex-1 bg-dark-700 text-white py-2 rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:fe,disabled:v,className:"flex-1 bg-yellow-500 text-black py-2 rounded-lg font-medium hover:bg-yellow-400 disabled:opacity-50",children:v?"Submitting...":"Submit Application"})]})]})})]})},sa="http://localhost:5001/api",Mj=()=>{var O,g,v,W,Z;const t=ut(),[s,r]=o.useState(!1),[a,n]=o.useState("overview"),[l,i]=o.useState(null),[d,c]=o.useState([]),[u,x]=o.useState([]),[b,f]=o.useState([]),[T,w]=o.useState(!0),[j,S]=o.useState(!1),[p,m]=o.useState(""),[h,N]=o.useState(!1),[C,E]=o.useState(window.innerWidth<768),P=JSON.parse(localStorage.getItem("user")||"{}"),U=[{name:"Dashboard",icon:As,path:"/dashboard"},{name:"Account",icon:It,path:"/account"},{name:"Wallet",icon:nt,path:"/wallet"},{name:"IB",icon:et,path:"/ib"},{name:"Copytrade",icon:Jt,path:"/copytrade"},{name:"Profile",icon:nr,path:"/profile"},{name:"Support",icon:Cr,path:"/support"},{name:"Instructions",icon:Ps,path:"/instructions"}];o.useEffect(()=>{const B=()=>E(window.innerWidth<768);return window.addEventListener("resize",B),()=>window.removeEventListener("resize",B)},[]),o.useEffect(()=>{K(),R()},[]);const K=async()=>{try{const M=await(await fetch(`${sa}/prop/status`)).json();M.success&&N(M.enabled)}catch(B){console.error("Error fetching challenge status:",B)}},R=async()=>{var B,M;try{const ae=await(await fetch(`${sa}/ib/my-profile/${P._id}`)).json();ae.ibUser&&(i({...ae.ibUser,ibWalletBalance:((B=ae.wallet)==null?void 0:B.balance)||0,totalCommissionEarned:((M=ae.wallet)==null?void 0:M.totalEarned)||0,stats:ae.stats||{}}),(ae.ibUser.status==="ACTIVE"||ae.ibUser.ibStatus==="ACTIVE")&&(le(),X(),_()))}catch(te){console.error("Error fetching IB profile:",te)}w(!1)},le=async()=>{try{const M=await(await fetch(`${sa}/ib/my-referrals/${P._id}`)).json();c(M.referrals||[])}catch(B){console.error("Error fetching referrals:",B)}},X=async()=>{try{const M=await(await fetch(`${sa}/ib/my-commissions/${P._id}`)).json();x(M.commissions||[])}catch(B){console.error("Error fetching commissions:",B)}},_=async()=>{var B;try{const te=await(await fetch(`${sa}/ib/my-downline/${P._id}`)).json();f(((B=te.tree)==null?void 0:B.downlines)||[])}catch(M){console.error("Error fetching downline:",M)}},L=async()=>{S(!0);try{const M=await(await fetch(`${sa}/ib/apply`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:P._id})})).json();M.ibUser?(i(M.ibUser),alert("IB application submitted successfully!")):alert(M.message||"Failed to apply")}catch(B){console.error("Error applying:",B),alert("Failed to submit application")}S(!1)},I=async()=>{if(!p||parseFloat(p)<=0){alert("Please enter a valid amount");return}try{const M=await(await fetch(`${sa}/ib/withdraw`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:P._id,amount:parseFloat(p)})})).json();M.status?(alert(M.message),m(""),R()):alert(M.message||"Failed to withdraw")}catch(B){console.error("Error withdrawing:",B),alert("Failed to process withdrawal")}},$=()=>{const B=`${window.location.origin}/user/signup?ref=${l==null?void 0:l.referralCode}`;navigator.clipboard.writeText(B),alert("Referral link copied!")},H=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t("/user/login")},y=(B,M=0)=>!B||B.length===0?null:B.map((te,ae)=>{var pe;return e.jsx("div",{className:"ml-4 border-l border-gray-700 pl-4 py-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${te.isIB?"bg-accent-green/20":"bg-gray-700"}`,children:e.jsx("span",{className:te.isIB?"text-accent-green":"text-gray-400",children:((pe=te.firstName)==null?void 0:pe.charAt(0))||"?"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-sm",children:te.firstName||"Unknown"}),e.jsx("p",{className:"text-gray-500 text-xs",children:te.email})]}),e.jsx("div",{className:"ml-auto text-right",children:e.jsxs("span",{className:`px-2 py-1 rounded text-xs ${te.isIB?"bg-accent-green/20 text-accent-green":"bg-gray-700 text-gray-400"}`,children:[te.isIB?"IB":"User","  Level ",(te.level||0)+1]})})]})},te._id||ae)});return e.jsxs("div",{className:"min-h-screen bg-dark-900 flex flex-col md:flex-row",children:[C&&e.jsxs("header",{className:"fixed top-0 left-0 right-0 z-40 bg-dark-800 border-b border-gray-800 px-4 py-3 flex items-center gap-4",children:[e.jsx("button",{onClick:()=>t("/mobile"),className:"p-2 -ml-2 hover:bg-dark-700 rounded-lg",children:e.jsx(ea,{size:22,className:"text-white"})}),e.jsx("h1",{className:"text-white font-semibold text-lg flex-1",children:"IB Program"}),e.jsx("button",{onClick:()=>t("/mobile"),className:"p-2 hover:bg-dark-700 rounded-lg",children:e.jsx(lr,{size:20,className:"text-gray-400"})})]}),!C&&e.jsxs("aside",{className:`${s?"w-48":"w-16"} bg-dark-900 border-r border-gray-800 flex flex-col transition-all duration-300`,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[e.jsx("div",{className:"p-4 flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 bg-accent-green rounded flex items-center justify-center",children:e.jsx("span",{className:"text-black font-bold text-sm",children:"CL"})})}),e.jsx("nav",{className:"flex-1 px-2",children:U.map(B=>e.jsxs("button",{onClick:()=>t(B.path),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-colors ${B.name==="IB"?"bg-accent-green text-black":"text-gray-400 hover:text-white hover:bg-dark-700"}`,children:[e.jsx(B.icon,{size:18,className:"flex-shrink-0"}),s&&e.jsx("span",{className:"text-sm font-medium",children:B.name})]},B.name))}),e.jsx("div",{className:"p-2 border-t border-gray-800",children:e.jsxs("button",{onClick:H,className:"w-full flex items-center gap-3 px-3 py-2.5 text-gray-400 hover:text-white rounded-lg",children:[e.jsx(fs,{size:18}),s&&e.jsx("span",{className:"text-sm",children:"Log Out"})]})})]}),e.jsxs("main",{className:`flex-1 overflow-auto ${C?"pt-14":""}`,children:[!C&&e.jsx("header",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-800",children:e.jsx("h1",{className:"text-xl font-semibold text-white",children:"Introducing Broker (IB)"})}),e.jsx("div",{className:`${C?"p-4":"p-6"}`,children:T?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"Loading..."}):l?l.status==="PENDING"?e.jsxs("div",{className:`${C?"":"max-w-lg mx-auto"} text-center ${C?"py-6":"py-12"}`,children:[e.jsx("div",{className:`${C?"w-16 h-16":"w-20 h-20"} bg-yellow-500/20 rounded-full flex items-center justify-center mx-auto mb-4`,children:e.jsx(Do,{size:C?32:40,className:"text-yellow-500"})}),e.jsx("h2",{className:`${C?"text-xl":"text-2xl"} font-bold text-white mb-3`,children:"Application Pending"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Your IB application is under review. You will be notified once approved."})]}):l.status==="REJECTED"?e.jsxs("div",{className:`${C?"":"max-w-lg mx-auto"} text-center ${C?"py-6":"py-12"}`,children:[e.jsx("div",{className:`${C?"w-16 h-16":"w-20 h-20"} bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4`,children:e.jsx(Do,{size:C?32:40,className:"text-red-500"})}),e.jsx("h2",{className:`${C?"text-xl":"text-2xl"} font-bold text-white mb-3`,children:"Application Rejected"}),e.jsx("p",{className:"text-gray-400 mb-2 text-sm",children:"Unfortunately, your IB application was not approved."}),l.rejectionReason&&e.jsxs("p",{className:"text-red-400 text-sm",children:["Reason: ",l.rejectionReason]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:`grid ${C?"grid-cols-2 gap-3":"grid-cols-4 gap-4"} mb-4`,children:[e.jsxs("div",{className:`bg-dark-800 rounded-xl ${C?"p-3":"p-5"} border border-gray-800`,children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("div",{className:`${C?"w-8 h-8":"w-10 h-10"} bg-accent-green/20 rounded-lg flex items-center justify-center`,children:e.jsx(Pt,{size:C?16:20,className:"text-accent-green"})})}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Available Balance"}),e.jsxs("p",{className:`text-white font-bold ${C?"text-lg":"text-2xl"}`,children:["$",((O=l.ibWalletBalance)==null?void 0:O.toFixed(2))||"0.00"]})]}),e.jsxs("div",{className:`bg-dark-800 rounded-xl ${C?"p-3":"p-5"} border border-gray-800`,children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("div",{className:`${C?"w-8 h-8":"w-10 h-10"} bg-blue-500/20 rounded-lg flex items-center justify-center`,children:e.jsx(mt,{size:C?16:20,className:"text-blue-500"})})}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Total Earned"}),e.jsxs("p",{className:`text-white font-bold ${C?"text-lg":"text-2xl"}`,children:["$",((g=l.totalCommissionEarned)==null?void 0:g.toFixed(2))||"0.00"]})]}),e.jsxs("div",{className:`bg-dark-800 rounded-xl ${C?"p-3":"p-5"} border border-gray-800`,children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("div",{className:`${C?"w-8 h-8":"w-10 h-10"} bg-purple-500/20 rounded-lg flex items-center justify-center`,children:e.jsx(et,{size:C?16:20,className:"text-purple-500"})})}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Direct Referrals"}),e.jsx("p",{className:`text-white font-bold ${C?"text-lg":"text-2xl"}`,children:((v=l.stats)==null?void 0:v.directReferrals)||0})]}),e.jsxs("div",{className:`bg-dark-800 rounded-xl ${C?"p-3":"p-5"} border border-gray-800`,children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:e.jsx("div",{className:`${C?"w-8 h-8":"w-10 h-10"} bg-orange-500/20 rounded-lg flex items-center justify-center`,children:e.jsx(Cb,{size:C?16:20,className:"text-orange-500"})})}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Total Downline"}),e.jsx("p",{className:`text-white font-bold ${C?"text-lg":"text-2xl"}`,children:((W=l.stats)==null?void 0:W.totalDownline)||0})]})]}),e.jsxs("div",{className:`bg-dark-800 rounded-xl ${C?"p-3":"p-5"} border border-gray-800 mb-4`,children:[e.jsx("h3",{className:`text-white font-semibold mb-2 ${C?"text-sm":""}`,children:"Your Referral Link"}),e.jsxs("div",{className:`flex ${C?"flex-col":""} gap-2`,children:[e.jsx("input",{type:"text",readOnly:!0,value:`${window.location.origin}/user/signup?ref=${l.referralCode}`,className:`flex-1 bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-gray-400 ${C?"text-xs":""}`}),e.jsxs("button",{onClick:$,className:`bg-accent-green text-black ${C?"px-4 py-2 text-sm":"px-6 py-2"} rounded-lg font-medium hover:bg-accent-green/90 flex items-center justify-center gap-2`,children:[e.jsx(J0,{size:16}),"Copy"]})]}),e.jsx("p",{className:"text-gray-500 text-xs mt-2",children:"Share this link to earn commissions"})]}),e.jsx("div",{className:`flex ${C?"gap-1 overflow-x-auto pb-2":"gap-4"} mb-4`,children:["overview","referrals","commissions","downline","withdraw"].map(B=>e.jsx("button",{onClick:()=>n(B),className:`${C?"px-3 py-1.5 text-xs whitespace-nowrap":"px-4 py-2"} rounded-lg font-medium capitalize transition-colors ${a===B?"bg-accent-green text-black":"bg-dark-800 text-gray-400 hover:text-white"}`,children:B},B))}),a==="overview"&&e.jsx("div",{className:`grid ${C?"grid-cols-2 gap-2":"grid-cols-5 gap-4"}`,children:[1,2,3,4,5].map(B=>{var M;return e.jsxs("div",{className:`bg-dark-800 rounded-xl ${C?"p-3":"p-4"} border border-gray-800 text-center`,children:[e.jsxs("p",{className:"text-gray-500 text-xs mb-1",children:["Level ",B]}),e.jsx("p",{className:`text-white font-bold ${C?"text-lg":"text-xl"}`,children:((M=l.stats)==null?void 0:M[`level${B}Count`])||0}),e.jsx("p",{className:"text-gray-600 text-xs",children:"referrals"})]},B)})}),a==="referrals"&&e.jsx("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:d.length===0?e.jsx("div",{className:`text-center ${C?"py-8":"py-12"} text-gray-500 text-sm`,children:"No referrals yet"}):C?e.jsx("div",{className:"divide-y divide-gray-800",children:d.map(B=>e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsxs("p",{className:"text-white text-sm font-medium",children:[B.firstName," ",B.lastName]}),e.jsx("p",{className:"text-gray-500 text-xs",children:new Date(B.createdAt).toLocaleDateString()})]}),e.jsx("p",{className:"text-gray-400 text-xs",children:B.email})]},B._id))}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-dark-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left text-gray-400 text-xs font-medium px-4 py-3",children:"User"}),e.jsx("th",{className:"text-left text-gray-400 text-xs font-medium px-4 py-3",children:"Email"}),e.jsx("th",{className:"text-left text-gray-400 text-xs font-medium px-4 py-3",children:"Joined"}),e.jsx("th",{className:"text-left text-gray-400 text-xs font-medium px-4 py-3",children:"Volume"}),e.jsx("th",{className:"text-left text-gray-400 text-xs font-medium px-4 py-3",children:"Commission"})]})}),e.jsx("tbody",{children:d.map(B=>e.jsxs("tr",{className:"border-t border-gray-800",children:[e.jsxs("td",{className:"px-4 py-3 text-white text-sm",children:[B.firstName," ",B.lastName]}),e.jsx("td",{className:"px-4 py-3 text-gray-400 text-sm",children:B.email}),e.jsx("td",{className:"px-4 py-3 text-gray-400 text-sm",children:new Date(B.createdAt).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-3 text-white text-sm",children:"-"}),e.jsx("td",{className:"px-4 py-3 text-accent-green text-sm",children:"-"})]},B._id))})]})}),a==="commissions"&&e.jsx("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:u.length===0?e.jsx("div",{className:`text-center ${C?"py-8":"py-12"} text-gray-500 text-sm`,children:"No commissions yet"}):C?e.jsx("div",{className:"divide-y divide-gray-800",children:u.map(B=>{var M,te;return e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("p",{className:"text-white text-sm font-medium",children:B.symbol}),e.jsxs("p",{className:"text-accent-green text-sm font-medium",children:["$",(M=B.commissionAmount)==null?void 0:M.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("p",{className:"text-gray-400 text-xs",children:["Level ",B.level,"  ",(te=B.tradeLotSize)==null?void 0:te.toFixed(2)," lots"]}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${B.status==="CREDITED"?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:B.status})]}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:new Date(B.createdAt).toLocaleDateString()})]},B._id)})}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-dark-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left text-gray-400 text-xs font-medium px-4 py-3",children:"Date"}),e.jsx("th",{className:"text-left text-gray-400 text-xs font-medium px-4 py-3",children:"Trader"}),e.jsx("th",{className:"text-left text-gray-400 text-xs font-medium px-4 py-3",children:"Symbol"}),e.jsx("th",{className:"text-left text-gray-400 text-xs font-medium px-4 py-3",children:"Level"}),e.jsx("th",{className:"text-left text-gray-400 text-xs font-medium px-4 py-3",children:"Lots"}),e.jsx("th",{className:"text-left text-gray-400 text-xs font-medium px-4 py-3",children:"Commission"}),e.jsx("th",{className:"text-left text-gray-400 text-xs font-medium px-4 py-3",children:"Status"})]})}),e.jsx("tbody",{children:u.map(B=>{var M,te,ae;return e.jsxs("tr",{className:"border-t border-gray-800",children:[e.jsx("td",{className:"px-4 py-3 text-gray-400 text-sm",children:new Date(B.createdAt).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-3 text-white text-sm",children:((M=B.traderUserId)==null?void 0:M.firstName)||"Unknown"}),e.jsx("td",{className:"px-4 py-3 text-white text-sm",children:B.symbol}),e.jsxs("td",{className:"px-4 py-3 text-gray-400 text-sm",children:["Level ",B.level]}),e.jsx("td",{className:"px-4 py-3 text-white text-sm",children:(te=B.tradeLotSize)==null?void 0:te.toFixed(2)}),e.jsxs("td",{className:"px-4 py-3 text-accent-green text-sm",children:["$",(ae=B.commissionAmount)==null?void 0:ae.toFixed(2)]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${B.status==="CREDITED"?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:B.status})})]},B._id)})})]})}),a==="downline"&&e.jsx("div",{className:`bg-dark-800 rounded-xl ${C?"p-3":"p-5"} border border-gray-800`,children:b.length===0?e.jsx("div",{className:`text-center ${C?"py-8":"py-12"} text-gray-500 text-sm`,children:"No downline yet"}):e.jsx("div",{children:y(b)})}),a==="withdraw"&&e.jsx("div",{className:C?"":"max-w-md",children:e.jsxs("div",{className:`bg-dark-800 rounded-xl ${C?"p-4":"p-6"} border border-gray-800`,children:[e.jsx("h3",{className:`text-white font-semibold ${C?"mb-3 text-sm":"mb-4"}`,children:"Withdraw Commission"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"Available Balance"}),e.jsxs("p",{className:`text-accent-green font-bold ${C?"text-xl":"text-2xl"}`,children:["$",((Z=l.ibWalletBalance)==null?void 0:Z.toFixed(2))||"0.00"]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"text-gray-400 text-xs mb-1 block",children:"Amount"}),e.jsx("input",{type:"number",value:p,onChange:B=>m(B.target.value),placeholder:"Enter amount",className:`w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white ${C?"text-sm":""}`})]}),e.jsx("button",{onClick:I,disabled:!p||parseFloat(p)<=0,className:`w-full bg-accent-green text-black py-2 rounded-lg font-medium hover:bg-accent-green/90 disabled:opacity-50 ${C?"text-sm":""}`,children:"Request Withdrawal"}),l.pendingWithdrawal>0&&e.jsxs("p",{className:"text-yellow-500 text-sm mt-3",children:["Pending withdrawal: $",l.pendingWithdrawal.toFixed(2)]})]})})]}):e.jsxs("div",{className:`${C?"":"max-w-lg mx-auto"} text-center ${C?"py-6":"py-12"}`,children:[e.jsx("div",{className:`${C?"w-16 h-16":"w-20 h-20"} bg-accent-green/20 rounded-full flex items-center justify-center mx-auto mb-4`,children:e.jsx(Do,{size:C?32:40,className:"text-accent-green"})}),e.jsx("h2",{className:`${C?"text-xl":"text-2xl"} font-bold text-white mb-3`,children:"Become an Introducing Broker"}),e.jsx("p",{className:"text-gray-400 mb-4 text-sm",children:"Earn commissions by referring traders. Get up to 5 levels of referral commissions!"}),e.jsxs("div",{className:`bg-dark-800 rounded-xl ${C?"p-4":"p-6"} mb-4 text-left`,children:[e.jsx("h3",{className:"text-white font-semibold mb-3 text-sm",children:"Benefits:"}),e.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(gr,{size:14,className:"text-accent-green flex-shrink-0"}),"Earn commission on every trade your referrals make"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(gr,{size:14,className:"text-accent-green flex-shrink-0"}),"Multi-level commissions (up to 5 levels)"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(gr,{size:14,className:"text-accent-green flex-shrink-0"}),"Real-time commission tracking"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(gr,{size:16,className:"text-accent-green"}),"Easy withdrawal to your wallet"]})]})]}),e.jsx("button",{onClick:L,disabled:j,className:"bg-accent-green text-black px-8 py-3 rounded-lg font-semibold hover:bg-accent-green/90 disabled:opacity-50",children:j?"Applying...":"Apply Now"})]})})]})]})},ra="http://localhost:5001/api",Fj=()=>{var te,ae,pe,Y,re,Se,Ie,z,fe,Pe,Te,He,Oe,G;const t=ut(),s=JSON.parse(localStorage.getItem("user")||"{}"),[r,a]=o.useState(!1),[n,l]=o.useState(!1),[i,d]=o.useState(!1),[c,u]=o.useState(!1),[x,b]=o.useState(window.innerWidth<768),[f,T]=o.useState(null),[w,j]=o.useState(!1),[S,p]=o.useState(!1),[m,h]=o.useState({documentType:"aadhaar",documentNumber:"",frontImage:"",backImage:"",selfieImage:""}),[N,C]=o.useState([]),[E,P]=o.useState(!1),[U,K]=o.useState("Bank Transfer"),[R,le]=o.useState({bankName:"",accountNumber:"",accountHolderName:"",ifscCode:"",branchName:"",upiId:""}),[X,_]=o.useState(!1);o.useEffect(()=>{const q=()=>b(window.innerWidth<768);return window.addEventListener("resize",q),()=>window.removeEventListener("resize",q)},[]),o.useEffect(()=>{g(),H(),L()},[]);const L=async()=>{try{const F=await(await fetch(`${ra}/payment-methods/user-banks/${s._id}`)).json();C(F.accounts||[])}catch(q){console.error("Error fetching bank accounts:",q)}},I=async()=>{if(U==="Bank Transfer"){if(!R.bankName||!R.accountNumber||!R.accountHolderName||!R.ifscCode){alert("Please fill all required bank details");return}}else if(!R.upiId){alert("Please enter UPI ID");return}_(!0);try{const F=await(await fetch(`${ra}/payment-methods/user-banks`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s._id,type:U,...R})})).json();F.success?(alert("Bank account submitted for approval!"),P(!1),le({bankName:"",accountNumber:"",accountHolderName:"",ifscCode:"",branchName:"",upiId:""}),L()):alert(F.message||"Failed to submit bank account")}catch(q){console.error("Error submitting bank account:",q),alert("Failed to submit bank account")}_(!1)},$=async q=>{if(confirm("Are you sure you want to delete this bank account?"))try{(await(await fetch(`${ra}/payment-methods/user-banks/${q}`,{method:"DELETE"})).json()).success&&L()}catch(F){console.error("Error deleting bank account:",F)}},H=async()=>{try{const F=await(await fetch(`${ra}/kyc/status/${s._id}`)).json();F.success&&F.hasKYC&&T(F.kyc)}catch(q){console.error("Error fetching KYC status:",q)}},y=(q,F)=>{const k=q.target.files[0];if(k){if(k.size>5*1024*1024){alert("File size should be less than 5MB");return}const ee=new FileReader;ee.onloadend=()=>{h(ce=>({...ce,[F]:ee.result}))},ee.readAsDataURL(k)}},O=async()=>{if(!m.documentNumber||!m.frontImage){alert("Please fill document number and upload front image");return}j(!0);try{const F=await(await fetch(`${ra}/kyc/submit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s._id,...m})})).json();F.success?(alert("KYC submitted successfully! Please wait for approval."),p(!1),H()):alert(F.message||"Failed to submit KYC")}catch(q){console.error("Error submitting KYC:",q),alert("Failed to submit KYC")}j(!1)},g=async()=>{try{const F=await(await fetch(`${ra}/prop/status`)).json();F.success&&u(F.enabled)}catch(q){console.error("Error fetching challenge status:",q)}},[v,W]=o.useState({firstName:s.firstName||"",lastName:s.lastName||"",email:s.email||"",phone:s.phone||"",address:s.address||"",city:s.city||"",country:s.country||"",dateOfBirth:s.dateOfBirth||"",bankDetails:s.bankDetails||{bankName:"",accountNumber:"",accountHolderName:"",ifscCode:"",branchName:""},upiId:s.upiId||""}),Z=[{name:"Dashboard",icon:As,path:"/dashboard"},{name:"Account",icon:It,path:"/account"},{name:"Wallet",icon:nt,path:"/wallet"},{name:"IB",icon:et,path:"/ib"},{name:"Copytrade",icon:Jt,path:"/copytrade"},{name:"Profile",icon:nr,path:"/profile"},{name:"Support",icon:Cr,path:"/support"},{name:"Instructions",icon:Ps,path:"/instructions"}],B=async()=>{d(!0);try{const F=await(await fetch(`${ra}/auth/update-profile`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s._id,...v})})).json();F.user?(localStorage.setItem("user",JSON.stringify(F.user)),l(!1),alert("Profile updated successfully!")):alert(F.message||"Failed to update profile")}catch(q){console.error("Error updating profile:",q),alert("Failed to update profile")}d(!1)},M=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t("/user/login")};return e.jsxs("div",{className:"min-h-screen bg-dark-900 flex flex-col md:flex-row",children:[x&&e.jsxs("header",{className:"fixed top-0 left-0 right-0 z-40 bg-dark-800 border-b border-gray-800 px-4 py-3 flex items-center gap-4",children:[e.jsx("button",{onClick:()=>t("/mobile"),className:"p-2 -ml-2 hover:bg-dark-700 rounded-lg",children:e.jsx(ea,{size:22,className:"text-white"})}),e.jsx("h1",{className:"text-white font-semibold text-lg flex-1",children:"Profile"}),e.jsx("button",{onClick:()=>t("/mobile"),className:"p-2 hover:bg-dark-700 rounded-lg",children:e.jsx(lr,{size:20,className:"text-gray-400"})})]}),!x&&e.jsxs("aside",{className:`${r?"w-48":"w-16"} bg-dark-900 border-r border-gray-800 flex flex-col transition-all duration-300`,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[e.jsx("div",{className:"p-4 flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 bg-accent-green rounded flex items-center justify-center",children:e.jsx("span",{className:"text-black font-bold text-sm",children:"CL"})})}),e.jsx("nav",{className:"flex-1 px-2",children:Z.map(q=>e.jsxs("button",{onClick:()=>t(q.path),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-colors ${q.name==="Profile"?"bg-accent-green text-black":"text-gray-400 hover:text-white hover:bg-dark-700"}`,children:[e.jsx(q.icon,{size:18,className:"flex-shrink-0"}),r&&e.jsx("span",{className:"text-sm font-medium",children:q.name})]},q.name))}),e.jsx("div",{className:"p-2 border-t border-gray-800",children:e.jsxs("button",{onClick:M,className:"w-full flex items-center gap-3 px-3 py-2.5 text-gray-400 hover:text-white rounded-lg",children:[e.jsx(fs,{size:18}),r&&e.jsx("span",{className:"text-sm",children:"Log Out"})]})})]}),e.jsxs("main",{className:`flex-1 overflow-auto ${x?"pt-14":""}`,children:[!x&&e.jsxs("header",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-800",children:[e.jsx("h1",{className:"text-xl font-semibold text-white",children:"My Profile"}),n?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>l(!1),className:"flex items-center gap-2 bg-dark-700 text-white px-4 py-2 rounded-lg hover:bg-dark-600",children:[e.jsx(ye,{size:16}),"Cancel"]}),e.jsxs("button",{onClick:B,disabled:i,className:"flex items-center gap-2 bg-accent-green text-black px-4 py-2 rounded-lg font-medium hover:bg-accent-green/90 disabled:opacity-50",children:[e.jsx(Jd,{size:16}),i?"Saving...":"Save"]})]}):e.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 bg-accent-green text-black px-4 py-2 rounded-lg font-medium hover:bg-accent-green/90",children:[e.jsx(jb,{size:16}),"Edit Profile"]})]}),e.jsx("div",{className:`${x?"p-4":"p-6"}`,children:e.jsxs("div",{className:`${x?"":"max-w-3xl"}`,children:[e.jsx("div",{className:`bg-dark-800 rounded-xl ${x?"p-4":"p-6"} border border-gray-800 mb-4`,children:e.jsxs("div",{className:`flex ${x?"flex-col":""} items-center gap-4`,children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`${x?"w-16 h-16":"w-24 h-24"} bg-accent-green/20 rounded-full flex items-center justify-center`,children:e.jsxs("span",{className:`text-accent-green font-bold ${x?"text-xl":"text-3xl"}`,children:[(te=v.firstName)==null?void 0:te.charAt(0),(ae=v.lastName)==null?void 0:ae.charAt(0)]})}),n&&e.jsx("button",{className:"absolute bottom-0 right-0 w-6 h-6 bg-accent-green rounded-full flex items-center justify-center",children:e.jsx(em,{size:12,className:"text-black"})})]}),e.jsxs("div",{className:x?"text-center":"",children:[e.jsxs("h2",{className:`font-bold text-white ${x?"text-lg":"text-2xl"}`,children:[v.firstName," ",v.lastName]}),e.jsx("p",{className:"text-gray-400 text-sm",children:v.email}),e.jsxs("div",{className:`flex ${x?"justify-center flex-wrap":""} items-center gap-2 mt-2`,children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${s.kycApproved?"bg-green-500/20 text-green-500":"bg-yellow-500/20 text-yellow-500"}`,children:s.kycApproved?"Verified":"Pending"}),e.jsxs("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-blue-500/20 text-blue-500",children:["Since ",new Date(s.createdAt).toLocaleDateString()]})]})]})]})}),e.jsxs("div",{className:`bg-dark-800 rounded-xl ${x?"p-4":"p-6"} border border-gray-800`,children:[e.jsx("h3",{className:`text-white font-semibold ${x?"mb-4 text-sm":"mb-6"}`,children:"Personal Information"}),e.jsxs("div",{className:`grid ${x?"grid-cols-1 gap-4":"grid-cols-2 gap-6"}`,children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"First Name"}),n?e.jsx("input",{type:"text",value:v.firstName,onChange:q=>W({...v,firstName:q.target.value}),className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-4 py-2 text-white"}):e.jsx("p",{className:"text-white",children:v.firstName||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Last Name"}),n?e.jsx("input",{type:"text",value:v.lastName,onChange:q=>W({...v,lastName:q.target.value}),className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-4 py-2 text-white"}):e.jsx("p",{className:"text-white",children:v.lastName||"-"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-gray-400 text-sm mb-2 block flex items-center gap-2",children:[e.jsx(Ys,{size:14})," Email"]}),e.jsx("p",{className:"text-white",children:v.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-gray-400 text-sm mb-2 block flex items-center gap-2",children:[e.jsx(Pi,{size:14})," Phone"]}),n?e.jsx("input",{type:"text",value:v.phone,onChange:q=>W({...v,phone:q.target.value}),className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-4 py-2 text-white"}):e.jsx("p",{className:"text-white",children:v.phone||"-"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-gray-400 text-sm mb-2 block flex items-center gap-2",children:[e.jsx(wa,{size:14})," Date of Birth"]}),n?e.jsx("input",{type:"date",value:v.dateOfBirth,onChange:q=>W({...v,dateOfBirth:q.target.value}),className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-4 py-2 text-white"}):e.jsx("p",{className:"text-white",children:v.dateOfBirth||"-"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-gray-400 text-sm mb-2 block flex items-center gap-2",children:[e.jsx(am,{size:14})," Country"]}),n?e.jsx("input",{type:"text",value:v.country,onChange:q=>W({...v,country:q.target.value}),className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-4 py-2 text-white"}):e.jsx("p",{className:"text-white",children:v.country||"-"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsxs("label",{className:"text-gray-400 text-sm mb-2 block flex items-center gap-2",children:[e.jsx(am,{size:14})," Address"]}),n?e.jsx("input",{type:"text",value:v.address,onChange:q=>W({...v,address:q.target.value}),className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-4 py-2 text-white"}):e.jsx("p",{className:"text-white",children:v.address||"-"})]})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800 mt-6",children:[e.jsxs("h3",{className:"text-white font-semibold mb-6 flex items-center gap-2",children:[e.jsx(ha,{size:18})," Bank Details (For Withdrawals)"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Bank Name"}),n?e.jsx("input",{type:"text",value:((pe=v.bankDetails)==null?void 0:pe.bankName)||"",onChange:q=>W({...v,bankDetails:{...v.bankDetails,bankName:q.target.value}}),placeholder:"e.g., HDFC Bank",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-4 py-2 text-white"}):e.jsx("p",{className:"text-white",children:((Y=v.bankDetails)==null?void 0:Y.bankName)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Account Holder Name"}),n?e.jsx("input",{type:"text",value:((re=v.bankDetails)==null?void 0:re.accountHolderName)||"",onChange:q=>W({...v,bankDetails:{...v.bankDetails,accountHolderName:q.target.value}}),placeholder:"Name as per bank account",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-4 py-2 text-white"}):e.jsx("p",{className:"text-white",children:((Se=v.bankDetails)==null?void 0:Se.accountHolderName)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Account Number"}),n?e.jsx("input",{type:"text",value:((Ie=v.bankDetails)==null?void 0:Ie.accountNumber)||"",onChange:q=>W({...v,bankDetails:{...v.bankDetails,accountNumber:q.target.value}}),placeholder:"Enter account number",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-4 py-2 text-white"}):e.jsx("p",{className:"text-white",children:((z=v.bankDetails)==null?void 0:z.accountNumber)||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"IFSC Code"}),n?e.jsx("input",{type:"text",value:((fe=v.bankDetails)==null?void 0:fe.ifscCode)||"",onChange:q=>W({...v,bankDetails:{...v.bankDetails,ifscCode:q.target.value.toUpperCase()}}),placeholder:"e.g., HDFC0001234",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-4 py-2 text-white uppercase"}):e.jsx("p",{className:"text-white",children:((Pe=v.bankDetails)==null?void 0:Pe.ifscCode)||"-"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Branch Name"}),n?e.jsx("input",{type:"text",value:((Te=v.bankDetails)==null?void 0:Te.branchName)||"",onChange:q=>W({...v,bankDetails:{...v.bankDetails,branchName:q.target.value}}),placeholder:"e.g., Mumbai Main Branch",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-4 py-2 text-white"}):e.jsx("p",{className:"text-white",children:((He=v.bankDetails)==null?void 0:He.branchName)||"-"})]})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800 mt-6",children:[e.jsxs("h3",{className:"text-white font-semibold mb-6 flex items-center gap-2",children:[e.jsx(Hr,{size:18})," UPI Details"]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"UPI ID"}),n?e.jsx("input",{type:"text",value:v.upiId||"",onChange:q=>W({...v,upiId:q.target.value}),placeholder:"e.g., yourname@upi",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-4 py-2 text-white"}):e.jsx("p",{className:"text-white",children:v.upiId||"-"})]}),!n&&!((Oe=v.bankDetails)!=null&&Oe.accountNumber)&&!v.upiId&&e.jsx("div",{className:"mt-4 p-4 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:e.jsx("p",{className:"text-yellow-500 text-sm",children:' Please add your bank details or UPI ID to receive withdrawals. Click "Edit Profile" to add.'})})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800 mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-white font-semibold flex items-center gap-2",children:[e.jsx(Hs,{size:18})," Withdrawal Accounts"]}),e.jsx("button",{onClick:()=>P(!0),className:"px-3 py-1.5 bg-green-500/20 text-green-500 rounded-lg text-sm hover:bg-green-500/30",children:"+ Add Account"})]}),e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"Add bank accounts or UPI IDs for withdrawals. Accounts require admin approval before use."}),N.length===0?e.jsx("div",{className:"p-4 bg-dark-700 rounded-lg text-center",children:e.jsx("p",{className:"text-gray-500",children:"No withdrawal accounts added yet"})}):e.jsx("div",{className:"space-y-3",children:N.map(q=>e.jsx("div",{className:"p-4 bg-dark-700 rounded-lg border border-gray-700",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[q.type==="Bank Transfer"?e.jsx(ha,{size:20,className:"text-blue-500"}):e.jsx(Hr,{size:20,className:"text-purple-500"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-white font-medium",children:q.type==="Bank Transfer"?q.bankName:"UPI"}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${q.status==="Pending"?"bg-yellow-500/20 text-yellow-500":q.status==="Approved"?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:q.status})]}),q.type==="Bank Transfer"?e.jsxs("p",{className:"text-gray-500 text-sm",children:["A/C: ",q.accountNumber," | IFSC: ",q.ifscCode]}):e.jsx("p",{className:"text-purple-400 text-sm font-mono",children:q.upiId}),q.rejectionReason&&e.jsxs("p",{className:"text-red-400 text-xs mt-1",children:["Reason: ",q.rejectionReason]})]})]}),q.status!=="Approved"&&e.jsx("button",{onClick:()=>$(q._id),className:"text-gray-500 hover:text-red-500",children:e.jsx(ye,{size:16})})]})},q._id))})]}),E&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl w-full max-w-md border border-gray-700",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex items-center justify-between",children:[e.jsx("h3",{className:"text-white font-semibold",children:"Add Withdrawal Account"}),e.jsx("button",{onClick:()=>P(!1),className:"text-gray-400 hover:text-white",children:e.jsx(ye,{size:20})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>K("Bank Transfer"),className:`p-3 rounded-lg border flex items-center justify-center gap-2 ${U==="Bank Transfer"?"border-blue-500 bg-blue-500/20 text-blue-500":"border-gray-700 text-gray-400"}`,children:[e.jsx(ha,{size:18})," Bank"]}),e.jsxs("button",{onClick:()=>K("UPI"),className:`p-3 rounded-lg border flex items-center justify-center gap-2 ${U==="UPI"?"border-purple-500 bg-purple-500/20 text-purple-500":"border-gray-700 text-gray-400"}`,children:[e.jsx(Hr,{size:18})," UPI"]})]}),U==="Bank Transfer"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm block mb-1",children:"Bank Name *"}),e.jsx("input",{type:"text",value:R.bankName,onChange:q=>le({...R,bankName:q.target.value}),placeholder:"e.g., HDFC Bank",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm block mb-1",children:"Account Number *"}),e.jsx("input",{type:"text",value:R.accountNumber,onChange:q=>le({...R,accountNumber:q.target.value}),placeholder:"e.g., 1234567890",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm block mb-1",children:"Account Holder Name *"}),e.jsx("input",{type:"text",value:R.accountHolderName,onChange:q=>le({...R,accountHolderName:q.target.value}),placeholder:"e.g., John Doe",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm block mb-1",children:"IFSC Code *"}),e.jsx("input",{type:"text",value:R.ifscCode,onChange:q=>le({...R,ifscCode:q.target.value.toUpperCase()}),placeholder:"e.g., HDFC0001234",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white uppercase"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm block mb-1",children:"Branch Name"}),e.jsx("input",{type:"text",value:R.branchName,onChange:q=>le({...R,branchName:q.target.value}),placeholder:"e.g., Mumbai Main",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]})]}):e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm block mb-1",children:"UPI ID *"}),e.jsx("input",{type:"text",value:R.upiId,onChange:q=>le({...R,upiId:q.target.value}),placeholder:"e.g., yourname@upi",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]}),e.jsx("div",{className:"p-3 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:e.jsx("p",{className:"text-yellow-500 text-xs",children:" Your account will be reviewed by admin before it can be used for withdrawals."})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>P(!1),className:"flex-1 py-2 bg-dark-700 text-gray-400 rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:I,disabled:X,className:"flex-1 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:opacity-50",children:X?"Submitting...":"Submit for Approval"})]})]})]})}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800 mt-6",children:[e.jsxs("h3",{className:"text-white font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Ei,{size:18})," KYC Verification"]}),f?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:`p-4 rounded-lg border ${f.status==="approved"?"bg-green-500/10 border-green-500/30":f.status==="pending"?"bg-yellow-500/10 border-yellow-500/30":"bg-red-500/10 border-red-500/30"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[f.status==="approved"&&e.jsx(xs,{size:24,className:"text-green-500"}),f.status==="pending"&&e.jsx(Ht,{size:24,className:"text-yellow-500"}),f.status==="rejected"&&e.jsx(yr,{size:24,className:"text-red-500"}),e.jsxs("div",{children:[e.jsxs("p",{className:`font-medium ${f.status==="approved"?"text-green-500":f.status==="pending"?"text-yellow-500":"text-red-500"}`,children:[f.status==="approved"&&"KYC Verified",f.status==="pending"&&"KYC Under Review",f.status==="rejected"&&"KYC Rejected"]}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Document: ",(G=f.documentType)==null?void 0:G.replace("_"," ").toUpperCase()]}),f.status==="rejected"&&f.rejectionReason&&e.jsxs("p",{className:"text-red-400 text-sm mt-1",children:["Reason: ",f.rejectionReason]})]})]})}),f.status==="rejected"&&e.jsx("button",{onClick:()=>{h({documentType:"aadhaar",documentNumber:"",frontImage:"",backImage:"",selfieImage:""}),p(!0)},className:"w-full py-3 bg-accent-green text-black font-medium rounded-lg hover:bg-accent-green/90",children:"Resubmit KYC"})]}):S?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Document Type"}),e.jsxs("select",{value:m.documentType,onChange:q=>h({...m,documentType:q.target.value}),className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-4 py-3 text-white",children:[e.jsx("option",{value:"aadhaar",children:"Aadhaar Card"}),e.jsx("option",{value:"pan_card",children:"PAN Card"}),e.jsx("option",{value:"passport",children:"Passport"}),e.jsx("option",{value:"driving_license",children:"Driving License"}),e.jsx("option",{value:"voter_id",children:"Voter ID"}),e.jsx("option",{value:"national_id",children:"National ID"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Document Number"}),e.jsx("input",{type:"text",value:m.documentNumber,onChange:q=>h({...m,documentNumber:q.target.value}),placeholder:"Enter document number",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-4 py-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Front Side of Document *"}),e.jsx("div",{className:"border-2 border-dashed border-gray-600 rounded-lg p-4 text-center hover:border-accent-green transition-colors",children:m.frontImage?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:m.frontImage,alt:"Front",className:"max-h-32 mx-auto rounded"}),e.jsx("button",{onClick:()=>h({...m,frontImage:""}),className:"absolute top-0 right-0 p-1 bg-red-500 rounded-full",children:e.jsx(ye,{size:14,className:"text-white"})})]}):e.jsxs("label",{className:"cursor-pointer",children:[e.jsx(Oc,{size:32,className:"mx-auto text-gray-500 mb-2"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Click to upload front side"}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Max 5MB, JPG/PNG"}),e.jsx("input",{type:"file",accept:"image/*",onChange:q=>y(q,"frontImage"),className:"hidden"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Back Side of Document (Optional)"}),e.jsx("div",{className:"border-2 border-dashed border-gray-600 rounded-lg p-4 text-center hover:border-accent-green transition-colors",children:m.backImage?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:m.backImage,alt:"Back",className:"max-h-32 mx-auto rounded"}),e.jsx("button",{onClick:()=>h({...m,backImage:""}),className:"absolute top-0 right-0 p-1 bg-red-500 rounded-full",children:e.jsx(ye,{size:14,className:"text-white"})})]}):e.jsxs("label",{className:"cursor-pointer",children:[e.jsx(Oc,{size:32,className:"mx-auto text-gray-500 mb-2"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Click to upload back side"}),e.jsx("input",{type:"file",accept:"image/*",onChange:q=>y(q,"backImage"),className:"hidden"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Selfie with Document (Optional)"}),e.jsx("div",{className:"border-2 border-dashed border-gray-600 rounded-lg p-4 text-center hover:border-accent-green transition-colors",children:m.selfieImage?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:m.selfieImage,alt:"Selfie",className:"max-h-32 mx-auto rounded"}),e.jsx("button",{onClick:()=>h({...m,selfieImage:""}),className:"absolute top-0 right-0 p-1 bg-red-500 rounded-full",children:e.jsx(ye,{size:14,className:"text-white"})})]}):e.jsxs("label",{className:"cursor-pointer",children:[e.jsx(em,{size:32,className:"mx-auto text-gray-500 mb-2"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Click to upload selfie"}),e.jsx("input",{type:"file",accept:"image/*",onChange:q=>y(q,"selfieImage"),className:"hidden"})]})})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{onClick:()=>p(!1),className:"flex-1 py-3 bg-dark-700 text-white rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:O,disabled:w,className:"flex-1 py-3 bg-accent-green text-black font-medium rounded-lg hover:bg-accent-green/90 disabled:opacity-50",children:w?"Submitting...":"Submit KYC"})]})]}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"w-16 h-16 bg-yellow-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ei,{size:32,className:"text-yellow-500"})}),e.jsx("p",{className:"text-white font-medium mb-2",children:"KYC Not Submitted"}),e.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Complete your KYC verification to unlock all features"}),e.jsx("button",{onClick:()=>p(!0),className:"px-6 py-3 bg-accent-green text-black font-medium rounded-lg hover:bg-accent-green/90",children:"Start KYC Verification"})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800 mt-6",children:[e.jsxs("h3",{className:"text-white font-semibold mb-4 flex items-center gap-2",children:[e.jsx(kr,{size:18})," Security"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white",children:"Password"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Last changed: Never"})]}),e.jsx("button",{className:"text-accent-green hover:underline text-sm",children:"Change Password"})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-700",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Add an extra layer of security"})]}),e.jsx("button",{className:"text-accent-green hover:underline text-sm",children:"Enable"})]}),e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white",children:"Login History"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"View recent login activity"})]}),e.jsx("button",{className:"text-accent-green hover:underline text-sm",children:"View"})]})]})]})]})})]})]})},jn="http://localhost:5001/api",Rj=()=>{var g;const t=ut(),[s,r]=o.useState(!1),[a,n]=o.useState("new"),[l,i]=o.useState([]),[d,c]=o.useState(!0),[u,x]=o.useState(""),[b,f]=o.useState(""),[T,w]=o.useState("general"),[j,S]=o.useState(!1),[p,m]=o.useState(!1),[h,N]=o.useState(null),[C,E]=o.useState(""),[P,U]=o.useState(!1),[K,R]=o.useState(window.innerWidth<768),le=JSON.parse(localStorage.getItem("user")||"{}"),X=[{name:"Dashboard",icon:As,path:"/dashboard"},{name:"Account",icon:It,path:"/account"},{name:"Wallet",icon:nt,path:"/wallet"},{name:"IB",icon:et,path:"/ib"},{name:"Copytrade",icon:Jt,path:"/copytrade"},{name:"Profile",icon:nr,path:"/profile"},{name:"Support",icon:Cr,path:"/support"},{name:"Instructions",icon:Ps,path:"/instructions"}];o.useEffect(()=>{const v=()=>R(window.innerWidth<768);return window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]),o.useEffect(()=>{_(),L()},[]);const _=async()=>{try{const W=await(await fetch(`${jn}/prop/status`)).json();W.success&&m(W.enabled)}catch{}},L=async()=>{try{const W=await(await fetch(`${jn}/support/user/${le._id}`)).json();i(W.tickets||[])}catch(v){console.error("Error fetching tickets:",v)}c(!1)},I=async v=>{if(v.preventDefault(),!u||!b){alert("Please fill in all fields");return}S(!0);try{const Z=await(await fetch(`${jn}/support/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:le._id,subject:u,message:b,category:T.toUpperCase()})})).json();Z.success?(alert("Ticket submitted successfully!"),x(""),f(""),w("general"),n("history"),L()):alert(Z.message||"Failed to submit ticket")}catch(W){console.error("Error submitting ticket:",W),alert("Failed to submit ticket")}S(!1)},$=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t("/user/login")},H=v=>{switch(v){case"OPEN":return e.jsx(Ht,{size:16,className:"text-yellow-500"});case"IN_PROGRESS":return e.jsx(wr,{size:16,className:"text-blue-500"});case"WAITING_USER":return e.jsx(wr,{size:16,className:"text-orange-500"});case"RESOLVED":return e.jsx(xs,{size:16,className:"text-green-500"});case"CLOSED":return e.jsx(xs,{size:16,className:"text-gray-500"});default:return e.jsx(Ht,{size:16,className:"text-gray-500"})}},y=async v=>{try{const Z=await(await fetch(`${jn}/support/ticket/${v}`)).json();Z.success&&N(Z.ticket)}catch(W){console.error("Error fetching ticket:",W)}},O=async()=>{if(!(!C.trim()||!h)){U(!0);try{const W=await(await fetch(`${jn}/support/reply/${h.ticketId}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({senderId:le._id,senderType:"USER",message:C})})).json();W.success&&(N(W.ticket),E(""),L())}catch(v){console.error("Error sending reply:",v)}U(!1)}};return e.jsxs("div",{className:"min-h-screen bg-dark-900 flex flex-col md:flex-row",children:[K&&e.jsxs("header",{className:"fixed top-0 left-0 right-0 z-40 bg-dark-800 border-b border-gray-800 px-4 py-3 flex items-center gap-4",children:[e.jsx("button",{onClick:()=>t("/mobile"),className:"p-2 -ml-2 hover:bg-dark-700 rounded-lg",children:e.jsx(ea,{size:22,className:"text-white"})}),e.jsx("h1",{className:"text-white font-semibold text-lg flex-1",children:"Support"}),e.jsx("button",{onClick:()=>t("/mobile"),className:"p-2 hover:bg-dark-700 rounded-lg",children:e.jsx(lr,{size:20,className:"text-gray-400"})})]}),!K&&e.jsxs("aside",{className:`${s?"w-48":"w-16"} bg-dark-900 border-r border-gray-800 flex flex-col transition-all duration-300`,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[e.jsx("div",{className:"p-4 flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 bg-accent-green rounded flex items-center justify-center",children:e.jsx("span",{className:"text-black font-bold text-sm",children:"CL"})})}),e.jsx("nav",{className:"flex-1 px-2",children:X.map(v=>e.jsxs("button",{onClick:()=>t(v.path),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-colors ${v.name==="Support"?"bg-accent-green text-black":"text-gray-400 hover:text-white hover:bg-dark-700"}`,children:[e.jsx(v.icon,{size:18,className:"flex-shrink-0"}),s&&e.jsx("span",{className:"text-sm font-medium",children:v.name})]},v.name))}),e.jsx("div",{className:"p-2 border-t border-gray-800",children:e.jsxs("button",{onClick:$,className:"w-full flex items-center gap-3 px-3 py-2.5 text-gray-400 hover:text-white rounded-lg",children:[e.jsx(fs,{size:18}),s&&e.jsx("span",{className:"text-sm",children:"Log Out"})]})})]}),e.jsxs("main",{className:`flex-1 overflow-auto ${K?"pt-14":""}`,children:[!K&&e.jsx("header",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-800",children:e.jsx("h1",{className:"text-xl font-semibold text-white",children:"Support"})}),e.jsxs("div",{className:`${K?"p-4":"p-6"}`,children:[e.jsxs("div",{className:`flex ${K?"gap-2":"gap-4"} mb-4`,children:[e.jsxs("button",{onClick:()=>n("new"),className:`flex items-center gap-2 ${K?"px-3 py-2 text-sm":"px-4 py-2"} rounded-lg font-medium transition-colors ${a==="new"?"bg-accent-green text-black":"bg-dark-800 text-gray-400 hover:text-white"}`,children:[e.jsx(st,{size:K?14:16}),"New Ticket"]}),e.jsxs("button",{onClick:()=>n("history"),className:`flex items-center gap-2 ${K?"px-3 py-2 text-sm":"px-4 py-2"} rounded-lg font-medium transition-colors ${a==="history"?"bg-accent-green text-black":"bg-dark-800 text-gray-400 hover:text-white"}`,children:[e.jsx(lm,{size:K?14:16}),"Tickets (",l.length,")"]})]}),a==="new"?e.jsxs("div",{className:K?"":"max-w-2xl",children:[e.jsxs("div",{className:`bg-dark-800 rounded-xl ${K?"p-4":"p-6"} border border-gray-800`,children:[e.jsx("h2",{className:`text-white font-semibold ${K?"mb-4 text-sm":"mb-6"}`,children:"Submit a Support Ticket"}),e.jsxs("form",{onSubmit:I,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Category"}),e.jsxs("select",{value:T,onChange:v=>w(v.target.value),className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-4 py-2 text-white",children:[e.jsx("option",{value:"general",children:"General Inquiry"}),e.jsx("option",{value:"deposit",children:"Deposit Issue"}),e.jsx("option",{value:"withdrawal",children:"Withdrawal Issue"}),e.jsx("option",{value:"trading",children:"Trading Issue"}),e.jsx("option",{value:"account",children:"Account Issue"}),e.jsx("option",{value:"technical",children:"Technical Problem"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Subject"}),e.jsx("input",{type:"text",value:u,onChange:v=>x(v.target.value),placeholder:"Brief description of your issue",className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-4 py-2 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Message"}),e.jsx("textarea",{value:b,onChange:v=>f(v.target.value),placeholder:"Describe your issue in detail...",rows:6,className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-4 py-2 text-white resize-none"})]}),e.jsxs("button",{type:"submit",disabled:j,className:"w-full bg-accent-green text-black py-3 rounded-lg font-medium hover:bg-accent-green/90 disabled:opacity-50 flex items-center justify-center gap-2",children:[e.jsx(Di,{size:16}),j?"Submitting...":"Submit Ticket"]})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800 mt-6",children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"Frequently Asked Questions"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-b border-gray-700 pb-4",children:[e.jsx("p",{className:"text-white font-medium",children:"How long does a deposit take?"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Deposits are usually processed within 24 hours after verification."})]}),e.jsxs("div",{className:"border-b border-gray-700 pb-4",children:[e.jsx("p",{className:"text-white font-medium",children:"How do I withdraw funds?"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Go to Wallet  Withdraw and follow the instructions. Withdrawals are processed within 1-3 business days."})]}),e.jsxs("div",{className:"border-b border-gray-700 pb-4",children:[e.jsx("p",{className:"text-white font-medium",children:"What is the minimum deposit?"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"The minimum deposit depends on your account type. Check Account Types for details."})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"How do I become an IB?"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:'Go to the IB section and click "Apply Now" to submit your application.'})]})]})]})]}):e.jsx("div",{children:d?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"Loading tickets..."}):l.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(lm,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No support tickets yet"}),e.jsx("button",{onClick:()=>n("new"),className:"mt-4 text-accent-green hover:underline",children:"Create your first ticket "})]}):e.jsx("div",{className:"space-y-4",children:l.map(v=>{var W,Z,B;return e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800 cursor-pointer hover:border-gray-600 transition-colors",onClick:()=>y(v.ticketId),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-medium",children:v.subject}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["#",v.ticketId,"  ",v.category]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[H(v.status),e.jsx("span",{className:`text-sm ${v.status==="OPEN"?"text-yellow-500":v.status==="IN_PROGRESS"?"text-blue-500":v.status==="WAITING_USER"?"text-orange-500":v.status==="RESOLVED"?"text-green-500":"text-gray-500"}`,children:v.status.replace("_"," ")})]})]}),e.jsx("p",{className:"text-gray-400 text-sm mb-3 line-clamp-2",children:((Z=(W=v.messages)==null?void 0:W[0])==null?void 0:Z.message)||"No message"}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:["Created: ",new Date(v.createdAt).toLocaleString()]}),e.jsxs("span",{className:"text-accent-green",children:[((B=v.messages)==null?void 0:B.length)||0," messages  Click to view"]})]})]},v._id)})})})]})]}),h&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl w-full max-w-2xl max-h-[80vh] flex flex-col border border-gray-700",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:h.subject}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["#",h.ticketId,"  ",h.category]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs ${h.status==="OPEN"?"bg-yellow-500/20 text-yellow-500":h.status==="IN_PROGRESS"?"bg-blue-500/20 text-blue-500":h.status==="WAITING_USER"?"bg-orange-500/20 text-orange-500":h.status==="RESOLVED"?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-500"}`,children:h.status.replace("_"," ")}),e.jsx("button",{onClick:()=>N(null),className:"text-gray-400 hover:text-white text-xl",children:""})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:(g=h.messages)==null?void 0:g.map((v,W)=>e.jsx("div",{className:`flex ${v.sender==="USER"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${v.sender==="USER"?"bg-accent-green/20 text-white":"bg-dark-700 text-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`text-xs font-medium ${v.sender==="USER"?"text-accent-green":"text-blue-400"}`,children:v.sender==="USER"?"You":"Support"}),e.jsx("span",{className:"text-gray-500 text-xs",children:new Date(v.createdAt).toLocaleString()})]}),e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:v.message})]})},W))}),h.status!=="CLOSED"&&h.status!=="RESOLVED"&&e.jsx("div",{className:"p-4 border-t border-gray-700",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:C,onChange:v=>E(v.target.value),placeholder:"Type your message...",className:"flex-1 bg-dark-700 border border-gray-600 rounded-lg px-4 py-2 text-white placeholder-gray-500",onKeyPress:v=>v.key==="Enter"&&O()}),e.jsxs("button",{onClick:O,disabled:P||!C.trim(),className:"bg-accent-green text-black px-4 py-2 rounded-lg font-medium hover:bg-accent-green/90 disabled:opacity-50 flex items-center gap-2",children:[e.jsx(Di,{size:16}),P?"Sending...":"Send"]})]})}),(h.status==="CLOSED"||h.status==="RESOLVED")&&e.jsxs("div",{className:"p-4 border-t border-gray-700 text-center text-gray-500 text-sm",children:["This ticket has been ",h.status.toLowerCase(),". Create a new ticket if you need further assistance."]})]})})]})},Oj="http://localhost:5001/api",Bj=()=>{const t=ut(),[s,r]=o.useState(!1),[a,n]=o.useState("getting-started"),[l,i]=o.useState(!1),[d,c]=o.useState(window.innerWidth<768);o.useEffect(()=>{const T=()=>c(window.innerWidth<768);return window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]),o.useEffect(()=>{u()},[]);const u=async()=>{try{const w=await(await fetch(`${Oj}/prop/status`)).json();w.success&&i(w.enabled)}catch{}},x=[{name:"Dashboard",icon:As,path:"/dashboard"},{name:"Account",icon:It,path:"/account"},{name:"Wallet",icon:nt,path:"/wallet"},{name:"IB",icon:et,path:"/ib"},{name:"Copytrade",icon:Jt,path:"/copytrade"},{name:"Profile",icon:nr,path:"/profile"},{name:"Support",icon:Cr,path:"/support"},{name:"Instructions",icon:Ps,path:"/instructions"}],b=[{id:"getting-started",title:"Getting Started",icon:ub,content:[{title:"Create an Account",text:"Sign up with your email and complete the verification process."},{title:"Complete KYC",text:"Submit your identity documents for verification. This is required for deposits and withdrawals."},{title:"Create Trading Account",text:"Go to Account section and create a new trading account. Choose your preferred account type."},{title:"Fund Your Account",text:"Deposit funds to your wallet and transfer to your trading account."}]},{id:"deposits",title:"Deposits & Withdrawals",icon:Pt,content:[{title:"Making a Deposit",text:"Go to Wallet  Deposit. Select your payment method, enter the amount, and follow the instructions."},{title:"Deposit Processing",text:"Deposits are usually processed within 24 hours after admin verification."},{title:"Making a Withdrawal",text:"Go to Wallet  Withdraw. Enter the amount and your payment details. Minimum withdrawal may apply."},{title:"Withdrawal Processing",text:"Withdrawals are processed within 1-3 business days after approval."}]},{id:"trading",title:"Trading Guide",icon:mt,content:[{title:"Opening a Trade",text:"Select an instrument, set your volume (lot size), and click Buy or Sell to open a market order."},{title:"Pending Orders",text:"Use pending orders (Limit/Stop) to enter the market at a specific price."},{title:"Stop Loss & Take Profit",text:"Set SL/TP to automatically close your trade at a certain profit or loss level."},{title:"Closing a Trade",text:"Click the X button on your open position to close it at the current market price."},{title:"Understanding Margin",text:"Margin is the amount required to open a position. It depends on your leverage and position size."}]},{id:"copy-trading",title:"Copy Trading",icon:Jt,content:[{title:"What is Copy Trading?",text:"Copy trading allows you to automatically copy trades from experienced traders (Masters)."},{title:"Following a Master",text:"Go to Copytrade  Discover Masters. Select a master and click Follow."},{title:"Copy Settings",text:"Choose Fixed Lot (same lot size for all trades) or Lot Multiplier (proportional to master)."},{title:"Commission",text:"Masters charge a commission on profitable days only. This is deducted automatically."},{title:"Managing Subscriptions",text:"You can pause, resume, or stop following a master at any time."}]},{id:"ib-program",title:"IB Program",icon:et,content:[{title:"What is IB?",text:"Introducing Broker (IB) program lets you earn commissions by referring traders."},{title:"Becoming an IB",text:"Go to IB section and click Apply Now. Your application will be reviewed by admin."},{title:"Referral Link",text:"Once approved, you get a unique referral link. Share it to invite new traders."},{title:"Commission Structure",text:"Earn commission on every trade your referrals make. Up to 5 levels of referrals."},{title:"Withdrawing Commission",text:"Your IB earnings are credited to your IB wallet. You can withdraw anytime."}]},{id:"security",title:"Security",icon:kr,content:[{title:"Password Security",text:"Use a strong password with letters, numbers, and symbols. Change it regularly."},{title:"Two-Factor Authentication",text:"Enable 2FA for an extra layer of security on your account."},{title:"Trading PIN",text:"Your trading account has a 4-digit PIN. Never share it with anyone."},{title:"Suspicious Activity",text:"If you notice any suspicious activity, contact support immediately."}]}],f=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t("/user/login")};return e.jsxs("div",{className:"min-h-screen bg-dark-900 flex flex-col md:flex-row",children:[d&&e.jsxs("header",{className:"fixed top-0 left-0 right-0 z-40 bg-dark-800 border-b border-gray-800 px-4 py-3 flex items-center gap-4",children:[e.jsx("button",{onClick:()=>t("/mobile"),className:"p-2 -ml-2 hover:bg-dark-700 rounded-lg",children:e.jsx(ea,{size:22,className:"text-white"})}),e.jsx("h1",{className:"text-white font-semibold text-lg flex-1",children:"Instructions"}),e.jsx("button",{onClick:()=>t("/mobile"),className:"p-2 hover:bg-dark-700 rounded-lg",children:e.jsx(lr,{size:20,className:"text-gray-400"})})]}),!d&&e.jsxs("aside",{className:`${s?"w-48":"w-16"} bg-dark-900 border-r border-gray-800 flex flex-col transition-all duration-300`,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[e.jsx("div",{className:"p-4 flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 bg-accent-green rounded flex items-center justify-center",children:e.jsx("span",{className:"text-black font-bold text-sm",children:"CL"})})}),e.jsx("nav",{className:"flex-1 px-2",children:x.map(T=>e.jsxs("button",{onClick:()=>t(T.path),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-colors ${T.name==="Instructions"?"bg-accent-green text-black":"text-gray-400 hover:text-white hover:bg-dark-700"}`,children:[e.jsx(T.icon,{size:18,className:"flex-shrink-0"}),s&&e.jsx("span",{className:"text-sm font-medium",children:T.name})]},T.name))}),e.jsx("div",{className:"p-2 border-t border-gray-800",children:e.jsxs("button",{onClick:f,className:"w-full flex items-center gap-3 px-3 py-2.5 text-gray-400 hover:text-white rounded-lg",children:[e.jsx(fs,{size:18}),s&&e.jsx("span",{className:"text-sm",children:"Log Out"})]})})]}),e.jsxs("main",{className:`flex-1 overflow-auto ${d?"pt-14":""}`,children:[!d&&e.jsx("header",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-800",children:e.jsx("h1",{className:"text-xl font-semibold text-white",children:"Instructions & Guide"})}),e.jsx("div",{className:`${d?"p-4":"p-6"}`,children:e.jsxs("div",{className:d?"":"max-w-4xl",children:[e.jsx("div",{className:`bg-gradient-to-r from-accent-green/20 to-blue-500/20 rounded-xl ${d?"p-4":"p-6"} mb-4 border border-accent-green/30`,children:e.jsxs("div",{className:`flex items-center ${d?"gap-3":"gap-4"}`,children:[e.jsx("div",{className:`${d?"w-10 h-10":"w-14 h-14"} bg-accent-green/30 rounded-full flex items-center justify-center`,children:e.jsx(cb,{size:d?20:28,className:"text-accent-green"})}),e.jsxs("div",{children:[e.jsx("h2",{className:`font-bold text-white ${d?"text-base":"text-xl"}`,children:"Welcome to CoinLytix"}),e.jsx("p",{className:`text-gray-400 ${d?"text-xs":""}`,children:"Learn how to use our platform"})]})]})}),e.jsx("div",{className:`space-y-${d?"2":"4"}`,children:b.map(T=>e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("button",{onClick:()=>n(a===T.id?"":T.id),className:`w-full flex items-center justify-between ${d?"p-3":"p-5"} hover:bg-dark-700 transition-colors`,children:[e.jsxs("div",{className:`flex items-center ${d?"gap-3":"gap-4"}`,children:[e.jsx("div",{className:`${d?"w-8 h-8":"w-10 h-10"} bg-accent-green/20 rounded-lg flex items-center justify-center`,children:e.jsx(T.icon,{size:d?16:20,className:"text-accent-green"})}),e.jsx("span",{className:`text-white font-semibold ${d?"text-sm":""}`,children:T.title})]}),a===T.id?e.jsx(H0,{size:d?16:20,className:"text-gray-400"}):e.jsx(gr,{size:d?16:20,className:"text-gray-400"})]}),a===T.id&&e.jsx("div",{className:`${d?"px-3 pb-3":"px-5 pb-5"} border-t border-gray-700`,children:e.jsx("div",{className:`pt-3 space-y-${d?"2":"4"}`,children:T.content.map((w,j)=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-6 h-6 bg-accent-green/20 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx("span",{className:"text-accent-green text-xs font-bold",children:j+1})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-medium",children:w.title}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:w.text})]})]},j))})})]},T.id))}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800 mt-6",children:[e.jsx("h3",{className:"text-white font-semibold mb-3",children:"Need More Help?"}),e.jsx("p",{className:"text-gray-400 mb-4",children:"If you couldn't find what you're looking for, our support team is here to help."}),e.jsx("button",{onClick:()=>t("/support"),className:"bg-accent-green text-black px-6 py-2 rounded-lg font-medium hover:bg-accent-green/90",children:"Contact Support"})]})]})})]})]})},Vj=()=>{const t=ut(),[s,r]=o.useState(!1),[a,n]=o.useState(""),[l,i]=o.useState(!1),[d,c]=o.useState({email:"",password:""}),u=b=>{c({...d,[b.target.name]:b.target.value}),n("")},x=async b=>{b.preventDefault(),r(!0),n(""),d.email==="admin@admin.com"&&d.password==="admin123"?(localStorage.setItem("adminToken","admin-authenticated"),localStorage.setItem("adminUser",JSON.stringify({email:d.email,role:"admin"})),t("/admin/dashboard")):n("Invalid admin credentials"),r(!1)};return e.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center p-4 sm:p-6 md:p-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-gradient-to-r from-red-500/20 to-transparent rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-gradient-to-l from-purple-500/20 via-red-500/20 to-transparent rounded-full blur-3xl"}),e.jsxs("div",{className:"relative bg-dark-700 rounded-2xl p-6 sm:p-8 w-full max-w-md border border-gray-800 mx-4 sm:mx-0",children:[e.jsx("button",{onClick:()=>t("/"),className:"absolute top-4 right-4 w-8 h-8 bg-dark-600 rounded-full flex items-center justify-center hover:bg-dark-500 transition-colors",children:e.jsx(ye,{size:16,className:"text-gray-400"})}),e.jsx("div",{className:"flex items-center gap-2 mb-6",children:e.jsx("div",{className:"px-3 py-1 bg-red-500/20 text-red-500 rounded-full text-sm font-medium",children:"Admin Portal"})}),e.jsx("h1",{className:"text-2xl font-semibold text-white mb-2",children:"Admin Login"}),e.jsx("p",{className:"text-gray-500 text-sm mb-6",children:"Enter your admin credentials to continue"}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ys,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"email",name:"email",placeholder:"Admin email",value:d.email,onChange:u,className:"w-full bg-dark-600 border border-gray-700 rounded-lg pl-11 pr-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-red-500/50 transition-colors"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ss,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:l?"text":"password",name:"password",placeholder:"Admin password",value:d.password,onChange:u,className:"w-full bg-dark-600 border border-gray-700 rounded-lg pl-11 pr-12 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-red-500/50 transition-colors"}),e.jsx("button",{type:"button",onClick:()=>i(!l),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300 transition-colors",children:l?e.jsx(pl,{size:18}):e.jsx(Qt,{size:18})})]}),a&&e.jsx("p",{className:"text-red-500 text-sm",children:a}),e.jsx("button",{type:"submit",disabled:s,className:"w-full bg-red-500 text-white font-medium py-3 rounded-lg hover:bg-red-600 transition-colors mt-2 disabled:opacity-50",children:s?"Signing in...":"Sign in as Admin"})]}),e.jsxs("p",{className:"text-center text-gray-500 text-sm mt-6",children:["Not an admin?"," ",e.jsx("button",{onClick:()=>t("/user/login"),className:"text-white hover:underline",children:"User Login"})]})]})]})},qt=({children:t,title:s,subtitle:r})=>{const a=ut(),n=ln(),[l,i]=o.useState(!0),[d,c]=o.useState(!1),[u,x]=o.useState({}),b=[{name:"Overview Dashboard",icon:As,path:"/admin/dashboard"},{name:"User Management",icon:et,path:"/admin/users"},{name:"Trade Management",icon:mt,path:"/admin/trades"},{name:"Fund Management",icon:nt,path:"/admin/funds"},{name:"Bank Settings",icon:ha,path:"/admin/bank-settings"},{name:"IB Management",icon:G0,path:"/admin/ib-management"},{name:"Forex Charges",icon:Pt,path:"/admin/forex-charges"},{name:"Earnings Report",icon:mt,path:"/admin/earnings"},{name:"Copy Trade Management",icon:Jt,path:"/admin/copy-trade"},{name:"Prop Firm Challenges",icon:At,path:"/admin/prop-firm"},{name:"Account Types",icon:Hs,path:"/admin/account-types"},{name:"Theme Settings",icon:q0,path:"/admin/theme"},{name:"Admin Management",icon:kr,path:"/admin/admin-management"},{name:"KYC Verification",icon:Ei,path:"/admin/kyc"},{name:"Support Tickets",icon:Y0,path:"/admin/support"}];o.useEffect(()=>{localStorage.getItem("adminToken")||a("/admin")},[a]);const f=()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),a("/admin")},T=w=>n.pathname===w;return e.jsxs("div",{className:"min-h-screen bg-dark-900 flex",children:[d&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>c(!1)}),e.jsxs("aside",{className:`
          fixed lg:static inset-y-0 left-0 z-50
          ${l?"w-64":"w-16"} 
          ${d?"translate-x-0":"-translate-x-full lg:translate-x-0"}
          bg-dark-900 border-r border-gray-800 flex flex-col 
          transition-all duration-300 ease-in-out
        `,children:[e.jsxs("div",{className:"p-4 flex items-center justify-between border-b border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-red-500 rounded flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"C"})}),l&&e.jsx("span",{className:"text-white font-semibold",children:"CoinLytix Admin"})]}),e.jsx("button",{onClick:()=>i(!l),className:"hidden lg:block p-1 hover:bg-dark-700 rounded transition-colors",children:e.jsx(nm,{size:18,className:"text-gray-400"})}),e.jsx("button",{onClick:()=>c(!1),className:"lg:hidden p-1 hover:bg-dark-700 rounded transition-colors",children:e.jsx(ye,{size:18,className:"text-gray-400"})})]}),e.jsx("nav",{className:"flex-1 px-2 py-4 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-700",children:b.map(w=>e.jsxs("button",{onClick:()=>{a(w.path),c(!1)},className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-colors ${T(w.path)?"bg-red-500 text-white":"text-gray-400 hover:text-white hover:bg-dark-700"}`,title:l?"":w.name,children:[e.jsx(w.icon,{size:18,className:"flex-shrink-0"}),l&&e.jsx("span",{className:"text-sm font-medium whitespace-nowrap truncate",children:w.name})]},w.name))}),e.jsx("div",{className:"p-2 border-t border-gray-800",children:e.jsxs("button",{onClick:f,className:"w-full flex items-center gap-3 px-3 py-2.5 text-gray-400 hover:text-white hover:bg-dark-700 transition-colors rounded-lg",title:l?"":"Log Out",children:[e.jsx(fs,{size:18,className:"flex-shrink-0"}),l&&e.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:"Log Out"})]})})]}),e.jsxs("main",{className:"flex-1 overflow-auto min-w-0",children:[e.jsxs("header",{className:"sticky top-0 z-30 bg-dark-900/95 backdrop-blur-sm flex items-center justify-between px-4 sm:px-6 py-4 border-b border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>c(!0),className:"lg:hidden p-2 hover:bg-dark-700 rounded-lg transition-colors",children:e.jsx(nm,{size:20,className:"text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg sm:text-xl font-semibold text-white",children:s||"Admin Dashboard"}),r&&e.jsx("p",{className:"text-gray-500 text-sm hidden sm:block",children:r})]})]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-red-500/20 text-red-500 rounded-full text-xs sm:text-sm",children:[e.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"}),e.jsx("span",{className:"hidden sm:inline",children:"Admin Mode"})]})]}),e.jsx("div",{className:"p-4 sm:p-6",children:t})]})]})},Wj=()=>{const[t,s]=o.useState([]),[r,a]=o.useState(!0),[n,l]=o.useState({totalUsers:0,activeToday:0,newThisWeek:0,totalDeposits:0,totalWithdrawals:0,pendingKYC:0});o.useEffect(()=>{i()},[]);const i=async()=>{a(!0);try{const u=await fetch("http://localhost:5001/api/admin/users");if(u.ok){const b=(await u.json()).users||[];s(b),l({totalUsers:b.length,activeToday:Math.floor(b.length*.7),newThisWeek:Math.floor(b.length*.3),totalDeposits:125e3,totalWithdrawals:45e3,pendingKYC:Math.floor(b.length*.2)})}}catch(u){console.error("Error fetching data:",u)}a(!1)},d=u=>new Date(u).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),c=[{title:"Total Users",value:n.totalUsers,icon:et,color:"blue",change:"+12%",positive:!0},{title:"Active Today",value:n.activeToday,icon:mt,color:"green",change:"+5%",positive:!0},{title:"Total Deposits",value:`$${n.totalDeposits.toLocaleString()}`,icon:nt,color:"purple",change:"+18%",positive:!0},{title:"Total Withdrawals",value:`$${n.totalWithdrawals.toLocaleString()}`,icon:Hs,color:"orange",change:"-3%",positive:!1}];return e.jsxs(qt,{title:"Overview Dashboard",subtitle:"Welcome back, Admin",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:c.map((u,x)=>e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:`w-10 h-10 bg-${u.color}-500/20 rounded-lg flex items-center justify-center`,children:e.jsx(u.icon,{size:20,className:`text-${u.color}-500`})}),e.jsxs("div",{className:`flex items-center gap-1 text-sm ${u.positive?"text-green-500":"text-red-500"}`,children:[u.positive?e.jsx(Pn,{size:14}):e.jsx(En,{size:14}),u.change]})]}),e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:u.title}),e.jsx("p",{className:"text-white text-2xl font-bold",children:u.value})]},x))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-white font-semibold",children:"Recent Users"}),e.jsx("button",{onClick:i,className:"p-2 hover:bg-dark-700 rounded-lg transition-colors",children:e.jsx(Ge,{size:16,className:`text-gray-400 ${r?"animate-spin":""}`})})]}),e.jsx("div",{className:"space-y-3",children:r?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Ge,{size:20,className:"text-gray-500 animate-spin"})}):t.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No users registered yet"}):t.slice(0,5).map((u,x)=>{var b,f;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-accent-green/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-accent-green font-medium",children:((f=(b=u.firstName)==null?void 0:b.charAt(0))==null?void 0:f.toUpperCase())||"U"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:u.firstName||"Unknown"}),e.jsx("p",{className:"text-gray-500 text-sm",children:u.email})]})]}),e.jsx("span",{className:"text-gray-500 text-sm",children:d(u.createdAt)})]},x)})})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsx("h2",{className:"text-white font-semibold mb-4",children:"Platform Overview"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center",children:e.jsx(et,{size:18,className:"text-blue-500"})}),e.jsx("span",{className:"text-gray-400",children:"New Users This Week"})]}),e.jsx("span",{className:"text-white font-semibold",children:n.newThisWeek})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-500/20 rounded-lg flex items-center justify-center",children:e.jsx(wa,{size:18,className:"text-yellow-500"})}),e.jsx("span",{className:"text-gray-400",children:"Pending KYC"})]}),e.jsx("span",{className:"text-white font-semibold",children:n.pendingKYC})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500/20 rounded-lg flex items-center justify-center",children:e.jsx(mt,{size:18,className:"text-green-500"})}),e.jsx("span",{className:"text-gray-400",children:"Active Trades"})]}),e.jsx("span",{className:"text-white font-semibold",children:"156"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-lg flex items-center justify-center",children:e.jsx(nt,{size:18,className:"text-purple-500"})}),e.jsx("span",{className:"text-gray-400",children:"Pending Withdrawals"})]}),e.jsx("span",{className:"text-white font-semibold",children:"12"})]})]})]})]})]})},Mo="http://localhost:5001/api",Hj=()=>{const[t,s]=o.useState([]),[r,a]=o.useState(!0),[n,l]=o.useState(""),[i,d]=o.useState(null),[c,u]=o.useState(!1),[x,b]=o.useState(null),[f,T]=o.useState(!1),[w,j]=o.useState({type:"",text:""}),[S,p]=o.useState("users"),[m,h]=o.useState([]),[N,C]=o.useState({pending:0,completed:0,rejected:0}),[E,P]=o.useState(null),[U,K]=o.useState(""),[R,le]=o.useState(""),[X,_]=o.useState(""),[L,I]=o.useState(""),[$,H]=o.useState(""),[y,O]=o.useState(""),[g,v]=o.useState(""),[W,Z]=o.useState(""),[B,M]=o.useState(""),[te,ae]=o.useState(""),[pe,Y]=o.useState([]),[re,Se]=o.useState(""),[Ie,z]=o.useState(""),[fe,Pe]=o.useState(""),[Te,He]=o.useState(0),Oe=JSON.parse(localStorage.getItem("adminUser")||"{}");o.useEffect(()=>{G(),q()},[]);const G=async()=>{a(!0);try{const Q=await fetch(`${Mo}/admin/users`);if(Q.ok){const ve=await Q.json();s(ve.users||[])}}catch(Q){console.error("Error fetching users:",Q)}a(!1)},q=async()=>{try{const Q=await fetch(`${Mo}/admin/password-reset-requests`);if(Q.ok){const ve=await Q.json();h(ve.requests||[]),C(ve.stats||{pending:0,completed:0,rejected:0})}}catch(Q){console.error("Error fetching password reset requests:",Q)}},F=async(Q,ve)=>{if(ve==="approve"&&(!U||U.length<6)){j({type:"error",text:"Password must be at least 6 characters"});return}T(!0);try{const Qe=await(await fetch(`${Mo}/admin/password-reset-requests/${Q}/process`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:ve,newPassword:U,adminRemarks:ve==="approve"?"Password reset completed":"Request rejected"})})).json();Qe.success?(j({type:"success",text:Qe.message}),P(null),K(""),q()):j({type:"error",text:Qe.message})}catch{j({type:"error",text:"Error processing request"})}T(!1)},k=t.filter(Q=>{var ve,Re,Qe;return((ve=Q.firstName)==null?void 0:ve.toLowerCase().includes(n.toLowerCase()))||((Re=Q.email)==null?void 0:Re.toLowerCase().includes(n.toLowerCase()))||((Qe=Q.phone)==null?void 0:Qe.includes(n))}),ee=Q=>new Date(Q).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),ce=async Q=>{var ve;try{const Re=await fetch(`http://localhost:5001/api/trading-accounts/user/${Q}`);if(Re.ok){const Qe=await Re.json();Y(Qe.accounts||[]),((ve=Qe.accounts)==null?void 0:ve.length)>0&&Se(Qe.accounts[0]._id)}}catch(Re){console.error("Error fetching user accounts:",Re)}},je=async Q=>{var ve;try{const Re=await fetch(`http://localhost:5001/api/wallet/${Q}`);if(Re.ok){const Qe=await Re.json();He(((ve=Qe.wallet)==null?void 0:ve.balance)||0)}}catch(Re){console.error("Error fetching user wallet:",Re)}},he=async(Q,ve)=>{d(ve),b(Q),u(!0),j({type:"",text:""}),le(""),_(""),I(""),H(""),O(""),v(""),Z(""),M(""),ae(""),Y([]),Se(""),(Q==="credit"||Q==="view")&&(await ce(ve._id),await je(ve._id))},Le=()=>{u(!1),d(null),b(null)},Be=async()=>{if(R!==X){j({type:"error",text:"Passwords do not match"});return}if(R.length<6){j({type:"error",text:"Password must be at least 6 characters"});return}T(!0);try{const Q=await fetch(`http://localhost:5001/api/admin/users/${i._id}/password`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:R})});if(Q.ok)j({type:"success",text:"Password changed successfully"}),setTimeout(Le,1500);else{const ve=await Q.json();j({type:"error",text:ve.message||"Failed to change password"})}}catch{j({type:"error",text:"Error changing password"})}T(!1)},V=async()=>{if(!L||parseFloat(L)<=0){j({type:"error",text:"Please enter a valid amount"});return}T(!0);try{const Q=await fetch(`http://localhost:5001/api/admin/users/${i._id}/deduct`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:parseFloat(L),reason:$||"Admin deduction"})});if(Q.ok)j({type:"success",text:`$${L} deducted successfully`}),await je(i._id),setTimeout(()=>{b("view"),G()},1500);else{const ve=await Q.json();j({type:"error",text:ve.message||"Failed to deduct funds"})}}catch{j({type:"error",text:"Error deducting funds"})}T(!1)},ue=async()=>{if(!y||parseFloat(y)<=0){j({type:"error",text:"Please enter a valid amount"});return}T(!0);try{const Q=await fetch(`http://localhost:5001/api/admin/users/${i._id}/add-fund`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:parseFloat(y),reason:g||"Admin fund addition"})});if(Q.ok)j({type:"success",text:`$${y} added successfully`}),await je(i._id),setTimeout(()=>{b("view"),G()},1500);else{const ve=await Q.json();j({type:"error",text:ve.message||"Failed to add funds"})}}catch{j({type:"error",text:"Error adding funds"})}T(!1)},ke=async()=>{T(!0);try{const Q=await fetch(`http://localhost:5001/api/admin/users/${i._id}/block`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({blocked:!i.isBlocked,reason:W||"Blocked by admin"})});if(Q.ok)j({type:"success",text:i.isBlocked?"User unblocked":"User blocked"}),setTimeout(()=>{Le(),G()},1500);else{const ve=await Q.json();j({type:"error",text:ve.message||"Failed to update user status"})}}catch{j({type:"error",text:"Error updating user status"})}T(!1)},We=async()=>{T(!0);try{const Q=await fetch(`http://localhost:5001/api/admin/users/${i._id}/ban`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({banned:!i.isBanned,reason:W||"Banned by admin"})});if(Q.ok)j({type:"success",text:i.isBanned?"User unbanned":"User banned permanently"}),setTimeout(()=>{Le(),G()},1500);else{const ve=await Q.json();j({type:"error",text:ve.message||"Failed to update user status"})}}catch{j({type:"error",text:"Error updating user status"})}T(!1)},Ue=async()=>{T(!0);try{const Q=await fetch(`http://localhost:5001/api/admin/users/${i._id}`,{method:"DELETE"});if(Q.ok)j({type:"success",text:"User deleted successfully"}),setTimeout(()=>{Le(),G()},1500);else{const ve=await Q.json();j({type:"error",text:ve.message||"Failed to delete user"})}}catch{j({type:"error",text:"Error deleting user"})}T(!1)},ft=async()=>{if(!B||parseFloat(B)<=0){j({type:"error",text:"Please enter a valid amount"});return}if(!re){j({type:"error",text:"Please select a trading account"});return}T(!0);try{const Q=await fetch(`http://localhost:5001/api/admin/trading-account/${re}/add-credit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:parseFloat(B),reason:te||"Admin credit/bonus",adminId:Oe._id})});if(Q.ok){const ve=await Q.json();j({type:"success",text:`$${B} credit added successfully`}),await ce(i._id),setTimeout(()=>{b("view"),G()},1500)}else{const ve=await Q.json();j({type:"error",text:ve.message||"Failed to add credit"})}}catch{j({type:"error",text:"Error adding credit"})}T(!1)},Ze=async()=>{if(!Ie||parseFloat(Ie)<=0){j({type:"error",text:"Please enter a valid amount"});return}if(!re){j({type:"error",text:"No account selected"});return}T(!0);try{const Q=await fetch(`http://localhost:5001/api/admin/trading-account/${re}/add-fund`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:parseFloat(Ie),reason:fe||"Admin fund addition"})});if(Q.ok)j({type:"success",text:`$${Ie} added to account successfully`}),await ce(i._id),setTimeout(()=>{b("view"),G()},1500);else{const ve=await Q.json();j({type:"error",text:ve.message||"Failed to add funds"})}}catch{j({type:"error",text:"Error adding funds to account"})}T(!1)},Xe=async()=>{if(!Ie||parseFloat(Ie)<=0){j({type:"error",text:"Please enter a valid amount"});return}if(!re){j({type:"error",text:"No account selected"});return}T(!0);try{const Q=await fetch(`http://localhost:5001/api/admin/trading-account/${re}/deduct`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:parseFloat(Ie),reason:fe||"Admin deduction"})});if(Q.ok)j({type:"success",text:`$${Ie} deducted from account successfully`}),await ce(i._id),setTimeout(()=>{b("view"),G()},1500);else{const ve=await Q.json();j({type:"error",text:ve.message||"Failed to deduct funds"})}}catch{j({type:"error",text:"Error deducting funds from account"})}T(!1)},ts=async()=>{T(!0);try{const Q=await fetch(`http://localhost:5001/api/admin/login-as-user/${i._id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:Oe._id})});if(Q.ok){const ve=await Q.json();localStorage.setItem("token",ve.token),localStorage.setItem("user",JSON.stringify(ve.user)),window.open("/dashboard","_blank"),j({type:"success",text:"Logged in as user - opening in new tab"})}else{const ve=await Q.json();j({type:"error",text:ve.message||"Failed to login as user"})}}catch{j({type:"error",text:"Error logging in as user"})}T(!1)},Nt=()=>{var Q,ve,Re,Qe,cs,or,ss,St;return!c||!i?null:e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-2xl w-full max-w-md border border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-accent-green/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-accent-green font-medium",children:((ve=(Q=i.firstName)==null?void 0:Q.charAt(0))==null?void 0:ve.toUpperCase())||"U"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:i.firstName}),e.jsx("p",{className:"text-gray-500 text-sm",children:i.email})]})]}),e.jsx("button",{onClick:Le,className:"p-2 hover:bg-dark-700 rounded-lg transition-colors",children:e.jsx(ye,{size:18,className:"text-gray-400"})})]}),e.jsxs("div",{className:"p-4",children:[w.text&&e.jsxs("div",{className:`mb-4 p-3 rounded-lg flex items-center gap-2 ${w.type==="success"?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:[w.type==="success"?e.jsx(qe,{size:18}):e.jsx(Xi,{size:18}),e.jsx("span",{className:"text-sm",children:w.text})]}),x==="view"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-dark-700 p-3 rounded-lg",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Full Name"}),e.jsx("p",{className:"text-white",children:i.firstName})]}),e.jsxs("div",{className:"bg-dark-700 p-3 rounded-lg",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Phone"}),e.jsx("p",{className:"text-white",children:i.phone||"N/A"})]}),e.jsxs("div",{className:"bg-dark-700 p-3 rounded-lg",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Joined"}),e.jsx("p",{className:"text-white",children:ee(i.createdAt)})]}),e.jsxs("div",{className:"bg-dark-700 p-3 rounded-lg",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Status"}),e.jsx("p",{className:`${i.isBanned?"text-red-500":i.isBlocked?"text-yellow-500":"text-green-500"}`,children:i.isBanned?"Banned":i.isBlocked?"Blocked":"Active"})]})]}),e.jsxs("div",{className:"bg-dark-700 p-3 rounded-lg",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Email"}),e.jsx("p",{className:"text-white",children:i.email})]}),e.jsx("div",{className:"bg-gradient-to-r from-green-500/10 to-teal-500/10 border border-green-500/30 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-xs mb-1",children:" Main Wallet Balance"}),e.jsxs("p",{className:"text-white text-2xl font-bold",children:["$",(Te==null?void 0:Te.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>b("addFundWallet"),className:"p-2 bg-green-500/20 text-green-500 rounded-lg hover:bg-green-500/30 transition-colors",title:"Add to Wallet",children:e.jsx(st,{size:16})}),e.jsx("button",{onClick:()=>b("deductWallet"),className:"p-2 bg-orange-500/20 text-orange-500 rounded-lg hover:bg-orange-500/30 transition-colors",title:"Deduct from Wallet",children:e.jsx(en,{size:16})})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2",children:[e.jsxs("button",{onClick:()=>b("password"),className:"flex items-center justify-center gap-2 p-3 bg-blue-500/20 text-blue-500 rounded-lg hover:bg-blue-500/30 transition-colors",children:[e.jsx(Ss,{size:16}),e.jsx("span",{className:"text-sm",children:"Change Password"})]}),e.jsxs("button",{onClick:()=>b("addFund"),className:"flex items-center justify-center gap-2 p-3 bg-green-500/20 text-green-500 rounded-lg hover:bg-green-500/30 transition-colors",children:[e.jsx(nt,{size:16}),e.jsx("span",{className:"text-sm",children:"Add Fund"})]}),e.jsxs("button",{onClick:()=>b("deduct"),className:"flex items-center justify-center gap-2 p-3 bg-orange-500/20 text-orange-500 rounded-lg hover:bg-orange-500/30 transition-colors",children:[e.jsx(Pt,{size:16}),e.jsx("span",{className:"text-sm",children:"Deduct Fund"})]}),e.jsxs("button",{onClick:()=>b("block"),className:`flex items-center justify-center gap-2 p-3 rounded-lg transition-colors ${i.isBlocked?"bg-green-500/20 text-green-500 hover:bg-green-500/30":"bg-yellow-500/20 text-yellow-500 hover:bg-yellow-500/30"}`,children:[e.jsx(Io,{size:16}),e.jsx("span",{className:"text-sm",children:i.isBlocked?"Unblock":"Block"})]}),e.jsxs("button",{onClick:()=>b("ban"),className:`flex items-center justify-center gap-2 p-3 rounded-lg transition-colors ${i.isBanned?"bg-green-500/20 text-green-500 hover:bg-green-500/30":"bg-red-500/20 text-red-500 hover:bg-red-500/30"}`,children:[e.jsx(kr,{size:16}),e.jsx("span",{className:"text-sm",children:i.isBanned?"Unban":"Ban"})]}),e.jsxs("button",{onClick:()=>b("tradingAccounts"),className:"flex items-center justify-center gap-2 p-3 bg-teal-500/20 text-teal-500 rounded-lg hover:bg-teal-500/30 transition-colors",children:[e.jsx(Hs,{size:16}),e.jsx("span",{className:"text-sm",children:"Trading Accounts"})]}),e.jsxs("button",{onClick:ts,disabled:f,className:"flex items-center justify-center gap-2 p-3 bg-cyan-500/20 text-cyan-500 rounded-lg hover:bg-cyan-500/30 transition-colors",children:[e.jsx(fb,{size:16}),e.jsx("span",{className:"text-sm",children:f?"Opening...":"Login as User"})]})]})]}),x==="tradingAccounts"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-teal-500 mb-2",children:[e.jsx(Hs,{size:20}),e.jsx("h4",{className:"font-semibold",children:"Trading Accounts"})]}),pe.length===0?e.jsx("div",{className:"p-4 text-center text-gray-500 text-sm bg-dark-700 rounded-lg",children:"No trading accounts found"}):e.jsx("div",{className:"space-y-3 max-h-[50vh] overflow-y-auto",children:pe.map(me=>{var Ct,ys,ht;return e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:me.accountId}),e.jsxs("p",{className:"text-gray-500 text-xs",children:[((Ct=me.accountTypeId)==null?void 0:Ct.name)||"Standard","  Leverage: ",me.leverage]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-white text-lg font-bold",children:["$",((ys=me.balance)==null?void 0:ys.toFixed(2))||"0.00"]}),me.credit>0&&e.jsxs("p",{className:"text-purple-400 text-xs",children:["Credit: $",(ht=me.credit)==null?void 0:ht.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>{Se(me._id),b("addFundAccount")},className:"flex-1 py-2 text-xs bg-green-500/20 text-green-500 rounded-lg hover:bg-green-500/30 transition-colors flex items-center justify-center gap-1",children:[e.jsx(st,{size:14})," Add Fund"]}),e.jsxs("button",{onClick:()=>{Se(me._id),b("deductAccount")},className:"flex-1 py-2 text-xs bg-orange-500/20 text-orange-500 rounded-lg hover:bg-orange-500/30 transition-colors flex items-center justify-center gap-1",children:[e.jsx(en,{size:14})," Deduct"]}),e.jsxs("button",{onClick:()=>{Se(me._id),b("credit")},className:"flex-1 py-2 text-xs bg-purple-500/20 text-purple-500 rounded-lg hover:bg-purple-500/30 transition-colors flex items-center justify-center gap-1",children:[e.jsx(sm,{size:14})," Credit"]})]})]},me._id)})}),e.jsx("div",{className:"flex gap-2 pt-2",children:e.jsx("button",{onClick:()=>b("view"),className:"flex-1 py-3 bg-dark-700 text-gray-400 rounded-lg hover:bg-dark-600 transition-colors",children:"Back"})})]}),x==="password"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-500 mb-2",children:[e.jsx(Ss,{size:20}),e.jsx("h4",{className:"font-semibold",children:"Change Password"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"New Password"}),e.jsx("input",{type:"password",value:R,onChange:me=>le(me.target.value),placeholder:"Enter new password",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Confirm Password"}),e.jsx("input",{type:"password",value:X,onChange:me=>_(me.target.value),placeholder:"Confirm new password",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-blue-500"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>b("view"),className:"flex-1 py-3 bg-dark-700 text-gray-400 rounded-lg hover:bg-dark-600 transition-colors",children:"Back"}),e.jsx("button",{onClick:Be,disabled:f,className:"flex-1 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50",children:f?"Updating...":"Update Password"})]})]}),x==="deduct"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-orange-500 mb-2",children:[e.jsx(Pt,{size:20}),e.jsx("h4",{className:"font-semibold",children:"Deduct Funds"})]}),e.jsxs("div",{className:"bg-dark-700 p-3 rounded-lg",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Current Wallet Balance"}),e.jsxs("p",{className:"text-white text-xl font-bold",children:["$",(Te==null?void 0:Te.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Amount to Deduct ($)"}),e.jsx("input",{type:"number",value:L,onChange:me=>I(me.target.value),placeholder:"Enter amount",min:"0",step:"0.01",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-orange-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Reason (Optional)"}),e.jsx("input",{type:"text",value:$,onChange:me=>H(me.target.value),placeholder:"Enter reason for deduction",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-orange-500"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>b("view"),className:"flex-1 py-3 bg-dark-700 text-gray-400 rounded-lg hover:bg-dark-600 transition-colors",children:"Back"}),e.jsx("button",{onClick:V,disabled:f,className:"flex-1 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors disabled:opacity-50",children:f?"Processing...":"Deduct Fund"})]})]}),x==="addFund"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-500 mb-2",children:[e.jsx(nt,{size:20}),e.jsx("h4",{className:"font-semibold",children:"Add Funds"})]}),e.jsxs("div",{className:"bg-dark-700 p-3 rounded-lg",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Current Wallet Balance"}),e.jsxs("p",{className:"text-white text-xl font-bold",children:["$",(Te==null?void 0:Te.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Amount to Add ($)"}),e.jsx("input",{type:"number",value:y,onChange:me=>O(me.target.value),placeholder:"Enter amount",min:"0",step:"0.01",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Reason (Optional)"}),e.jsx("input",{type:"text",value:g,onChange:me=>v(me.target.value),placeholder:"Enter reason for adding funds",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-green-500"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>b("view"),className:"flex-1 py-3 bg-dark-700 text-gray-400 rounded-lg hover:bg-dark-600 transition-colors",children:"Back"}),e.jsx("button",{onClick:ue,disabled:f,className:"flex-1 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors disabled:opacity-50",children:f?"Processing...":"Add Fund"})]})]}),x==="block"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`flex items-center gap-2 ${i.isBlocked?"text-green-500":"text-yellow-500"} mb-2`,children:[e.jsx(Io,{size:20}),e.jsx("h4",{className:"font-semibold",children:i.isBlocked?"Unblock User":"Block User"})]}),e.jsx("p",{className:"text-gray-400 text-sm",children:i.isBlocked?"This will allow the user to access their account again.":"Blocking will temporarily prevent the user from logging in and accessing their account."}),!i.isBlocked&&e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Reason (Optional)"}),e.jsx("input",{type:"text",value:W,onChange:me=>Z(me.target.value),placeholder:"Enter reason for blocking",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-yellow-500"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>b("view"),className:"flex-1 py-3 bg-dark-700 text-gray-400 rounded-lg hover:bg-dark-600 transition-colors",children:"Back"}),e.jsx("button",{onClick:ke,disabled:f,className:`flex-1 py-3 text-white rounded-lg transition-colors disabled:opacity-50 ${i.isBlocked?"bg-green-500 hover:bg-green-600":"bg-yellow-500 hover:bg-yellow-600"}`,children:f?"Processing...":i.isBlocked?"Unblock User":"Block User"})]})]}),x==="ban"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`flex items-center gap-2 ${i.isBanned?"text-green-500":"text-red-500"} mb-2`,children:[e.jsx(kr,{size:20}),e.jsx("h4",{className:"font-semibold",children:i.isBanned?"Unban User":"Ban User Permanently"})]}),e.jsx("div",{className:`p-3 rounded-lg ${i.isBanned?"bg-green-500/10":"bg-red-500/10"}`,children:e.jsx("p",{className:`text-sm ${i.isBanned?"text-green-400":"text-red-400"}`,children:i.isBanned?"This will remove the permanent ban and restore user access.":" Warning: Banning is a permanent action. The user will lose all access to their account and funds."})}),!i.isBanned&&e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Reason (Required)"}),e.jsx("input",{type:"text",value:W,onChange:me=>Z(me.target.value),placeholder:"Enter reason for banning",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-red-500"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>b("view"),className:"flex-1 py-3 bg-dark-700 text-gray-400 rounded-lg hover:bg-dark-600 transition-colors",children:"Back"}),e.jsx("button",{onClick:We,disabled:f||!i.isBanned&&!W,className:`flex-1 py-3 text-white rounded-lg transition-colors disabled:opacity-50 ${i.isBanned?"bg-green-500 hover:bg-green-600":"bg-red-500 hover:bg-red-600"}`,children:f?"Processing...":i.isBanned?"Unban User":"Ban Permanently"})]})]}),x==="credit"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-purple-500 mb-2",children:[e.jsx(sm,{size:20}),e.jsx("h4",{className:"font-semibold",children:"Add Credit/Bonus"})]}),e.jsx("div",{className:"bg-purple-500/10 p-3 rounded-lg",children:e.jsx("p",{className:"text-purple-400 text-sm",children:"Credit adds to equity for trading but cannot be withdrawn. Only profits made using credit can be withdrawn."})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Select Trading Account"}),e.jsxs("select",{value:re,onChange:me=>Se(me.target.value),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500",children:[pe.length===0&&e.jsx("option",{value:"",children:"No accounts available"}),pe.map(me=>{var Ct,ys;return e.jsxs("option",{value:me._id,children:[me.accountId," - Balance: $",(Ct=me.balance)==null?void 0:Ct.toFixed(2)," | Credit: $",((ys=me.credit)==null?void 0:ys.toFixed(2))||"0.00"]},me._id)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Credit Amount ($)"}),e.jsx("input",{type:"number",value:B,onChange:me=>M(me.target.value),placeholder:"Enter credit amount",min:"0",step:"0.01",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-purple-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Reason (Optional)"}),e.jsx("input",{type:"text",value:te,onChange:me=>ae(me.target.value),placeholder:"e.g., Deposit bonus, Promotion",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-purple-500"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>b("view"),className:"flex-1 py-3 bg-dark-700 text-gray-400 rounded-lg hover:bg-dark-600 transition-colors",children:"Back"}),e.jsx("button",{onClick:ft,disabled:f||!re,className:"flex-1 py-3 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors disabled:opacity-50",children:f?"Processing...":"Add Credit"})]})]}),x==="delete"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-500 mb-2",children:[e.jsx(Lt,{size:20}),e.jsx("h4",{className:"font-semibold",children:"Delete User"})]}),e.jsx("div",{className:"bg-red-500/10 p-3 rounded-lg",children:e.jsx("p",{className:"text-red-400 text-sm",children:" This action cannot be undone. All user data, trading accounts, and transaction history will be permanently deleted."})}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Are you sure you want to delete ",e.jsx("span",{className:"text-white font-medium",children:i.firstName}),"'s account?"]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:Le,className:"flex-1 py-3 bg-dark-700 text-gray-400 rounded-lg hover:bg-dark-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Ue,disabled:f,className:"flex-1 py-3 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50",children:f?"Deleting...":"Delete User"})]})]}),x==="addFundWallet"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-500 mb-2",children:[e.jsx(nt,{size:20}),e.jsx("h4",{className:"font-semibold",children:"Add Funds to Wallet"})]}),e.jsxs("div",{className:"bg-dark-700 p-3 rounded-lg",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Current Wallet Balance"}),e.jsxs("p",{className:"text-white text-xl font-bold",children:["$",(Te==null?void 0:Te.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Amount to Add ($)"}),e.jsx("input",{type:"number",value:y,onChange:me=>O(me.target.value),placeholder:"Enter amount",min:"0",step:"0.01",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Reason (Optional)"}),e.jsx("input",{type:"text",value:g,onChange:me=>v(me.target.value),placeholder:"Enter reason",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-green-500"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>b("view"),className:"flex-1 py-3 bg-dark-700 text-gray-400 rounded-lg hover:bg-dark-600 transition-colors",children:"Back"}),e.jsx("button",{onClick:ue,disabled:f,className:"flex-1 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors disabled:opacity-50",children:f?"Processing...":"Add to Wallet"})]})]}),x==="deductWallet"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-orange-500 mb-2",children:[e.jsx(nt,{size:20}),e.jsx("h4",{className:"font-semibold",children:"Deduct from Wallet"})]}),e.jsxs("div",{className:"bg-dark-700 p-3 rounded-lg",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Current Wallet Balance"}),e.jsxs("p",{className:"text-white text-xl font-bold",children:["$",(Te==null?void 0:Te.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}))||"0.00"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Amount to Deduct ($)"}),e.jsx("input",{type:"number",value:L,onChange:me=>I(me.target.value),placeholder:"Enter amount",min:"0",step:"0.01",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-orange-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Reason (Optional)"}),e.jsx("input",{type:"text",value:$,onChange:me=>H(me.target.value),placeholder:"Enter reason",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-orange-500"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>b("view"),className:"flex-1 py-3 bg-dark-700 text-gray-400 rounded-lg hover:bg-dark-600 transition-colors",children:"Back"}),e.jsx("button",{onClick:V,disabled:f,className:"flex-1 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors disabled:opacity-50",children:f?"Processing...":"Deduct from Wallet"})]})]}),x==="addFundAccount"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-500 mb-2",children:[e.jsx(Pt,{size:20}),e.jsx("h4",{className:"font-semibold",children:"Add Funds to Trading Account"})]}),e.jsxs("div",{className:"bg-dark-700 p-3 rounded-lg",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Selected Account"}),e.jsx("p",{className:"text-white font-medium",children:((Re=pe.find(me=>me._id===re))==null?void 0:Re.accountId)||"N/A"}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Balance: $",((cs=(Qe=pe.find(me=>me._id===re))==null?void 0:Qe.balance)==null?void 0:cs.toFixed(2))||"0.00"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Amount to Add ($)"}),e.jsx("input",{type:"number",value:Ie,onChange:me=>z(me.target.value),placeholder:"Enter amount",min:"0",step:"0.01",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Reason (Optional)"}),e.jsx("input",{type:"text",value:fe,onChange:me=>Pe(me.target.value),placeholder:"Enter reason",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-green-500"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>{z(""),Pe(""),b("view")},className:"flex-1 py-3 bg-dark-700 text-gray-400 rounded-lg hover:bg-dark-600 transition-colors",children:"Back"}),e.jsx("button",{onClick:Ze,disabled:f,className:"flex-1 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors disabled:opacity-50",children:f?"Processing...":"Add to Account"})]})]}),x==="deductAccount"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-orange-500 mb-2",children:[e.jsx(Pt,{size:20}),e.jsx("h4",{className:"font-semibold",children:"Deduct from Trading Account"})]}),e.jsxs("div",{className:"bg-dark-700 p-3 rounded-lg",children:[e.jsx("p",{className:"text-gray-500 text-xs mb-1",children:"Selected Account"}),e.jsx("p",{className:"text-white font-medium",children:((or=pe.find(me=>me._id===re))==null?void 0:or.accountId)||"N/A"}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Balance: $",((St=(ss=pe.find(me=>me._id===re))==null?void 0:ss.balance)==null?void 0:St.toFixed(2))||"0.00"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Amount to Deduct ($)"}),e.jsx("input",{type:"number",value:Ie,onChange:me=>z(me.target.value),placeholder:"Enter amount",min:"0",step:"0.01",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-orange-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Reason (Optional)"}),e.jsx("input",{type:"text",value:fe,onChange:me=>Pe(me.target.value),placeholder:"Enter reason",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-orange-500"})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>{z(""),Pe(""),b("view")},className:"flex-1 py-3 bg-dark-700 text-gray-400 rounded-lg hover:bg-dark-600 transition-colors",children:"Back"}),e.jsx("button",{onClick:Xe,disabled:f,className:"flex-1 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors disabled:opacity-50",children:f?"Processing...":"Deduct from Account"})]})]})]})]})})};return e.jsxs(qt,{title:"User Management",subtitle:"Manage all registered users",children:[e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("button",{onClick:()=>p("users"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${S==="users"?"bg-blue-500 text-white":"bg-dark-700 text-gray-400 hover:text-white"}`,children:["Users (",t.length,")"]}),e.jsxs("button",{onClick:()=>p("password-reset"),className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ${S==="password-reset"?"bg-blue-500 text-white":"bg-dark-700 text-gray-400 hover:text-white"}`,children:[e.jsx(Fc,{size:16}),"Password Requests",N.pending>0&&e.jsx("span",{className:"px-2 py-0.5 bg-red-500 text-white text-xs rounded-full",children:N.pending})]})]}),w.text&&e.jsx("div",{className:`mb-4 p-3 rounded-lg ${w.type==="success"?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:w.text}),S==="password-reset"?e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-5 border-b border-gray-800",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-white font-semibold text-lg",children:"Password Reset Requests"}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["Pending: ",N.pending," | Completed: ",N.completed," | Rejected: ",N.rejected]})]}),e.jsx("button",{onClick:q,className:"p-2 bg-dark-700 rounded-lg hover:bg-dark-600",children:e.jsx(Ge,{size:18,className:"text-gray-400"})})]}),e.jsx("div",{className:"p-4 space-y-3",children:m.length===0?e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No password reset requests"}):m.map(Q=>{var ve,Re;return e.jsxs("div",{className:"p-4 bg-dark-700 rounded-xl border border-gray-700",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-full flex items-center justify-center",children:e.jsx(It,{size:20,className:"text-blue-500"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-white font-medium",children:[(ve=Q.userId)==null?void 0:ve.firstName," ",(Re=Q.userId)==null?void 0:Re.lastName]}),e.jsx("p",{className:"text-gray-500 text-sm",children:Q.email}),Q.newEmail&&e.jsxs("p",{className:"text-yellow-500 text-xs mt-1",children:["Wants to change email to: ",Q.newEmail]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs ${Q.status==="Pending"?"bg-yellow-500/20 text-yellow-500":Q.status==="Completed"?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:Q.status}),e.jsx("span",{className:"text-gray-500 text-xs",children:new Date(Q.createdAt).toLocaleDateString()})]})]}),Q.status==="Pending"&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-600",children:E===Q._id?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"New Password"}),e.jsx("input",{type:"text",value:U,onChange:Qe=>K(Qe.target.value),placeholder:"Enter new password (min 6 chars)",className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-3 py-2 text-white text-sm"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{P(null),K("")},className:"px-4 py-2 bg-dark-600 text-gray-400 rounded-lg hover:bg-dark-500 text-sm",children:"Cancel"}),e.jsx("button",{onClick:()=>F(Q._id,"approve"),disabled:f,className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 text-sm disabled:opacity-50",children:f?"Processing...":"Reset Password"}),e.jsx("button",{onClick:()=>F(Q._id,"reject"),disabled:f,className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 text-sm disabled:opacity-50",children:"Reject"})]}),e.jsx("p",{className:"text-gray-500 text-xs",children:"After resetting, send the new password to user's email manually."})]}):e.jsx("button",{onClick:()=>P(Q._id),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 text-sm",children:"Process Request"})}),Q.status!=="Pending"&&Q.adminRemarks&&e.jsxs("p",{className:"mt-2 text-gray-500 text-xs",children:["Remarks: ",Q.adminRemarks]})]},Q._id)})})]}):e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 sm:p-5 border-b border-gray-800",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-white font-semibold text-lg",children:"All Users"}),e.jsxs("p",{className:"text-gray-500 text-sm",children:[t.length," total users"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(_t,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search users...",value:n,onChange:Q=>l(Q.target.value),className:"w-full sm:w-64 bg-dark-700 border border-gray-700 rounded-lg pl-10 pr-4 py-2 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600"})]}),e.jsxs("button",{onClick:G,className:"p-2 bg-dark-700 rounded-lg hover:bg-dark-600 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Ge,{size:18,className:`text-gray-400 ${r?"animate-spin":""}`}),e.jsx("span",{className:"sm:hidden text-gray-400 text-sm",children:"Refresh"})]})]})]}),e.jsx("div",{className:"block lg:hidden p-4 space-y-3",children:r?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Ge,{size:24,className:"text-gray-500 animate-spin"})}):k.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:n?"No users found matching your search":"No users registered yet"}):k.map(Q=>{var ve,Re;return e.jsxs("div",{className:"bg-dark-700 rounded-xl p-4 border border-gray-700",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-accent-green/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-accent-green font-medium text-lg",children:((Re=(ve=Q.firstName)==null?void 0:ve.charAt(0))==null?void 0:Re.toUpperCase())||"U"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:Q.firstName||"Unknown"}),e.jsx("p",{className:`text-xs ${Q.isBanned?"text-red-500":Q.isBlocked?"text-yellow-500":"text-green-500"}`,children:Q.isBanned?"Banned":Q.isBlocked?"Blocked":"Active"})]})]}),e.jsx("button",{onClick:()=>he("view",Q),className:"p-2 bg-dark-600 rounded-lg hover:bg-dark-500 transition-colors",children:e.jsx(Ti,{size:18,className:"text-gray-400"})})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(Ys,{size:14}),e.jsx("span",{className:"truncate",children:Q.email})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(Pi,{size:14}),e.jsx("span",{children:Q.phone||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(wa,{size:14}),e.jsxs("span",{children:["Joined ",ee(Q.createdAt)]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(nt,{size:14}),e.jsx("span",{className:"text-blue-400 text-sm",children:"Click View for balances"})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4 pt-3 border-t border-gray-600",children:[e.jsxs("button",{onClick:()=>he("view",Q),className:"flex-1 flex items-center justify-center gap-1 py-2 bg-blue-500/20 text-blue-500 rounded-lg text-sm hover:bg-blue-500/30 transition-colors",children:[e.jsx(Qt,{size:14}),"View"]}),e.jsxs("button",{onClick:()=>he("password",Q),className:"flex-1 flex items-center justify-center gap-1 py-2 bg-purple-500/20 text-purple-500 rounded-lg text-sm hover:bg-purple-500/30 transition-colors",children:[e.jsx(Ss,{size:14}),"Password"]}),e.jsxs("button",{onClick:()=>he("delete",Q),className:"flex-1 flex items-center justify-center gap-1 py-2 bg-red-500/20 text-red-500 rounded-lg text-sm hover:bg-red-500/30 transition-colors",children:[e.jsx(Lt,{size:14}),"Delete"]})]})]},Q._id)})}),e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"User"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Email"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Phone"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Balance"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Status"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Joined"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:r?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"text-center py-8",children:e.jsx(Ge,{size:24,className:"text-gray-500 animate-spin mx-auto"})})}):k.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"text-center py-8 text-gray-500",children:n?"No users found matching your search":"No users registered yet"})}):k.map(Q=>{var ve,Re;return e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-dark-700/50",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-accent-green/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-accent-green font-medium",children:((Re=(ve=Q.firstName)==null?void 0:ve.charAt(0))==null?void 0:Re.toUpperCase())||"U"})}),e.jsx("span",{className:"text-white font-medium",children:Q.firstName||"Unknown"})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(Ys,{size:14}),e.jsx("span",{children:Q.email})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(Pi,{size:14}),e.jsx("span",{children:Q.phone||"N/A"})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("button",{onClick:()=>he("view",Q),className:"text-blue-400 hover:text-blue-300 text-sm underline",children:"View Balances"})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Q.isBanned?"bg-red-500/20 text-red-500":Q.isBlocked?"bg-yellow-500/20 text-yellow-500":"bg-green-500/20 text-green-500"}`,children:Q.isBanned?"Banned":Q.isBlocked?"Blocked":"Active"})}),e.jsx("td",{className:"py-4 px-4 text-gray-400",children:ee(Q.createdAt)}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>he("view",Q),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-white",title:"View Details",children:e.jsx(Qt,{size:16})}),e.jsx("button",{onClick:()=>he("password",Q),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-blue-500",title:"Change Password",children:e.jsx(Ss,{size:16})}),e.jsx("button",{onClick:()=>he("deduct",Q),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-orange-500",title:"Deduct Fund",children:e.jsx(Pt,{size:16})}),e.jsx("button",{onClick:()=>he("block",Q),className:`p-2 hover:bg-dark-600 rounded-lg transition-colors ${Q.isBlocked?"text-yellow-500":"text-gray-400 hover:text-yellow-500"}`,title:Q.isBlocked?"Unblock User":"Block User",children:e.jsx(Io,{size:16})}),e.jsx("button",{onClick:()=>he("delete",Q),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-red-500",title:"Delete User",children:e.jsx(Lt,{size:16})})]})})]},Q._id)})})]})})]}),Nt()]})},Fo="http://localhost:5001/api",Yj=()=>{var $,H;const t=ut(),[s,r]=o.useState("Accounts"),[a,n]=o.useState(!1),[l,i]=o.useState([]),[d,c]=o.useState(!0),[u,x]=o.useState(""),[b,f]=o.useState(!1),[T,w]=o.useState(!1),[j,S]=o.useState(null),[p,m]=o.useState(""),[h,N]=o.useState(""),[C,E]=o.useState({leverage:"",exposureLimit:"",status:""}),[P,U]=o.useState(""),K=[{name:"Dashboard",icon:As,path:"/admin/dashboard"},{name:"User Management",icon:et,path:"/admin/dashboard"},{name:"Accounts",icon:Hs,path:"/admin/accounts"},{name:"Account Types",icon:Hs,path:"/admin/account-types"},{name:"Transactions",icon:Gr,path:"/admin/transactions"},{name:"Payment Methods",icon:Gr,path:"/admin/payment-methods"}];o.useEffect(()=>{localStorage.getItem("adminToken")||t("/admin"),R()},[t]);const R=async()=>{c(!0);try{const O=await(await fetch(`${Fo}/trading-accounts/all`)).json();i(O.accounts||[])}catch(y){console.error("Error:",y)}c(!1)},le=async()=>{if(j)try{(await fetch(`${Fo}/trading-accounts/${j._id}/admin-update`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)})).ok&&(N("Account updated successfully!"),f(!1),S(null),R(),setTimeout(()=>N(""),3e3))}catch{m("Error updating account")}},X=async()=>{if(!j||!P||P.length!==4){m("PIN must be exactly 4 digits");return}try{(await fetch(`${Fo}/trading-accounts/${j._id}/reset-pin`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({newPin:P})})).ok&&(N("PIN reset successfully!"),w(!1),S(null),U(""),setTimeout(()=>N(""),3e3))}catch{m("Error resetting PIN")}},_=y=>{var O;S(y),E({leverage:y.leverage,exposureLimit:((O=y.exposureLimit)==null?void 0:O.toString())||"0",status:y.status}),f(!0),m("")},L=l.filter(y=>{var O,g,v,W,Z;return((O=y.accountId)==null?void 0:O.toLowerCase().includes(u.toLowerCase()))||((v=(g=y.userId)==null?void 0:g.firstName)==null?void 0:v.toLowerCase().includes(u.toLowerCase()))||((Z=(W=y.userId)==null?void 0:W.email)==null?void 0:Z.toLowerCase().includes(u.toLowerCase()))}),I=()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),t("/admin")};return e.jsxs("div",{className:"min-h-screen bg-dark-900 flex",children:[e.jsxs("aside",{className:`${a?"w-52":"w-16"} bg-dark-900 border-r border-gray-800 flex flex-col transition-all duration-300`,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[e.jsxs("div",{className:"p-4 flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-red-500 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"A"})}),a&&e.jsx("span",{className:"text-white font-semibold",children:"Admin"})]}),e.jsx("nav",{className:"flex-1 px-2",children:K.map(y=>e.jsxs("button",{onClick:()=>t(y.path),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-colors ${s===y.name?"bg-red-500 text-white":"text-gray-400 hover:text-white hover:bg-dark-700"}`,children:[e.jsx(y.icon,{size:18,className:"flex-shrink-0"}),a&&e.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:y.name})]},y.name))}),e.jsx("div",{className:"p-2 border-t border-gray-800",children:e.jsxs("button",{onClick:I,className:"w-full flex items-center gap-3 px-3 py-2.5 text-gray-400 hover:text-white transition-colors rounded-lg",children:[e.jsx(fs,{size:18}),a&&e.jsx("span",{className:"text-sm font-medium",children:"Log Out"})]})})]}),e.jsxs("main",{className:"flex-1 overflow-auto",children:[e.jsxs("header",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-800",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-white",children:"Account Management"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Manage all user trading accounts"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(_t,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search accounts...",value:u,onChange:y=>x(y.target.value),className:"bg-dark-700 border border-gray-700 rounded-lg pl-10 pr-4 py-2 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600 w-64"})]}),e.jsx("button",{onClick:R,className:"p-2 bg-dark-700 rounded-lg hover:bg-dark-600 transition-colors",children:e.jsx(Ge,{size:18,className:`text-gray-400 ${d?"animate-spin":""}`})})]})]}),e.jsxs("div",{className:"p-6",children:[h&&e.jsxs("div",{className:"mb-4 p-3 bg-green-500/20 border border-green-500/50 rounded-lg text-green-500 flex items-center gap-2",children:[e.jsx(qe,{size:18})," ",h]}),p&&e.jsx("div",{className:"mb-4 p-3 bg-red-500/20 border border-red-500/50 rounded-lg text-red-500",children:p}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Total Accounts"}),e.jsx("p",{className:"text-white text-2xl font-bold",children:l.length})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Active"}),e.jsx("p",{className:"text-green-500 text-2xl font-bold",children:l.filter(y=>y.status==="Active").length})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Suspended"}),e.jsx("p",{className:"text-red-500 text-2xl font-bold",children:l.filter(y=>y.status==="Suspended").length})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Total Balance"}),e.jsxs("p",{className:"text-white text-2xl font-bold",children:["$",l.reduce((y,O)=>y+(O.balance||0),0).toLocaleString()]})]})]}),e.jsx("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Account ID"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"User"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Type"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Balance"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Leverage"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Status"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:d?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"text-center py-8",children:e.jsx(Ge,{size:24,className:"text-gray-500 animate-spin mx-auto"})})}):L.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"text-center py-8 text-gray-500",children:u?"No accounts found":"No trading accounts yet"})}):L.map(y=>{var O,g,v,W;return e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-dark-700/50",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:"text-accent-green font-mono text-sm",children:y.accountId})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:((O=y.userId)==null?void 0:O.firstName)||"Unknown"}),e.jsx("p",{className:"text-gray-500 text-sm",children:(g=y.userId)==null?void 0:g.email})]})}),e.jsx("td",{className:"py-4 px-4 text-gray-400",children:((v=y.accountTypeId)==null?void 0:v.name)||"N/A"}),e.jsxs("td",{className:"py-4 px-4 text-white font-medium",children:["$",((W=y.balance)==null?void 0:W.toLocaleString())||0]}),e.jsx("td",{className:"py-4 px-4 text-gray-400",children:y.leverage}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${y.status==="Active"?"bg-green-500/20 text-green-500":y.status==="Suspended"?"bg-red-500/20 text-red-500":"bg-gray-500/20 text-gray-500"}`,children:y.status})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>_(y),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-white",title:"Edit",children:e.jsx(Wt,{size:16})}),e.jsx("button",{onClick:()=>{S(y),w(!0),m("")},className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-yellow-500",title:"Reset PIN",children:e.jsx(Ss,{size:16})})]})})]},y._id)})})]})})]})]}),b&&j&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 w-full max-w-md border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Edit Account"}),e.jsx("button",{onClick:()=>f(!1),className:"text-gray-400 hover:text-white",children:e.jsx(ye,{size:20})})]}),e.jsxs("div",{className:"mb-4 p-3 bg-dark-700 rounded-lg",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Account ID"}),e.jsx("p",{className:"text-accent-green font-mono",children:j.accountId})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Leverage"}),e.jsxs("select",{value:C.leverage,onChange:y=>E({...C,leverage:y.target.value}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white focus:outline-none",children:[e.jsx("option",{value:"1:50",children:"1:50"}),e.jsx("option",{value:"1:100",children:"1:100"}),e.jsx("option",{value:"1:200",children:"1:200"}),e.jsx("option",{value:"1:500",children:"1:500"}),e.jsx("option",{value:"1:1000",children:"1:1000"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Exposure Limit ($)"}),e.jsx("input",{type:"number",value:C.exposureLimit,onChange:y=>E({...C,exposureLimit:y.target.value}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Status"}),e.jsxs("select",{value:C.status,onChange:y=>E({...C,status:y.target.value}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white focus:outline-none",children:[e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Suspended",children:"Suspended"}),e.jsx("option",{value:"Closed",children:"Closed"})]})]})]}),p&&e.jsx("p",{className:"text-red-500 text-sm mt-4",children:p}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>f(!1),className:"flex-1 bg-dark-700 text-white py-3 rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:le,className:"flex-1 bg-red-500 text-white font-medium py-3 rounded-lg hover:bg-red-600",children:"Update"})]})]})}),T&&j&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 w-full max-w-md border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Reset Account PIN"}),e.jsx("button",{onClick:()=>{w(!1),U("")},className:"text-gray-400 hover:text-white",children:e.jsx(ye,{size:20})})]}),e.jsxs("div",{className:"mb-4 p-3 bg-dark-700 rounded-lg",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Account ID"}),e.jsx("p",{className:"text-accent-green font-mono",children:j.accountId}),e.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:["User: ",(($=j.userId)==null?void 0:$.firstName)||((H=j.userId)==null?void 0:H.email)]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"New 4-digit PIN"}),e.jsx("input",{type:"text",maxLength:4,value:P,onChange:y=>U(y.target.value.replace(/\D/g,"")),placeholder:"Enter new PIN",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white text-center text-2xl tracking-widest focus:outline-none focus:border-red-500"})]}),p&&e.jsx("p",{className:"text-red-500 text-sm mb-4",children:p}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{w(!1),U("")},className:"flex-1 bg-dark-700 text-white py-3 rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:X,className:"flex-1 bg-red-500 text-white font-medium py-3 rounded-lg hover:bg-red-600",children:"Reset PIN"})]})]})})]})},Nn="http://localhost:5001/api",Jj=()=>{const[t,s]=o.useState([]),[r,a]=o.useState(!0),[n,l]=o.useState(!1),[i,d]=o.useState(null),[c,u]=o.useState(""),[x,b]=o.useState(""),[f,T]=o.useState({name:"",description:"",minDeposit:"",leverage:"1:100",exposureLimit:"",isActive:!0});o.useEffect(()=>{w()},[]);const w=async()=>{a(!0);try{const C=await(await fetch(`${Nn}/account-types/all`)).json();s(C.accountTypes||[])}catch(N){console.error("Error fetching account types:",N)}a(!1)},j=async()=>{if(!f.name||!f.minDeposit||!f.leverage){u("Please fill in all required fields");return}try{const N=i?`${Nn}/account-types/${i._id}`:`${Nn}/account-types`,C=await fetch(N,{method:i?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...f,minDeposit:parseFloat(f.minDeposit),exposureLimit:f.exposureLimit?parseFloat(f.exposureLimit):0})}),E=await C.json();C.ok?(b(i?"Account type updated!":"Account type created!"),l(!1),m(),w(),setTimeout(()=>b(""),3e3)):u(E.message)}catch{u("Error saving account type")}},S=async N=>{if(confirm("Are you sure you want to delete this account type?"))try{(await fetch(`${Nn}/account-types/${N}`,{method:"DELETE"})).ok&&(b("Account type deleted!"),w(),setTimeout(()=>b(""),3e3))}catch{u("Error deleting account type")}},p=async N=>{try{(await fetch(`${Nn}/account-types/${N._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...N,isActive:!N.isActive})})).ok&&w()}catch{u("Error updating account type")}},m=()=>{T({name:"",description:"",minDeposit:"",leverage:"1:100",exposureLimit:"",isActive:!0}),d(null),u("")},h=N=>{var C;d(N),T({name:N.name,description:N.description||"",minDeposit:N.minDeposit.toString(),leverage:N.leverage,exposureLimit:((C=N.exposureLimit)==null?void 0:C.toString())||"",isActive:N.isActive}),l(!0),u("")};return e.jsxs(qt,{title:"Account Types",subtitle:"Manage trading account types",children:[e.jsx("div",{className:"flex justify-end mb-6",children:e.jsxs("button",{onClick:()=>{m(),l(!0)},className:"flex items-center gap-2 bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors",children:[e.jsx(st,{size:18})," Add Account Type"]})}),e.jsxs("div",{children:[x&&e.jsxs("div",{className:"mb-4 p-3 bg-green-500/20 border border-green-500/50 rounded-lg text-green-500 flex items-center gap-2",children:[e.jsx(qe,{size:18})," ",x]}),r?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Ge,{size:24,className:"text-gray-500 animate-spin"})}):e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.map(N=>e.jsxs("div",{className:`bg-dark-800 rounded-xl p-5 border ${N.isActive?"border-gray-800":"border-red-500/30 opacity-60"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-white font-semibold",children:N.name}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${N.isActive?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:N.isActive?"Active":"Disabled"})]}),e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:N.description||"No description"}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Min Deposit"}),e.jsxs("span",{className:"text-white",children:["$",N.minDeposit]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Leverage"}),e.jsx("span",{className:"text-white",children:N.leverage})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Exposure Limit"}),e.jsxs("span",{className:"text-white",children:["$",N.exposureLimit||0]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>h(N),className:"flex-1 flex items-center justify-center gap-1 bg-dark-700 text-white py-2 rounded-lg hover:bg-dark-600 transition-colors text-sm",children:[e.jsx(Wt,{size:14})," Edit"]}),e.jsx("button",{onClick:()=>p(N),className:`flex-1 py-2 rounded-lg transition-colors text-sm ${N.isActive?"bg-orange-500/20 text-orange-500 hover:bg-orange-500/30":"bg-green-500/20 text-green-500 hover:bg-green-500/30"}`,children:N.isActive?"Disable":"Enable"}),e.jsx("button",{onClick:()=>S(N._id),className:"p-2 bg-red-500/20 text-red-500 rounded-lg hover:bg-red-500/30 transition-colors",children:e.jsx(Lt,{size:14})})]})]},N._id)),t.length===0&&e.jsxs("div",{className:"col-span-3 bg-dark-800 rounded-xl p-8 border border-gray-800 text-center",children:[e.jsx(Hs,{size:48,className:"text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No account types created yet"})]})]})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 w-full max-w-md border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:i?"Edit Account Type":"Create Account Type"}),e.jsx("button",{onClick:()=>{l(!1),m()},className:"text-gray-400 hover:text-white",children:e.jsx(ye,{size:20})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Account Name *"}),e.jsx("input",{type:"text",value:f.name,onChange:N=>T({...f,name:N.target.value}),placeholder:"e.g., Standard, Premium, VIP",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-red-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Description"}),e.jsx("textarea",{value:f.description,onChange:N=>T({...f,description:N.target.value}),placeholder:"Account type description",rows:2,className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-red-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Min Deposit ($) *"}),e.jsx("input",{type:"number",value:f.minDeposit,onChange:N=>T({...f,minDeposit:N.target.value}),placeholder:"100",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-red-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Leverage *"}),e.jsxs("select",{value:f.leverage,onChange:N=>T({...f,leverage:N.target.value}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-red-500",children:[e.jsx("option",{value:"1:50",children:"1:50"}),e.jsx("option",{value:"1:100",children:"1:100"}),e.jsx("option",{value:"1:200",children:"1:200"}),e.jsx("option",{value:"1:500",children:"1:500"}),e.jsx("option",{value:"1:1000",children:"1:1000"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Exposure Limit ($)"}),e.jsx("input",{type:"number",value:f.exposureLimit,onChange:N=>T({...f,exposureLimit:N.target.value}),placeholder:"0 for unlimited",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-red-500"})]})]}),c&&e.jsx("p",{className:"text-red-500 text-sm mt-4",children:c}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{l(!1),m()},className:"flex-1 bg-dark-700 text-white py-3 rounded-lg hover:bg-dark-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:j,className:"flex-1 bg-red-500 text-white font-medium py-3 rounded-lg hover:bg-red-600 transition-colors",children:i?"Update":"Create"})]})]})})]})},pm="http://localhost:5001/api",qj=()=>{const t=ut(),[s,r]=o.useState("Transactions"),[a,n]=o.useState(!1),[l,i]=o.useState([]),[d,c]=o.useState(!0),[u,x]=o.useState("all"),[b,f]=o.useState(""),[T,w]=o.useState(""),[j,S]=o.useState(!1),[p,m]=o.useState(null),[h,N]=o.useState(""),[C,E]=o.useState(""),P=[{name:"Dashboard",icon:As,path:"/admin/dashboard"},{name:"User Management",icon:et,path:"/admin/dashboard"},{name:"Account Types",icon:Hs,path:"/admin/account-types"},{name:"Transactions",icon:Gr,path:"/admin/transactions"},{name:"Payment Methods",icon:Gr,path:"/admin/payment-methods"}];o.useEffect(()=>{localStorage.getItem("adminToken")||t("/admin"),U()},[t]);const U=async()=>{c(!0);try{const L=await(await fetch(`${pm}/wallet/admin/transactions`)).json();i(L.transactions||[])}catch(_){console.error("Error:",_)}c(!1)},K=async()=>{if(p)try{const _=h==="approve"?"approve":"reject";(await fetch(`${pm}/wallet/transaction/${p._id}/${_}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminRemarks:C})})).ok&&(w(`Transaction ${h}d!`),S(!1),m(null),E(""),U(),setTimeout(()=>w(""),3e3))}catch{f("Error processing transaction")}},R=l.filter(_=>u==="all"?!0:u==="pending"?_.status==="Pending":u==="deposits"?_.type==="Deposit":u==="withdrawals"?_.type==="Withdrawal":!0),le=_=>new Date(_).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),X=()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),t("/admin")};return e.jsxs("div",{className:"min-h-screen bg-dark-900 flex",children:[e.jsxs("aside",{className:`${a?"w-52":"w-16"} bg-dark-900 border-r border-gray-800 flex flex-col transition-all duration-300`,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[e.jsxs("div",{className:"p-4 flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-red-500 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"A"})}),a&&e.jsx("span",{className:"text-white font-semibold",children:"Admin"})]}),e.jsx("nav",{className:"flex-1 px-2",children:P.map(_=>e.jsxs("button",{onClick:()=>t(_.path),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-colors ${s===_.name?"bg-red-500 text-white":"text-gray-400 hover:text-white hover:bg-dark-700"}`,children:[e.jsx(_.icon,{size:18,className:"flex-shrink-0"}),a&&e.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:_.name})]},_.name))}),e.jsx("div",{className:"p-2 border-t border-gray-800",children:e.jsxs("button",{onClick:X,className:"w-full flex items-center gap-3 px-3 py-2.5 text-gray-400 hover:text-white transition-colors rounded-lg",children:[e.jsx(fs,{size:18}),a&&e.jsx("span",{className:"text-sm font-medium",children:"Log Out"})]})})]}),e.jsxs("main",{className:"flex-1 overflow-auto",children:[e.jsxs("header",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-800",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-white",children:"Transactions"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Manage deposits & withdrawals"})]}),e.jsx("div",{className:"flex gap-2",children:["all","pending","deposits","withdrawals"].map(_=>e.jsx("button",{onClick:()=>x(_),className:`px-4 py-2 rounded-lg text-sm capitalize ${u===_?"bg-red-500 text-white":"bg-dark-700 text-gray-400"}`,children:_},_))})]}),e.jsxs("div",{className:"p-6",children:[T&&e.jsxs("div",{className:"mb-4 p-3 bg-green-500/20 border border-green-500/50 rounded-lg text-green-500 flex items-center gap-2",children:[e.jsx(qe,{size:18})," ",T]}),e.jsx("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"User"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Type"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Amount"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Method"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Status"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Date"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:d?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"text-center py-8",children:e.jsx(Ge,{size:24,className:"text-gray-500 animate-spin mx-auto"})})}):R.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"text-center py-8 text-gray-500",children:"No transactions found"})}):R.map(_=>{var L,I;return e.jsxs("tr",{className:"border-b border-gray-800",children:[e.jsx("td",{className:"py-4 px-4 text-white",children:((L=_.userId)==null?void 0:L.firstName)||((I=_.userId)==null?void 0:I.email)||"Unknown"}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[_.type==="Deposit"?e.jsx(On,{size:16,className:"text-green-500"}):e.jsx(Bn,{size:16,className:"text-red-500"}),e.jsx("span",{className:"text-white",children:_.type})]})}),e.jsxs("td",{className:`py-4 px-4 font-medium ${_.type==="Deposit"?"text-green-500":"text-red-500"}`,children:["$",_.amount]}),e.jsx("td",{className:"py-4 px-4 text-gray-400",children:_.paymentMethod}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${_.status==="Approved"?"bg-green-500/20 text-green-500":_.status==="Rejected"?"bg-red-500/20 text-red-500":"bg-yellow-500/20 text-yellow-500"}`,children:_.status})}),e.jsx("td",{className:"py-4 px-4 text-gray-400 text-sm",children:le(_.createdAt)}),e.jsx("td",{className:"py-4 px-4",children:_.status==="Pending"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{m(_),N("approve"),S(!0)},className:"p-2 bg-green-500/20 text-green-500 rounded hover:bg-green-500/30",children:e.jsx(qe,{size:14})}),e.jsx("button",{onClick:()=>{m(_),N("reject"),S(!0)},className:"p-2 bg-red-500/20 text-red-500 rounded hover:bg-red-500/30",children:e.jsx(ye,{size:14})})]})})]},_._id)})})]})})]})]}),j&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 w-full max-w-md border border-gray-700",children:[e.jsxs("h3",{className:"text-white font-semibold text-lg mb-4",children:[h==="approve"?"Approve":"Reject"," Transaction"]}),e.jsxs("p",{className:"text-gray-400 text-sm mb-4",children:["Amount: ",e.jsxs("span",{className:"text-white font-medium",children:["$",p==null?void 0:p.amount]})]}),e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Admin Remarks (Optional)"}),e.jsx("textarea",{value:C,onChange:_=>E(_.target.value),placeholder:"Add remarks...",rows:3,className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none mb-4"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>S(!1),className:"flex-1 bg-dark-700 text-white py-3 rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:K,className:`flex-1 font-medium py-3 rounded-lg ${h==="approve"?"bg-green-500 hover:bg-green-600":"bg-red-500 hover:bg-red-600"} text-white`,children:h==="approve"?"Approve":"Reject"})]})]})})]})},vn="http://localhost:5001/api",Gj=()=>{const t=ut(),[s,r]=o.useState("Payment Methods"),[a,n]=o.useState(!1),[l,i]=o.useState([]),[d,c]=o.useState(!0),[u,x]=o.useState(!1),[b,f]=o.useState(null),[T,w]=o.useState(""),[j,S]=o.useState(""),[p,m]=o.useState({type:"Bank Transfer",bankName:"",accountNumber:"",accountHolderName:"",ifscCode:"",upiId:"",qrCodeImage:"",isActive:!0}),h=[{name:"Dashboard",icon:As,path:"/admin/dashboard"},{name:"User Management",icon:et,path:"/admin/dashboard"},{name:"Account Types",icon:Hs,path:"/admin/account-types"},{name:"Transactions",icon:Gr,path:"/admin/transactions"},{name:"Payment Methods",icon:Gr,path:"/admin/payment-methods"}];o.useEffect(()=>{localStorage.getItem("adminToken")||t("/admin"),N()},[t]);const N=async()=>{c(!0);try{const _=await(await fetch(`${vn}/payment-methods/all`)).json();i(_.paymentMethods||[])}catch(X){console.error("Error:",X)}c(!1)},C=async()=>{if(!p.type){w("Please select a payment type");return}try{const X=b?`${vn}/payment-methods/${b._id}`:`${vn}/payment-methods`;(await fetch(X,{method:b?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)})).ok&&(S(b?"Payment method updated!":"Payment method created!"),x(!1),U(),N(),setTimeout(()=>S(""),3e3))}catch{w("Error saving payment method")}},E=async X=>{if(confirm("Delete this payment method?"))try{(await fetch(`${vn}/payment-methods/${X}`,{method:"DELETE"})).ok&&(S("Payment method deleted!"),N(),setTimeout(()=>S(""),3e3))}catch{w("Error deleting")}},P=async X=>{try{await fetch(`${vn}/payment-methods/${X._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...X,isActive:!X.isActive})}),N()}catch{w("Error updating")}},U=()=>{m({type:"Bank Transfer",bankName:"",accountNumber:"",accountHolderName:"",ifscCode:"",upiId:"",qrCodeImage:"",isActive:!0}),f(null),w("")},K=X=>{f(X),m({...X}),x(!0)},R=X=>X==="Bank Transfer"?e.jsx(W0,{size:24}):X==="UPI"?e.jsx(Hr,{size:24}):e.jsx(Ai,{size:24}),le=()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),t("/admin")};return e.jsxs("div",{className:"min-h-screen bg-dark-900 flex",children:[e.jsxs("aside",{className:`${a?"w-52":"w-16"} bg-dark-900 border-r border-gray-800 flex flex-col transition-all duration-300`,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[e.jsxs("div",{className:"p-4 flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-red-500 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"A"})}),a&&e.jsx("span",{className:"text-white font-semibold",children:"Admin"})]}),e.jsx("nav",{className:"flex-1 px-2",children:h.map(X=>e.jsxs("button",{onClick:()=>t(X.path),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-colors ${s===X.name?"bg-red-500 text-white":"text-gray-400 hover:text-white hover:bg-dark-700"}`,children:[e.jsx(X.icon,{size:18,className:"flex-shrink-0"}),a&&e.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:X.name})]},X.name))}),e.jsx("div",{className:"p-2 border-t border-gray-800",children:e.jsxs("button",{onClick:le,className:"w-full flex items-center gap-3 px-3 py-2.5 text-gray-400 hover:text-white transition-colors rounded-lg",children:[e.jsx(fs,{size:18}),a&&e.jsx("span",{className:"text-sm font-medium",children:"Log Out"})]})})]}),e.jsxs("main",{className:"flex-1 overflow-auto",children:[e.jsxs("header",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-800",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold text-white",children:"Payment Methods"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Manage deposit/withdrawal methods"})]}),e.jsxs("button",{onClick:()=>{U(),x(!0)},className:"flex items-center gap-2 bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600",children:[e.jsx(st,{size:18})," Add Method"]})]}),e.jsxs("div",{className:"p-6",children:[j&&e.jsxs("div",{className:"mb-4 p-3 bg-green-500/20 border border-green-500/50 rounded-lg text-green-500 flex items-center gap-2",children:[e.jsx(qe,{size:18})," ",j]}),d?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(Ge,{size:24,className:"text-gray-500 animate-spin"})}):e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[l.map(X=>e.jsxs("div",{className:`bg-dark-800 rounded-xl p-5 border ${X.isActive?"border-gray-800":"border-red-500/30 opacity-60"}`,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-dark-700 rounded-lg flex items-center justify-center text-gray-400",children:R(X.type)}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:X.type}),e.jsx("span",{className:`text-xs ${X.isActive?"text-green-500":"text-red-500"}`,children:X.isActive?"Active":"Disabled"})]})]})}),e.jsxs("div",{className:"space-y-2 text-sm mb-4",children:[X.type==="Bank Transfer"&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-gray-400",children:["Bank: ",e.jsx("span",{className:"text-white",children:X.bankName||"N/A"})]}),e.jsxs("p",{className:"text-gray-400",children:["Account: ",e.jsx("span",{className:"text-white",children:X.accountNumber||"N/A"})]}),e.jsxs("p",{className:"text-gray-400",children:["Name: ",e.jsx("span",{className:"text-white",children:X.accountHolderName||"N/A"})]})]}),X.type==="UPI"&&e.jsxs("p",{className:"text-gray-400",children:["UPI ID: ",e.jsx("span",{className:"text-white",children:X.upiId||"N/A"})]}),X.type==="QR Code"&&e.jsxs("p",{className:"text-gray-400",children:["QR: ",e.jsx("span",{className:"text-white",children:X.qrCodeImage?"Uploaded":"Not set"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>K(X),className:"flex-1 flex items-center justify-center gap-1 bg-dark-700 text-white py-2 rounded-lg hover:bg-dark-600 text-sm",children:[e.jsx(Wt,{size:14})," Edit"]}),e.jsx("button",{onClick:()=>P(X),className:`flex-1 py-2 rounded-lg text-sm ${X.isActive?"bg-orange-500/20 text-orange-500":"bg-green-500/20 text-green-500"}`,children:X.isActive?"Disable":"Enable"}),e.jsx("button",{onClick:()=>E(X._id),className:"p-2 bg-red-500/20 text-red-500 rounded-lg",children:e.jsx(Lt,{size:14})})]})]},X._id)),l.length===0&&e.jsxs("div",{className:"col-span-3 bg-dark-800 rounded-xl p-8 border border-gray-800 text-center",children:[e.jsx(Hs,{size:48,className:"text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No payment methods added yet"})]})]})]})]}),u&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 w-full max-w-md border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-white font-semibold text-lg",children:[b?"Edit":"Add"," Payment Method"]}),e.jsx("button",{onClick:()=>{x(!1),U()},className:"text-gray-400 hover:text-white",children:e.jsx(ye,{size:20})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Type"}),e.jsxs("select",{value:p.type,onChange:X=>m({...p,type:X.target.value}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white focus:outline-none",children:[e.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),e.jsx("option",{value:"UPI",children:"UPI"}),e.jsx("option",{value:"QR Code",children:"QR Code"})]})]}),p.type==="Bank Transfer"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",value:p.bankName,onChange:X=>m({...p,bankName:X.target.value}),placeholder:"Bank Name",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none"}),e.jsx("input",{type:"text",value:p.accountNumber,onChange:X=>m({...p,accountNumber:X.target.value}),placeholder:"Account Number",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none"}),e.jsx("input",{type:"text",value:p.accountHolderName,onChange:X=>m({...p,accountHolderName:X.target.value}),placeholder:"Account Holder Name",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none"}),e.jsx("input",{type:"text",value:p.ifscCode,onChange:X=>m({...p,ifscCode:X.target.value}),placeholder:"IFSC Code",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none"})]}),p.type==="UPI"&&e.jsx("input",{type:"text",value:p.upiId,onChange:X=>m({...p,upiId:X.target.value}),placeholder:"UPI ID (e.g., name@upi)",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none"}),p.type==="QR Code"&&e.jsx("input",{type:"text",value:p.qrCodeImage,onChange:X=>m({...p,qrCodeImage:X.target.value}),placeholder:"QR Code Image URL",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none"})]}),T&&e.jsx("p",{className:"text-red-500 text-sm mt-4",children:T}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{x(!1),U()},className:"flex-1 bg-dark-700 text-white py-3 rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:C,className:"flex-1 bg-red-500 text-white font-medium py-3 rounded-lg hover:bg-red-600",children:b?"Update":"Create"})]})]})})]})},aa="http://localhost:5001/api",Kj=()=>{var He,Oe,G,q,F;const[t,s]=o.useState(""),[r,a]=o.useState("all"),[n,l]=o.useState([]),[i,d]=o.useState({total:0,open:0,volume:0,pnl:0}),[c,u]=o.useState(!0),[x,b]=o.useState(!1),[f,T]=o.useState(!1),[w,j]=o.useState(!1),[S,p]=o.useState(null),[m,h]=o.useState([]),[N,C]=o.useState([]),[E,P]=o.useState({userId:"",tradingAccountId:"",symbol:"XAUUSD",side:"BUY",orderType:"MARKET",quantity:.01,openPrice:0,stopLoss:"",takeProfit:""}),[U,K]=o.useState({openPrice:0,closePrice:"",quantity:0,stopLoss:"",takeProfit:"",realizedPnl:0}),[R,le]=o.useState({}),[X,_]=o.useState(!1),[L,I]=o.useState(0),[$,H]=o.useState({}),[y,O]=o.useState(1),[g,v]=o.useState(0),W=20;o.useEffect(()=>{z(),M()},[r,y]),o.useEffect(()=>{const k=Zd.subscribe("adminTradeManagement",(ee,ce,je)=>{!ee||Object.keys(ee).length===0||H(he=>{const Le={...he};return Object.entries(ee).forEach(([Be,V])=>{V&&V.bid&&(Le[Be]=V)}),Le})});return()=>k()},[]),o.useEffect(()=>{const k=async()=>{const ce=n.filter(Le=>Le.status==="OPEN");if(ce.length===0)return;const je=[...new Set(ce.map(Le=>Le.symbol))];if(je.filter(Le=>{var Be;return!((Be=$[Le])!=null&&Be.bid)}).length!==0)try{const Be=await(await fetch(`${aa}/prices/batch`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbols:je})})).json();Be.success&&Be.prices&&H(V=>{const ue={...V};return Object.entries(Be.prices).forEach(([ke,We])=>{We&&We.bid&&(ue[ke]=We)}),ue})}catch(Le){console.error("Error fetching prices:",Le)}};k();const ee=setInterval(k,3e3);return()=>clearInterval(ee)},[n]);const Z=k=>{if(k.status!=="OPEN")return k.realizedPnl||0;const ee=$[k.symbol];if(!ee||!ee.bid)return k._lastPnl||0;const ce=k.side==="BUY"?ee.bid:ee.ask;if(!ce||ce<=0)return k._lastPnl||0;const je=k.contractSize||B(k.symbol),Le=(k.side==="BUY"?(ce-k.openPrice)*k.quantity*je:(k.openPrice-ce)*k.quantity*je)-(k.commission||0)-(k.swap||0);return k._lastPnl=Le,Le},B=k=>k==="XAUUSD"?100:k==="XAGUSD"?5e3:["BTCUSD","ETHUSD","LTCUSD","XRPUSD","BCHUSD","BNBUSD","SOLUSD","ADAUSD","DOGEUSD","DOTUSD","MATICUSD","AVAXUSD","LINKUSD"].includes(k)?1:1e5,M=async()=>{try{const ee=await(await fetch(`${aa}/admin/users`)).json();ee.users&&h(ee.users)}catch(k){console.error("Error fetching users:",k)}},te=async k=>{try{const ce=await(await fetch(`${aa}/trading-accounts/user/${k}`)).json();ce.accounts&&C(ce.accounts)}catch(ee){console.error("Error fetching accounts:",ee)}},ae=async k=>{_(!0);try{let ee=null;if(["BTCUSD","ETHUSD","BTCUSDT","ETHUSDT"].includes(k)?ee=(await hm.getAllPrices([k]))[k]:ee=await tn.getSymbolPrice(k),ee&&ee.bid&&ee.ask){if(le(je=>({...je,[k]:ee})),E.orderType==="MARKET"){const je=E.side==="BUY"?ee.ask:ee.bid;P(he=>({...he,openPrice:je}))}}else console.warn("No price data received for",k)}catch(ee){console.error("Error fetching price:",ee)}_(!1)},pe=async()=>{try{const ee=await(await fetch(`${aa}/admin/trade/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...E,quantity:parseFloat(E.quantity),openPrice:parseFloat(E.openPrice),stopLoss:E.stopLoss?parseFloat(E.stopLoss):null,takeProfit:E.takeProfit?parseFloat(E.takeProfit):null})})).json();ee.success?(alert("Trade created successfully!"),b(!1),z(),P({userId:"",tradingAccountId:"",symbol:"XAUUSD",side:"BUY",orderType:"MARKET",quantity:.01,openPrice:0,stopLoss:"",takeProfit:""})):alert(ee.message||"Failed to create trade")}catch{alert("Error creating trade")}},Y=async()=>{if(S)try{const ee=await(await fetch(`${aa}/admin/trade/edit/${S._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({openPrice:parseFloat(U.openPrice),closePrice:U.closePrice?parseFloat(U.closePrice):null,quantity:parseFloat(U.quantity),stopLoss:U.stopLoss?parseFloat(U.stopLoss):null,takeProfit:U.takeProfit?parseFloat(U.takeProfit):null,realizedPnl:U.realizedPnl?parseFloat(U.realizedPnl):null})})).json();ee.success?(alert("Trade updated successfully!"),T(!1),z()):alert(ee.message||"Failed to update trade")}catch{alert("Error updating trade")}},re=async()=>{var k;if(S)try{const ce=await(await fetch(`${aa}/admin/trade/close/${S._id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({closePrice:L||S.openPrice})})).json();ce.success?(alert(`Trade closed by Admin! P&L: $${(k=ce.realizedPnl)==null?void 0:k.toFixed(2)}`),j(!1),I(0),z()):alert(ce.message||"Failed to close trade")}catch{alert("Error closing trade")}},Se=k=>{p(k),K({openPrice:k.openPrice||0,closePrice:k.closePrice||"",quantity:k.quantity||0,stopLoss:k.stopLoss||"",takeProfit:k.takeProfit||"",realizedPnl:k.realizedPnl||0}),T(!0)},Ie=async k=>{p(k),j(!0);try{const ee=["BTCUSD","ETHUSD","BTCUSDT","ETHUSDT"];let ce=null;if(ee.includes(k.symbol)?ce=(await hm.getAllPrices([k.symbol]))[k.symbol]:ce=await tn.getSymbolPrice(k.symbol),ce){const je=k.side==="BUY"?ce.bid:ce.ask;I(je)}}catch(ee){console.error("Error fetching close price:",ee)}},z=async()=>{u(!0);try{const k=(y-1)*W,ee=r!=="all"?`&status=${r.toUpperCase()}`:"",je=await(await fetch(`${aa}/admin/trade/all?limit=${W}&offset=${k}${ee}`)).json();if(je.trades){l(je.trades),v(je.total||je.trades.length);const he=je.trades.filter(ue=>ue.status==="OPEN"),Le=je.trades.filter(ue=>ue.status==="CLOSED"),Be=je.trades.reduce((ue,ke)=>ue+ke.quantity*ke.contractSize*ke.openPrice,0),V=Le.reduce((ue,ke)=>ue+(ke.realizedPnl||0),0);d({total:je.total||je.trades.length,open:he.length,volume:Be,pnl:V})}}catch(k){console.error("Error fetching trades:",k)}u(!1)},fe=k=>{switch(k==null?void 0:k.toUpperCase()){case"OPEN":return"bg-green-500/20 text-green-500";case"CLOSED":return"bg-gray-500/20 text-gray-400";case"PENDING":return"bg-yellow-500/20 text-yellow-500";case"CANCELLED":return"bg-red-500/20 text-red-500";default:return"bg-gray-500/20 text-gray-400"}},Pe=n.filter(k=>{var ce,je,he,Le,Be,V;return((ce=k.tradeId)==null?void 0:ce.toLowerCase().includes(t.toLowerCase()))||((je=k.symbol)==null?void 0:je.toLowerCase().includes(t.toLowerCase()))||((Le=(he=k.userId)==null?void 0:he.firstName)==null?void 0:Le.toLowerCase().includes(t.toLowerCase()))||((V=(Be=k.userId)==null?void 0:Be.email)==null?void 0:V.toLowerCase().includes(t.toLowerCase()))}),Te=k=>{switch(k==null?void 0:k.toUpperCase()){case"OPEN":return e.jsx(xs,{size:14});case"CLOSED":return e.jsx(yr,{size:14});case"PENDING":return e.jsx(Ht,{size:14});default:return null}};return e.jsxs(qt,{title:"Trade Management",subtitle:"Monitor and manage all trading activities",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"Total Trades"}),e.jsx("p",{className:"text-white text-2xl font-bold",children:i.total.toLocaleString()})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"Open Positions"}),e.jsx("p",{className:"text-white text-2xl font-bold",children:i.open})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"Total Volume"}),e.jsxs("p",{className:"text-white text-2xl font-bold",children:["$",(i.volume/1e6).toFixed(2),"M"]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsx("p",{className:"text-gray-500 text-sm mb-1",children:"Platform P&L"}),e.jsxs("p",{className:`text-2xl font-bold ${i.pnl>=0?"text-green-500":"text-red-500"}`,children:[i.pnl>=0?"+":"","$",i.pnl.toFixed(2)]})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 sm:p-5 border-b border-gray-800",children:[e.jsx("h2",{className:"text-white font-semibold text-lg",children:"All Trades"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[e.jsxs("button",{onClick:()=>{b(!0),ae("XAUUSD")},className:"px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-lg flex items-center gap-2",children:[e.jsx(st,{size:18})," Create Trade"]}),e.jsxs("div",{className:"relative",children:[e.jsx(_t,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search trades...",value:t,onChange:k=>s(k.target.value),className:"w-full sm:w-64 bg-dark-700 border border-gray-700 rounded-lg pl-10 pr-4 py-2 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600"})]}),e.jsxs("select",{value:r,onChange:k=>a(k.target.value),className:"bg-dark-700 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-gray-600",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"closed",children:"Closed"}),e.jsx("option",{value:"pending",children:"Pending"})]})]})]}),c?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"Loading trades..."}):Pe.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No trades found"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"block lg:hidden p-4 space-y-3",children:Pe.map(k=>{var ee,ce,je,he;return e.jsxs("div",{className:"bg-dark-700 rounded-xl p-4 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-white font-medium",children:k.symbol}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${k.side==="BUY"?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:k.side}),k.closedBy==="ADMIN"&&e.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-yellow-500/20 text-yellow-500",children:"Admin Close"})]}),e.jsxs("span",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs ${fe(k.status)}`,children:[Te(k.status),k.status]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"User"}),e.jsx("p",{className:"text-white truncate",children:((ee=k.userId)==null?void 0:ee.firstName)||((ce=k.userId)==null?void 0:ce.email)}),e.jsxs("p",{className:"text-gray-500 text-xs font-mono truncate",children:["ID: ",((je=k.userId)==null?void 0:je._id)||"N/A"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Lots"}),e.jsx("p",{className:"text-white",children:k.quantity})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Open Price"}),e.jsxs("p",{className:"text-white",children:["$",(he=k.openPrice)==null?void 0:he.toFixed(5)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Live P&L"}),e.jsxs("p",{className:`font-semibold ${Z(k)>=0?"text-green-500":"text-red-500"}`,children:[Z(k)>=0?"+":"","$",Z(k).toFixed(2)]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-3 border-t border-gray-600",children:[e.jsxs("button",{onClick:()=>Se(k),className:"flex-1 py-2 bg-blue-500/20 hover:bg-blue-500/30 text-blue-500 rounded-lg text-sm font-medium flex items-center justify-center gap-1",children:[e.jsx(Wt,{size:14})," Edit"]}),k.status==="OPEN"&&e.jsxs("button",{onClick:()=>Ie(k),className:"flex-1 py-2 bg-red-500/20 hover:bg-red-500/30 text-red-500 rounded-lg text-sm font-medium flex items-center justify-center gap-1",children:[e.jsx(yr,{size:14})," Close"]})]})]},k._id)})}),e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Trade ID"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"User"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Symbol"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Side"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Lots"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Open Price"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"P&L"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Status"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:Pe.map(k=>{var ee,ce,je,he;return e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-dark-700/50",children:[e.jsx("td",{className:"py-4 px-4 text-white font-mono text-sm",children:k.tradeId}),e.jsxs("td",{className:"py-4 px-4",children:[e.jsx("p",{className:"text-white",children:((ee=k.userId)==null?void 0:ee.firstName)||((ce=k.userId)==null?void 0:ce.email)}),e.jsx("p",{className:"text-gray-500 text-xs font-mono",children:((je=k.userId)==null?void 0:je._id)||"N/A"})]}),e.jsx("td",{className:"py-4 px-4 text-white font-medium",children:k.symbol}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("span",{className:`flex items-center gap-1 ${k.side==="BUY"?"text-green-500":"text-red-500"}`,children:[k.side==="BUY"?e.jsx(mt,{size:14}):e.jsx(Sb,{size:14}),k.side]})}),e.jsx("td",{className:"py-4 px-4 text-white",children:k.quantity}),e.jsxs("td",{className:"py-4 px-4 text-gray-400",children:["$",(he=k.openPrice)==null?void 0:he.toFixed(5)]}),e.jsxs("td",{className:`py-4 px-4 font-medium ${Z(k)>=0?"text-green-500":"text-red-500"}`,children:[Z(k)>=0?"+":"","$",Z(k).toFixed(2)]}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("span",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs w-fit ${fe(k.status)}`,children:[Te(k.status),k.status]}),k.closedBy==="ADMIN"&&e.jsx("span",{className:"text-xs text-yellow-500",children:"Admin Close"})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>Se(k),className:"p-2 hover:bg-blue-500/20 rounded-lg transition-colors text-gray-400 hover:text-blue-500",title:"Edit Trade",children:e.jsx(Wt,{size:16})}),k.status==="OPEN"&&e.jsx("button",{onClick:()=>Ie(k),className:"p-2 hover:bg-red-500/20 rounded-lg transition-colors text-gray-400 hover:text-red-500",title:"Close Trade",children:e.jsx(yr,{size:16})})]})})]},k._id)})})]})}),g>W&&e.jsxs("div",{className:"p-4 border-t border-gray-800 flex items-center justify-between",children:[e.jsxs("p",{className:"text-gray-400 text-sm",children:["Showing ",(y-1)*W+1," - ",Math.min(y*W,g)," of ",g," trades"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>O(k=>Math.max(1,k-1)),disabled:y===1,className:"px-3 py-1 bg-dark-700 hover:bg-dark-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsxs("span",{className:"text-white px-3",children:["Page ",y," of ",Math.ceil(g/W)]}),e.jsx("button",{onClick:()=>O(k=>Math.min(Math.ceil(g/W),k+1)),disabled:y>=Math.ceil(g/W),className:"px-3 py-1 bg-dark-700 hover:bg-dark-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]}),x&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-2xl w-full max-w-lg",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Create Trade"}),e.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-white",children:e.jsx(ye,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"User"}),e.jsxs("select",{value:E.userId,onChange:k=>{P({...E,userId:k.target.value,tradingAccountId:""}),k.target.value&&te(k.target.value)},className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white",children:[e.jsx("option",{value:"",children:"Select User"}),m.map(k=>e.jsxs("option",{value:k._id,children:[k.firstName," - ",k.email]},k._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Trading Account"}),e.jsxs("select",{value:E.tradingAccountId,onChange:k=>P({...E,tradingAccountId:k.target.value}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white",children:[e.jsx("option",{value:"",children:"Select Account"}),N.map(k=>{var ee;return e.jsxs("option",{value:k._id,children:[k.accountId," - $",(ee=k.balance)==null?void 0:ee.toFixed(2)]},k._id)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Symbol"}),e.jsxs("select",{value:E.symbol,onChange:k=>{const ee=k.target.value;P({...E,symbol:ee}),ae(ee)},className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white",children:[e.jsx("option",{value:"XAUUSD",children:"XAUUSD"}),e.jsx("option",{value:"EURUSD",children:"EURUSD"}),e.jsx("option",{value:"GBPUSD",children:"GBPUSD"}),e.jsx("option",{value:"BTCUSD",children:"BTCUSD"}),e.jsx("option",{value:"ETHUSD",children:"ETHUSD"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Order Type"}),e.jsxs("select",{value:E.orderType,onChange:k=>{const ee=k.target.value;P({...E,orderType:ee}),ee==="MARKET"&&ae(E.symbol)},className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white",children:[e.jsx("option",{value:"MARKET",children:"Market Order"}),e.jsx("option",{value:"LIMIT",children:"Limit Order"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Side"}),e.jsxs("select",{value:E.side,onChange:k=>{const ee=k.target.value;if(P({...E,side:ee}),E.orderType==="MARKET"){const ce=R[E.symbol];ce&&P(je=>({...je,side:ee,openPrice:ee==="BUY"?ce.ask:ce.bid}))}},className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white",children:[e.jsx("option",{value:"BUY",children:"BUY"}),e.jsx("option",{value:"SELL",children:"SELL"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Quantity (Lots)"}),e.jsx("input",{type:"number",step:"0.01",value:E.quantity,onChange:k=>P({...E,quantity:k.target.value}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]})]}),X?e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3 flex items-center justify-center",children:[e.jsx(Ge,{size:16,className:"animate-spin text-gray-400 mr-2"}),e.jsx("span",{className:"text-gray-400 text-sm",children:"Fetching live price..."})]}):R[E.symbol]?e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-xs",children:"Live Market Price"}),e.jsx("p",{className:"text-white font-medium",children:E.symbol})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-red-500",children:["Bid: ",(He=R[E.symbol].bid)==null?void 0:He.toFixed(5)]}),e.jsxs("p",{className:"text-green-500",children:["Ask: ",(Oe=R[E.symbol].ask)==null?void 0:Oe.toFixed(5)]})]})]}):e.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3",children:e.jsx("p",{className:"text-yellow-500 text-sm",children:"Click on symbol to fetch live price"})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:E.orderType==="MARKET"?"Execution Price (auto)":"Limit Price"}),e.jsx("input",{type:"number",step:"0.00001",value:E.openPrice,onChange:k=>P({...E,openPrice:k.target.value}),disabled:E.orderType==="MARKET",className:`w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white ${E.orderType==="MARKET"?"opacity-60 cursor-not-allowed":""}`}),E.orderType==="MARKET"&&e.jsxs("p",{className:"text-gray-500 text-xs mt-1",children:["Price auto-filled from market (",E.side==="BUY"?"Ask":"Bid",")"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Stop Loss (optional)"}),e.jsx("input",{type:"number",step:"0.00001",value:E.stopLoss,onChange:k=>P({...E,stopLoss:k.target.value}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Take Profit (optional)"}),e.jsx("input",{type:"number",step:"0.00001",value:E.takeProfit,onChange:k=>P({...E,takeProfit:k.target.value}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>b(!1),className:"flex-1 py-2 bg-dark-700 hover:bg-dark-600 text-white rounded-lg",children:"Cancel"}),e.jsx("button",{onClick:pe,className:"flex-1 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-lg",children:"Create Trade"})]})]})]})}),f&&S&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800 flex items-center justify-between sticky top-0 bg-dark-800",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Edit Trade"}),e.jsx("button",{onClick:()=>T(!1),className:"text-gray-400 hover:text-white",children:e.jsx(ye,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-gray-400 text-sm",children:["Trade ID: ",S.tradeId]}),e.jsxs("p",{className:"text-white font-medium",children:[S.symbol," ",S.side]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${fe(S.status)}`,children:S.status})]}),e.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:["User: ",((G=S.userId)==null?void 0:G.firstName)||((q=S.userId)==null?void 0:q.email)]}),e.jsxs("p",{className:"text-gray-500 text-xs font-mono",children:["User ID: ",((F=S.userId)==null?void 0:F._id)||"N/A"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Quantity (Lots)"}),e.jsx("input",{type:"number",step:"0.01",value:U.quantity,onChange:k=>K({...U,quantity:k.target.value}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Open Price"}),e.jsx("input",{type:"number",step:"0.00001",value:U.openPrice,onChange:k=>K({...U,openPrice:k.target.value}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Stop Loss"}),e.jsx("input",{type:"number",step:"0.00001",value:U.stopLoss,onChange:k=>K({...U,stopLoss:k.target.value}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white",placeholder:"Optional"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Take Profit"}),e.jsx("input",{type:"number",step:"0.00001",value:U.takeProfit,onChange:k=>K({...U,takeProfit:k.target.value}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white",placeholder:"Optional"})]})]}),e.jsxs("div",{className:"border-t border-gray-700 pt-4 mt-4",children:[e.jsx("p",{className:"text-gray-400 text-sm mb-3",children:"Close Trade Settings (for closed trades or to set P&L)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Close Price"}),e.jsx("input",{type:"number",step:"0.00001",value:U.closePrice,onChange:k=>K({...U,closePrice:k.target.value}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white",placeholder:"Enter close price"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Realized P&L"}),e.jsx("input",{type:"number",step:"0.01",value:U.realizedPnl,onChange:k=>K({...U,realizedPnl:k.target.value}),className:`w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg ${parseFloat(U.realizedPnl)>=0?"text-green-500":"text-red-500"}`})]})]}),e.jsxs("button",{type:"button",onClick:()=>{if(!S||!U.closePrice){alert("Please enter a close price first");return}const k=S.contractSize||B(S.symbol),ce=(S.side==="BUY"?(parseFloat(U.closePrice)-parseFloat(U.openPrice))*parseFloat(U.quantity)*k:(parseFloat(U.openPrice)-parseFloat(U.closePrice))*parseFloat(U.quantity)*k)-(S.commission||0)-(S.swap||0);K(je=>({...je,realizedPnl:Math.round(ce*100)/100}))},className:"w-full mt-3 px-4 py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm font-medium cursor-pointer flex items-center justify-center gap-2",children:[e.jsx(Ge,{size:16}),"Calculate P&L from Close Price"]})]}),e.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3",children:e.jsx("p",{className:"text-yellow-500 text-sm",children:" Changes will be saved silently without notifying the user."})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>T(!1),className:"flex-1 py-2 bg-dark-700 hover:bg-dark-600 text-white rounded-lg",children:"Cancel"}),e.jsx("button",{onClick:Y,className:"flex-1 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg",children:"Save Changes"})]})]})]})}),w&&S&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-2xl w-full max-w-md",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Close Trade"}),e.jsx("button",{onClick:()=>j(!1),className:"text-gray-400 hover:text-white",children:e.jsx(ye,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[e.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"Trade Details"}),e.jsx("p",{className:"text-white font-medium",children:S.tradeId}),e.jsxs("p",{className:"text-white",children:[S.symbol," ",S.side," ",S.quantity," lots"]}),e.jsxs("p",{className:"text-gray-400",children:["Open Price: $",S.openPrice]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Close Price (Current Market)"}),e.jsx("input",{type:"number",step:"0.00001",value:L,onChange:k=>I(parseFloat(k.target.value)||0),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-2 text-white"})]}),L>0&&e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Estimated P&L:"}),(()=>{const k=S.contractSize||B(S.symbol),ce=(S.side==="BUY"?(L-S.openPrice)*S.quantity*k:(S.openPrice-L)*S.quantity*k)-(S.commission||0)-(S.swap||0);return e.jsxs("p",{className:`text-lg font-bold ${ce>=0?"text-green-500":"text-red-500"}`,children:["$",ce.toFixed(2)]})})()]}),e.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3",children:e.jsx("p",{className:"text-yellow-500 text-sm",children:'This will close the trade as "Admin Close". The user will see this in their trade history.'})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>{j(!1),I(0)},className:"flex-1 py-2 bg-dark-700 hover:bg-dark-600 text-white rounded-lg",children:"Cancel"}),e.jsx("button",{onClick:re,className:"flex-1 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg",children:"Close Trade"})]})]})]})})]})},_l="http://localhost:5001/api",Xj=()=>{var U,K,R,le,X,_,L;const[t,s]=o.useState(""),[r,a]=o.useState("all"),[n,l]=o.useState([]),[i,d]=o.useState({deposits:0,withdrawals:0,pending:0,net:0}),[c,u]=o.useState(!0),[x,b]=o.useState(null),[f,T]=o.useState(null),[w,j]=o.useState(!1);o.useEffect(()=>{S()},[r]);const S=async()=>{u(!0);try{const $=await(await fetch(`${_l}/wallet/admin/transactions`)).json();if($.transactions){let H=$.transactions;r!=="all"&&(H=$.transactions.filter(v=>{var W;return((W=v.type)==null?void 0:W.toLowerCase())===r})),l(H);const y=$.transactions.filter(v=>{var W,Z;return((W=v.type)==null?void 0:W.toUpperCase())==="DEPOSIT"&&((Z=v.status)==null?void 0:Z.toUpperCase())==="APPROVED"}).reduce((v,W)=>v+(W.amount||0),0),O=$.transactions.filter(v=>{var W,Z;return((W=v.type)==null?void 0:W.toUpperCase())==="WITHDRAWAL"&&((Z=v.status)==null?void 0:Z.toUpperCase())==="APPROVED"}).reduce((v,W)=>v+(W.amount||0),0),g=$.transactions.filter(v=>{var W;return((W=v.status)==null?void 0:W.toUpperCase())==="PENDING"}).length;d({deposits:y,withdrawals:O,pending:g,net:y-O})}}catch(I){console.error("Error fetching transactions:",I)}u(!1)},p=async I=>{try{const $=await fetch(`${_l}/wallet/transaction/${I}/approve`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminRemarks:""})}),H=await $.json();$.ok?(alert("Transaction approved successfully!"),S()):alert(H.message||"Error approving transaction")}catch($){console.error("Error approving transaction:",$),alert("Error approving transaction")}},m=async I=>{const $=prompt("Enter rejection reason (optional):");try{const H=await fetch(`${_l}/wallet/transaction/${I}/reject`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminRemarks:$||""})}),y=await H.json();H.ok?(alert("Transaction rejected!"),S()):alert(y.message||"Error rejecting transaction")}catch(H){console.error("Error rejecting transaction:",H),alert("Error rejecting transaction")}},h=n.filter(I=>{var H,y,O,g,v;return((H=I.transactionId)==null?void 0:H.toLowerCase().includes(t.toLowerCase()))||((O=(y=I.userId)==null?void 0:y.firstName)==null?void 0:O.toLowerCase().includes(t.toLowerCase()))||((v=(g=I.userId)==null?void 0:g.email)==null?void 0:v.toLowerCase().includes(t.toLowerCase()))}),N=I=>{const $=I==null?void 0:I.toLowerCase();return $==="approved"?"bg-green-500/20 text-green-500":$==="pending"?"bg-yellow-500/20 text-yellow-500":$==="rejected"?"bg-red-500/20 text-red-500":"bg-gray-500/20 text-gray-400"},C=I=>(I==null?void 0:I.toLowerCase())==="pending",E=async I=>{var $;b(I),j(!0);try{const y=await(await fetch(`${_l}/auth/user/${(($=I.userId)==null?void 0:$._id)||I.userId}`)).json();y.user&&T(y.user)}catch(H){console.error("Error fetching user details:",H)}},P=()=>{j(!1),b(null),T(null)};return e.jsxs(qt,{title:"Fund Management",subtitle:"Manage deposits and withdrawals",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(En,{size:18,className:"text-green-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Total Deposits"})]}),e.jsxs("p",{className:"text-white text-2xl font-bold",children:["$",i.deposits.toLocaleString()]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Pn,{size:18,className:"text-red-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Total Withdrawals"})]}),e.jsxs("p",{className:"text-white text-2xl font-bold",children:["$",i.withdrawals.toLocaleString()]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ht,{size:18,className:"text-yellow-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Pending Requests"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:i.pending})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(nt,{size:18,className:"text-purple-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Net Balance"})]}),e.jsxs("p",{className:"text-white text-2xl font-bold",children:["$",i.net.toLocaleString()]})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 sm:p-5 border-b border-gray-800",children:[e.jsx("h2",{className:"text-white font-semibold text-lg",children:"All Transactions"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(_t,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search transactions...",value:t,onChange:I=>s(I.target.value),className:"w-full sm:w-64 bg-dark-700 border border-gray-700 rounded-lg pl-10 pr-4 py-2 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600"})]}),e.jsxs("select",{value:r,onChange:I=>a(I.target.value),className:"bg-dark-700 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-gray-600",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"deposit",children:"Deposits"}),e.jsx("option",{value:"withdrawal",children:"Withdrawals"})]})]})]}),c?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"Loading transactions..."}):h.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No transactions found"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"block lg:hidden p-4 space-y-3",children:h.map(I=>{var $,H,y,O,g,v;return e.jsxs("div",{className:"bg-dark-700 rounded-xl p-4 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${(($=I.type)==null?void 0:$.toUpperCase())==="DEPOSIT"?"bg-green-500/20":"bg-red-500/20"}`,children:((H=I.type)==null?void 0:H.toUpperCase())==="DEPOSIT"?e.jsx(En,{size:16,className:"text-green-500"}):e.jsx(Pn,{size:16,className:"text-red-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:((y=I.userId)==null?void 0:y.firstName)||((O=I.userId)==null?void 0:O.email)}),e.jsx("p",{className:"text-gray-500 text-xs",children:I.transactionId})]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${N(I.status)}`,children:I.status})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Amount"}),e.jsxs("p",{className:((g=I.type)==null?void 0:g.toUpperCase())==="DEPOSIT"?"text-green-500 font-medium":"text-red-500 font-medium",children:[((v=I.type)==null?void 0:v.toUpperCase())==="DEPOSIT"?"+":"-","$",(I.amount||0).toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Method"}),e.jsx("p",{className:"text-white",children:I.paymentMethod||"-"})]})]}),C(I.status)&&e.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t border-gray-600",children:[e.jsxs("button",{onClick:()=>p(I._id),className:"flex-1 flex items-center justify-center gap-1 py-2 bg-green-500/20 text-green-500 rounded-lg text-sm",children:[e.jsx(qe,{size:14})," Approve"]}),e.jsxs("button",{onClick:()=>m(I._id),className:"flex-1 flex items-center justify-center gap-1 py-2 bg-red-500/20 text-red-500 rounded-lg text-sm",children:[e.jsx(ye,{size:14})," Reject"]})]})]},I._id)})}),e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Transaction ID"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"User"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Type"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Amount"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Method"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Status"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Date"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:h.map(I=>{var $,H,y,O,g,v;return e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-dark-700/50",children:[e.jsx("td",{className:"py-4 px-4 text-white font-mono text-sm",children:I.transactionId}),e.jsx("td",{className:"py-4 px-4 text-white",children:(($=I.userId)==null?void 0:$.firstName)||((H=I.userId)==null?void 0:H.email)}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("span",{className:`flex items-center gap-1 ${((y=I.type)==null?void 0:y.toUpperCase())==="DEPOSIT"?"text-green-500":"text-red-500"}`,children:[((O=I.type)==null?void 0:O.toUpperCase())==="DEPOSIT"?e.jsx(En,{size:14}):e.jsx(Pn,{size:14}),I.type]})}),e.jsxs("td",{className:`py-4 px-4 font-medium ${((g=I.type)==null?void 0:g.toUpperCase())==="DEPOSIT"?"text-green-500":"text-red-500"}`,children:[((v=I.type)==null?void 0:v.toUpperCase())==="DEPOSIT"?"+":"-","$",(I.amount||0).toLocaleString()]}),e.jsx("td",{className:"py-4 px-4 text-gray-400",children:I.paymentMethod||"-"}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${N(I.status)}`,children:I.status})}),e.jsx("td",{className:"py-4 px-4 text-gray-400",children:new Date(I.createdAt).toLocaleString()}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>E(I),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-white",children:e.jsx(Qt,{size:16})}),C(I.status)&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>p(I._id),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-green-500",children:e.jsx(qe,{size:16})}),e.jsx("button",{onClick:()=>m(I._id),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-red-500",children:e.jsx(ye,{size:16})})]})]})})]},I._id)})})]})})]})]}),w&&x&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Transaction Details"}),e.jsx("button",{onClick:P,className:"text-gray-400 hover:text-white",children:e.jsx(ye,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-white font-semibold flex items-center gap-2",children:[((U=x.type)==null?void 0:U.toLowerCase())==="withdrawal"?e.jsx(Pn,{size:18,className:"text-red-500"}):e.jsx(En,{size:18,className:"text-green-500"}),x.type," Request"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Amount"}),e.jsxs("p",{className:`text-lg font-bold ${((K=x.type)==null?void 0:K.toLowerCase())==="deposit"?"text-green-500":"text-red-500"}`,children:["$",(R=x.amount)==null?void 0:R.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Status"}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${N(x.status)}`,children:x.status})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Payment Method"}),e.jsx("p",{className:"text-white",children:x.paymentMethod||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Date"}),e.jsx("p",{className:"text-white",children:new Date(x.createdAt).toLocaleString()})]}),x.transactionRef&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-gray-500",children:"Transaction Reference"}),e.jsx("p",{className:"text-white font-mono",children:x.transactionRef})]})]})]}),e.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[e.jsx("h3",{className:"text-white font-semibold mb-3",children:"User Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Name"}),e.jsx("p",{className:"text-white",children:(f==null?void 0:f.firstName)||((le=x.userId)==null?void 0:le.firstName)||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Email"}),e.jsx("p",{className:"text-white",children:(f==null?void 0:f.email)||((X=x.userId)==null?void 0:X.email)||"-"})]})]})]}),((_=x.type)==null?void 0:_.toLowerCase())==="withdrawal"&&e.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[e.jsxs("h3",{className:"text-white font-semibold mb-3 flex items-center gap-2",children:[e.jsx(ha,{size:16})," Bank Details"]}),(L=f==null?void 0:f.bankDetails)!=null&&L.accountNumber?e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4 space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Bank Name"}),e.jsx("span",{className:"text-white",children:f.bankDetails.bankName||"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Account Holder"}),e.jsx("span",{className:"text-white",children:f.bankDetails.accountHolderName||"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Account Number"}),e.jsx("span",{className:"text-white font-mono",children:f.bankDetails.accountNumber||"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"IFSC Code"}),e.jsx("span",{className:"text-white font-mono",children:f.bankDetails.ifscCode||"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Branch"}),e.jsx("span",{className:"text-white",children:f.bankDetails.branchName||"-"})]})]}):e.jsx("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4",children:e.jsx("p",{className:"text-red-400 text-sm",children:" User has not added bank details"})}),e.jsxs("h3",{className:"text-white font-semibold mt-4 mb-3 flex items-center gap-2",children:[e.jsx(Hr,{size:16})," UPI Details"]}),f!=null&&f.upiId?e.jsx("div",{className:"bg-dark-700 rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"UPI ID"}),e.jsx("span",{className:"text-purple-400 font-mono",children:f.upiId})]})}):e.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-4",children:e.jsx("p",{className:"text-yellow-400 text-sm",children:" User has not added UPI ID"})})]}),C(x.status)&&e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-700",children:[e.jsxs("button",{onClick:()=>{m(x._id),P()},className:"flex-1 py-2 bg-red-500/20 text-red-500 rounded-lg hover:bg-red-500/30 flex items-center justify-center gap-2",children:[e.jsx(ye,{size:16})," Reject"]}),e.jsxs("button",{onClick:()=>{p(x._id),P()},className:"flex-1 py-2 bg-green-500/20 text-green-500 rounded-lg hover:bg-green-500/30 flex items-center justify-center gap-2",children:[e.jsx(qe,{size:16})," Approve"]})]})]})]})})]})},Bt="http://localhost:5001/api",Qj=()=>{const[t,s]=o.useState([]),[r,a]=o.useState(!0),[n,l]=o.useState(!1),[i,d]=o.useState(null),[c,u]=o.useState({type:"Bank Transfer",bankName:"",accountNumber:"",accountHolderName:"",ifscCode:"",upiId:"",qrCodeImage:"",isActive:!0}),[x,b]=o.useState([]),[f,T]=o.useState(!1),[w,j]=o.useState(null),[S,p]=o.useState({currency:"INR",symbol:"",rateToUSD:83,markup:0,isActive:!0}),[m,h]=o.useState("methods"),[N,C]=o.useState([]),[E,P]=o.useState({pending:0,approved:0,rejected:0}),[U,K]=o.useState("Pending");o.useEffect(()=>{Z(),L(),R(),le()},[]),o.useEffect(()=>{R()},[U]);const R=async()=>{try{const fe=await(await fetch(`${Bt}/payment-methods/admin/bank-requests?status=${U}`)).json();C(fe.requests||[])}catch(z){console.error("Error fetching bank requests:",z)}},le=async()=>{try{const fe=await(await fetch(`${Bt}/payment-methods/admin/bank-requests/stats`)).json();P(fe.stats||{pending:0,approved:0,rejected:0})}catch(z){console.error("Error fetching stats:",z)}},X=async z=>{try{(await(await fetch(`${Bt}/payment-methods/admin/bank-requests/${z}/approve`,{method:"PUT"})).json()).success&&(alert("Bank account approved!"),R(),le())}catch{alert("Error approving request")}},_=async z=>{const fe=prompt("Enter rejection reason:");if(fe)try{(await(await fetch(`${Bt}/payment-methods/admin/bank-requests/${z}/reject`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:fe})})).json()).success&&(alert("Bank account rejected!"),R(),le())}catch{alert("Error rejecting request")}},L=async()=>{try{const fe=await(await fetch(`${Bt}/payment-methods/currencies`)).json();b(fe.currencies||[])}catch(z){console.error("Error fetching currencies:",z)}},I=[{currency:"INR",symbol:"",name:"Indian Rupee"},{currency:"EUR",symbol:"",name:"Euro"},{currency:"GBP",symbol:"",name:"British Pound"},{currency:"JPY",symbol:"",name:"Japanese Yen"},{currency:"AUD",symbol:"A$",name:"Australian Dollar"},{currency:"CAD",symbol:"C$",name:"Canadian Dollar"},{currency:"CHF",symbol:"Fr",name:"Swiss Franc"},{currency:"CNY",symbol:"",name:"Chinese Yuan"},{currency:"AED",symbol:".",name:"UAE Dirham"},{currency:"SGD",symbol:"S$",name:"Singapore Dollar"},{currency:"MYR",symbol:"RM",name:"Malaysian Ringgit"},{currency:"THB",symbol:"",name:"Thai Baht"},{currency:"IDR",symbol:"Rp",name:"Indonesian Rupiah"},{currency:"PHP",symbol:"",name:"Philippine Peso"},{currency:"BDT",symbol:"",name:"Bangladeshi Taka"},{currency:"PKR",symbol:"",name:"Pakistani Rupee"},{currency:"NGN",symbol:"",name:"Nigerian Naira"},{currency:"ZAR",symbol:"R",name:"South African Rand"},{currency:"BRL",symbol:"R$",name:"Brazilian Real"},{currency:"MXN",symbol:"$",name:"Mexican Peso"}],$=async()=>{try{const fe=await(await fetch(`${Bt}/payment-methods/currencies/live-rates`)).json();fe.success&&fe.rates?(alert(`Live rates fetched! ${Object.keys(fe.rates).length} currencies updated.`),L()):alert(fe.message||"Failed to fetch live rates")}catch(z){console.error("Error fetching live rates:",z),alert("Error fetching live rates")}},H=async()=>{if(confirm("This will add all common currencies with live exchange rates. Continue?"))try{const fe=await(await fetch(`${Bt}/payment-methods/currencies/add-all`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currencies:I})})).json();fe.success?(alert(`Added ${fe.addedCount} currencies with live rates!`),L()):alert(fe.message||"Failed to add currencies")}catch(z){console.error("Error adding currencies:",z),alert("Error adding currencies")}},y=async z=>{try{const Pe=await(await fetch(`${Bt}/payment-methods/currencies/update-rate/${z}`,{method:"PUT"})).json();Pe.success?(alert(`${z} rate updated to ${Pe.rate}`),L()):alert(Pe.message||"Failed to update rate")}catch{alert("Error updating rate")}},O=async()=>{try{const z=w?`${Bt}/payment-methods/currencies/${w._id}`:`${Bt}/payment-methods/currencies`,Pe=await fetch(z,{method:w?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)}),Te=await Pe.json();Pe.ok?(alert(w?"Currency updated!":"Currency added!"),T(!1),j(null),W(),L()):alert(Te.message||"Error saving currency")}catch{alert("Error saving currency")}},g=async z=>{if(confirm("Are you sure you want to delete this currency?"))try{(await fetch(`${Bt}/payment-methods/currencies/${z}`,{method:"DELETE"})).ok&&(alert("Currency deleted!"),L())}catch{alert("Error deleting currency")}},v=z=>{j(z),p({currency:z.currency,symbol:z.symbol,rateToUSD:z.rateToUSD,markup:z.markup||0,isActive:z.isActive}),T(!0)},W=()=>{p({currency:"INR",symbol:"",rateToUSD:83,markup:0,isActive:!0})},Z=async()=>{a(!0);try{const fe=await(await fetch(`${Bt}/payment-methods/all`)).json();s(fe.paymentMethods||[])}catch(z){console.error("Error fetching payment methods:",z)}a(!1)},B=async()=>{try{const z=i?`${Bt}/payment-methods/${i._id}`:`${Bt}/payment-methods`,Pe=await fetch(z,{method:i?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),Te=await Pe.json();Pe.ok?(alert(i?"Payment method updated!":"Payment method created!"),l(!1),d(null),pe(),Z()):alert(Te.message||"Error saving payment method")}catch{alert("Error saving payment method")}},M=async z=>{if(confirm("Are you sure you want to delete this payment method?"))try{(await fetch(`${Bt}/payment-methods/${z}`,{method:"DELETE"})).ok&&(alert("Payment method deleted!"),Z())}catch{alert("Error deleting payment method")}},te=async z=>{try{await fetch(`${Bt}/payment-methods/${z._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:!z.isActive})}),Z()}catch{alert("Error updating status")}},ae=z=>{d(z),u({type:z.type,bankName:z.bankName||"",accountNumber:z.accountNumber||"",accountHolderName:z.accountHolderName||"",ifscCode:z.ifscCode||"",upiId:z.upiId||"",qrCodeImage:z.qrCodeImage||"",isActive:z.isActive}),l(!0)},pe=()=>{u({type:"Bank Transfer",bankName:"",accountNumber:"",accountHolderName:"",ifscCode:"",upiId:"",qrCodeImage:"",isActive:!0})},Y=z=>{const fe=z.target.files[0];if(fe){const Pe=new FileReader;Pe.onloadend=()=>{u({...c,qrCodeImage:Pe.result})},Pe.readAsDataURL(fe)}},re=t.filter(z=>z.type==="Bank Transfer"),Se=t.filter(z=>z.type==="UPI"),Ie=t.filter(z=>z.type==="QR Code");return e.jsxs(qt,{title:"Bank Settings",subtitle:"Manage bank accounts and payment methods",children:[e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx("button",{onClick:()=>h("methods"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${m==="methods"?"bg-blue-500 text-white":"bg-dark-800 text-gray-400 hover:text-white"}`,children:"Payment Methods"}),e.jsxs("button",{onClick:()=>h("requests"),className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ${m==="requests"?"bg-blue-500 text-white":"bg-dark-800 text-gray-400 hover:text-white"}`,children:["Bank Requests",E.pending>0&&e.jsx("span",{className:"px-2 py-0.5 bg-red-500 text-white text-xs rounded-full",children:E.pending})]})]}),m==="requests"&&e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 sm:p-5 border-b border-gray-800",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-white font-semibold text-lg",children:"User Bank/UPI Requests"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Approve or reject user bank account submissions"})]}),e.jsx("div",{className:"flex gap-2",children:["Pending","Approved","Rejected"].map(z=>e.jsxs("button",{onClick:()=>K(z),className:`px-3 py-1.5 rounded-lg text-sm transition-colors ${U===z?z==="Pending"?"bg-yellow-500 text-black":z==="Approved"?"bg-green-500 text-white":"bg-red-500 text-white":"bg-dark-700 text-gray-400 hover:text-white"}`,children:[z," (",E[z.toLowerCase()]||0,")"]},z))})]}),e.jsx("div",{className:"p-4 space-y-3",children:N.length===0?e.jsxs("p",{className:"text-gray-500 text-center py-8",children:["No ",U.toLowerCase()," requests"]}):N.map(z=>{var fe,Pe,Te,He;return e.jsx("div",{className:"bg-dark-700 rounded-xl p-4 border border-gray-700",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${z.type==="Bank Transfer"?"bg-blue-500/20 text-blue-500":"bg-purple-500/20 text-purple-500"}`,children:z.type}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${z.status==="Pending"?"bg-yellow-500/20 text-yellow-500":z.status==="Approved"?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:z.status})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("p",{className:"text-white font-medium",children:[(fe=z.userId)==null?void 0:fe.firstName," ",(Pe=z.userId)==null?void 0:Pe.lastName]}),e.jsx("p",{className:"text-gray-500 text-sm",children:(Te=z.userId)==null?void 0:Te.email}),e.jsxs("p",{className:"text-gray-500 text-xs font-mono",children:["User ID: ",(He=z.userId)==null?void 0:He._id]})]}),z.type==="Bank Transfer"?e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Bank Name"}),e.jsx("p",{className:"text-white",children:z.bankName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Account Number"}),e.jsx("p",{className:"text-white font-mono",children:z.accountNumber})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Account Holder"}),e.jsx("p",{className:"text-white",children:z.accountHolderName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"IFSC Code"}),e.jsx("p",{className:"text-white font-mono",children:z.ifscCode})]})]}):e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"UPI ID"}),e.jsx("p",{className:"text-purple-400 font-mono text-lg",children:z.upiId})]}),z.rejectionReason&&e.jsx("div",{className:"mt-3 p-2 bg-red-500/10 border border-red-500/30 rounded-lg",children:e.jsxs("p",{className:"text-red-400 text-sm",children:["Rejection Reason: ",z.rejectionReason]})}),e.jsxs("p",{className:"text-gray-500 text-xs mt-3",children:["Submitted: ",new Date(z.createdAt).toLocaleString()]})]}),z.status==="Pending"&&e.jsxs("div",{className:"flex sm:flex-col gap-2",children:[e.jsxs("button",{onClick:()=>X(z._id),className:"flex-1 sm:flex-none px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors flex items-center justify-center gap-1",children:[e.jsx(qe,{size:16})," Approve"]}),e.jsxs("button",{onClick:()=>_(z._id),className:"flex-1 sm:flex-none px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors flex items-center justify-center gap-1",children:[e.jsx(ye,{size:16})," Reject"]})]})]})},z._id)})})]}),m==="methods"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:Z,className:"p-2 bg-dark-800 hover:bg-dark-700 rounded-lg text-gray-400",children:e.jsx(Ge,{size:18,className:r?"animate-spin":""})}),e.jsxs("button",{onClick:()=>{pe(),d(null),l(!0)},className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[e.jsx(st,{size:16}),"Add Payment Method"]})]}),r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Ge,{size:24,className:"animate-spin text-gray-500"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden mb-6",children:[e.jsx("div",{className:"flex items-center justify-between p-4 sm:p-5 border-b border-gray-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center",children:e.jsx(ha,{size:20,className:"text-blue-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-white font-semibold",children:"Bank Accounts"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Bank transfer deposit methods"})]})]})}),e.jsx("div",{className:"p-4 space-y-3",children:re.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No bank accounts added yet"}):re.map(z=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 bg-dark-700 rounded-xl border border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-dark-600 rounded-lg flex items-center justify-center",children:e.jsx(ha,{size:24,className:"text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:z.bankName}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["A/C: ",z.accountNumber," | IFSC: ",z.ifscCode]}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["Holder: ",z.accountHolderName]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>te(z),className:`px-3 py-1 rounded-full text-xs ${z.isActive?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-400"}`,children:z.isActive?"Active":"Inactive"}),e.jsx("button",{onClick:()=>ae(z),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-white",children:e.jsx(Wt,{size:16})}),e.jsx("button",{onClick:()=>M(z._id),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-red-500",children:e.jsx(Lt,{size:16})})]})]},z._id))})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden mb-6",children:[e.jsx("div",{className:"flex items-center justify-between p-4 sm:p-5 border-b border-gray-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-lg flex items-center justify-center",children:e.jsx(Hr,{size:20,className:"text-purple-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-white font-semibold",children:"UPI IDs"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"UPI payment methods"})]})]})}),e.jsx("div",{className:"p-4 space-y-3",children:Se.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No UPI IDs added yet"}):Se.map(z=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 bg-dark-700 rounded-xl border border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-dark-600 rounded-lg flex items-center justify-center",children:e.jsx(Hr,{size:24,className:"text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"UPI ID"}),e.jsx("p",{className:"text-purple-400 text-lg font-mono",children:z.upiId})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>te(z),className:`px-3 py-1 rounded-full text-xs ${z.isActive?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-400"}`,children:z.isActive?"Active":"Inactive"}),e.jsx("button",{onClick:()=>ae(z),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-white",children:e.jsx(Wt,{size:16})}),e.jsx("button",{onClick:()=>M(z._id),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-red-500",children:e.jsx(Lt,{size:16})})]})]},z._id))})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsx("div",{className:"flex items-center justify-between p-4 sm:p-5 border-b border-gray-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-500/20 rounded-lg flex items-center justify-center",children:e.jsx(Ai,{size:20,className:"text-orange-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-white font-semibold",children:"QR Codes"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"QR code payment methods"})]})]})}),e.jsx("div",{className:"p-4 space-y-3",children:Ie.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No QR codes added yet"}):Ie.map(z=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 bg-dark-700 rounded-xl border border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[z.qrCodeImage?e.jsx("img",{src:z.qrCodeImage,alt:"QR Code",className:"w-16 h-16 rounded-lg object-cover"}):e.jsx("div",{className:"w-16 h-16 bg-dark-600 rounded-lg flex items-center justify-center",children:e.jsx(Ai,{size:32,className:"text-orange-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"QR Code Payment"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Scan to pay"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>te(z),className:`px-3 py-1 rounded-full text-xs ${z.isActive?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-400"}`,children:z.isActive?"Active":"Inactive"}),e.jsx("button",{onClick:()=>ae(z),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-white",children:e.jsx(Wt,{size:16})}),e.jsx("button",{onClick:()=>M(z._id),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-red-500",children:e.jsx(Lt,{size:16})})]})]},z._id))})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 sm:p-5 border-b border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500/20 rounded-lg flex items-center justify-center",children:e.jsx(Pt,{size:20,className:"text-green-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-white font-semibold",children:"Currency Markups"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Set exchange rates and markups for deposits"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:H,className:"flex items-center gap-1 px-3 py-1.5 bg-blue-500/20 text-blue-500 rounded-lg hover:bg-blue-500/30 text-sm",children:[e.jsx(rm,{size:14}),"Add All Currencies"]}),e.jsxs("button",{onClick:$,className:"flex items-center gap-1 px-3 py-1.5 bg-purple-500/20 text-purple-500 rounded-lg hover:bg-purple-500/30 text-sm",children:[e.jsx(Ge,{size:14}),"Fetch Live Rates"]}),e.jsxs("button",{onClick:()=>{W(),j(null),T(!0)},className:"flex items-center gap-1 px-3 py-1.5 bg-green-500/20 text-green-500 rounded-lg hover:bg-green-500/30 text-sm",children:[e.jsx(st,{size:14}),"Add Currency"]})]})]}),e.jsx("div",{className:"p-4 space-y-3",children:x.length===0?e.jsxs("div",{className:"text-center py-6",children:[e.jsx(rm,{size:48,className:"text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"No currencies configured yet"}),e.jsx("button",{onClick:H,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Add All Common Currencies with Live Rates"})]}):x.map(z=>{var fe;return e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 bg-dark-700 rounded-xl border border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-dark-600 rounded-lg flex items-center justify-center text-2xl",children:z.symbol}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:z.currency}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["Rate: 1 USD = ",z.symbol,(fe=z.rateToUSD)==null?void 0:fe.toFixed(2)," | Markup: ",e.jsxs("span",{className:"text-yellow-500",children:[z.markup,"%"]})]}),e.jsxs("p",{className:"text-green-400 text-xs",children:["Effective: 1 USD = ",z.symbol,((z.rateToUSD||0)*(1+(z.markup||0)/100)).toFixed(2)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs ${z.isActive?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-400"}`,children:z.isActive?"Active":"Inactive"}),e.jsx("button",{onClick:()=>y(z.currency),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-purple-400 hover:text-purple-300",title:"Update live rate",children:e.jsx(Ge,{size:16})}),e.jsx("button",{onClick:()=>v(z),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-white",children:e.jsx(Wt,{size:16})}),e.jsx("button",{onClick:()=>g(z._id),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-red-500",children:e.jsx(Lt,{size:16})})]})]},z._id)})})]})]})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-2xl w-full max-w-md",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:w?"Edit Currency":"Add Currency"}),e.jsx("button",{onClick:()=>T(!1),className:"text-gray-400 hover:text-white",children:e.jsx(ye,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Currency Code"}),e.jsx("input",{type:"text",value:S.currency,onChange:z=>p({...S,currency:z.target.value.toUpperCase()}),placeholder:"e.g., INR",maxLength:3,className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white uppercase"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Symbol"}),e.jsx("input",{type:"text",value:S.symbol,onChange:z=>p({...S,symbol:z.target.value}),placeholder:"e.g., ",maxLength:3,className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Exchange Rate (1 USD = ?)"}),e.jsx("input",{type:"number",step:"0.01",value:S.rateToUSD,onChange:z=>p({...S,rateToUSD:parseFloat(z.target.value)||0}),placeholder:"e.g., 83.50",className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Base exchange rate without markup"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Markup Percentage (%)"}),e.jsx("input",{type:"number",step:"0.1",value:S.markup,onChange:z=>p({...S,markup:parseFloat(z.target.value)||0}),placeholder:"e.g., 2.5",className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Additional percentage added to the exchange rate"})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[e.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"Conversion Preview"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-white",children:"$100 USD"}),e.jsx("span",{className:"text-gray-500",children:""}),e.jsxs("span",{className:"text-green-400 font-medium",children:[S.symbol,(100*S.rateToUSD*(1+S.markup/100)).toFixed(2)," ",S.currency]})]}),e.jsxs("p",{className:"text-yellow-500 text-xs mt-2",children:["User pays ",S.symbol,(100*S.rateToUSD*(1+S.markup/100)).toFixed(2)," to deposit $100 USD"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-700 rounded-lg",children:[e.jsx("span",{className:"text-gray-400",children:"Active Status"}),e.jsx("button",{onClick:()=>p({...S,isActive:!S.isActive}),className:`w-12 h-6 rounded-full transition-colors ${S.isActive?"bg-green-500":"bg-gray-600"}`,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full transition-transform ${S.isActive?"translate-x-6":"translate-x-0.5"}`})})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>T(!1),className:"flex-1 py-2 bg-dark-700 hover:bg-dark-600 text-white rounded-lg",children:"Cancel"}),e.jsx("button",{onClick:O,className:"flex-1 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg",children:w?"Update":"Add Currency"})]})]})]})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:i?"Edit Payment Method":"Add Payment Method"}),e.jsx("button",{onClick:()=>l(!1),className:"text-gray-400 hover:text-white",children:e.jsx(ye,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Payment Type"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["Bank Transfer","UPI","QR Code"].map(z=>e.jsx("button",{onClick:()=>u({...c,type:z}),className:`p-3 rounded-lg border text-sm ${c.type===z?"border-blue-500 bg-blue-500/20 text-blue-500":"border-gray-700 text-gray-400 hover:border-gray-600"}`,children:z},z))})]}),c.type==="Bank Transfer"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Bank Name"}),e.jsx("input",{type:"text",value:c.bankName,onChange:z=>u({...c,bankName:z.target.value}),placeholder:"e.g., HDFC Bank",className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Account Holder Name"}),e.jsx("input",{type:"text",value:c.accountHolderName,onChange:z=>u({...c,accountHolderName:z.target.value}),placeholder:"e.g., John Doe",className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Account Number"}),e.jsx("input",{type:"text",value:c.accountNumber,onChange:z=>u({...c,accountNumber:z.target.value}),placeholder:"e.g., 1234567890",className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"IFSC Code"}),e.jsx("input",{type:"text",value:c.ifscCode,onChange:z=>u({...c,ifscCode:z.target.value}),placeholder:"e.g., HDFC0001234",className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]})]})]}),c.type==="UPI"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"UPI ID"}),e.jsx("input",{type:"text",value:c.upiId,onChange:z=>u({...c,upiId:z.target.value}),placeholder:"e.g., yourname@upi",className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]}),c.type==="QR Code"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"QR Code Image"}),e.jsx("div",{className:"border-2 border-dashed border-gray-700 rounded-lg p-6 text-center",children:c.qrCodeImage?e.jsxs("div",{className:"space-y-3",children:[e.jsx("img",{src:c.qrCodeImage,alt:"QR Preview",className:"w-32 h-32 mx-auto rounded-lg"}),e.jsx("button",{onClick:()=>u({...c,qrCodeImage:""}),className:"text-red-500 text-sm",children:"Remove Image"})]}):e.jsxs("label",{className:"cursor-pointer",children:[e.jsx(Oc,{size:32,className:"mx-auto text-gray-500 mb-2"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Click to upload QR code image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:Y,className:"hidden"})]})})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-700 rounded-lg",children:[e.jsx("span",{className:"text-gray-400",children:"Active Status"}),e.jsx("button",{onClick:()=>u({...c,isActive:!c.isActive}),className:`w-12 h-6 rounded-full transition-colors ${c.isActive?"bg-green-500":"bg-gray-600"}`,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full transition-transform ${c.isActive?"translate-x-6":"translate-x-0.5"}`})})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>l(!1),className:"flex-1 py-2 bg-dark-700 hover:bg-dark-600 text-white rounded-lg",children:"Cancel"}),e.jsx("button",{onClick:B,className:"flex-1 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg",children:i?"Update":"Create"})]})]})]})})]})},js="http://localhost:5001/api",Zj=()=>{var Ie,z,fe,Pe,Te,He,Oe,G,q,F,k,ee,ce,je,he,Le,Be;const[t,s]=o.useState(""),[r,a]=o.useState("ibs"),[n,l]=o.useState([]),[i,d]=o.useState([]),[c,u]=o.useState([]),[x,b]=o.useState(null),[f,T]=o.useState(null),[w,j]=o.useState(!0),[S,p]=o.useState(null),[m,h]=o.useState(!1),[N,C]=o.useState(null),[E,P]=o.useState([]),[U,K]=o.useState([]),[R,le]=o.useState(""),[X,_]=o.useState(!1),[L,I]=o.useState("");o.useEffect(()=>{W(),Z(),B(),M(),te(),$()},[]);const $=async()=>{try{const ue=await(await fetch(`${js}/admin/users`)).json();P(ue.users||[])}catch(V){console.error("Error fetching users:",V)}},H=async()=>{if(U.length===0){alert("Please select at least one user to transfer");return}if(!R){alert("Please select a target IB");return}_(!0);try{const ue=await(await fetch(`${js}/ib/admin/transfer-referrals`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userIds:U,targetIBId:R})})).json();ue.success?(alert(`Successfully transferred ${ue.transferredCount} users to the selected IB`),K([]),le(""),$(),Z()):alert(ue.message||"Failed to transfer referrals")}catch(V){console.error("Error transferring referrals:",V),alert("Failed to transfer referrals")}_(!1)},y=V=>{K(ue=>ue.includes(V)?ue.filter(ke=>ke!==V):[...ue,V])},O=()=>{const V=v.map(ue=>ue._id);K(V)},g=()=>{K([])},v=E.filter(V=>{var ue,ke,We;return((ue=V.firstName)==null?void 0:ue.toLowerCase().includes(L.toLowerCase()))||((ke=V.email)==null?void 0:ke.toLowerCase().includes(L.toLowerCase()))||((We=V._id)==null?void 0:We.includes(L))}),W=async()=>{try{const ue=await(await fetch(`${js}/ib/admin/dashboard`)).json();ue.dashboard&&b(ue.dashboard)}catch(V){console.error("Error fetching dashboard:",V)}},Z=async()=>{try{const ue=await(await fetch(`${js}/ib/admin/all`)).json();l(ue.ibs||[])}catch(V){console.error("Error fetching IBs:",V)}j(!1)},B=async()=>{try{const ue=await(await fetch(`${js}/ib/admin/pending`)).json();d(ue.pending||[])}catch(V){console.error("Error fetching applications:",V)}},M=async()=>{try{const ue=await(await fetch(`${js}/ib/admin/plans`)).json();u(ue.plans||[])}catch(V){console.error("Error fetching plans:",V)}},te=async()=>{try{const ue=await(await fetch(`${js}/ib/admin/settings`)).json();ue.settings&&T(ue.settings)}catch(V){console.error("Error fetching settings:",V)}},ae=async(V,ue=null)=>{try{const We=await(await fetch(`${js}/ib/admin/approve/${V}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:ue})})).json();We.success?(alert("IB approved successfully!"),B(),Z(),W()):alert(We.message||"Failed to approve")}catch(ke){console.error("Error approving:",ke),alert("Failed to approve IB")}},pe=async V=>{const ue=prompt("Enter block reason:");if(ue)try{(await(await fetch(`${js}/ib/admin/block/${V}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:ue})})).json()).success&&(alert("IB blocked"),Z(),W())}catch(ke){console.error("Error blocking:",ke)}},Y=async V=>{try{const ue=N?`${js}/ib/admin/plans/${N._id}`:`${js}/ib/admin/plans`,Ue=await(await fetch(ue,{method:N?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)})).json();Ue.success||Ue.plan?(alert(N?"Plan updated!":"Plan created!"),h(!1),C(null),M()):alert(Ue.message||"Failed to save plan")}catch(ue){console.error("Error saving plan:",ue),alert("Failed to save plan")}},re=async V=>{try{const ke=await(await fetch(`${js}/ib/admin/settings`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)})).json();ke.settings&&(T(ke.settings),alert("Settings updated!"))}catch(ue){console.error("Error updating settings:",ue)}},Se=n.filter(V=>{var ue,ke,We;return((ue=V.firstName)==null?void 0:ue.toLowerCase().includes(t.toLowerCase()))||((ke=V.email)==null?void 0:ke.toLowerCase().includes(t.toLowerCase()))||((We=V.referralCode)==null?void 0:We.toLowerCase().includes(t.toLowerCase()))});return e.jsxs(qt,{title:"IB Management",subtitle:"Manage Introducing Brokers and partners",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(G0,{size:18,className:"text-blue-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Total IBs"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:((Ie=x==null?void 0:x.ibs)==null?void 0:Ie.total)||0}),e.jsxs("p",{className:"text-yellow-500 text-xs mt-1",children:[((z=x==null?void 0:x.ibs)==null?void 0:z.pending)||0," pending"]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(et,{size:18,className:"text-green-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Total Referrals"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:((fe=x==null?void 0:x.referrals)==null?void 0:fe.total)||0})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Pt,{size:18,className:"text-purple-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Total Commissions"})]}),e.jsxs("p",{className:"text-white text-2xl font-bold",children:["$",(((Te=(Pe=x==null?void 0:x.commissions)==null?void 0:Pe.total)==null?void 0:Te.totalCommission)||0).toFixed(2)]}),e.jsxs("p",{className:"text-green-500 text-xs mt-1",children:["Today: $",(((Oe=(He=x==null?void 0:x.commissions)==null?void 0:He.today)==null?void 0:Oe.totalCommission)||0).toFixed(2)]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Pt,{size:18,className:"text-orange-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Pending Withdrawals"})]}),e.jsxs("p",{className:"text-white text-2xl font-bold",children:["$",(((q=(G=x==null?void 0:x.withdrawals)==null?void 0:G.pending)==null?void 0:q.totalPending)||0).toFixed(2)]}),e.jsxs("p",{className:"text-gray-500 text-xs mt-1",children:[((k=(F=x==null?void 0:x.withdrawals)==null?void 0:F.pending)==null?void 0:k.count)||0," requests"]})]})]}),e.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:[{id:"ibs",label:"Active IBs",count:(ee=x==null?void 0:x.ibs)==null?void 0:ee.active},{id:"applications",label:"Applications",count:i.length},{id:"plans",label:"Commission Plans",count:c.length},{id:"transfer",label:"Referral Transfer",icon:Ao},{id:"settings",label:"Settings"}].map(V=>e.jsxs("button",{onClick:()=>a(V.id),className:`px-4 py-2 rounded-lg whitespace-nowrap flex items-center gap-2 ${r===V.id?"bg-blue-500 text-white":"bg-dark-800 text-gray-400 hover:text-white"}`,children:[V.label,V.count!==void 0&&e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${r===V.id?"bg-white/20":"bg-gray-700"}`,children:V.count})]},V.id))}),r==="ibs"&&e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 sm:p-5 border-b border-gray-800",children:[e.jsx("h2",{className:"text-white font-semibold text-lg",children:"Active IB Partners"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(_t,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search IBs...",value:t,onChange:V=>s(V.target.value),className:"w-full sm:w-64 bg-dark-700 border border-gray-700 rounded-lg pl-10 pr-4 py-2 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600"})]}),e.jsx("button",{onClick:()=>{Z(),W()},className:"flex items-center justify-center gap-2 px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors",children:e.jsx(Ge,{size:16})})]})]}),w?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading..."}):Se.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"No IBs found"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"IB Partner"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Referral Code"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Plan"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Referrals"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Earnings"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Status"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:Se.map(V=>{var ue,ke;return e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-dark-700/50",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-500 font-medium",children:((ue=V.firstName)==null?void 0:ue.charAt(0))||"?"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-white font-medium",children:[V.firstName," ",V.lastName]}),e.jsx("p",{className:"text-gray-500 text-sm",children:V.email})]})]})}),e.jsx("td",{className:"py-4 px-4 text-white font-mono",children:V.referralCode||"-"}),e.jsx("td",{className:"py-4 px-4 text-white",children:((ke=V.ibPlanId)==null?void 0:ke.name)||"Default"}),e.jsx("td",{className:"py-4 px-4 text-white",children:V.ibLevel||0}),e.jsx("td",{className:"py-4 px-4 text-green-500 font-medium",children:"-"}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${V.ibStatus==="ACTIVE"?"bg-green-500/20 text-green-500":V.ibStatus==="PENDING"?"bg-yellow-500/20 text-yellow-500":V.ibStatus==="BLOCKED"?"bg-red-500/20 text-red-500":"bg-gray-500/20 text-gray-500"}`,children:V.ibStatus||"N/A"})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-white",children:e.jsx(Qt,{size:16})}),V.ibStatus==="ACTIVE"&&e.jsx("button",{onClick:()=>pe(V._id),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-red-500",children:e.jsx(ye,{size:16})})]})})]},V._id)})})]})})]}),r==="applications"&&e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsx("div",{className:"p-4 sm:p-5 border-b border-gray-800",children:e.jsx("h2",{className:"text-white font-semibold text-lg",children:"Pending Applications"})}),i.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"No pending applications"}):e.jsx("div",{className:"divide-y divide-gray-800",children:i.map(V=>{var ue;return e.jsxs("div",{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-500/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-yellow-500 font-medium",children:((ue=V.firstName)==null?void 0:ue.charAt(0))||"?"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-white font-medium",children:[V.firstName," ",V.lastName]}),e.jsx("p",{className:"text-gray-500 text-sm",children:V.email}),e.jsxs("p",{className:"text-gray-600 text-xs",children:["Applied: ",new Date(V.createdAt).toLocaleDateString()]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("select",{className:"bg-dark-700 border border-gray-700 rounded-lg px-3 py-2 text-white text-sm",onChange:ke=>{ke.target.value&&ae(V._id,ke.target.value==="default"?null:ke.target.value)},defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Select Plan & Approve"}),c.map(ke=>e.jsx("option",{value:ke._id,children:ke.name},ke._id)),e.jsx("option",{value:"default",children:"Default Plan"})]})})]},V._id)})})]}),r==="plans"&&e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-5 border-b border-gray-800",children:[e.jsx("h2",{className:"text-white font-semibold text-lg",children:"Commission Plans"}),e.jsxs("button",{onClick:()=>{C(null),h(!0)},className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:[e.jsx(st,{size:16})," Add Plan"]})]}),e.jsx("div",{className:"divide-y divide-gray-800",children:c.map(V=>{var ue,ke,We,Ue,ft;return e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-white font-medium flex items-center gap-2",children:[V.name,V.isDefault&&e.jsx("span",{className:"px-2 py-0.5 bg-blue-500/20 text-blue-500 text-xs rounded",children:"Default"})]}),e.jsx("p",{className:"text-gray-500 text-sm",children:V.description})]}),e.jsx("button",{onClick:()=>{C(V),h(!0)},className:"p-2 hover:bg-dark-600 rounded-lg text-gray-400 hover:text-white",children:e.jsx(Wt,{size:16})})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-3 text-sm",children:[e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3",children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Level 1"}),e.jsxs("p",{className:"text-white font-medium",children:[V.commissionType==="PER_LOT"?"$":"",((ue=V.levelCommissions)==null?void 0:ue.level1)||0,V.commissionType==="PERCENTAGE"?"%":"/lot"]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3",children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Level 2"}),e.jsxs("p",{className:"text-white font-medium",children:[V.commissionType==="PER_LOT"?"$":"",((ke=V.levelCommissions)==null?void 0:ke.level2)||0,V.commissionType==="PERCENTAGE"?"%":"/lot"]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3",children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Level 3"}),e.jsxs("p",{className:"text-white font-medium",children:[V.commissionType==="PER_LOT"?"$":"",((We=V.levelCommissions)==null?void 0:We.level3)||0,V.commissionType==="PERCENTAGE"?"%":"/lot"]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3",children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Level 4"}),e.jsxs("p",{className:"text-white font-medium",children:[V.commissionType==="PER_LOT"?"$":"",((Ue=V.levelCommissions)==null?void 0:Ue.level4)||0,V.commissionType==="PERCENTAGE"?"%":"/lot"]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3",children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Level 5"}),e.jsxs("p",{className:"text-white font-medium",children:[V.commissionType==="PER_LOT"?"$":"",((ft=V.levelCommissions)==null?void 0:ft.level5)||0,V.commissionType==="PERCENTAGE"?"%":"/lot"]})]})]})]},V._id)})})]}),r==="settings"&&f&&e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 p-6",children:[e.jsx("h2",{className:"text-white font-semibold text-lg mb-6",children:"IB System Settings"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"IB System Enabled"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Enable or disable the entire IB system"})]}),e.jsx("button",{onClick:()=>re({isEnabled:!f.isEnabled}),className:`w-12 h-6 rounded-full transition-colors ${f.isEnabled?"bg-green-500":"bg-gray-600"}`,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full transition-transform ${f.isEnabled?"translate-x-6":"translate-x-0.5"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Allow New Applications"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Allow users to apply as IBs"})]}),e.jsx("button",{onClick:()=>re({allowNewApplications:!f.allowNewApplications}),className:`w-12 h-6 rounded-full transition-colors ${f.allowNewApplications?"bg-green-500":"bg-gray-600"}`,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full transition-transform ${f.allowNewApplications?"translate-x-6":"translate-x-0.5"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Auto-Approve Applications"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Automatically approve new IB applications"})]}),e.jsx("button",{onClick:()=>re({autoApprove:!f.autoApprove}),className:`w-12 h-6 rounded-full transition-colors ${f.autoApprove?"bg-green-500":"bg-gray-600"}`,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full transition-transform ${f.autoApprove?"translate-x-6":"translate-x-0.5"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"KYC Required"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Require KYC approval to become an IB"})]}),e.jsx("button",{onClick:()=>{var V;return re({ibRequirements:{...f.ibRequirements,kycRequired:!((V=f.ibRequirements)!=null&&V.kycRequired)}})},className:`w-12 h-6 rounded-full transition-colors ${(ce=f.ibRequirements)!=null&&ce.kycRequired?"bg-green-500":"bg-gray-600"}`,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full transition-transform ${(je=f.ibRequirements)!=null&&je.kycRequired?"translate-x-6":"translate-x-0.5"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Withdrawal Approval Required"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Require admin approval for IB withdrawals"})]}),e.jsx("button",{onClick:()=>{var V;return re({commissionSettings:{...f.commissionSettings,withdrawalApprovalRequired:!((V=f.commissionSettings)!=null&&V.withdrawalApprovalRequired)}})},className:`w-12 h-6 rounded-full transition-colors ${(he=f.commissionSettings)!=null&&he.withdrawalApprovalRequired?"bg-green-500":"bg-gray-600"}`,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full transition-transform ${(Le=f.commissionSettings)!=null&&Le.withdrawalApprovalRequired?"translate-x-6":"translate-x-0.5"}`})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium mb-2",children:"Minimum Withdrawal Amount"}),e.jsx("input",{type:"number",value:((Be=f.commissionSettings)==null?void 0:Be.minWithdrawalAmount)||50,onChange:V=>re({commissionSettings:{...f.commissionSettings,minWithdrawalAmount:parseFloat(V.target.value)}}),className:"bg-dark-700 border border-gray-700 rounded-lg px-4 py-2 text-white w-32"})]})]})]}),r==="transfer"&&e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"p-4 sm:p-5 border-b border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ao,{size:20,className:"text-purple-500"}),e.jsx("h2",{className:"text-white font-semibold text-lg",children:"Referral Transfer"})]}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Transfer users to any IB partner. Select users and choose the target IB."})]}),e.jsxs("div",{className:"p-4 sm:p-5 space-y-4",children:[e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[e.jsx("label",{className:"text-gray-400 text-sm block mb-2",children:"Select Target IB"}),e.jsxs("select",{value:R,onChange:V=>le(V.target.value),className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-purple-500",children:[e.jsx("option",{value:"",children:"-- Select an IB --"}),n.filter(V=>V.ibStatus==="ACTIVE").map(V=>e.jsxs("option",{value:V._id,children:[V.firstName," ",V.lastName," (",V.email,") - Code: ",V.referralCode||"N/A"]},V._id))]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm block mb-1",children:"Select Users to Transfer"}),e.jsxs("p",{className:"text-gray-500 text-xs",children:[U.length," users selected"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:O,className:"px-3 py-1.5 bg-blue-500/20 text-blue-500 rounded-lg text-sm hover:bg-blue-500/30",children:"Select All"}),e.jsx("button",{onClick:g,className:"px-3 py-1.5 bg-gray-600 text-gray-300 rounded-lg text-sm hover:bg-gray-500",children:"Deselect All"})]})]}),e.jsxs("div",{className:"relative mb-3",children:[e.jsx(_t,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search users by name, email or ID...",value:L,onChange:V=>I(V.target.value),className:"w-full bg-dark-600 border border-gray-600 rounded-lg pl-10 pr-4 py-2 text-white placeholder-gray-500 focus:outline-none focus:border-purple-500"})]}),e.jsx("div",{className:"max-h-[400px] overflow-y-auto space-y-2",children:v.length===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No users found"}):v.map(V=>{var ue,ke;return e.jsxs("div",{onClick:()=>y(V._id),className:`flex items-center justify-between p-3 rounded-lg cursor-pointer transition-colors ${U.includes(V._id)?"bg-purple-500/20 border border-purple-500/50":"bg-dark-600 border border-transparent hover:border-gray-600"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center ${U.includes(V._id)?"bg-purple-500 border-purple-500":"border-gray-500"}`,children:U.includes(V._id)&&e.jsx(qe,{size:12,className:"text-white"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-white text-sm font-medium",children:[V.firstName," ",V.lastName||""]}),e.jsx("p",{className:"text-gray-500 text-xs",children:V.email})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-gray-400 text-xs font-mono",children:(ue=V._id)==null?void 0:ue.slice(-8)}),V.referredBy&&e.jsxs("p",{className:"text-yellow-500 text-xs",children:["Current IB: ",(ke=V.referredBy)==null?void 0:ke.slice(-6)]})]})]},V._id)})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:H,disabled:X||U.length===0||!R,className:`px-6 py-3 rounded-lg font-medium flex items-center gap-2 ${X||U.length===0||!R?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-purple-500 text-white hover:bg-purple-600"}`,children:X?e.jsxs(e.Fragment,{children:[e.jsx(Ge,{size:18,className:"animate-spin"}),"Transferring..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ao,{size:18}),"Transfer ",U.length," User",U.length!==1?"s":""]})})})]})]}),m&&e.jsx(eN,{plan:N,onSave:Y,onClose:()=>{h(!1),C(null)}})]})},eN=({plan:t,onSave:s,onClose:r})=>{const[a,n]=o.useState({name:(t==null?void 0:t.name)||"",description:(t==null?void 0:t.description)||"",maxLevels:(t==null?void 0:t.maxLevels)||3,commissionType:(t==null?void 0:t.commissionType)||"PER_LOT",levelCommissions:(t==null?void 0:t.levelCommissions)||{level1:5,level2:3,level3:2,level4:1,level5:.5},isDefault:(t==null?void 0:t.isDefault)||!1}),l=i=>{i.preventDefault(),s(a)};return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-4 border-b border-gray-700",children:e.jsx("h3",{className:"text-white font-semibold text-lg",children:t?"Edit Plan":"Create Plan"})}),e.jsxs("form",{onSubmit:l,className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm block mb-1",children:"Plan Name"}),e.jsx("input",{type:"text",value:a.name,onChange:i=>n({...a,name:i.target.value}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-2 text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm block mb-1",children:"Description"}),e.jsx("input",{type:"text",value:a.description,onChange:i=>n({...a,description:i.target.value}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-2 text-white"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm block mb-1",children:"Commission Type"}),e.jsxs("select",{value:a.commissionType,onChange:i=>n({...a,commissionType:i.target.value}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-2 text-white",children:[e.jsx("option",{value:"PER_LOT",children:"Per Lot ($)"}),e.jsx("option",{value:"PERCENTAGE",children:"Percentage (%)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm block mb-1",children:"Max Levels"}),e.jsx("select",{value:a.maxLevels,onChange:i=>n({...a,maxLevels:parseInt(i.target.value)}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-2 text-white",children:[1,2,3,4,5].map(i=>e.jsx("option",{value:i,children:i},i))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm block mb-2",children:"Level Commissions"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:[1,2,3,4,5].map(i=>e.jsxs("div",{children:[e.jsxs("label",{className:"text-gray-500 text-xs",children:["L",i]}),e.jsx("input",{type:"number",step:"0.1",value:a.levelCommissions[`level${i}`]||0,onChange:d=>n({...a,levelCommissions:{...a.levelCommissions,[`level${i}`]:parseFloat(d.target.value)}}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-2 py-1 text-white text-sm",disabled:i>a.maxLevels})]},i))})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:a.isDefault,onChange:i=>n({...a,isDefault:i.target.checked}),className:"w-4 h-4"}),e.jsx("label",{className:"text-gray-400 text-sm",children:"Set as default plan"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:t?"Update":"Create"})]})]})]})})},Ea="http://localhost:5001/api",tN=()=>{const[t,s]=o.useState([]),[r,a]=o.useState(!0),[n,l]=o.useState(!1),[i,d]=o.useState(null),[c,u]=o.useState([]),[x,b]=o.useState([]),[f,T]=o.useState(""),[w,j]=o.useState(!1),[S,p]=o.useState(null),[m,h]=o.useState(null),[N,C]=o.useState(!1),[E,P]=o.useState({level:"SEGMENT",segment:"Forex",instrumentSymbol:"",userId:"",accountTypeId:"",spreadType:"FIXED",spreadValue:0,commissionType:"PER_LOT",commissionValue:0,commissionOnBuy:!0,commissionOnSell:!0,commissionOnClose:!1,swapLong:0,swapShort:0});o.useEffect(()=>{R(),K(),U()},[]);const U=async()=>{try{const O=await(await fetch(`${Ea}/account-types`)).json();O.success&&b(O.accountTypes||[])}catch(y){console.error("Error fetching account types:",y)}},K=async()=>{try{const O=await(await fetch(`${Ea}/admin/users`)).json();O.success&&u(O.users||[])}catch(y){console.error("Error fetching users:",y)}},R=async()=>{a(!0);try{const O=await(await fetch(`${Ea}/charges?segment=Forex`)).json();O.success&&s(O.charges||[])}catch(y){console.error("Error fetching charges:",y)}a(!1)},le=async()=>{try{const y=i?`${Ea}/charges/${i._id}`:`${Ea}/charges`,v=await(await fetch(y,{method:i?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)})).json();v.success?(alert(i?"Charge updated!":"Charge created!"),l(!1),d(null),L(),R()):alert(v.message||"Error saving charge")}catch{alert("Error saving charge")}},X=async y=>{if(confirm("Are you sure you want to delete this charge?"))try{const g=await(await fetch(`${Ea}/charges/${y}`,{method:"DELETE"})).json();g.success?(alert("Charge deleted!"),R()):alert(g.message||"Error deleting charge")}catch{alert("Error deleting charge")}},_=y=>{var O,g;if(d(y),P({level:y.level||"SEGMENT",segment:y.segment||"Forex",instrumentSymbol:y.instrumentSymbol||"",userId:((O=y.userId)==null?void 0:O._id)||y.userId||"",accountTypeId:((g=y.accountTypeId)==null?void 0:g._id)||y.accountTypeId||"",spreadType:y.spreadType||"FIXED",spreadValue:y.spreadValue||0,commissionType:y.commissionType||"PER_LOT",commissionValue:y.commissionValue||0,commissionOnBuy:y.commissionOnBuy!==!1,commissionOnSell:y.commissionOnSell!==!1,commissionOnClose:y.commissionOnClose||!1,swapLong:y.swapLong||0,swapShort:y.swapShort||0}),y.level==="USER"&&y.userId){const v=c.find(W=>{var Z;return W._id===(((Z=y.userId)==null?void 0:Z._id)||y.userId)});p(v||null)}else p(null);if(y.level==="ACCOUNT_TYPE"&&y.accountTypeId){const v=x.find(W=>{var Z;return W._id===(((Z=y.accountTypeId)==null?void 0:Z._id)||y.accountTypeId)});h(v||null)}else h(null);l(!0)},L=()=>{P({level:"SEGMENT",segment:"Forex",instrumentSymbol:"",userId:"",accountTypeId:"",spreadType:"FIXED",spreadValue:0,commissionType:"PER_LOT",commissionValue:0,commissionOnBuy:!0,commissionOnSell:!0,commissionOnClose:!1,swapLong:0,swapShort:0}),p(null),h(null),T("")},I=y=>{p(y),P({...E,userId:y._id}),j(!1),T("")},$=c.filter(y=>{var v,W,Z;const O=`${y.firstName||""} ${y.lastName||""}`.toLowerCase(),g=f.toLowerCase();return O.includes(g)||((v=y.email)==null?void 0:v.toLowerCase().includes(g))||((W=y.phone)==null?void 0:W.includes(f))||((Z=y._id)==null?void 0:Z.includes(f))}),H=y=>{var O,g;return y.level==="USER"?`${(O=y.userId)!=null&&O.firstName?`${y.userId.firstName} ${y.userId.lastName||""}`.trim():((g=y.userId)==null?void 0:g.email)||"Unknown User"} - ${y.instrumentSymbol||"All Instruments"}`:y.level==="INSTRUMENT"?y.instrumentSymbol:y.level==="SEGMENT"?y.segment:y.level==="GLOBAL"?"Global":y.level};return e.jsxs(qt,{title:"Forex Charges",subtitle:"Manage trading fees and spreads",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-5 border-b border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500/20 rounded-lg flex items-center justify-center",children:e.jsx(Pt,{size:20,className:"text-green-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-white font-semibold",children:"Forex Trading Charges"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Configure spreads, commissions, and fees"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:R,className:"p-2 bg-dark-700 hover:bg-dark-600 rounded-lg text-gray-400",children:e.jsx(Ge,{size:18})}),e.jsxs("button",{onClick:()=>{L(),d(null),l(!0)},className:"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:[e.jsx(st,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Add Charge"})]})]})]}),r?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading charges..."}):t.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx("p",{children:"No charges configured for Forex."}),e.jsx("p",{className:"text-sm mt-2",children:'Click "Add Charge" to create one.'})]}):e.jsx("div",{className:"p-4 space-y-3",children:t.map(y=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 bg-dark-700 rounded-xl border border-gray-700",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"px-2 py-0.5 bg-blue-500/20 text-blue-500 text-xs rounded-full",children:y.level}),e.jsx("p",{className:"text-white font-medium",children:H(y)})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Spread:"}),e.jsxs("span",{className:"text-white ml-1",children:[y.spreadValue," (",y.spreadType,")"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Commission:"}),e.jsxs("span",{className:"text-white ml-1",children:["$",y.commissionValue," (",y.commissionType,")"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Swap Long:"}),e.jsx("span",{className:"text-white ml-1",children:y.swapLong})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Swap Short:"}),e.jsx("span",{className:"text-white ml-1",children:y.swapShort})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>_(y),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-white",children:e.jsx(Wt,{size:16})}),e.jsx("button",{onClick:()=>X(y._id),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-red-500",children:e.jsx(Lt,{size:16})})]})]},y._id))})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800 flex items-center justify-between shrink-0",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:i?"Edit Charge":"Add Forex Charge"}),e.jsx("button",{onClick:()=>l(!1),className:"text-gray-400 hover:text-white",children:e.jsx(ye,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto flex-1",children:[e.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-3",children:[e.jsx("p",{className:"text-blue-400 text-sm font-medium mb-1",children:" Priority Hierarchy (Higher overrides Lower)"}),e.jsxs("p",{className:"text-gray-400 text-xs",children:[e.jsx("span",{className:"text-white",children:"USER"}),"  ",e.jsx("span",{className:"text-white",children:"INSTRUMENT"}),"  ",e.jsx("span",{className:"text-white",children:"SEGMENT"}),"  ",e.jsx("span",{className:"text-white",children:"ACCOUNT TYPE"}),"  ",e.jsx("span",{className:"text-white",children:"GLOBAL"})]}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Example: User-specific settings override all others for that user."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Level"}),e.jsxs("select",{value:E.level,onChange:y=>{const O=y.target.value;P({...E,level:O}),O!=="USER"&&(p(null),P(g=>({...g,userId:""}))),O!=="ACCOUNT_TYPE"&&(h(null),P(g=>({...g,accountTypeId:""})))},className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white",children:[e.jsx("option",{value:"GLOBAL",children:"Global (Lowest Priority)"}),e.jsx("option",{value:"ACCOUNT_TYPE",children:"Account Type"}),e.jsx("option",{value:"SEGMENT",children:"Segment"}),e.jsx("option",{value:"INSTRUMENT",children:"Instrument"}),e.jsx("option",{value:"USER",children:"User-Specific (Highest Priority)"})]})]}),E.level==="SEGMENT"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Segment"}),e.jsxs("select",{value:E.segment,onChange:y=>P({...E,segment:y.target.value}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white",children:[e.jsx("option",{value:"Forex",children:"Forex"}),e.jsx("option",{value:"Metals",children:"Metals"}),e.jsx("option",{value:"Crypto",children:"Crypto"}),e.jsx("option",{value:"Indices",children:"Indices"})]})]}),E.level==="ACCOUNT_TYPE"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Account Type"}),e.jsxs("select",{value:E.accountTypeId,onChange:y=>{const O=x.find(g=>g._id===y.target.value);h(O||null),P({...E,accountTypeId:y.target.value})},className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white",children:[e.jsx("option",{value:"",children:"Select Account Type"}),x.map(y=>e.jsx("option",{value:y._id,children:y.name},y._id))]})]}),(E.level==="INSTRUMENT"||E.level==="USER")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Symbol"}),e.jsxs("select",{value:E.instrumentSymbol,onChange:y=>P({...E,instrumentSymbol:y.target.value}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white",children:[e.jsx("option",{value:"",children:"All Instruments"}),e.jsxs("optgroup",{label:"Forex",children:[e.jsx("option",{value:"EURUSD",children:"EURUSD"}),e.jsx("option",{value:"GBPUSD",children:"GBPUSD"}),e.jsx("option",{value:"USDJPY",children:"USDJPY"}),e.jsx("option",{value:"USDCHF",children:"USDCHF"}),e.jsx("option",{value:"AUDUSD",children:"AUDUSD"}),e.jsx("option",{value:"NZDUSD",children:"NZDUSD"}),e.jsx("option",{value:"USDCAD",children:"USDCAD"})]}),e.jsxs("optgroup",{label:"Metals",children:[e.jsx("option",{value:"XAUUSD",children:"XAUUSD (Gold)"}),e.jsx("option",{value:"XAGUSD",children:"XAGUSD (Silver)"})]}),e.jsxs("optgroup",{label:"Crypto",children:[e.jsx("option",{value:"BTCUSD",children:"BTCUSD"}),e.jsx("option",{value:"ETHUSD",children:"ETHUSD"})]})]})]})]}),E.level==="USER"&&e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Select User"}),S?e.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-700 border border-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500/20 rounded-full flex items-center justify-center",children:e.jsx(It,{size:16,className:"text-blue-500"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-white text-sm font-medium",children:[S.firstName," ",S.lastName]}),e.jsx("p",{className:"text-gray-500 text-xs",children:S.email})]})]}),e.jsx("button",{onClick:()=>{p(null),P({...E,userId:""})},className:"text-gray-400 hover:text-red-500",children:e.jsx(ye,{size:16})})]}):e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx(_t,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search by name, email, or phone...",value:f,onChange:y=>{T(y.target.value),j(!0)},onFocus:()=>j(!0),className:"w-full pl-10 pr-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]}),w&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-dark-700 border border-gray-700 rounded-lg shadow-xl max-h-48 overflow-y-auto",children:$.length===0?e.jsx("div",{className:"p-3 text-gray-500 text-sm text-center",children:"No users found"}):$.slice(0,15).map(y=>e.jsxs("button",{onClick:()=>I(y),className:"w-full flex items-center gap-3 p-3 hover:bg-dark-600 text-left",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500/20 rounded-full flex items-center justify-center shrink-0",children:e.jsx(It,{size:14,className:"text-blue-500"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("p",{className:"text-white text-sm font-medium truncate",children:[y.firstName," ",y.lastName]}),e.jsx("p",{className:"text-gray-500 text-xs truncate",children:y.email})]})]},y._id))})]})]}),e.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-white font-medium",children:" Spread Settings"}),e.jsxs("button",{type:"button",onClick:()=>C(!N),className:"text-blue-400 hover:text-blue-300 text-xs flex items-center gap-1",children:[e.jsx(pb,{size:14})," ",N?"Hide":"Show"," Examples"]})]}),N&&e.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3 mb-3 text-xs",children:[e.jsx("p",{className:"text-yellow-400 font-medium mb-2",children:" Spread Value Examples (FIXED type):"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-gray-300",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Forex (in PIPS):"}),e.jsxs("p",{children:[" ",e.jsx("code",{className:"bg-dark-600 px-1 rounded",children:"1.5"})," = 1.5 pips"]}),e.jsxs("p",{children:[" EURUSD: 1.5 pips = ",e.jsx("code",{className:"bg-dark-600 px-1 rounded",children:"0.00015"})," added"]}),e.jsxs("p",{children:[" USDJPY: 1.5 pips = ",e.jsx("code",{className:"bg-dark-600 px-1 rounded",children:"0.015"})," added"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Metals (in cents):"}),e.jsxs("p",{children:[" ",e.jsx("code",{className:"bg-dark-600 px-1 rounded",children:"50"})," = $0.50 spread"]}),e.jsx("p",{children:" XAUUSD at 2650: Ask = 2650.50"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Crypto (in USD):"}),e.jsxs("p",{children:[" ",e.jsx("code",{className:"bg-dark-600 px-1 rounded",children:"10"})," = $10 spread"]}),e.jsx("p",{children:" BTCUSD at 45000: Ask = 45010"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Percentage:"}),e.jsxs("p",{children:[" ",e.jsx("code",{className:"bg-dark-600 px-1 rounded",children:"0.1"})," = 0.1% of price"]}),e.jsx("p",{children:" EURUSD at 1.1000: Spread = 0.0011"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Spread Type"}),e.jsxs("select",{value:E.spreadType,onChange:y=>P({...E,spreadType:y.target.value}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white",children:[e.jsx("option",{value:"FIXED",children:"Fixed (Pips/Cents/USD)"}),e.jsx("option",{value:"PERCENTAGE",children:"Percentage of Price"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-400 text-sm mb-1",children:["Spread Value ",E.spreadType==="PERCENTAGE"?"(%)":"(Pips/Cents)"]}),e.jsx("input",{type:"number",step:"0.01",value:E.spreadValue,onChange:y=>P({...E,spreadValue:parseFloat(y.target.value)||0}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white",placeholder:E.spreadType==="PERCENTAGE"?"e.g., 0.1":"e.g., 1.5"})]})]})]}),e.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[e.jsx("h3",{className:"text-white font-medium mb-3",children:" Commission Settings (Per Lot)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Commission Type"}),e.jsxs("select",{value:E.commissionType,onChange:y=>P({...E,commissionType:y.target.value}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white",children:[e.jsx("option",{value:"PER_LOT",children:"Per Lot ($X per lot)"}),e.jsx("option",{value:"PER_TRADE",children:"Per Trade (flat fee)"}),e.jsx("option",{value:"PERCENTAGE",children:"Percentage of trade value"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-400 text-sm mb-1",children:["Commission Value ",E.commissionType==="PERCENTAGE"?"(%)":"($)"]}),e.jsx("input",{type:"number",step:"0.01",value:E.commissionValue,onChange:y=>P({...E,commissionValue:parseFloat(y.target.value)||0}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white",placeholder:E.commissionType==="PER_LOT"?"e.g., 7 (=$7/lot)":"e.g., 0.1"})]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3",children:[e.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"Charge commission on:"}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:E.commissionOnBuy,onChange:y=>P({...E,commissionOnBuy:y.target.checked}),className:"w-4 h-4 rounded border-gray-600 bg-dark-600 text-green-500 focus:ring-green-500"}),e.jsx("span",{className:"text-white text-sm",children:"Buy Orders"}),e.jsx("span",{className:"text-green-500 text-xs",children:"(Open Long)"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:E.commissionOnSell,onChange:y=>P({...E,commissionOnSell:y.target.checked}),className:"w-4 h-4 rounded border-gray-600 bg-dark-600 text-red-500 focus:ring-red-500"}),e.jsx("span",{className:"text-white text-sm",children:"Sell Orders"}),e.jsx("span",{className:"text-red-500 text-xs",children:"(Open Short)"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:E.commissionOnClose,onChange:y=>P({...E,commissionOnClose:y.target.checked}),className:"w-4 h-4 rounded border-gray-600 bg-dark-600 text-blue-500 focus:ring-blue-500"}),e.jsx("span",{className:"text-white text-sm",children:"Close Trade"}),e.jsx("span",{className:"text-blue-500 text-xs",children:"(Exit Position)"})]})]}),e.jsx("p",{className:"text-gray-500 text-xs mt-2",children:"Example: $7/lot with Buy+Sell = $14 total for 1 lot round trip"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Swap Long (points)"}),e.jsx("input",{type:"number",step:"0.01",value:E.swapLong,onChange:y=>P({...E,swapLong:parseFloat(y.target.value)||0}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Swap Short (points)"}),e.jsx("input",{type:"number",step:"0.01",value:E.swapShort,onChange:y=>P({...E,swapShort:parseFloat(y.target.value)||0}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>l(!1),className:"flex-1 py-2 bg-dark-700 hover:bg-dark-600 text-white rounded-lg",children:"Cancel"}),e.jsx("button",{onClick:le,className:"flex-1 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg",children:i?"Update Charge":"Create Charge"})]})]})]})})]})},sN=()=>{const[t,s]=o.useState([{id:1,name:"UPI Deposit Fee",value:"0",type:"%",description:"Fee for UPI deposits"},{id:2,name:"UPI Withdrawal Fee",value:"1.5",type:"%",description:"Fee for UPI withdrawals"},{id:3,name:"Bank Transfer Deposit",value:"0",type:"INR",description:"NEFT/RTGS/IMPS deposit fee"},{id:4,name:"Bank Transfer Withdrawal",value:"25",type:"INR",description:"NEFT/RTGS withdrawal fee"},{id:5,name:"GST on Services",value:"18",type:"%",description:"Applicable GST rate"},{id:6,name:"TDS on Withdrawals",value:"1",type:"%",description:"Tax deducted at source"},{id:7,name:"Min Deposit (INR)",value:"500",type:"INR",description:"Minimum deposit amount"},{id:8,name:"Max Withdrawal/Day",value:"500000",type:"INR",description:"Daily withdrawal limit"}]),[r,a]=o.useState(null),[n,l]=o.useState(""),i=c=>{a(c.id),l(c.value)},d=c=>{s(t.map(u=>u.id===c?{...u,value:n}:u)),a(null)};return e.jsx(qt,{title:"Indian Charges",subtitle:"Manage INR payment fees and limits",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-5 border-b border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-500/20 rounded-lg flex items-center justify-center",children:e.jsx(hb,{size:20,className:"text-orange-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-white font-semibold",children:"Indian Payment Charges"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Configure INR payment fees and limits"})]})]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:[e.jsx(st,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Add Charge"})]})]}),e.jsx("div",{className:"p-4 space-y-3",children:t.map(c=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 bg-dark-700 rounded-xl border border-gray-700",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-white font-medium",children:c.name}),e.jsx("p",{className:"text-gray-500 text-sm",children:c.description})]}),e.jsx("div",{className:"flex items-center gap-3",children:r===c.id?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:n,onChange:u=>l(u.target.value),className:"w-24 bg-dark-600 border border-gray-600 rounded-lg px-3 py-2 text-white text-right focus:outline-none focus:border-orange-500"}),e.jsx("span",{className:"text-gray-400 text-sm",children:c.type}),e.jsx("button",{onClick:()=>d(c.id),className:"p-2 bg-orange-500 rounded-lg text-white hover:bg-orange-600 transition-colors",children:e.jsx(Jd,{size:16})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-white font-semibold text-lg",children:c.value}),e.jsx("p",{className:"text-gray-500 text-sm",children:c.type})]}),e.jsx("button",{onClick:()=>i(c),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-white",children:e.jsx(Wt,{size:16})}),e.jsx("button",{className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-red-500",children:e.jsx(Lt,{size:16})})]})})]},c.id))})]})})},na="http://localhost:5001/api",rN=()=>{var L,I,$,H,y,O;const[t,s]=o.useState(""),[r,a]=o.useState("masters"),[n,l]=o.useState([]),[i,d]=o.useState([]),[c,u]=o.useState([]),[x,b]=o.useState(null),[f,T]=o.useState(!0),[w,j]=o.useState(null),[S,p]=o.useState(!1),[m,h]=o.useState({approvedCommissionPercentage:10,adminSharePercentage:30}),N=JSON.parse(localStorage.getItem("adminUser")||"{}");o.useEffect(()=>{C(),E(),P(),U()},[]);const C=async()=>{try{const v=await(await fetch(`${na}/copy/admin/dashboard`)).json();b(v.dashboard)}catch(g){console.error("Error fetching dashboard:",g)}},E=async()=>{try{const v=await(await fetch(`${na}/copy/admin/masters`)).json();l(v.masters||[])}catch(g){console.error("Error fetching masters:",g)}T(!1)},P=async()=>{try{const v=await(await fetch(`${na}/copy/admin/applications`)).json();d(v.applications||[])}catch(g){console.error("Error fetching applications:",g)}},U=async()=>{try{const v=await(await fetch(`${na}/copy/admin/followers`)).json();u(v.followers||[])}catch(g){console.error("Error fetching followers:",g)}},K=async()=>{if(w)try{(await(await fetch(`${na}/copy/admin/approve/${w._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:N._id,...m})})).json()).master&&(alert("Master approved successfully!"),p(!1),j(null),E(),P(),C())}catch(g){console.error("Error approving master:",g),alert("Failed to approve master")}},R=async g=>{const v=prompt("Enter rejection reason:");if(v)try{(await(await fetch(`${na}/copy/admin/reject/${g}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:N._id,rejectionReason:v})})).json()).master&&(alert("Master rejected"),E(),P(),C())}catch(W){console.error("Error rejecting master:",W)}},le=async g=>{if(confirm("Are you sure you want to suspend this master?"))try{(await(await fetch(`${na}/copy/admin/suspend/${g}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:N._id})})).json()).master&&(alert("Master suspended"),E(),C())}catch(v){console.error("Error suspending master:",v)}},X=g=>{switch(g){case"ACTIVE":return"bg-green-500/20 text-green-500";case"PENDING":return"bg-yellow-500/20 text-yellow-500";case"SUSPENDED":return"bg-red-500/20 text-red-500";case"REJECTED":return"bg-gray-500/20 text-gray-400";default:return"bg-gray-500/20 text-gray-400"}},_=n.filter(g=>{var v,W,Z,B,M;return((v=g.displayName)==null?void 0:v.toLowerCase().includes(t.toLowerCase()))||((Z=(W=g.userId)==null?void 0:W.firstName)==null?void 0:Z.toLowerCase().includes(t.toLowerCase()))||((M=(B=g.userId)==null?void 0:B.email)==null?void 0:M.toLowerCase().includes(t.toLowerCase()))});return e.jsxs(qt,{title:"Copy Trade Management",subtitle:"Manage master traders and copy trading",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ol,{size:18,className:"text-yellow-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Master Traders"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:((L=x==null?void 0:x.masters)==null?void 0:L.active)||0}),e.jsxs("p",{className:"text-yellow-500 text-xs",children:[((I=x==null?void 0:x.masters)==null?void 0:I.pending)||0," pending"]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(et,{size:18,className:"text-blue-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Total Followers"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:(($=x==null?void 0:x.followers)==null?void 0:$.active)||0})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(mt,{size:18,className:"text-green-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Copied Trades"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:((H=x==null?void 0:x.copyTrades)==null?void 0:H.total)||0}),e.jsxs("p",{className:"text-blue-500 text-xs",children:[((y=x==null?void 0:x.copyTrades)==null?void 0:y.open)||0," open"]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Pt,{size:18,className:"text-purple-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Admin Pool"})]}),e.jsxs("p",{className:"text-white text-2xl font-bold",children:["$",((O=x==null?void 0:x.adminPool)==null?void 0:O.toFixed(2))||"0.00"]})]})]}),e.jsx("div",{className:"flex gap-4 mb-6",children:[{key:"applications",label:`Applications (${i.length})`},{key:"masters",label:"All Masters"},{key:"followers",label:"Followers"}].map(g=>e.jsx("button",{onClick:()=>a(g.key),className:`px-4 py-2 rounded-lg font-medium transition-colors ${r===g.key?"bg-purple-500 text-white":"bg-dark-800 text-gray-400 hover:text-white"}`,children:g.label},g.key))}),r==="applications"&&e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-800",children:e.jsx("h2",{className:"text-white font-semibold text-lg",children:"Pending Applications"})}),i.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No pending applications"}):e.jsx("div",{className:"divide-y divide-gray-800",children:i.map(g=>{var v,W,Z;return e.jsxs("div",{className:"p-4 hover:bg-dark-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-yellow-500/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-yellow-500 font-bold",children:(v=g.displayName)==null?void 0:v.charAt(0)})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:g.displayName}),e.jsxs("p",{className:"text-gray-500 text-sm",children:[(W=g.userId)==null?void 0:W.firstName," (",(Z=g.userId)==null?void 0:Z.email,")"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-white font-semibold",children:[g.requestedCommissionPercentage,"%"]}),e.jsx("p",{className:"text-gray-500 text-xs",children:"Requested Commission"})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4 justify-end",children:[e.jsx("button",{onClick:()=>R(g._id),className:"px-4 py-2 bg-red-500/20 text-red-500 rounded-lg",children:"Reject"}),e.jsx("button",{onClick:()=>{j(g),p(!0)},className:"px-4 py-2 bg-green-500 text-white rounded-lg",children:"Approve"})]})]},g._id)})})]}),r==="masters"&&e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-800",children:[e.jsx("h2",{className:"text-white font-semibold text-lg",children:"All Masters"}),e.jsxs("div",{className:"relative",children:[e.jsx(_t,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search...",value:t,onChange:g=>s(g.target.value),className:"bg-dark-700 border border-gray-700 rounded-lg pl-10 pr-4 py-2 text-white"})]})]}),f?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"Loading..."}):_.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No masters found"}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"text-left text-gray-500 text-sm py-3 px-4",children:"Trader"}),e.jsx("th",{className:"text-left text-gray-500 text-sm py-3 px-4",children:"User"}),e.jsx("th",{className:"text-left text-gray-500 text-sm py-3 px-4",children:"Followers"}),e.jsx("th",{className:"text-left text-gray-500 text-sm py-3 px-4",children:"Commission"}),e.jsx("th",{className:"text-left text-gray-500 text-sm py-3 px-4",children:"Status"}),e.jsx("th",{className:"text-left text-gray-500 text-sm py-3 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:_.map(g=>{var v,W,Z,B;return e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-dark-700/50",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-purple-500 font-medium",children:(v=g.displayName)==null?void 0:v.charAt(0)})}),e.jsx("span",{className:"text-white font-medium",children:g.displayName})]})}),e.jsxs("td",{className:"py-4 px-4",children:[e.jsx("p",{className:"text-white text-sm",children:(W=g.userId)==null?void 0:W.firstName}),e.jsx("p",{className:"text-gray-500 text-xs",children:(Z=g.userId)==null?void 0:Z.email})]}),e.jsx("td",{className:"py-4 px-4 text-white",children:((B=g.stats)==null?void 0:B.activeFollowers)||0}),e.jsxs("td",{className:"py-4 px-4 text-white",children:[g.approvedCommissionPercentage||g.requestedCommissionPercentage,"%"]}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${X(g.status)}`,children:g.status})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-1",children:[g.status==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{j(g),p(!0)},className:"p-2 hover:bg-dark-600 rounded-lg text-gray-400 hover:text-green-500",title:"Approve",children:e.jsx(qe,{size:16})}),e.jsx("button",{onClick:()=>R(g._id),className:"p-2 hover:bg-dark-600 rounded-lg text-gray-400 hover:text-red-500",title:"Reject",children:e.jsx(ye,{size:16})})]}),g.status==="ACTIVE"&&e.jsx("button",{onClick:()=>le(g._id),className:"p-2 hover:bg-dark-600 rounded-lg text-gray-400 hover:text-red-500",title:"Suspend",children:e.jsx(Lt,{size:16})})]})})]},g._id)})})]})]}),r==="followers"&&e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-800",children:e.jsx("h2",{className:"text-white font-semibold text-lg",children:"All Followers"})}),c.length===0?e.jsx("div",{className:"text-center py-12 text-gray-500",children:"No followers yet"}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"text-left text-gray-500 text-sm py-3 px-4",children:"Follower"}),e.jsx("th",{className:"text-left text-gray-500 text-sm py-3 px-4",children:"Following"}),e.jsx("th",{className:"text-left text-gray-500 text-sm py-3 px-4",children:"Copy Mode"}),e.jsx("th",{className:"text-left text-gray-500 text-sm py-3 px-4",children:"Trades"}),e.jsx("th",{className:"text-left text-gray-500 text-sm py-3 px-4",children:"Status"})]})}),e.jsx("tbody",{children:c.map(g=>{var v,W,Z,B;return e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-dark-700/50",children:[e.jsxs("td",{className:"py-4 px-4",children:[e.jsx("p",{className:"text-white text-sm",children:(v=g.followerId)==null?void 0:v.firstName}),e.jsx("p",{className:"text-gray-500 text-xs",children:(W=g.followerId)==null?void 0:W.email})]}),e.jsx("td",{className:"py-4 px-4 text-white",children:(Z=g.masterId)==null?void 0:Z.displayName}),e.jsx("td",{className:"py-4 px-4 text-white",children:g.copyMode==="FIXED_LOT"?`Fixed: ${g.copyValue}`:`${g.copyValue}x`}),e.jsx("td",{className:"py-4 px-4 text-white",children:((B=g.stats)==null?void 0:B.totalCopiedTrades)||0}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${g.status==="ACTIVE"?"bg-green-500/20 text-green-500":"bg-yellow-500/20 text-yellow-500"}`,children:g.status})})]},g._id)})})]})]}),S&&w&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 w-full max-w-md border border-gray-700",children:[e.jsxs("h2",{className:"text-xl font-semibold text-white mb-4",children:["Approve: ",w.displayName]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Commission (%)"}),e.jsx("input",{type:"number",value:m.approvedCommissionPercentage,onChange:g=>h(v=>({...v,approvedCommissionPercentage:parseFloat(g.target.value)||0})),className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Admin Share (%)"}),e.jsx("input",{type:"number",value:m.adminSharePercentage,onChange:g=>h(v=>({...v,adminSharePercentage:parseFloat(g.target.value)||0})),className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-3 py-2 text-white"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>p(!1),className:"flex-1 bg-dark-700 text-white py-2 rounded-lg",children:"Cancel"}),e.jsx("button",{onClick:K,className:"flex-1 bg-green-500 text-white py-2 rounded-lg",children:"Approve"})]})]})})]})},ur="http://localhost:5001/api",aN=()=>{const[t,s]=o.useState(""),[r,a]=o.useState("challenges"),[n,l]=o.useState(!1),[i,d]=o.useState([]),[c,u]=o.useState([]),[x,b]=o.useState({}),[f,T]=o.useState(!0),[w,j]=o.useState(!1),[S,p]=o.useState(!1),[m,h]=o.useState(null),[N,C]=o.useState({displayName:"Prop Trading Challenge",description:"Trade with our capital. Pass the challenge and get funded.",termsAndConditions:""}),E={name:"",description:"",stepsCount:2,fundSize:1e4,challengeFee:99,rules:{maxDailyDrawdownPercent:5,maxOverallDrawdownPercent:10,profitTargetPhase1Percent:8,profitTargetPhase2Percent:5,minLotSize:.01,maxLotSize:100,minTradesRequired:1,maxTradesPerDay:null,maxTotalTrades:null,maxConcurrentTrades:null,stopLossMandatory:!0,takeProfitMandatory:!1,minTradeHoldTimeSeconds:0,maxLeverage:100,allowWeekendHolding:!1,allowNewsTrading:!0,tradingDaysRequired:null,challengeExpiryDays:30,allowedSegments:["FOREX","CRYPTO","STOCKS","COMMODITIES","INDICES"]},fundedSettings:{profitSplitPercent:80,withdrawalFrequencyDays:14},isActive:!0},[P,U]=o.useState(E);o.useEffect(()=>{K()},[]);const K=async()=>{T(!0);try{const v=await(await fetch(`${ur}/prop/admin/settings`)).json();v.success&&(l(v.settings.challengeModeEnabled),C({displayName:v.settings.displayName||"Prop Trading Challenge",description:v.settings.description||"",termsAndConditions:v.settings.termsAndConditions||""}));const Z=await(await fetch(`${ur}/prop/admin/challenges`)).json();Z.success&&d(Z.challenges||[]);const M=await(await fetch(`${ur}/prop/admin/accounts?limit=50`)).json();M.success&&u(M.accounts||[]);const ae=await(await fetch(`${ur}/prop/admin/dashboard`)).json();ae.success&&b(ae.stats||{})}catch(g){console.error("Error fetching prop data:",g)}T(!1)},R=async()=>{try{const g=!n;(await(await fetch(`${ur}/prop/admin/settings`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({challengeModeEnabled:g})})).json()).success&&(l(g),alert(g?"Challenge mode enabled! Users can now buy challenges.":"Challenge mode disabled."))}catch(g){console.error("Error toggling challenge mode:",g),alert("Failed to update challenge mode")}},le=async()=>{try{(await(await fetch(`${ur}/prop/admin/settings`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({challengeModeEnabled:n,...N})})).json()).success&&(alert("Settings saved successfully!"),j(!1))}catch(g){console.error("Error saving settings:",g),alert("Failed to save settings")}},X=()=>{h(null),U(E),p(!0)},_=g=>{h(g),U({name:g.name||"",description:g.description||"",stepsCount:g.stepsCount||2,fundSize:g.fundSize||1e4,challengeFee:g.challengeFee||99,rules:{...E.rules,...g.rules},fundedSettings:{...E.fundedSettings,...g.fundedSettings},isActive:g.isActive!==!1}),p(!0)},L=async()=>{if(!P.name){alert("Please enter a challenge name");return}try{const g=m?`${ur}/prop/admin/challenges/${m._id}`:`${ur}/prop/admin/challenges`,Z=await(await fetch(g,{method:m?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)})).json();Z.success?(alert(m?"Challenge updated!":"Challenge created!"),p(!1),K()):alert(Z.message||"Failed to save challenge")}catch(g){console.error("Error saving challenge:",g),alert("Failed to save challenge")}},I=async g=>{if(confirm("Are you sure you want to delete this challenge?"))try{const W=await(await fetch(`${ur}/prop/admin/challenges/${g}`,{method:"DELETE"})).json();W.success?(alert("Challenge deleted!"),K()):alert(W.message||"Failed to delete challenge")}catch(v){console.error("Error deleting challenge:",v),alert("Failed to delete challenge")}},$=(g,v)=>{U({...P,rules:{...P.rules,[g]:v}})},H=(g,v)=>{U({...P,fundedSettings:{...P.fundedSettings,[g]:v}})},y=g=>{switch(g==null?void 0:g.toUpperCase()){case"ACTIVE":return"bg-blue-500/20 text-blue-500";case"PASSED":return"bg-green-500/20 text-green-500";case"FUNDED":return"bg-purple-500/20 text-purple-500";case"FAILED":return"bg-red-500/20 text-red-500";case"EXPIRED":return"bg-orange-500/20 text-orange-500";default:return"bg-gray-500/20 text-gray-400"}},O=g=>{switch(g==null?void 0:g.toUpperCase()){case"ACTIVE":return e.jsx(Ht,{size:14});case"PASSED":case"FUNDED":return e.jsx(xs,{size:14});case"FAILED":case"EXPIRED":return e.jsx(yr,{size:14});default:return null}};return e.jsxs(qt,{title:"Prop Firm Challenges",subtitle:"Manage trading challenges and funded accounts",children:[e.jsx("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${n?"bg-green-500/20":"bg-gray-500/20"}`,children:e.jsx(At,{size:24,className:n?"text-green-500":"text-gray-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Challenge Mode"}),e.jsx("p",{className:"text-gray-500 text-sm",children:n?"Users can buy and participate in challenges":"Challenge purchases are disabled for users"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>j(!0),className:"p-2 hover:bg-dark-700 rounded-lg transition-colors text-gray-400 hover:text-white",title:"Settings",children:e.jsx(Gr,{size:20})}),e.jsxs("button",{onClick:R,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${n?"bg-green-500 text-white hover:bg-green-600":"bg-gray-600 text-gray-300 hover:bg-gray-500"}`,children:[n?e.jsx(kb,{size:20}):e.jsx(wb,{size:20}),n?"ON":"OFF"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(At,{size:18,className:"text-yellow-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Active Challenges"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:x.totalChallenges||i.length})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(et,{size:18,className:"text-blue-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Total Participants"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:x.totalAccounts||0})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(xs,{size:18,className:"text-green-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Passed"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:x.passedAccounts||0})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(yr,{size:18,className:"text-red-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Failed"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:x.failedAccounts||0})]})]}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx("button",{onClick:()=>a("challenges"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${r==="challenges"?"bg-yellow-500 text-black":"bg-dark-700 text-gray-400 hover:text-white"}`,children:"Challenges"}),e.jsx("button",{onClick:()=>a("participants"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${r==="participants"?"bg-yellow-500 text-black":"bg-dark-700 text-gray-400 hover:text-white"}`,children:"Participants"})]}),r==="challenges"&&e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-5 border-b border-gray-800",children:[e.jsx("h2",{className:"text-white font-semibold text-lg",children:"Challenge Types"}),e.jsxs("button",{onClick:X,className:"flex items-center gap-2 px-4 py-2 bg-yellow-500 text-black rounded-lg hover:bg-yellow-400 transition-colors",children:[e.jsx(st,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Add Challenge"})]})]}),e.jsx("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:i.length===0?e.jsxs("div",{className:"col-span-2 text-center py-12",children:[e.jsx(At,{size:48,className:"text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No challenges created yet"}),e.jsx("p",{className:"text-gray-600 text-sm",children:'Click "Add Challenge" to create your first challenge'})]}):i.map(g=>e.jsxs("div",{className:"bg-dark-700 rounded-xl p-5 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:g.name}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${g.isActive?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-400"}`,children:g.isActive?"Active":"Inactive"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Account Size"}),e.jsxs("p",{className:"text-white font-medium",children:["$",(g.fundSize||0).toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Profit Target"}),e.jsxs("p",{className:"text-green-500 font-medium",children:[g.profitTarget||8,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Max Drawdown"}),e.jsxs("p",{className:"text-red-500 font-medium",children:[g.maxDrawdown||10,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Duration"}),e.jsxs("p",{className:"text-white font-medium",children:[g.durationDays||30," days"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-600",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-yellow-500 font-bold text-xl",children:["$",(g.challengeFee||0).toLocaleString()]}),e.jsx("p",{className:"text-gray-500 text-sm",children:g.stepsCount===0?"Instant Fund":g.stepsCount===1?"1-Step":"2-Step"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>_(g),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-white",children:e.jsx(Wt,{size:16})}),e.jsx("button",{onClick:()=>I(g._id),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-red-500",children:e.jsx(Lt,{size:16})})]})]})]},g._id))})]}),r==="participants"&&e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 sm:p-5 border-b border-gray-800",children:[e.jsx("h2",{className:"text-white font-semibold text-lg",children:"Challenge Participants"}),e.jsxs("div",{className:"relative",children:[e.jsx(_t,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search participants...",value:t,onChange:g=>s(g.target.value),className:"w-full sm:w-64 bg-dark-700 border border-gray-700 rounded-lg pl-10 pr-4 py-2 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600"})]})]}),e.jsx("div",{className:"block lg:hidden p-4 space-y-3",children:c.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(et,{size:48,className:"text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No participants yet"})]}):c.map(g=>{var v,W,Z;return e.jsxs("div",{className:"bg-dark-700 rounded-xl p-4 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:((v=g.userId)==null?void 0:v.firstName)||((W=g.userId)==null?void 0:W.email)||"Unknown"}),e.jsx("p",{className:"text-gray-500 text-sm",children:((Z=g.challengeId)==null?void 0:Z.name)||"Challenge"})]}),e.jsxs("span",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs ${y(g.status)}`,children:[O(g.status),g.status]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-500",children:"Balance"}),e.jsxs("span",{className:"text-white",children:["$",(g.currentBalance||0).toLocaleString()]})]}),e.jsx("div",{className:"w-full bg-dark-600 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${g.status==="FAILED"?"bg-red-500":g.status==="PASSED"?"bg-green-500":"bg-blue-500"}`,style:{width:`${Math.min((g.currentBalance-g.initialBalance)/g.initialBalance*100+50,100)}%`}})})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"P&L"}),e.jsxs("span",{className:g.currentBalance-g.initialBalance>=0?"text-green-500":"text-red-500",children:[g.currentBalance-g.initialBalance>=0?"+":"","$",((g.currentBalance||0)-(g.initialBalance||0)).toLocaleString()]})]})]},g._id)})}),e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"User"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Challenge"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Balance"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"P&L"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Status"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Start Date"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:c.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"py-12 text-center text-gray-500",children:"No participants yet"})}):c.map(g=>{var W,Z,B;const v=(g.currentBalance||0)-(g.initialBalance||0);return e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-dark-700/50",children:[e.jsx("td",{className:"py-4 px-4 text-white font-medium",children:((W=g.userId)==null?void 0:W.firstName)||((Z=g.userId)==null?void 0:Z.email)||"Unknown"}),e.jsx("td",{className:"py-4 px-4 text-gray-400",children:((B=g.challengeId)==null?void 0:B.name)||"Challenge"}),e.jsxs("td",{className:"py-4 px-4 text-white",children:["$",(g.currentBalance||0).toLocaleString()]}),e.jsxs("td",{className:`py-4 px-4 font-medium ${v>=0?"text-green-500":"text-red-500"}`,children:[v>=0?"+":"","$",v.toLocaleString()]}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("span",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs w-fit ${y(g.status)}`,children:[O(g.status),g.status]})}),e.jsx("td",{className:"py-4 px-4 text-gray-400",children:new Date(g.createdAt).toLocaleDateString()}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("button",{className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-white",children:e.jsx(Qt,{size:16})})})]},g._id)})})]})})]}),w&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Challenge Settings"}),e.jsx("button",{onClick:()=>j(!1),className:"text-gray-400 hover:text-white",children:e.jsx(ye,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Display Name"}),e.jsx("input",{type:"text",value:N.displayName,onChange:g=>C({...N,displayName:g.target.value}),placeholder:"Prop Trading Challenge",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Description"}),e.jsx("textarea",{value:N.description,onChange:g=>C({...N,description:g.target.value}),placeholder:"Trade with our capital...",rows:3,className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white resize-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Terms & Conditions"}),e.jsx("textarea",{value:N.termsAndConditions,onChange:g=>C({...N,termsAndConditions:g.target.value}),placeholder:"Enter terms and conditions...",rows:5,className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white resize-none"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>j(!1),className:"flex-1 py-3 bg-dark-700 text-white rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:le,className:"flex-1 py-3 bg-yellow-500 text-black font-medium rounded-lg hover:bg-yellow-400",children:"Save Settings"})]})]})]})}),S&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800 flex items-center justify-between sticky top-0 bg-dark-800 z-10",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:m?"Edit Challenge":"Create New Challenge"}),e.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-white",children:e.jsx(ye,{size:24})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Challenge Name *"}),e.jsx("input",{type:"text",value:P.name,onChange:g=>U({...P,name:g.target.value}),placeholder:"e.g., Starter Challenge",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Description"}),e.jsx("textarea",{value:P.description,onChange:g=>U({...P,description:g.target.value}),placeholder:"Challenge description...",rows:2,className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white resize-none"})]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-xl p-4 border border-gray-700",children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"Challenge Type & Pricing"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Challenge Type"}),e.jsxs("select",{value:P.stepsCount,onChange:g=>U({...P,stepsCount:parseInt(g.target.value)}),className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white",children:[e.jsx("option",{value:0,children:"Instant Fund (0-Step)"}),e.jsx("option",{value:1,children:"1-Step Challenge"}),e.jsx("option",{value:2,children:"2-Step Challenge"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Account Size ($)"}),e.jsx("input",{type:"number",value:P.fundSize,onChange:g=>U({...P,fundSize:parseFloat(g.target.value)||0}),className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Challenge Fee ($)"}),e.jsx("input",{type:"number",value:P.challengeFee,onChange:g=>U({...P,challengeFee:parseFloat(g.target.value)||0}),className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white"})]})]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-xl p-4 border border-gray-700",children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"Drawdown & Profit Rules"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Daily Drawdown %"}),e.jsx("input",{type:"number",value:P.rules.maxDailyDrawdownPercent,onChange:g=>$("maxDailyDrawdownPercent",parseFloat(g.target.value)||0),className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Overall Drawdown %"}),e.jsx("input",{type:"number",value:P.rules.maxOverallDrawdownPercent,onChange:g=>$("maxOverallDrawdownPercent",parseFloat(g.target.value)||0),className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Phase 1 Target %"}),e.jsx("input",{type:"number",value:P.rules.profitTargetPhase1Percent,onChange:g=>$("profitTargetPhase1Percent",parseFloat(g.target.value)||0),className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Phase 2 Target %"}),e.jsx("input",{type:"number",value:P.rules.profitTargetPhase2Percent,onChange:g=>$("profitTargetPhase2Percent",parseFloat(g.target.value)||0),className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white",disabled:P.stepsCount<2})]})]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-xl p-4 border border-gray-700",children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"Lot Size & Trade Limits"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Min Lot Size"}),e.jsx("input",{type:"number",step:"0.01",value:P.rules.minLotSize,onChange:g=>$("minLotSize",parseFloat(g.target.value)||.01),className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Max Lot Size"}),e.jsx("input",{type:"number",value:P.rules.maxLotSize,onChange:g=>$("maxLotSize",parseFloat(g.target.value)||100),className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Min Trades Required"}),e.jsx("input",{type:"number",value:P.rules.minTradesRequired||"",onChange:g=>$("minTradesRequired",parseInt(g.target.value)||null),placeholder:"No limit",className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Max Trades/Day"}),e.jsx("input",{type:"number",value:P.rules.maxTradesPerDay||"",onChange:g=>$("maxTradesPerDay",parseInt(g.target.value)||null),placeholder:"No limit",className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Max Total Trades"}),e.jsx("input",{type:"number",value:P.rules.maxTotalTrades||"",onChange:g=>$("maxTotalTrades",parseInt(g.target.value)||null),placeholder:"No limit",className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Max Concurrent"}),e.jsx("input",{type:"number",value:P.rules.maxConcurrentTrades||"",onChange:g=>$("maxConcurrentTrades",parseInt(g.target.value)||null),placeholder:"No limit",className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Max Leverage"}),e.jsx("input",{type:"number",value:P.rules.maxLeverage,onChange:g=>$("maxLeverage",parseInt(g.target.value)||100),className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Min Hold Time (sec)"}),e.jsx("input",{type:"number",value:P.rules.minTradeHoldTimeSeconds,onChange:g=>$("minTradeHoldTimeSeconds",parseInt(g.target.value)||0),className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white"})]})]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-xl p-4 border border-gray-700",children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"Time & Duration"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Challenge Duration (days)"}),e.jsx("input",{type:"number",value:P.rules.challengeExpiryDays,onChange:g=>$("challengeExpiryDays",parseInt(g.target.value)||30),className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Min Trading Days"}),e.jsx("input",{type:"number",value:P.rules.tradingDaysRequired||"",onChange:g=>$("tradingDaysRequired",parseInt(g.target.value)||null),placeholder:"No minimum",className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Profit Split %"}),e.jsx("input",{type:"number",value:P.fundedSettings.profitSplitPercent,onChange:g=>H("profitSplitPercent",parseInt(g.target.value)||80),className:"w-full bg-dark-600 border border-gray-600 rounded-lg px-4 py-3 text-white"})]})]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-xl p-4 border border-gray-700",children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"Trading Rules"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:P.rules.stopLossMandatory,onChange:g=>$("stopLossMandatory",g.target.checked),className:"w-5 h-5 rounded bg-dark-600 border-gray-600 text-yellow-500"}),e.jsx("span",{className:"text-white text-sm",children:"Stop Loss Required"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:P.rules.takeProfitMandatory,onChange:g=>$("takeProfitMandatory",g.target.checked),className:"w-5 h-5 rounded bg-dark-600 border-gray-600 text-yellow-500"}),e.jsx("span",{className:"text-white text-sm",children:"Take Profit Required"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:P.rules.allowWeekendHolding,onChange:g=>$("allowWeekendHolding",g.target.checked),className:"w-5 h-5 rounded bg-dark-600 border-gray-600 text-yellow-500"}),e.jsx("span",{className:"text-white text-sm",children:"Weekend Holding"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:P.rules.allowNewsTrading,onChange:g=>$("allowNewsTrading",g.target.checked),className:"w-5 h-5 rounded bg-dark-600 border-gray-600 text-yellow-500"}),e.jsx("span",{className:"text-white text-sm",children:"News Trading"})]})]})]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:P.isActive,onChange:g=>U({...P,isActive:g.target.checked}),className:"w-5 h-5 rounded bg-dark-600 border-gray-600 text-yellow-500"}),e.jsx("span",{className:"text-white",children:"Active (visible to users)"})]})}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-700",children:[e.jsx("button",{onClick:()=>p(!1),className:"flex-1 py-3 bg-dark-700 text-white rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:L,className:"flex-1 py-3 bg-yellow-500 text-black font-medium rounded-lg hover:bg-yellow-400",children:m?"Update Challenge":"Create Challenge"})]})]})]})})]})},Er="http://localhost:5001/api",nN=()=>{var B;const[t,s]=o.useState(""),[r,a]=o.useState([]),[n,l]=o.useState(!0),[i,d]=o.useState(!1),[c,u]=o.useState(!1),[x,b]=o.useState(!1),[f,T]=o.useState(!1),[w,j]=o.useState(!1),[S,p]=o.useState(null),[m,h]=o.useState(""),[N,C]=o.useState(null),[E,P]=o.useState({email:"",password:"",firstName:"",lastName:"",phone:"",urlSlug:"",brandName:"",permissions:{}}),[U,K]=o.useState(""),[R,le]=o.useState(""),X=[{key:"canManageUsers",label:"Manage Users",category:"Users"},{key:"canCreateUsers",label:"Create Users",category:"Users"},{key:"canDeleteUsers",label:"Delete Users",category:"Users"},{key:"canViewUsers",label:"View Users",category:"Users"},{key:"canManageTrades",label:"Manage Trades",category:"Trading"},{key:"canCloseTrades",label:"Close Trades",category:"Trading"},{key:"canModifyTrades",label:"Modify Trades",category:"Trading"},{key:"canManageAccounts",label:"Manage Accounts",category:"Accounts"},{key:"canCreateAccounts",label:"Create Accounts",category:"Accounts"},{key:"canDeleteAccounts",label:"Delete Accounts",category:"Accounts"},{key:"canModifyLeverage",label:"Modify Leverage",category:"Accounts"},{key:"canManageDeposits",label:"Manage Deposits",category:"Finance"},{key:"canApproveDeposits",label:"Approve Deposits",category:"Finance"},{key:"canManageWithdrawals",label:"Manage Withdrawals",category:"Finance"},{key:"canApproveWithdrawals",label:"Approve Withdrawals",category:"Finance"},{key:"canManageKYC",label:"Manage KYC",category:"KYC"},{key:"canApproveKYC",label:"Approve KYC",category:"KYC"},{key:"canManageIB",label:"Manage IB",category:"IB"},{key:"canApproveIB",label:"Approve IB",category:"IB"},{key:"canManageCopyTrading",label:"Manage Copy Trading",category:"Copy Trade"},{key:"canApproveMasters",label:"Approve Masters",category:"Copy Trade"},{key:"canManageSymbols",label:"Manage Symbols",category:"Settings"},{key:"canManageGroups",label:"Manage Groups",category:"Settings"},{key:"canManageSettings",label:"Manage Settings",category:"Settings"},{key:"canManageTheme",label:"Manage Theme",category:"Settings"},{key:"canViewReports",label:"View Reports",category:"Reports"},{key:"canExportReports",label:"Export Reports",category:"Reports"}];o.useEffect(()=>{_()},[]);const _=async()=>{try{const te=await(await fetch(`${Er}/admin-mgmt/admins`)).json();te.success&&a(te.admins||[])}catch(M){console.error("Error fetching admins:",M)}l(!1)},L=async()=>{try{const te=await(await fetch(`${Er}/admin-mgmt/admins`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)})).json();te.success?(alert("Admin created successfully!"),d(!1),P({email:"",password:"",firstName:"",lastName:"",phone:"",urlSlug:"",brandName:"",permissions:{}}),_()):alert(te.message||"Failed to create admin")}catch{alert("Error creating admin")}},I=async()=>{try{const te=await(await fetch(`${Er}/admin-mgmt/admins/${S._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:S.firstName,lastName:S.lastName,phone:S.phone,brandName:S.brandName,status:S.status})})).json();te.success?(alert("Admin updated successfully!"),u(!1),_()):alert(te.message||"Failed to update admin")}catch{alert("Error updating admin")}},$=async()=>{try{const te=await(await fetch(`${Er}/admin-mgmt/admins/${S._id}/permissions`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({permissions:S.permissions})})).json();te.success?(alert("Permissions updated successfully!"),T(!1),_()):alert(te.message||"Failed to update permissions")}catch{alert("Error updating permissions")}},H=async()=>{try{const te=await(await fetch(`${Er}/admin-mgmt/wallet/fund`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:S._id,amount:parseFloat(U),description:R})})).json();te.success?(alert(te.message),b(!1),K(""),le(""),_()):alert(te.message||"Failed to fund admin")}catch{alert("Error funding admin")}},y=async M=>{const te=M.status==="ACTIVE"?"SUSPENDED":"ACTIVE";try{(await(await fetch(`${Er}/admin-mgmt/admins/${M._id}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:te})})).json()).success&&_()}catch{alert("Error updating status")}},O=async M=>{if(confirm(`Are you sure you want to delete ${M.firstName} ${M.lastName}?`))try{const ae=await(await fetch(`${Er}/admin-mgmt/admins/${M._id}`,{method:"DELETE"})).json();ae.success?(alert("Admin deleted successfully!"),_()):alert(ae.message||"Failed to delete admin")}catch{alert("Error deleting admin")}},g=async()=>{if(!m||m.length<6){alert("Password must be at least 6 characters");return}try{const te=await(await fetch(`${Er}/admin-mgmt/admins/${S._id}/reset-password`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({newPassword:m})})).json();te.success?(alert("Password reset successfully!"),j(!1),h("")):alert(te.message||"Failed to reset password")}catch{alert("Error resetting password")}},v=M=>{const te=`${window.location.origin}/${M}/login`;navigator.clipboard.writeText(te),C(M),setTimeout(()=>C(null),2e3)},W=r.filter(M=>{var te,ae,pe,Y;return((te=M.firstName)==null?void 0:te.toLowerCase().includes(t.toLowerCase()))||((ae=M.lastName)==null?void 0:ae.toLowerCase().includes(t.toLowerCase()))||((pe=M.email)==null?void 0:pe.toLowerCase().includes(t.toLowerCase()))||((Y=M.urlSlug)==null?void 0:Y.toLowerCase().includes(t.toLowerCase()))}),Z=M=>M?Object.values(M).filter(te=>te===!0).length:0;return e.jsxs(qt,{title:"Admin Management",subtitle:"Manage sub-admins, permissions, and wallets",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center",children:e.jsx(kr,{size:20,className:"text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Total Admins"}),e.jsx("p",{className:"text-white text-xl font-bold",children:r.length})]})]})}),e.jsx("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-500/20 rounded-lg flex items-center justify-center",children:e.jsx(qe,{size:20,className:"text-green-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Active Admins"}),e.jsx("p",{className:"text-white text-xl font-bold",children:r.filter(M=>M.status==="ACTIVE").length})]})]})}),e.jsx("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-lg flex items-center justify-center",children:e.jsx(et,{size:20,className:"text-purple-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Total Users"}),e.jsx("p",{className:"text-white text-xl font-bold",children:r.reduce((M,te)=>M+(te.userCount||0),0)})]})]})}),e.jsx("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-500/20 rounded-lg flex items-center justify-center",children:e.jsx(nt,{size:20,className:"text-yellow-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:"Total Wallet Balance"}),e.jsxs("p",{className:"text-white text-xl font-bold",children:["$",r.reduce((M,te)=>M+(te.walletBalance||0),0).toLocaleString()]})]})]})})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 sm:p-5 border-b border-gray-800",children:[e.jsx("h2",{className:"text-white font-semibold text-lg",children:"Sub-Admins"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(_t,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search admins...",value:t,onChange:M=>s(M.target.value),className:"w-full sm:w-64 bg-dark-700 border border-gray-700 rounded-lg pl-10 pr-4 py-2 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600"})]}),e.jsxs("button",{onClick:()=>d(!0),className:"flex items-center justify-center gap-2 px-4 py-2 bg-accent-green text-black rounded-lg hover:bg-accent-green/90 transition-colors font-medium",children:[e.jsx(st,{size:16}),e.jsx("span",{children:"Add Admin"})]})]})]}),n?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading admins..."}):W.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(kr,{size:48,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No admins found"}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Create your first sub-admin to get started"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"block lg:hidden p-4 space-y-3",children:W.map(M=>{var te,ae;return e.jsxs("div",{className:"bg-dark-700 rounded-xl p-4 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-500/20 flex items-center justify-center",children:e.jsx("span",{className:"text-blue-500 font-bold",children:(te=M.firstName)==null?void 0:te.charAt(0)})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-white font-medium",children:[M.firstName," ",M.lastName]}),e.jsx("p",{className:"text-gray-500 text-sm",children:M.brandName})]})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${M.status==="ACTIVE"?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:M.status})]}),e.jsxs("div",{className:"space-y-2 text-sm mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(Ys,{size:14}),e.jsx("span",{children:M.email})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(J0,{size:14}),e.jsxs("span",{children:["/",M.urlSlug,"/login"]}),e.jsx("button",{onClick:()=>v(M.urlSlug),className:"text-blue-500",children:N===M.urlSlug?e.jsx(qe,{size:14}):e.jsx(Jt,{size:14})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(nt,{size:14}),e.jsxs("span",{children:["Balance: $",((ae=M.walletBalance)==null?void 0:ae.toLocaleString())||0]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(et,{size:14}),e.jsxs("span",{children:[M.userCount||0," users"]})]})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-2 pt-3 border-t border-gray-600",children:[e.jsx("button",{onClick:()=>{p(M),b(!0)},className:"flex items-center justify-center gap-1 py-2 bg-green-500/20 text-green-500 rounded-lg text-xs",children:e.jsx(Pt,{size:14})}),e.jsx("button",{onClick:()=>{p({...M}),T(!0)},className:"flex items-center justify-center gap-1 py-2 bg-purple-500/20 text-purple-500 rounded-lg text-xs",children:e.jsx(Fc,{size:14})}),e.jsx("button",{onClick:()=>{p(M),j(!0)},className:"flex items-center justify-center gap-1 py-2 bg-yellow-500/20 text-yellow-500 rounded-lg text-xs",children:e.jsx(Ss,{size:14})}),e.jsx("button",{onClick:()=>{p({...M}),u(!0)},className:"flex items-center justify-center gap-1 py-2 bg-blue-500/20 text-blue-500 rounded-lg text-xs",children:e.jsx(Wt,{size:14})}),e.jsx("button",{onClick:()=>O(M),className:"flex items-center justify-center gap-1 py-2 bg-red-500/20 text-red-500 rounded-lg text-xs",children:e.jsx(Lt,{size:14})})]})]},M._id)})}),e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Admin"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"URL Slug"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Wallet"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Users"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Permissions"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Status"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:W.map(M=>{var te,ae,pe;return e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-dark-700/50",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-500/20 flex items-center justify-center",children:e.jsx("span",{className:"text-blue-500 font-bold",children:(te=M.firstName)==null?void 0:te.charAt(0)})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-white font-medium",children:[M.firstName," ",M.lastName]}),e.jsx("p",{className:"text-gray-500 text-sm",children:M.email})]})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-gray-400",children:["/",M.urlSlug]}),e.jsx("button",{onClick:()=>v(M.urlSlug),className:"text-blue-500 hover:text-blue-400",children:N===M.urlSlug?e.jsx(qe,{size:14}):e.jsx(Jt,{size:14})})]})}),e.jsxs("td",{className:"py-4 px-4",children:[e.jsxs("p",{className:"text-white font-medium",children:["$",((ae=M.walletBalance)==null?void 0:ae.toLocaleString())||0]}),e.jsxs("p",{className:"text-gray-500 text-xs",children:["Given: $",((pe=M.totalGivenToUsers)==null?void 0:pe.toLocaleString())||0]})]}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:"text-white",children:M.userCount||0})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("span",{className:"text-gray-400",children:[Z(M.permissions)," permissions"]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("button",{onClick:()=>y(M),className:`px-3 py-1 rounded-full text-xs ${M.status==="ACTIVE"?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:M.status})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>{p(M),b(!0)},className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-green-500",title:"Fund Wallet",children:e.jsx(Pt,{size:16})}),e.jsx("button",{onClick:()=>{p({...M}),T(!0)},className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-purple-500",title:"Permissions",children:e.jsx(Fc,{size:16})}),e.jsx("button",{onClick:()=>{p(M),j(!0)},className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-yellow-500",title:"Reset Password",children:e.jsx(Ss,{size:16})}),e.jsx("button",{onClick:()=>{p({...M}),u(!0)},className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-blue-500",title:"Edit",children:e.jsx(Wt,{size:16})}),e.jsx("button",{onClick:()=>O(M),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-red-500",title:"Delete",children:e.jsx(Lt,{size:16})})]})})]},M._id)})})]})})]})]}),i&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-gray-700",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Create New Admin"}),e.jsx("button",{onClick:()=>d(!1),className:"text-gray-400 hover:text-white",children:e.jsx(ye,{size:20})})]}),e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"First Name *"}),e.jsx("input",{type:"text",value:E.firstName,onChange:M=>P({...E,firstName:M.target.value}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-3 py-2 text-white",placeholder:"John"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Last Name *"}),e.jsx("input",{type:"text",value:E.lastName,onChange:M=>P({...E,lastName:M.target.value}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-3 py-2 text-white",placeholder:"Doe"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Email *"}),e.jsx("input",{type:"email",value:E.email,onChange:M=>P({...E,email:M.target.value}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-3 py-2 text-white",placeholder:"admin@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Password *"}),e.jsx("input",{type:"password",value:E.password,onChange:M=>P({...E,password:M.target.value}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-3 py-2 text-white",placeholder:""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"URL Slug * (unique identifier)"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 bg-dark-600 px-3 py-2 rounded-l-lg border border-r-0 border-gray-700",children:"/"}),e.jsx("input",{type:"text",value:E.urlSlug,onChange:M=>P({...E,urlSlug:M.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"")}),className:"flex-1 bg-dark-700 border border-gray-700 rounded-r-lg px-3 py-2 text-white",placeholder:"my-trading"})]}),e.jsxs("p",{className:"text-gray-500 text-xs mt-1",children:["Users will access: ",window.location.origin,"/",E.urlSlug||"slug","/login"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Brand Name"}),e.jsx("input",{type:"text",value:E.brandName,onChange:M=>P({...E,brandName:M.target.value}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-3 py-2 text-white",placeholder:"My Trading Platform"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Phone"}),e.jsx("input",{type:"text",value:E.phone,onChange:M=>P({...E,phone:M.target.value}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-3 py-2 text-white",placeholder:"+1234567890"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Default Permissions"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto bg-dark-700 rounded-lg p-3",children:X.slice(0,10).map(M=>e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:E.permissions[M.key]||!1,onChange:te=>P({...E,permissions:{...E.permissions,[M.key]:te.target.checked}}),className:"rounded"}),e.jsx("span",{className:"text-gray-300",children:M.label})]},M.key))})]})]}),e.jsxs("div",{className:"flex gap-3 p-5 border-t border-gray-700",children:[e.jsx("button",{onClick:()=>d(!1),className:"flex-1 py-2 bg-dark-700 text-white rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:L,className:"flex-1 py-2 bg-accent-green text-black rounded-lg font-medium hover:bg-accent-green/90",children:"Create Admin"})]})]})}),c&&S&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl w-full max-w-lg",children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-gray-700",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Edit Admin"}),e.jsx("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-white",children:e.jsx(ye,{size:20})})]}),e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"First Name"}),e.jsx("input",{type:"text",value:S.firstName,onChange:M=>p({...S,firstName:M.target.value}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-3 py-2 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Last Name"}),e.jsx("input",{type:"text",value:S.lastName,onChange:M=>p({...S,lastName:M.target.value}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-3 py-2 text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Brand Name"}),e.jsx("input",{type:"text",value:S.brandName,onChange:M=>p({...S,brandName:M.target.value}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-3 py-2 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Phone"}),e.jsx("input",{type:"text",value:S.phone||"",onChange:M=>p({...S,phone:M.target.value}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-3 py-2 text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Status"}),e.jsxs("select",{value:S.status,onChange:M=>p({...S,status:M.target.value}),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-3 py-2 text-white",children:[e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"SUSPENDED",children:"Suspended"}),e.jsx("option",{value:"PENDING",children:"Pending"})]})]})]}),e.jsxs("div",{className:"flex gap-3 p-5 border-t border-gray-700",children:[e.jsx("button",{onClick:()=>u(!1),className:"flex-1 py-2 bg-dark-700 text-white rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:I,className:"flex-1 py-2 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600",children:"Save Changes"})]})]})}),x&&S&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-gray-700",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Fund Admin Wallet"}),e.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-white",children:e.jsx(ye,{size:20})})]}),e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Admin"}),e.jsxs("p",{className:"text-white font-medium",children:[S.firstName," ",S.lastName]}),e.jsx("p",{className:"text-gray-500 text-sm",children:S.email})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Current Balance"}),e.jsxs("p",{className:"text-green-500 text-2xl font-bold",children:["$",((B=S.walletBalance)==null?void 0:B.toLocaleString())||0]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Amount to Add ($)"}),e.jsx("input",{type:"number",value:U,onChange:M=>K(M.target.value),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-3 py-2 text-white",placeholder:"1000",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"Description (optional)"}),e.jsx("input",{type:"text",value:R,onChange:M=>le(M.target.value),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-3 py-2 text-white",placeholder:"Monthly allocation"})]})]}),e.jsxs("div",{className:"flex gap-3 p-5 border-t border-gray-700",children:[e.jsx("button",{onClick:()=>b(!1),className:"flex-1 py-2 bg-dark-700 text-white rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:H,disabled:!U||parseFloat(U)<=0,className:"flex-1 py-2 bg-green-500 text-white rounded-lg font-medium hover:bg-green-600 disabled:opacity-50",children:"Add Funds"})]})]})}),f&&S&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-gray-700",children:[e.jsxs("h3",{className:"text-white font-semibold text-lg",children:["Permissions - ",S.firstName," ",S.lastName]}),e.jsx("button",{onClick:()=>T(!1),className:"text-gray-400 hover:text-white",children:e.jsx(ye,{size:20})})]}),e.jsx("div",{className:"p-5",children:["Users","Trading","Accounts","Finance","KYC","IB","Copy Trade","Settings","Reports"].map(M=>e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-white font-medium mb-2",children:M}),e.jsx("div",{className:"grid grid-cols-2 gap-2 bg-dark-700 rounded-lg p-3",children:X.filter(te=>te.category===M).map(te=>{var ae;return e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:((ae=S.permissions)==null?void 0:ae[te.key])||!1,onChange:pe=>p({...S,permissions:{...S.permissions,[te.key]:pe.target.checked}}),className:"rounded"}),e.jsx("span",{className:"text-gray-300",children:te.label})]},te.key)})})]},M))}),e.jsxs("div",{className:"flex gap-3 p-5 border-t border-gray-700",children:[e.jsx("button",{onClick:()=>T(!1),className:"flex-1 py-2 bg-dark-700 text-white rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:$,className:"flex-1 py-2 bg-purple-500 text-white rounded-lg font-medium hover:bg-purple-600",children:"Save Permissions"})]})]})}),w&&S&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-gray-700",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Reset Password"}),e.jsx("button",{onClick:()=>{j(!1),h("")},className:"text-gray-400 hover:text-white",children:e.jsx(ye,{size:20})})]}),e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Admin"}),e.jsxs("p",{className:"text-white font-medium",children:[S.firstName," ",S.lastName]}),e.jsx("p",{className:"text-gray-500 text-sm",children:S.email})]}),e.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-500",children:[e.jsx(wr,{size:16}),e.jsx("span",{className:"text-sm font-medium",children:"Warning"})]}),e.jsx("p",{className:"text-yellow-500/80 text-sm mt-1",children:"This will immediately change the admin's password. They will need to use the new password to login."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-400 text-sm mb-1 block",children:"New Password"}),e.jsx("input",{type:"password",value:m,onChange:M=>h(M.target.value),className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-3 py-2 text-white",placeholder:"Enter new password (min 6 characters)",minLength:6})]})]}),e.jsxs("div",{className:"flex gap-3 p-5 border-t border-gray-700",children:[e.jsx("button",{onClick:()=>{j(!1),h("")},className:"flex-1 py-2 bg-dark-700 text-white rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:g,disabled:!m||m.length<6,className:"flex-1 py-2 bg-yellow-500 text-black rounded-lg font-medium hover:bg-yellow-600 disabled:opacity-50",children:"Reset Password"})]})]})})]})},Ro="http://localhost:5001/api",lN=()=>{var X,_;const[t,s]=o.useState(""),[r,a]=o.useState("all"),[n,l]=o.useState([]),[i,d]=o.useState({total:0,pending:0,approved:0,rejected:0}),[c,u]=o.useState(!0),[x,b]=o.useState(null),[f,T]=o.useState(!1),[w,j]=o.useState(""),[S,p]=o.useState(!1),[m,h]=o.useState(!1);o.useEffect(()=>{N()},[r]);const N=async()=>{try{const I=await(await fetch(`${Ro}/kyc/all?status=${r}`)).json();I.success&&(l(I.kycList||[]),d(I.stats||{total:0,pending:0,approved:0,rejected:0}))}catch(L){console.error("Error fetching KYC requests:",L)}u(!1)},C=async L=>{h(!0);try{const $=await(await fetch(`${Ro}/kyc/approve/${L}`,{method:"PUT",headers:{"Content-Type":"application/json"}})).json();$.success?(alert("KYC approved successfully"),N(),T(!1)):alert($.message||"Failed to approve KYC")}catch(I){console.error("Error approving KYC:",I),alert("Failed to approve KYC")}h(!1)},E=async()=>{if(x){h(!0);try{const I=await(await fetch(`${Ro}/kyc/reject/${x._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:w||"Documents not acceptable"})})).json();I.success?(alert("KYC rejected"),N(),p(!1),T(!1),j("")):alert(I.message||"Failed to reject KYC")}catch(L){console.error("Error rejecting KYC:",L),alert("Failed to reject KYC")}h(!1)}},P=async L=>{b(L),T(!0)},U=L=>(L==null?void 0:L.replace(/_/g," ").replace(/\b\w/g,I=>I.toUpperCase()))||"Unknown",K=L=>{switch(L){case"approved":return"bg-green-500/20 text-green-500";case"pending":return"bg-yellow-500/20 text-yellow-500";case"rejected":return"bg-red-500/20 text-red-500";default:return"bg-gray-500/20 text-gray-400"}},R=L=>{switch(L){case"approved":return e.jsx(qe,{size:14});case"pending":return e.jsx(Ht,{size:14});case"rejected":return e.jsx(ye,{size:14});default:return null}},le=n.filter(L=>{var y,O;const I=((y=L.user)==null?void 0:y.name)||"",$=((O=L.user)==null?void 0:O.email)||"";return I.toLowerCase().includes(t.toLowerCase())||$.toLowerCase().includes(t.toLowerCase())});return e.jsxs(qt,{title:"KYC Verification",subtitle:"Verify user identity documents",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ei,{size:18,className:"text-blue-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Total Submissions"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:i.total})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ht,{size:18,className:"text-yellow-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Pending Review"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:i.pending})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(qe,{size:18,className:"text-green-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Approved"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:i.approved})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ye,{size:18,className:"text-red-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Rejected"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:i.rejected})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 sm:p-5 border-b border-gray-800",children:[e.jsx("h2",{className:"text-white font-semibold text-lg",children:"KYC Requests"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(_t,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search users...",value:t,onChange:L=>s(L.target.value),className:"w-full sm:w-64 bg-dark-700 border border-gray-700 rounded-lg pl-10 pr-4 py-2 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600"})]}),e.jsxs("select",{value:r,onChange:L=>a(L.target.value),className:"bg-dark-700 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-gray-600",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"})]})]})]}),e.jsx("div",{className:"block lg:hidden p-4 space-y-3",children:c?e.jsx("div",{className:"text-center py-8 text-gray-400",children:"Loading..."}):le.length===0?e.jsx("div",{className:"text-center py-8 text-gray-400",children:"No KYC requests found"}):le.map(L=>{var I,$;return e.jsxs("div",{className:"bg-dark-700 rounded-xl p-4 border border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-full flex items-center justify-center",children:e.jsx(It,{size:18,className:"text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:((I=L.user)==null?void 0:I.name)||"Unknown"}),e.jsx("p",{className:"text-gray-500 text-sm",children:(($=L.user)==null?void 0:$.email)||"N/A"})]})]}),e.jsxs("span",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs ${K(L.status)}`,children:[R(L.status),L.status]})]}),e.jsxs("div",{className:"space-y-2 text-sm mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(Ps,{size:14}),e.jsx("span",{children:U(L.documentType)})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(wa,{size:14}),e.jsx("span",{children:new Date(L.submittedAt).toLocaleString()})]})]}),e.jsxs("div",{className:"flex gap-2 pt-3 border-t border-gray-600",children:[e.jsxs("button",{onClick:()=>P(L),className:"flex-1 flex items-center justify-center gap-1 py-2 bg-blue-500/20 text-blue-500 rounded-lg text-sm",children:[e.jsx(Qt,{size:14})," View"]}),L.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>C(L._id),className:"flex-1 flex items-center justify-center gap-1 py-2 bg-green-500/20 text-green-500 rounded-lg text-sm",children:[e.jsx(qe,{size:14})," Approve"]}),e.jsxs("button",{onClick:()=>{b(L),p(!0)},className:"flex-1 flex items-center justify-center gap-1 py-2 bg-red-500/20 text-red-500 rounded-lg text-sm",children:[e.jsx(ye,{size:14})," Reject"]})]})]})]},L._id)})}),e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"User"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Document Type"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Submitted"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Status"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:c?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"text-center py-8 text-gray-400",children:"Loading..."})}):le.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"text-center py-8 text-gray-400",children:"No KYC requests found"})}):le.map(L=>{var I,$;return e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-dark-700/50",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/20 rounded-full flex items-center justify-center",children:e.jsx(It,{size:18,className:"text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:((I=L.user)==null?void 0:I.name)||"Unknown"}),e.jsx("p",{className:"text-gray-500 text-sm",children:(($=L.user)==null?void 0:$.email)||"N/A"})]})]})}),e.jsx("td",{className:"py-4 px-4 text-white",children:U(L.documentType)}),e.jsx("td",{className:"py-4 px-4 text-gray-400",children:new Date(L.submittedAt).toLocaleString()}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("span",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs w-fit ${K(L.status)}`,children:[R(L.status),L.status]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>P(L),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-white",title:"View Documents",children:e.jsx(Qt,{size:16})}),L.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>C(L._id),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-green-500",title:"Approve",children:e.jsx(qe,{size:16})}),e.jsx("button",{onClick:()=>{b(L),p(!0)},className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-red-500",title:"Reject",children:e.jsx(ye,{size:16})})]})]})})]},L._id)})})]})})]}),f&&x&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-700 flex items-center justify-between",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"KYC Documents"}),e.jsx("button",{onClick:()=>T(!1),className:"p-2 hover:bg-dark-700 rounded-lg",children:e.jsx(ye,{size:20,className:"text-gray-400"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-full flex items-center justify-center",children:e.jsx(It,{size:24,className:"text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:((X=x.user)==null?void 0:X.name)||"Unknown"}),e.jsx("p",{className:"text-gray-400 text-sm",children:(_=x.user)==null?void 0:_.email})]}),e.jsx("span",{className:`ml-auto px-3 py-1 rounded-full text-sm ${K(x.status)}`,children:x.status})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Document Type"}),e.jsx("p",{className:"text-white",children:U(x.documentType)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Document Number"}),e.jsx("p",{className:"text-white",children:x.documentNumber})]})]}),e.jsxs("div",{className:"space-y-4",children:[x.frontImage&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"Front Side"}),e.jsx("img",{src:x.frontImage,alt:"Front",className:"max-w-full rounded-lg border border-gray-700"})]}),x.backImage&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"Back Side"}),e.jsx("img",{src:x.backImage,alt:"Back",className:"max-w-full rounded-lg border border-gray-700"})]}),x.selfieImage&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm mb-2",children:"Selfie with Document"}),e.jsx("img",{src:x.selfieImage,alt:"Selfie",className:"max-w-full rounded-lg border border-gray-700"})]})]}),x.status==="pending"&&e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-700",children:[e.jsx("button",{onClick:()=>C(x._id),disabled:m,className:"flex-1 py-3 bg-green-500 text-white font-medium rounded-lg hover:bg-green-600 disabled:opacity-50",children:m?"Processing...":"Approve KYC"}),e.jsx("button",{onClick:()=>p(!0),disabled:m,className:"flex-1 py-3 bg-red-500 text-white font-medium rounded-lg hover:bg-red-600 disabled:opacity-50",children:"Reject KYC"})]})]})]})}),S&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl max-w-md w-full",children:[e.jsx("div",{className:"p-6 border-b border-gray-700",children:e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Reject KYC"})}),e.jsxs("div",{className:"p-6",children:[e.jsx("label",{className:"text-gray-400 text-sm mb-2 block",children:"Rejection Reason"}),e.jsx("textarea",{value:w,onChange:L=>j(L.target.value),placeholder:"Enter reason for rejection...",rows:3,className:"w-full bg-dark-700 border border-gray-600 rounded-lg px-4 py-3 text-white resize-none"}),e.jsxs("div",{className:"flex gap-3 mt-4",children:[e.jsx("button",{onClick:()=>{p(!1),j("")},className:"flex-1 py-3 bg-dark-700 text-white rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:E,disabled:m,className:"flex-1 py-3 bg-red-500 text-white font-medium rounded-lg hover:bg-red-600 disabled:opacity-50",children:m?"Rejecting...":"Reject"})]})]})]})})]})},wn="http://localhost:5001/api",iN=()=>{var R,le,X;const[t,s]=o.useState(""),[r,a]=o.useState("all"),[n,l]=o.useState(null),[i,d]=o.useState([]),[c,u]=o.useState({total:0,open:0,inProgress:0,resolved:0}),[x,b]=o.useState(!0),[f,T]=o.useState(""),[w,j]=o.useState(!1),S=JSON.parse(localStorage.getItem("adminUser")||"{}");o.useEffect(()=>{p(),m()},[r]);const p=async()=>{try{const _=r!=="all"?`?status=${r.toUpperCase()}`:"",I=await(await fetch(`${wn}/support/admin/all${_}`)).json();d(I.tickets||[])}catch(_){console.error("Error fetching tickets:",_)}b(!1)},m=async()=>{try{const L=await(await fetch(`${wn}/support/admin/stats`)).json();L.stats&&u(L.stats)}catch(_){console.error("Error fetching stats:",_)}},h=async _=>{try{const I=await(await fetch(`${wn}/support/ticket/${_}`)).json();I.success&&l(I.ticket)}catch(L){console.error("Error fetching ticket:",L)}},N=async()=>{var _;if(!(!f.trim()||!n)){j(!0);try{const I=await(await fetch(`${wn}/support/reply/${n.ticketId}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({senderId:((_=n.userId)==null?void 0:_._id)||n.userId,senderType:"ADMIN",senderName:(S==null?void 0:S.username)||(S==null?void 0:S.email)||"Support Team",message:f})})).json();I.success?(l(I.ticket),T(""),p()):alert(I.message||"Failed to send reply")}catch(L){console.error("Error sending reply:",L),alert("Failed to send reply")}j(!1)}},C=async(_,L)=>{try{const $=await(await fetch(`${wn}/support/admin/status/${_}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:L})})).json();$.success&&(p(),m(),(n==null?void 0:n.ticketId)===_&&l($.ticket))}catch(I){console.error("Error updating status:",I)}},E=_=>{switch(_){case"OPEN":return"bg-red-500/20 text-red-500";case"IN_PROGRESS":return"bg-yellow-500/20 text-yellow-500";case"WAITING_USER":return"bg-orange-500/20 text-orange-500";case"RESOLVED":return"bg-green-500/20 text-green-500";case"CLOSED":return"bg-gray-500/20 text-gray-400";default:return"bg-gray-500/20 text-gray-400"}},P=_=>{switch(_){case"URGENT":return"bg-red-500/20 text-red-500";case"HIGH":return"bg-orange-500/20 text-orange-500";case"MEDIUM":return"bg-yellow-500/20 text-yellow-500";case"LOW":return"bg-blue-500/20 text-blue-500";default:return"bg-gray-500/20 text-gray-400"}},U=_=>{switch(_){case"OPEN":return e.jsx(wr,{size:14});case"IN_PROGRESS":return e.jsx(Ht,{size:14});case"WAITING_USER":return e.jsx(Ht,{size:14});case"RESOLVED":return e.jsx(xs,{size:14});case"CLOSED":return e.jsx(xs,{size:14});default:return null}},K=i.filter(_=>{var H,y;const L=((H=_.userId)==null?void 0:H.firstName)||"",I=((y=_.userId)==null?void 0:y.email)||"";return L.toLowerCase().includes(t.toLowerCase())||_.subject.toLowerCase().includes(t.toLowerCase())||_.ticketId.toLowerCase().includes(t.toLowerCase())||I.toLowerCase().includes(t.toLowerCase())});return e.jsxs(qt,{title:"Support Tickets",subtitle:"Manage customer support requests",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Y0,{size:18,className:"text-blue-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Total Tickets"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:c.total})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(wr,{size:18,className:"text-red-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Open"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:c.open})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ht,{size:18,className:"text-yellow-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"In Progress"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:c.inProgress})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-5 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(xs,{size:18,className:"text-green-500"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Resolved"})]}),e.jsx("p",{className:"text-white text-2xl font-bold",children:c.resolved})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-4 sm:p-5 border-b border-gray-800",children:[e.jsx("h2",{className:"text-white font-semibold text-lg",children:"Support Tickets"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(_t,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search tickets...",value:t,onChange:_=>s(_.target.value),className:"w-full sm:w-64 bg-dark-700 border border-gray-700 rounded-lg pl-10 pr-4 py-2 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600"})]}),e.jsxs("select",{value:r,onChange:_=>a(_.target.value),className:"bg-dark-700 border border-gray-700 rounded-lg px-4 py-2 text-white focus:outline-none focus:border-gray-600",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"OPEN",children:"Open"}),e.jsx("option",{value:"IN_PROGRESS",children:"In Progress"}),e.jsx("option",{value:"WAITING_USER",children:"Waiting User"}),e.jsx("option",{value:"RESOLVED",children:"Resolved"}),e.jsx("option",{value:"CLOSED",children:"Closed"})]})]})]}),e.jsx("div",{className:"block lg:hidden p-4 space-y-3",children:K.map(_=>{var L,I;return e.jsxs("div",{className:"bg-dark-700 rounded-xl p-4 border border-gray-700",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-gray-500 text-sm font-mono",children:_.ticketId}),e.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${P(_.priority)}`,children:_.priority})]}),e.jsx("p",{className:"text-white font-medium",children:_.subject})]}),e.jsxs("span",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs ${E(_.status)}`,children:[U(_.status),_.status.replace("_"," ")]})]}),e.jsxs("div",{className:"space-y-2 text-sm mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(It,{size:14}),e.jsx("span",{children:((L=_.userId)==null?void 0:L.firstName)||"Unknown"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(wa,{size:14}),e.jsx("span",{children:new Date(_.createdAt).toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(yb,{size:14}),e.jsxs("span",{children:[((I=_.messages)==null?void 0:I.length)||0," messages"]})]})]}),e.jsx("div",{className:"flex gap-2 pt-3 border-t border-gray-600",children:e.jsxs("button",{onClick:()=>h(_.ticketId),className:"flex-1 flex items-center justify-center gap-1 py-2 bg-blue-500/20 text-blue-500 rounded-lg text-sm",children:[e.jsx(Qt,{size:14})," View"]})})]},_._id)})}),e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-700",children:[e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Ticket ID"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"User"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Subject"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Priority"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Status"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Created"}),e.jsx("th",{className:"text-left text-gray-500 text-sm font-medium py-3 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:K.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"py-8 text-center text-gray-500",children:x?"Loading tickets...":"No tickets found"})}):K.map(_=>{var L,I,$;return e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-dark-700/50 cursor-pointer",onClick:()=>h(_.ticketId),children:[e.jsx("td",{className:"py-4 px-4 text-white font-mono text-sm",children:_.ticketId}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:((L=_.userId)==null?void 0:L.firstName)||"Unknown"}),e.jsx("p",{className:"text-gray-500 text-sm",children:((I=_.userId)==null?void 0:I.email)||""})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-white",children:_.subject}),e.jsxs("span",{className:"text-gray-500 text-sm",children:["(",(($=_.messages)==null?void 0:$.length)||0,")"]})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs ${P(_.priority)}`,children:_.priority})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("span",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs w-fit ${E(_.status)}`,children:[U(_.status),_.status.replace("_"," ")]})}),e.jsx("td",{className:"py-4 px-4 text-gray-400",children:new Date(_.createdAt).toLocaleString()}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center gap-1",onClick:H=>H.stopPropagation(),children:[e.jsx("button",{onClick:()=>h(_.ticketId),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-white",title:"View Ticket",children:e.jsx(Qt,{size:16})}),_.status!=="RESOLVED"&&_.status!=="CLOSED"&&e.jsx("button",{onClick:()=>C(_.ticketId,"RESOLVED"),className:"p-2 hover:bg-dark-600 rounded-lg transition-colors text-gray-400 hover:text-green-500",title:"Mark Resolved",children:e.jsx(xs,{size:16})})]})})]},_._id)})})]})})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl w-full max-w-3xl max-h-[85vh] flex flex-col border border-gray-700",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:n.subject}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["#",n.ticketId,"  ",(R=n.userId)==null?void 0:R.firstName," (",(le=n.userId)==null?void 0:le.email,")"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:n.status,onChange:_=>C(n.ticketId,_.target.value),className:`px-2 py-1 rounded text-xs border-0 ${E(n.status)}`,children:[e.jsx("option",{value:"OPEN",children:"Open"}),e.jsx("option",{value:"IN_PROGRESS",children:"In Progress"}),e.jsx("option",{value:"WAITING_USER",children:"Waiting User"}),e.jsx("option",{value:"RESOLVED",children:"Resolved"}),e.jsx("option",{value:"CLOSED",children:"Closed"})]}),e.jsx("button",{onClick:()=>l(null),className:"text-gray-400 hover:text-white",children:e.jsx(ye,{size:20})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:(X=n.messages)==null?void 0:X.map((_,L)=>e.jsx("div",{className:`flex ${_.sender==="ADMIN"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${_.sender==="ADMIN"?"bg-red-500/20 text-white":"bg-dark-700 text-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`text-xs font-medium ${_.sender==="ADMIN"?"text-red-400":"text-blue-400"}`,children:_.sender==="ADMIN"?"Support":_.senderName||"User"}),e.jsx("span",{className:"text-gray-500 text-xs",children:new Date(_.createdAt).toLocaleString()})]}),e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:_.message})]})},L))}),n.status!=="CLOSED"&&e.jsx("div",{className:"p-4 border-t border-gray-700",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:f,onChange:_=>T(_.target.value),placeholder:"Type your reply...",className:"flex-1 bg-dark-700 border border-gray-600 rounded-lg px-4 py-2 text-white placeholder-gray-500",onKeyPress:_=>_.key==="Enter"&&N()}),e.jsxs("button",{onClick:N,disabled:w||!f.trim(),className:"bg-red-500 text-white px-4 py-2 rounded-lg font-medium hover:bg-red-600 disabled:opacity-50 flex items-center gap-2",children:[e.jsx(Di,{size:16}),w?"Sending...":"Send"]})]})})]})})]})},Oo="http://localhost:5001/api";function oN(){var L,I,$,H,y,O,g,v,W,Z,B,M,te,ae,pe;const t=ut(),[s,r]=o.useState([]),[a,n]=o.useState(!0),[l,i]=o.useState(!1),[d,c]=o.useState({}),[u,x]=o.useState(!1),[b,f]=o.useState(""),[T,w]=o.useState(!1),[j,S]=o.useState(!1),[p,m]=o.useState(null),[h,N]=o.useState(null),[C,E]=o.useState(null),P=JSON.parse(localStorage.getItem("user")||"{}");o.useEffect(()=>{U(),K()},[]);const U=async()=>{try{const re=await(await fetch(`${Oo}/prop/challenges`)).json();re.success&&(r(re.challenges||[]),i(re.enabled))}catch(Y){console.error("Error fetching challenges:",Y)}n(!1)},K=async()=>{try{const re=await(await fetch(`${Oo}/prop/status`)).json();re.success&&c(re)}catch(Y){console.error("Error fetching settings:",Y)}},R=[...new Set(s.map(Y=>Y.stepsCount))].sort(),le=p!==null?[...new Set(s.filter(Y=>Y.stepsCount===p).map(Y=>Y.fundSize))].sort((Y,re)=>Y-re):[];o.useEffect(()=>{if(p!==null&&h!==null){const Y=s.find(re=>re.stepsCount===p&&re.fundSize===h);E(Y||null)}else E(null)},[p,h,s]);const X=async()=>{if(!P._id){alert("Please login to buy a challenge");return}if(!C){alert("Please select a challenge");return}if(!T){alert("Please agree to the terms and conditions");return}x(!0);try{const re=await(await fetch(`${Oo}/prop/buy`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:P._id,challengeId:C._id,paymentId:`PAY${Date.now()}`,couponCode:b||void 0})})).json();re.success?(alert("Challenge purchased successfully!"),t("/account")):alert(re.message||"Failed to purchase challenge")}catch(Y){console.error("Error buying challenge:",Y),alert("Error purchasing challenge")}x(!1)},_=Y=>Y===0?"Instant Fund":Y===1?"One Step":"Two Step";return a?e.jsx("div",{className:"min-h-screen bg-dark-900 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-accent-green"})}):l?e.jsxs("div",{className:"min-h-screen bg-dark-900",children:[e.jsx("div",{className:"bg-dark-800 border-b border-gray-800 px-4 py-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto flex items-center gap-4",children:[e.jsx("button",{onClick:()=>t("/dashboard"),className:"text-gray-400 hover:text-white",children:e.jsx(ea,{size:24})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(At,{size:28,className:"text-accent-green"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-white",children:"New Challenge"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Choose the type of challenge you want to take"})]})]})]})}),e.jsxs("div",{className:"max-w-6xl mx-auto p-4 lg:p-8",children:[e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800",children:[e.jsx("h2",{className:"text-white font-semibold mb-2",children:"Challenge Type"}),e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"Choose the type of challenge you want to take"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:R.map(Y=>e.jsx("button",{onClick:()=>{m(Y),N(null)},className:`p-4 rounded-xl border-2 transition-all ${p===Y?"border-accent-green bg-accent-green/10":"border-gray-700 hover:border-gray-600"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${p===Y?"bg-accent-green":"bg-gray-600"}`}),e.jsx("span",{className:"text-white font-medium",children:_(Y)})]})},Y))})]}),p!==null&&e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800",children:[e.jsx("h2",{className:"text-white font-semibold mb-2",children:"Account Size"}),e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"Choose your preferred account size"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:le.map(Y=>e.jsx("button",{onClick:()=>N(Y),className:`p-4 rounded-xl border-2 transition-all ${h===Y?"border-accent-green bg-accent-green/10":"border-gray-700 hover:border-gray-600"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${h===Y?"bg-accent-green":"bg-gray-600"}`}),e.jsxs("span",{className:"text-white font-medium",children:["$",Y.toLocaleString()]})]})},Y))})]}),C&&e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-accent-green/20 rounded-lg flex items-center justify-center",children:e.jsx(Ps,{size:20,className:"text-accent-green"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-white font-semibold",children:"Trading Rules"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Challenge parameters you must follow"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Daily Drawdown"}),e.jsxs("p",{className:"text-red-500 font-bold text-lg",children:[((L=C.rules)==null?void 0:L.maxDailyDrawdownPercent)||5,"%"]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Max Drawdown"}),e.jsxs("p",{className:"text-red-500 font-bold text-lg",children:[((I=C.rules)==null?void 0:I.maxOverallDrawdownPercent)||10,"%"]})]}),C.stepsCount>0&&e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Profit Target"}),e.jsxs("p",{className:"text-green-500 font-bold text-lg",children:[(($=C.rules)==null?void 0:$.profitTargetPhase1Percent)||8,"%"]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Time Limit"}),e.jsxs("p",{className:"text-white font-bold text-lg",children:[((H=C.rules)==null?void 0:H.challengeExpiryDays)||30," days"]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Min Lot Size"}),e.jsx("p",{className:"text-white font-bold text-lg",children:((y=C.rules)==null?void 0:y.minLotSize)||.01})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Max Lot Size"}),e.jsx("p",{className:"text-white font-bold text-lg",children:((O=C.rules)==null?void 0:O.maxLotSize)||100})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Max Leverage"}),e.jsxs("p",{className:"text-white font-bold text-lg",children:["1:",((g=C.rules)==null?void 0:g.maxLeverage)||100]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Profit Split"}),e.jsxs("p",{className:"text-accent-green font-bold text-lg",children:[((v=C.fundedSettings)==null?void 0:v.profitSplitPercent)||80,"%"]})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-lg ${(W=C.rules)!=null&&W.stopLossMandatory?"bg-yellow-500/10 text-yellow-500":"bg-dark-700 text-gray-400"}`,children:[(Z=C.rules)!=null&&Z.stopLossMandatory?e.jsx(qe,{size:16}):e.jsx(ye,{size:16}),e.jsx("span",{className:"text-sm",children:"Stop Loss Required"})]}),e.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-lg ${(B=C.rules)!=null&&B.allowWeekendHolding?"bg-green-500/10 text-green-500":"bg-red-500/10 text-red-500"}`,children:[(M=C.rules)!=null&&M.allowWeekendHolding?e.jsx(qe,{size:16}):e.jsx(ye,{size:16}),e.jsx("span",{className:"text-sm",children:"Weekend Holding"})]}),e.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-lg ${(te=C.rules)!=null&&te.allowNewsTrading?"bg-green-500/10 text-green-500":"bg-red-500/10 text-red-500"}`,children:[(ae=C.rules)!=null&&ae.allowNewsTrading?e.jsx(qe,{size:16}):e.jsx(ye,{size:16}),e.jsx("span",{className:"text-sm",children:"News Trading"})]}),((pe=C.rules)==null?void 0:pe.minTradeHoldTimeSeconds)>0&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-yellow-500/10 text-yellow-500",children:[e.jsx(Ht,{size:16}),e.jsxs("span",{className:"text-sm",children:["Min Hold: ",C.rules.minTradeHoldTimeSeconds,"s"]})]})]})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 sticky top-4",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800",children:[e.jsx("h3",{className:"text-white font-semibold mb-2",children:"Coupon Code"}),e.jsx("p",{className:"text-gray-500 text-sm mb-3",children:"Enter a coupon code to get a discount"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:b,onChange:Y=>f(Y.target.value),placeholder:"Enter coupon code",className:"flex-1 bg-dark-700 border border-gray-700 rounded-lg px-4 py-2 text-white placeholder-gray-500"}),e.jsx("button",{className:"px-4 py-2 bg-dark-700 text-gray-400 rounded-lg hover:text-white",children:"Apply"})]})]}),e.jsxs("div",{className:"p-6 border-b border-gray-800",children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"Order Summary"}),C?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-white font-medium",children:["$",C.fundSize.toLocaleString(),"  ",_(C.stepsCount)]}),e.jsx("p",{className:"text-gray-500 text-sm",children:C.name})]}),e.jsxs("p",{className:"text-white font-bold",children:["$",C.challengeFee.toLocaleString()]})]}),e.jsxs("div",{className:"pt-3 border-t border-gray-700 flex justify-between",children:[e.jsx("span",{className:"text-white font-semibold",children:"Total"}),e.jsxs("span",{className:"text-2xl font-bold text-white",children:["$",C.challengeFee.toLocaleString()]})]})]}):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"Select a challenge type and account size"})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer mb-4",children:[e.jsx("input",{type:"checkbox",checked:T,onChange:Y=>w(Y.target.checked),className:"w-5 h-5 mt-0.5 rounded bg-dark-700 border-gray-600 text-accent-green"}),e.jsxs("span",{className:"text-gray-400 text-sm",children:["I agree with all the following terms:",e.jsxs("ul",{className:"mt-2 space-y-1 text-gray-500",children:[e.jsxs("li",{children:[" I have read and agreed to the ",e.jsx("button",{onClick:()=>S(!0),className:"text-accent-green hover:underline",children:"Terms of Use"})]}),e.jsx("li",{children:" All information provided is correct"}),e.jsxs("li",{children:[" I have read and agree with the ",e.jsx("button",{onClick:()=>S(!0),className:"text-accent-green hover:underline",children:"Terms & Conditions"})]}),e.jsx("li",{children:" I understand the trading rules and risks"})]})]})]}),e.jsxs("button",{onClick:X,disabled:!C||!T||u,className:"w-full py-4 bg-accent-green text-black font-bold rounded-xl transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[u?"Processing...":"Continue to Payment",e.jsx(gr,{size:20})]})]})]})})]}),e.jsxs("div",{className:"mt-8 bg-dark-800 rounded-xl p-6 border border-gray-800",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-6 text-center",children:"How It Works"}),e.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:[{step:1,title:"Buy Challenge",desc:"Choose your account size and pay the one-time fee."},{step:2,title:"Pass Evaluation",desc:"Trade within the rules and hit your profit target."},{step:3,title:"Get Funded",desc:"Receive your funded account and start earning."}].map(Y=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-accent-green/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-accent-green font-bold text-lg",children:Y.step})}),e.jsx("h3",{className:"text-white font-bold mb-2",children:Y.title}),e.jsx("p",{className:"text-gray-400 text-sm",children:Y.desc})]},Y.step))})]}),e.jsxs("div",{className:"mt-6 bg-yellow-500/10 border border-yellow-500/30 rounded-xl p-4 flex items-start gap-3",children:[e.jsx(Xi,{size:20,className:"text-yellow-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-500 font-medium",children:"Important Rules"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Breaking any rule will result in immediate account failure. All trades must follow the challenge rules. Make sure to review all trading parameters before starting."})]})]})]}),j&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-2xl w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-800 flex items-center justify-between sticky top-0 bg-dark-800",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Terms & Conditions"}),e.jsx("button",{onClick:()=>S(!1),className:"text-gray-400 hover:text-white",children:e.jsx(ye,{size:24})})]}),e.jsxs("div",{className:"p-6 text-gray-400 space-y-4",children:[e.jsx("h3",{className:"text-white font-semibold",children:"Challenge Rules"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[e.jsx("li",{children:"You must not exceed the maximum daily drawdown limit"}),e.jsx("li",{children:"You must not exceed the maximum overall drawdown limit"}),e.jsx("li",{children:"All trades must have a stop loss if required by the challenge"}),e.jsx("li",{children:"You must reach the profit target within the time limit"}),e.jsx("li",{children:"Lot sizes must be within the specified range"}),e.jsx("li",{children:"Weekend holding rules must be followed"}),e.jsx("li",{children:"News trading restrictions apply if specified"})]}),e.jsx("h3",{className:"text-white font-semibold mt-6",children:"Account Termination"}),e.jsx("p",{children:"Your challenge account will be terminated if you break any of the above rules. No refunds will be provided for terminated accounts."}),e.jsx("h3",{className:"text-white font-semibold mt-6",children:"Funded Account"}),e.jsx("p",{children:"Upon successfully completing the challenge, you will receive a funded account with the specified profit split. Withdrawals are subject to the withdrawal frequency rules."})]}),e.jsx("div",{className:"p-6 border-t border-gray-800",children:e.jsx("button",{onClick:()=>{w(!0),S(!1)},className:"w-full py-3 bg-accent-green text-black font-medium rounded-lg",children:"I Agree to Terms"})})]})})]}):e.jsx("div",{className:"min-h-screen bg-dark-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(At,{size:64,className:"text-gray-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Challenges Coming Soon"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Prop trading challenges are not available at the moment."}),e.jsx("button",{onClick:()=>t("/dashboard"),className:"px-6 py-3 bg-accent-green text-black font-medium rounded-lg",children:"Back to Dashboard"})]})})}const gm="http://localhost:5001/api";function cN(){var w,j,S,p,m;const t=ut(),[s,r]=o.useState([]),[a,n]=o.useState(null),[l,i]=o.useState(null),[d,c]=o.useState(!0),u=JSON.parse(localStorage.getItem("user")||"{}");o.useEffect(()=>{u._id&&x()},[u._id]),o.useEffect(()=>{a&&b(a._id)},[a]);const x=async()=>{try{const N=await(await fetch(`${gm}/prop/my-accounts/${u._id}`)).json();N.success&&N.accounts.length>0&&(r(N.accounts),n(N.accounts[0]))}catch(h){console.error("Error fetching accounts:",h)}c(!1)},b=async h=>{try{const C=await(await fetch(`${gm}/prop/account/${h}`)).json();C.success&&i(C)}catch(N){console.error("Error fetching dashboard:",N)}},f=h=>{switch(h){case"ACTIVE":return"bg-blue-500/20 text-blue-500";case"PASSED":return"bg-green-500/20 text-green-500";case"FUNDED":return"bg-purple-500/20 text-purple-500";case"FAILED":return"bg-red-500/20 text-red-500";case"EXPIRED":return"bg-gray-500/20 text-gray-500";default:return"bg-gray-500/20 text-gray-500"}},T=h=>{switch(h){case"ACTIVE":return Ci;case"PASSED":return xs;case"FUNDED":return At;case"FAILED":return yr;case"EXPIRED":return Ht;default:return wr}};return d?e.jsx("div",{className:"min-h-screen bg-dark-900 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"})}):s.length===0?e.jsx("div",{className:"min-h-screen bg-dark-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(At,{size:64,className:"text-gray-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"No Challenge Accounts"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"You haven't purchased any challenges yet."}),e.jsx("button",{onClick:()=>t("/buy-challenge"),className:"px-6 py-3 bg-primary-500 hover:bg-primary-600 text-white font-bold rounded-xl transition-colors",children:"Buy Challenge"})]})}):e.jsx("div",{className:"min-h-screen bg-dark-900 p-4 lg:p-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Challenge Dashboard"}),e.jsx("p",{className:"text-gray-400",children:"Monitor your prop trading progress"})]}),e.jsxs("button",{onClick:()=>t("/buy-challenge"),className:"px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white font-medium rounded-lg transition-colors flex items-center gap-2",children:[e.jsx(At,{size:18}),"New Challenge"]})]}),s.length>1&&e.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:s.map(h=>{const N=T(h.status);return e.jsxs("button",{onClick:()=>n(h),className:`flex items-center gap-2 px-4 py-2 rounded-lg whitespace-nowrap transition-colors ${(a==null?void 0:a._id)===h._id?"bg-primary-500 text-white":"bg-dark-800 text-gray-400 hover:bg-dark-700"}`,children:[e.jsx(N,{size:16}),h.accountId]},h._id)})}),l&&e.jsxs(e.Fragment,{children:[l.account.status==="FAILED"&&e.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-xl p-4 mb-6 flex items-center gap-3",children:[e.jsx(yr,{size:24,className:"text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-500 font-bold",children:"Challenge Failed"}),e.jsx("p",{className:"text-gray-400 text-sm",children:((j=(w=l.violations)==null?void 0:w.find(h=>h.severity==="FAIL"))==null?void 0:j.description)||"Rule violation detected"})]})]}),l.account.status==="PASSED"&&e.jsxs("div",{className:"bg-green-500/10 border border-green-500/30 rounded-xl p-4 mb-6 flex items-center gap-3",children:[e.jsx(xs,{size:24,className:"text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-green-500 font-bold",children:"Challenge Passed!"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Congratulations! Your funded account is being prepared."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:[e.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Equity"}),e.jsxs("p",{className:"text-2xl font-bold text-white",children:["$",l.balance.equity.toLocaleString()]}),e.jsxs("p",{className:`text-sm ${l.balance.profitLoss>=0?"text-green-500":"text-red-500"}`,children:[l.balance.profitLoss>=0?"+":"","$",l.balance.profitLoss.toFixed(2)]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:[e.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Phase"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:l.account.totalPhases===0?"Funded":`${l.account.currentPhase}/${l.account.totalPhases}`}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${f(l.account.status)}`,children:l.account.status})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:[e.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Days Left"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:l.time.remainingDays}),e.jsxs("p",{className:"text-gray-500 text-sm",children:["of ",l.challenge.stepsCount===0?"":"30"," days"]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:[e.jsx("p",{className:"text-gray-400 text-sm mb-1",children:"Trading Days"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:l.trades.tradingDays}),e.jsx("p",{className:"text-gray-500 text-sm",children:l.trades.requiredDays?`min ${l.trades.requiredDays} required`:"No minimum"})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(kr,{size:20,className:"text-red-500"}),"Drawdown Limits"]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-gray-400",children:"Daily Drawdown"}),e.jsxs("span",{className:"text-white",children:[l.drawdown.dailyUsed.toFixed(2),"% / ",l.drawdown.dailyMax,"%"]})]}),e.jsx("div",{className:"h-3 bg-dark-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all ${l.drawdown.dailyUsed>=l.drawdown.dailyMax*.8?"bg-red-500":l.drawdown.dailyUsed>=l.drawdown.dailyMax*.5?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(100,l.drawdown.dailyUsed/l.drawdown.dailyMax*100)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[l.drawdown.dailyRemaining.toFixed(2),"% remaining"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-gray-400",children:"Overall Drawdown"}),e.jsxs("span",{className:"text-white",children:[l.drawdown.overallUsed.toFixed(2),"% / ",l.drawdown.overallMax,"%"]})]}),e.jsx("div",{className:"h-3 bg-dark-700 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all ${l.drawdown.overallUsed>=l.drawdown.overallMax*.8?"bg-red-500":l.drawdown.overallUsed>=l.drawdown.overallMax*.5?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(100,l.drawdown.overallUsed/l.drawdown.overallMax*100)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[l.drawdown.overallRemaining.toFixed(2),"% remaining"]})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(vb,{size:20,className:"text-green-500"}),"Profit Target"]}),l.profit.targetPercent>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-gray-400",children:"Progress"}),e.jsxs("span",{className:"text-white",children:[l.profit.currentPercent.toFixed(2),"% / ",l.profit.targetPercent,"%"]})]}),e.jsx("div",{className:"h-3 bg-dark-700 rounded-full overflow-hidden mb-2",children:e.jsx("div",{className:"h-full bg-green-500 rounded-full transition-all",style:{width:`${Math.min(100,l.profit.targetProgress)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500",children:["$",Math.max(0,l.profit.amountToTarget).toFixed(2)," to target"]}),e.jsxs("div",{className:"mt-4 p-3 bg-dark-700 rounded-lg",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Target Amount"}),e.jsxs("p",{className:"text-xl font-bold text-green-500",children:["$",(l.profit.targetPercent/100*l.balance.initial).toLocaleString()]})]})]}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx(At,{size:32,className:"text-purple-500 mx-auto mb-2"}),e.jsx("p",{className:"text-white font-medium",children:"Instant Funded Account"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"No profit target - just follow the rules"})]})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800 mb-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(Yd,{size:20,className:"text-primary-500"}),"Trade Limits"]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Trades Today"}),e.jsxs("p",{className:"text-xl font-bold text-white",children:[l.trades.today,l.trades.maxPerDay&&e.jsxs("span",{className:"text-gray-500",children:["/",l.trades.maxPerDay]})]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Open Trades"}),e.jsxs("p",{className:"text-xl font-bold text-white",children:[l.trades.openCount,l.trades.maxConcurrent&&e.jsxs("span",{className:"text-gray-500",children:["/",l.trades.maxConcurrent]})]})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Total Trades"}),e.jsx("p",{className:"text-xl font-bold text-white",children:l.trades.total})]}),e.jsxs("div",{className:"bg-dark-700 rounded-lg p-3",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Min Hold Time"}),e.jsx("p",{className:"text-xl font-bold text-white",children:l.rules.minHoldTimeSeconds>0?`${l.rules.minHoldTimeSeconds}s`:"None"})]})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Active Rules"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${l.rules.stopLossMandatory?"bg-red-500/20":"bg-gray-700"}`,children:e.jsx(kr,{size:16,className:l.rules.stopLossMandatory?"text-red-500":"text-gray-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-sm",children:"Stop Loss Mandatory"}),e.jsx("p",{className:"text-gray-500 text-xs",children:l.rules.stopLossMandatory?"Required on all trades":"Not required"})]})]}),((S=l.rules.allowedSymbols)==null?void 0:S.length)>0&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500/20 flex items-center justify-center",children:e.jsx(Ci,{size:16,className:"text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-sm",children:"Allowed Symbols"}),e.jsx("p",{className:"text-gray-500 text-xs",children:l.rules.allowedSymbols.join(", ")})]})]})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(Xi,{size:20,className:"text-yellow-500"}),"Violations (",((p=l.violations)==null?void 0:p.length)||0,")"]}),((m=l.violations)==null?void 0:m.length)>0?e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:l.violations.map((h,N)=>e.jsxs("div",{className:`p-3 rounded-lg ${h.severity==="FAIL"?"bg-red-500/10 border border-red-500/30":"bg-yellow-500/10 border border-yellow-500/30"}`,children:[e.jsx("p",{className:`text-sm font-medium ${h.severity==="FAIL"?"text-red-500":"text-yellow-500"}`,children:h.rule}),e.jsx("p",{className:"text-gray-400 text-xs",children:h.description})]},N))}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx(xs,{size:32,className:"text-green-500 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-400",children:"No violations - keep it up!"})]})]})]}),l.account.status==="ACTIVE"&&e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:()=>t("/trading"),className:"w-full py-4 bg-primary-500 hover:bg-primary-600 text-white font-bold rounded-xl transition-colors flex items-center justify-center gap-2",children:[e.jsx(mt,{size:20}),"Start Trading"]})})]})]})})}const _s="http://localhost:5001/api";function dN(){const[t,s]=o.useState("dashboard"),[r,a]=o.useState(null),[n,l]=o.useState([]),[i,d]=o.useState([]),[c,u]=o.useState(null),[x,b]=o.useState(!0),[f,T]=o.useState(!1),[w,j]=o.useState(null),[S,p]=o.useState(""),[m,h]=o.useState("all");o.useEffect(()=>{N()},[]);const N=async()=>{b(!0),await Promise.all([C(),E(),P(),U()]),b(!1)},C=async()=>{try{const H=await(await fetch(`${_s}/prop/admin/settings`)).json();H.success&&a(H.settings)}catch($){console.error("Error fetching settings:",$)}},E=async()=>{try{const H=await(await fetch(`${_s}/prop/admin/challenges`)).json();H.success&&l(H.challenges||[])}catch($){console.error("Error fetching challenges:",$)}},P=async()=>{try{const H=await(await fetch(`${_s}/prop/admin/accounts?limit=100`)).json();H.success&&d(H.accounts||[])}catch($){console.error("Error fetching accounts:",$)}},U=async()=>{try{const H=await(await fetch(`${_s}/prop/admin/dashboard`)).json();H.success&&u(H.stats)}catch($){console.error("Error fetching stats:",$)}},K=async()=>{try{const H=await(await fetch(`${_s}/prop/admin/settings`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({challengeModeEnabled:!(r!=null&&r.challengeModeEnabled)})})).json();H.success&&(a(H.settings),U())}catch($){console.error("Error toggling challenge mode:",$)}},R=async $=>{if(confirm("Are you sure you want to force pass this challenge?"))try{(await(await fetch(`${_s}/prop/admin/force-pass/${$}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:"admin"})})).json()).success&&(alert("Challenge force passed!"),P(),U())}catch(H){console.error("Error:",H)}},le=async $=>{const H=prompt("Enter reason for failing this challenge:");if(H)try{(await(await fetch(`${_s}/prop/admin/force-fail/${$}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:"admin",reason:H})})).json()).success&&(alert("Challenge force failed!"),P(),U())}catch(y){console.error("Error:",y)}},X=async $=>{const H=prompt("Enter number of days to extend:");if(!(!H||isNaN(H)))try{(await(await fetch(`${_s}/prop/admin/extend-time/${$}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:"admin",days:parseInt(H)})})).json()).success&&(alert(`Extended by ${H} days!`),P())}catch(y){console.error("Error:",y)}},_=async $=>{if(confirm("Are you sure you want to reset this challenge? All progress will be lost."))try{(await(await fetch(`${_s}/prop/admin/reset/${$}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adminId:"admin"})})).json()).success&&(alert("Challenge reset!"),P(),U())}catch(H){console.error("Error:",H)}},L=$=>{switch($){case"ACTIVE":return"bg-blue-500/20 text-blue-500";case"PASSED":return"bg-green-500/20 text-green-500";case"FUNDED":return"bg-purple-500/20 text-purple-500";case"FAILED":return"bg-red-500/20 text-red-500";case"EXPIRED":return"bg-gray-500/20 text-gray-500";default:return"bg-gray-500/20 text-gray-500"}},I=i.filter($=>{var O,g,v,W,Z;const H=((O=$.accountId)==null?void 0:O.toLowerCase().includes(S.toLowerCase()))||((v=(g=$.userId)==null?void 0:g.firstName)==null?void 0:v.toLowerCase().includes(S.toLowerCase()))||((Z=(W=$.userId)==null?void 0:W.email)==null?void 0:Z.toLowerCase().includes(S.toLowerCase())),y=m==="all"||$.status===m;return H&&y});return x?e.jsx("div",{className:"min-h-screen bg-dark-900 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"})}):e.jsx("div",{className:"min-h-screen bg-dark-900 p-4 lg:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx(At,{className:"text-primary-500"}),"Prop Trading Management"]}),e.jsx("p",{className:"text-gray-400",children:"Manage challenges and funded accounts"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:K,className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ${r!=null&&r.challengeModeEnabled?"bg-green-500/20 text-green-500 border border-green-500/30":"bg-red-500/20 text-red-500 border border-red-500/30"}`,children:[r!=null&&r.challengeModeEnabled?e.jsx(qe,{size:18}):e.jsx(ye,{size:18}),r!=null&&r.challengeModeEnabled?"Enabled":"Disabled"]}),e.jsx("button",{onClick:N,className:"p-2 bg-dark-800 hover:bg-dark-700 rounded-lg text-gray-400",children:e.jsx(Ge,{size:18})})]})]}),e.jsx("div",{className:"flex gap-2 mb-6 border-b border-gray-800 pb-2",children:["dashboard","challenges","accounts"].map($=>e.jsx("button",{onClick:()=>s($),className:`px-4 py-2 rounded-lg font-medium transition-colors capitalize ${t===$?"bg-primary-500 text-white":"text-gray-400 hover:bg-dark-800"}`,children:$},$))}),t==="dashboard"&&c&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Total Challenges"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:c.totalChallenges})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Active Accounts"}),e.jsx("p",{className:"text-2xl font-bold text-blue-500",children:c.activeAccounts})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Passed"}),e.jsx("p",{className:"text-2xl font-bold text-green-500",children:c.passedAccounts})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-4 border border-gray-800",children:[e.jsx("p",{className:"text-gray-400 text-sm",children:"Failed"}),e.jsx("p",{className:"text-2xl font-bold text-red-500",children:c.failedAccounts})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Account Distribution"}),e.jsx("div",{className:"space-y-3",children:[{label:"Active",value:c.activeAccounts,color:"bg-blue-500"},{label:"Passed",value:c.passedAccounts,color:"bg-green-500"},{label:"Funded",value:c.fundedAccounts,color:"bg-purple-500"},{label:"Failed",value:c.failedAccounts,color:"bg-red-500"}].map($=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${$.color}`}),e.jsx("span",{className:"text-gray-400 flex-1",children:$.label}),e.jsx("span",{className:"text-white font-medium",children:$.value})]},$.label))})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 border border-gray-800",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"System Status"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Challenge Mode"}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${c.challengeModeEnabled?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:c.challengeModeEnabled?"Active":"Inactive"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Total Accounts"}),e.jsx("span",{className:"text-white font-medium",children:c.totalAccounts})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Pass Rate"}),e.jsxs("span",{className:"text-white font-medium",children:[c.totalAccounts>0?(c.passedAccounts/c.totalAccounts*100).toFixed(1):0,"%"]})]})]})]})]})]}),t==="challenges"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:"Challenge Products"}),e.jsxs("button",{onClick:()=>{j(null),T(!0)},className:"px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-lg flex items-center gap-2",children:[e.jsx(st,{size:18}),"Add Challenge"]})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map($=>{var H,y,O;return e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded-full ${$.stepsCount===0?"bg-green-500/20 text-green-500":$.stepsCount===1?"bg-blue-500/20 text-blue-500":"bg-purple-500/20 text-purple-500"}`,children:$.stepsCount===0?"Instant":`${$.stepsCount}-Step`}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${$.isActive?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-500"}`,children:$.isActive?"Active":"Inactive"})]}),e.jsxs("h3",{className:"text-xl font-bold text-white",children:["$",$.fundSize.toLocaleString()]}),e.jsx("p",{className:"text-gray-400 text-sm",children:$.name})]}),e.jsxs("div",{className:"p-4 space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Fee"}),e.jsxs("span",{className:"text-white",children:["$",$.challengeFee]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Daily DD"}),e.jsxs("span",{className:"text-white",children:[(H=$.rules)==null?void 0:H.maxDailyDrawdownPercent,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Max DD"}),e.jsxs("span",{className:"text-white",children:[(y=$.rules)==null?void 0:y.maxOverallDrawdownPercent,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Profit Split"}),e.jsxs("span",{className:"text-white",children:[(O=$.fundedSettings)==null?void 0:O.profitSplitPercent,"%"]})]})]}),e.jsx("div",{className:"p-4 border-t border-gray-800 flex gap-2",children:e.jsxs("button",{onClick:()=>{j($),T(!0)},className:"flex-1 py-2 bg-dark-700 hover:bg-dark-600 text-white rounded-lg text-sm flex items-center justify-center gap-1",children:[e.jsx(Wt,{size:14})," Edit"]})})]},$._id)})}),n.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(At,{size:48,className:"text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"No challenges created yet."})]})]}),t==="accounts"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(_t,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search by account ID, name, or email...",value:S,onChange:$=>p($.target.value),className:"w-full pl-10 pr-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white"})]}),e.jsxs("select",{value:m,onChange:$=>h($.target.value),className:"px-4 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"PASSED",children:"Passed"}),e.jsx("option",{value:"FUNDED",children:"Funded"}),e.jsx("option",{value:"FAILED",children:"Failed"}),e.jsx("option",{value:"EXPIRED",children:"Expired"})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-dark-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left text-gray-400 text-sm font-medium py-3 px-4",children:"Account"}),e.jsx("th",{className:"text-left text-gray-400 text-sm font-medium py-3 px-4",children:"User"}),e.jsx("th",{className:"text-left text-gray-400 text-sm font-medium py-3 px-4",children:"Challenge"}),e.jsx("th",{className:"text-left text-gray-400 text-sm font-medium py-3 px-4",children:"Phase"}),e.jsx("th",{className:"text-left text-gray-400 text-sm font-medium py-3 px-4",children:"Equity"}),e.jsx("th",{className:"text-left text-gray-400 text-sm font-medium py-3 px-4",children:"DD%"}),e.jsx("th",{className:"text-left text-gray-400 text-sm font-medium py-3 px-4",children:"Profit%"}),e.jsx("th",{className:"text-left text-gray-400 text-sm font-medium py-3 px-4",children:"Status"}),e.jsx("th",{className:"text-left text-gray-400 text-sm font-medium py-3 px-4",children:"Actions"})]})}),e.jsx("tbody",{children:I.map($=>{var H,y,O,g,v,W,Z,B;return e.jsxs("tr",{className:"border-b border-gray-800 hover:bg-dark-700/50",children:[e.jsx("td",{className:"py-3 px-4 text-white font-mono text-sm",children:$.accountId}),e.jsxs("td",{className:"py-3 px-4",children:[e.jsx("p",{className:"text-white text-sm",children:((H=$.userId)==null?void 0:H.firstName)||"N/A"}),e.jsx("p",{className:"text-gray-500 text-xs",children:(y=$.userId)==null?void 0:y.email})]}),e.jsxs("td",{className:"py-3 px-4",children:[e.jsxs("p",{className:"text-white text-sm",children:["$",(g=(O=$.challengeId)==null?void 0:O.fundSize)==null?void 0:g.toLocaleString()]}),e.jsx("p",{className:"text-gray-500 text-xs",children:(v=$.challengeId)==null?void 0:v.name})]}),e.jsx("td",{className:"py-3 px-4 text-white",children:$.totalPhases===0?"Funded":`${$.currentPhase}/${$.totalPhases}`}),e.jsxs("td",{className:"py-3 px-4 text-white",children:["$",(W=$.currentEquity)==null?void 0:W.toLocaleString()]}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("span",{className:$.currentOverallDrawdownPercent>5?"text-red-500":"text-white",children:[(Z=$.currentOverallDrawdownPercent)==null?void 0:Z.toFixed(2),"%"]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("span",{className:$.currentProfitPercent>=0?"text-green-500":"text-red-500",children:[(B=$.currentProfitPercent)==null?void 0:B.toFixed(2),"%"]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${L($.status)}`,children:$.status})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-1",children:[$.status==="ACTIVE"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>R($._id),className:"p-1.5 hover:bg-green-500/20 rounded text-gray-400 hover:text-green-500",title:"Force Pass",children:e.jsx(qe,{size:14})}),e.jsx("button",{onClick:()=>le($._id),className:"p-1.5 hover:bg-red-500/20 rounded text-gray-400 hover:text-red-500",title:"Force Fail",children:e.jsx(ye,{size:14})}),e.jsx("button",{onClick:()=>X($._id),className:"p-1.5 hover:bg-blue-500/20 rounded text-gray-400 hover:text-blue-500",title:"Extend Time",children:e.jsx(Ht,{size:14})})]}),e.jsx("button",{onClick:()=>_($._id),className:"p-1.5 hover:bg-yellow-500/20 rounded text-gray-400 hover:text-yellow-500",title:"Reset",children:e.jsx(Ge,{size:14})})]})})]},$._id)})})]})}),I.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(et,{size:48,className:"text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"No accounts found."})]})]})]}),f&&e.jsx(uN,{challenge:w,onClose:()=>{T(!1),j(null)},onSave:()=>{T(!1),j(null),E()}})]})})}function uN({challenge:t,onClose:s,onSave:r}){var c,u,x,b,f,T,w,j,S,p;const[a,n]=o.useState({name:(t==null?void 0:t.name)||"",stepsCount:(t==null?void 0:t.stepsCount)??2,fundSize:(t==null?void 0:t.fundSize)||1e4,challengeFee:(t==null?void 0:t.challengeFee)||100,isActive:(t==null?void 0:t.isActive)??!0,rules:{maxDailyDrawdownPercent:((c=t==null?void 0:t.rules)==null?void 0:c.maxDailyDrawdownPercent)||5,maxOverallDrawdownPercent:((u=t==null?void 0:t.rules)==null?void 0:u.maxOverallDrawdownPercent)||10,profitTargetPhase1Percent:((x=t==null?void 0:t.rules)==null?void 0:x.profitTargetPhase1Percent)||8,profitTargetPhase2Percent:((b=t==null?void 0:t.rules)==null?void 0:b.profitTargetPhase2Percent)||5,stopLossMandatory:((f=t==null?void 0:t.rules)==null?void 0:f.stopLossMandatory)??!0,maxTradesPerDay:((T=t==null?void 0:t.rules)==null?void 0:T.maxTradesPerDay)||null,maxConcurrentTrades:((w=t==null?void 0:t.rules)==null?void 0:w.maxConcurrentTrades)||null,minTradeHoldTimeSeconds:((j=t==null?void 0:t.rules)==null?void 0:j.minTradeHoldTimeSeconds)||0,challengeExpiryDays:((S=t==null?void 0:t.rules)==null?void 0:S.challengeExpiryDays)||30},fundedSettings:{profitSplitPercent:((p=t==null?void 0:t.fundedSettings)==null?void 0:p.profitSplitPercent)||80}}),[l,i]=o.useState(!1),d=async m=>{m.preventDefault(),i(!0);try{const h=t?`${_s}/prop/admin/challenges/${t._id}`:`${_s}/prop/admin/challenges`,E=await(await fetch(h,{method:t?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).json();E.success?r():alert(E.message||"Error saving challenge")}catch(h){console.error("Error:",h),alert("Error saving challenge")}i(!1)};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-800",children:e.jsx("h2",{className:"text-xl font-bold text-white",children:t?"Edit Challenge":"Create Challenge"})}),e.jsxs("form",{onSubmit:d,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Name"}),e.jsx("input",{type:"text",value:a.name,onChange:m=>n({...a,name:m.target.value}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Steps"}),e.jsxs("select",{value:a.stepsCount,onChange:m=>n({...a,stepsCount:parseInt(m.target.value)}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white",children:[e.jsx("option",{value:0,children:"Instant Fund (0 Steps)"}),e.jsx("option",{value:1,children:"1-Step"}),e.jsx("option",{value:2,children:"2-Step"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Fund Size ($)"}),e.jsx("input",{type:"number",value:a.fundSize,onChange:m=>n({...a,fundSize:parseInt(m.target.value)}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Challenge Fee ($)"}),e.jsx("input",{type:"number",value:a.challengeFee,onChange:m=>n({...a,challengeFee:parseInt(m.target.value)}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-medium mb-3",children:"Risk Rules"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Daily Drawdown (%)"}),e.jsx("input",{type:"number",value:a.rules.maxDailyDrawdownPercent,onChange:m=>n({...a,rules:{...a.rules,maxDailyDrawdownPercent:parseFloat(m.target.value)}}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Overall Drawdown (%)"}),e.jsx("input",{type:"number",value:a.rules.maxOverallDrawdownPercent,onChange:m=>n({...a,rules:{...a.rules,maxOverallDrawdownPercent:parseFloat(m.target.value)}}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Phase 1 Target (%)"}),e.jsx("input",{type:"number",value:a.rules.profitTargetPhase1Percent,onChange:m=>n({...a,rules:{...a.rules,profitTargetPhase1Percent:parseFloat(m.target.value)}}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Phase 2 Target (%)"}),e.jsx("input",{type:"number",value:a.rules.profitTargetPhase2Percent,onChange:m=>n({...a,rules:{...a.rules,profitTargetPhase2Percent:parseFloat(m.target.value)}}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Expiry Days"}),e.jsx("input",{type:"number",value:a.rules.challengeExpiryDays,onChange:m=>n({...a,rules:{...a.rules,challengeExpiryDays:parseInt(m.target.value)}}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Profit Split (%)"}),e.jsx("input",{type:"number",value:a.fundedSettings.profitSplitPercent,onChange:m=>n({...a,fundedSettings:{...a.fundedSettings,profitSplitPercent:parseInt(m.target.value)}}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-medium mb-3",children:"Trade Rules"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Max Trades/Day (0 = unlimited)"}),e.jsx("input",{type:"number",value:a.rules.maxTradesPerDay||0,onChange:m=>n({...a,rules:{...a.rules,maxTradesPerDay:parseInt(m.target.value)||null}}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Max Concurrent (0 = unlimited)"}),e.jsx("input",{type:"number",value:a.rules.maxConcurrentTrades||0,onChange:m=>n({...a,rules:{...a.rules,maxConcurrentTrades:parseInt(m.target.value)||null}}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-1",children:"Min Hold Time (seconds)"}),e.jsx("input",{type:"number",value:a.rules.minTradeHoldTimeSeconds,onChange:m=>n({...a,rules:{...a.rules,minTradeHoldTimeSeconds:parseInt(m.target.value)}}),className:"w-full px-3 py-2 bg-dark-700 border border-gray-700 rounded-lg text-white"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"slMandatory",checked:a.rules.stopLossMandatory,onChange:m=>n({...a,rules:{...a.rules,stopLossMandatory:m.target.checked}}),className:"w-4 h-4"}),e.jsx("label",{htmlFor:"slMandatory",className:"text-gray-400",children:"Stop Loss Mandatory"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:a.isActive,onChange:m=>n({...a,isActive:m.target.checked}),className:"w-4 h-4"}),e.jsx("label",{htmlFor:"isActive",className:"text-gray-400",children:"Challenge Active"})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-800",children:[e.jsx("button",{type:"button",onClick:s,className:"flex-1 py-2 bg-dark-700 hover:bg-dark-600 text-white rounded-lg",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:l,className:"flex-1 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-lg disabled:opacity-50",children:l?"Saving...":"Save Challenge"})]})]})]})})}const Ml="http://localhost:5001/api",xN=()=>{var C,E,P,U,K,R,le,X,_,L,I,$,H,y,O,g,v,W,Z,B,M,te;const[t,s]=o.useState(null),[r,a]=o.useState([]),[n,l]=o.useState([]),[i,d]=o.useState([]),[c,u]=o.useState(!0),[x,b]=o.useState("overview"),[f,T]=o.useState("30");o.useEffect(()=>{w()},[f]);const w=async()=>{u(!0),await Promise.all([j(),S(),p(),m()]),u(!1)},j=async()=>{try{const pe=await(await fetch(`${Ml}/earnings/summary`)).json();pe.success&&s(pe.earnings)}catch(ae){console.error("Error fetching summary:",ae)}},S=async()=>{try{const pe=await(await fetch(`${Ml}/earnings/daily?days=${f}`)).json();pe.success&&a(pe.earnings||[])}catch(ae){console.error("Error fetching daily earnings:",ae)}},p=async()=>{try{const pe=await(await fetch(`${Ml}/earnings/by-user?days=${f}`)).json();pe.success&&l(pe.earnings||[])}catch(ae){console.error("Error fetching user earnings:",ae)}},m=async()=>{try{const pe=await(await fetch(`${Ml}/earnings/by-symbol?days=${f}`)).json();pe.success&&d(pe.earnings||[])}catch(ae){console.error("Error fetching symbol earnings:",ae)}},h=ae=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(ae||0),N=({title:ae,value:pe,subtitle:Y,icon:re,color:Se})=>e.jsx("div",{className:"bg-dark-800 rounded-xl border border-gray-800 p-4 sm:p-5",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 text-sm",children:ae}),e.jsx("p",{className:`text-xl sm:text-2xl font-bold mt-1 ${Se||"text-white"}`,children:h(pe)}),Y&&e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:Y})]}),e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${Se!=null&&Se.includes("green")?"bg-green-500/20":"bg-blue-500/20"}`,children:e.jsx(re,{size:20,className:Se!=null&&Se.includes("green")?"text-green-500":"text-blue-500"})})]})});return e.jsxs(qt,{title:"Earnings Report",subtitle:"Track commission, spread, and swap earnings",children:[e.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:f,onChange:ae=>T(ae.target.value),className:"px-3 py-2 bg-dark-800 border border-gray-700 rounded-lg text-white text-sm",children:[e.jsx("option",{value:"7",children:"Last 7 Days"}),e.jsx("option",{value:"30",children:"Last 30 Days"}),e.jsx("option",{value:"90",children:"Last 90 Days"}),e.jsx("option",{value:"365",children:"Last Year"})]}),e.jsx("button",{onClick:w,className:"p-2 bg-dark-800 hover:bg-dark-700 rounded-lg text-gray-400",children:e.jsx(Ge,{size:18})})]})}),c?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(Ge,{size:24,className:"animate-spin text-gray-500"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4 mb-6",children:[e.jsx(N,{title:"Today",value:(C=t==null?void 0:t.today)==null?void 0:C.total,subtitle:`${((E=t==null?void 0:t.today)==null?void 0:E.trades)||0} trades`,icon:Pt,color:"text-green-500"}),e.jsx(N,{title:"This Week",value:(P=t==null?void 0:t.thisWeek)==null?void 0:P.total,subtitle:`${((U=t==null?void 0:t.thisWeek)==null?void 0:U.trades)||0} trades`,icon:wa,color:"text-blue-500"}),e.jsx(N,{title:"This Month",value:(K=t==null?void 0:t.thisMonth)==null?void 0:K.total,subtitle:`${((R=t==null?void 0:t.thisMonth)==null?void 0:R.trades)||0} trades`,icon:mt,color:"text-purple-500"}),e.jsx(N,{title:"This Year",value:(le=t==null?void 0:t.thisYear)==null?void 0:le.total,subtitle:`${((X=t==null?void 0:t.thisYear)==null?void 0:X.trades)||0} trades`,icon:Yd,color:"text-orange-500"}),e.jsx(N,{title:"All Time",value:(_=t==null?void 0:t.allTime)==null?void 0:_.total,subtitle:`${((L=t==null?void 0:t.allTime)==null?void 0:L.trades)||0} trades`,icon:Pt,color:"text-green-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 p-5",children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"Commission Earnings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Today"}),e.jsx("span",{className:"text-white font-mono",children:h((I=t==null?void 0:t.today)==null?void 0:I.commission)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"This Week"}),e.jsx("span",{className:"text-white font-mono",children:h(($=t==null?void 0:t.thisWeek)==null?void 0:$.commission)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"This Month"}),e.jsx("span",{className:"text-white font-mono",children:h((H=t==null?void 0:t.thisMonth)==null?void 0:H.commission)})]}),e.jsxs("div",{className:"flex justify-between border-t border-gray-700 pt-3",children:[e.jsx("span",{className:"text-gray-400",children:"All Time"}),e.jsx("span",{className:"text-green-500 font-mono font-bold",children:h((y=t==null?void 0:t.allTime)==null?void 0:y.commission)})]})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 p-5",children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"Swap Earnings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Today"}),e.jsx("span",{className:"text-white font-mono",children:h((O=t==null?void 0:t.today)==null?void 0:O.swap)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"This Week"}),e.jsx("span",{className:"text-white font-mono",children:h((g=t==null?void 0:t.thisWeek)==null?void 0:g.swap)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"This Month"}),e.jsx("span",{className:"text-white font-mono",children:h((v=t==null?void 0:t.thisMonth)==null?void 0:v.swap)})]}),e.jsxs("div",{className:"flex justify-between border-t border-gray-700 pt-3",children:[e.jsx("span",{className:"text-gray-400",children:"All Time"}),e.jsx("span",{className:"text-blue-500 font-mono font-bold",children:h((W=t==null?void 0:t.allTime)==null?void 0:W.swap)})]})]})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 p-5",children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"Trading Volume (Lots)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Today"}),e.jsx("span",{className:"text-white font-mono",children:(((Z=t==null?void 0:t.today)==null?void 0:Z.volume)||0).toFixed(2)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"This Week"}),e.jsx("span",{className:"text-white font-mono",children:(((B=t==null?void 0:t.thisWeek)==null?void 0:B.volume)||0).toFixed(2)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"This Month"}),e.jsx("span",{className:"text-white font-mono",children:(((M=t==null?void 0:t.thisMonth)==null?void 0:M.volume)||0).toFixed(2)})]}),e.jsxs("div",{className:"flex justify-between border-t border-gray-700 pt-3",children:[e.jsx("span",{className:"text-gray-400",children:"All Time"}),e.jsx("span",{className:"text-purple-500 font-mono font-bold",children:(((te=t==null?void 0:t.allTime)==null?void 0:te.volume)||0).toFixed(2)})]})]})]})]}),e.jsxs("div",{className:"flex gap-2 mb-4 border-b border-gray-800 pb-2",children:[e.jsx("button",{onClick:()=>b("daily"),className:`px-4 py-2 rounded-lg text-sm ${x==="daily"?"bg-blue-500 text-white":"text-gray-400 hover:text-white"}`,children:"Daily Breakdown"}),e.jsx("button",{onClick:()=>b("users"),className:`px-4 py-2 rounded-lg text-sm ${x==="users"?"bg-blue-500 text-white":"text-gray-400 hover:text-white"}`,children:"By User"}),e.jsx("button",{onClick:()=>b("symbols"),className:`px-4 py-2 rounded-lg text-sm ${x==="symbols"?"bg-blue-500 text-white":"text-gray-400 hover:text-white"}`,children:"By Symbol"})]}),x==="daily"&&e.jsx("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-dark-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left text-gray-400 text-xs font-medium px-4 py-3",children:"Date"}),e.jsx("th",{className:"text-right text-gray-400 text-xs font-medium px-4 py-3",children:"Commission"}),e.jsx("th",{className:"text-right text-gray-400 text-xs font-medium px-4 py-3",children:"Swap"}),e.jsx("th",{className:"text-right text-gray-400 text-xs font-medium px-4 py-3",children:"Total"}),e.jsx("th",{className:"text-right text-gray-400 text-xs font-medium px-4 py-3",children:"Trades"}),e.jsx("th",{className:"text-right text-gray-400 text-xs font-medium px-4 py-3",children:"Volume"})]})}),e.jsx("tbody",{children:r.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center text-gray-500 py-8",children:"No data for selected period"})}):r.map((ae,pe)=>{var Y;return e.jsxs("tr",{className:"border-t border-gray-800 hover:bg-dark-700",children:[e.jsx("td",{className:"px-4 py-3 text-white text-sm",children:ae.date}),e.jsx("td",{className:"px-4 py-3 text-right text-white font-mono text-sm",children:h(ae.commission)}),e.jsx("td",{className:"px-4 py-3 text-right text-white font-mono text-sm",children:h(ae.swap)}),e.jsx("td",{className:"px-4 py-3 text-right text-green-500 font-mono text-sm font-semibold",children:h(ae.total)}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-400 text-sm",children:ae.trades}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-400 text-sm",children:(Y=ae.volume)==null?void 0:Y.toFixed(2)})]},pe)})})]})})}),x==="users"&&e.jsx("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-dark-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left text-gray-400 text-xs font-medium px-4 py-3",children:"User"}),e.jsx("th",{className:"text-right text-gray-400 text-xs font-medium px-4 py-3",children:"Commission"}),e.jsx("th",{className:"text-right text-gray-400 text-xs font-medium px-4 py-3",children:"Swap"}),e.jsx("th",{className:"text-right text-gray-400 text-xs font-medium px-4 py-3",children:"Total"}),e.jsx("th",{className:"text-right text-gray-400 text-xs font-medium px-4 py-3",children:"Trades"}),e.jsx("th",{className:"text-right text-gray-400 text-xs font-medium px-4 py-3",children:"Volume"})]})}),e.jsx("tbody",{children:n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center text-gray-500 py-8",children:"No data for selected period"})}):n.map((ae,pe)=>{var Y;return e.jsxs("tr",{className:"border-t border-gray-800 hover:bg-dark-700",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-sm font-medium",children:ae.userName||"Unknown"}),e.jsx("p",{className:"text-gray-500 text-xs",children:ae.userEmail})]})}),e.jsx("td",{className:"px-4 py-3 text-right text-white font-mono text-sm",children:h(ae.commission)}),e.jsx("td",{className:"px-4 py-3 text-right text-white font-mono text-sm",children:h(ae.swap)}),e.jsx("td",{className:"px-4 py-3 text-right text-green-500 font-mono text-sm font-semibold",children:h(ae.total)}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-400 text-sm",children:ae.trades}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-400 text-sm",children:(Y=ae.volume)==null?void 0:Y.toFixed(2)})]},pe)})})]})})}),x==="symbols"&&e.jsx("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-dark-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left text-gray-400 text-xs font-medium px-4 py-3",children:"Symbol"}),e.jsx("th",{className:"text-right text-gray-400 text-xs font-medium px-4 py-3",children:"Commission"}),e.jsx("th",{className:"text-right text-gray-400 text-xs font-medium px-4 py-3",children:"Swap"}),e.jsx("th",{className:"text-right text-gray-400 text-xs font-medium px-4 py-3",children:"Total"}),e.jsx("th",{className:"text-right text-gray-400 text-xs font-medium px-4 py-3",children:"Trades"}),e.jsx("th",{className:"text-right text-gray-400 text-xs font-medium px-4 py-3",children:"Volume"})]})}),e.jsx("tbody",{children:i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"text-center text-gray-500 py-8",children:"No data for selected period"})}):i.map((ae,pe)=>{var Y;return e.jsxs("tr",{className:"border-t border-gray-800 hover:bg-dark-700",children:[e.jsx("td",{className:"px-4 py-3 text-white text-sm font-medium",children:ae.symbol}),e.jsx("td",{className:"px-4 py-3 text-right text-white font-mono text-sm",children:h(ae.commission)}),e.jsx("td",{className:"px-4 py-3 text-right text-white font-mono text-sm",children:h(ae.swap)}),e.jsx("td",{className:"px-4 py-3 text-right text-green-500 font-mono text-sm font-semibold",children:h(ae.total)}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-400 text-sm",children:ae.trades}),e.jsx("td",{className:"px-4 py-3 text-right text-gray-400 text-sm",children:(Y=ae.volume)==null?void 0:Y.toFixed(2)})]},pe)})})]})})})]})]})},mN="http://localhost:5001/api",hN=()=>{const[t,s]=o.useState(""),[r,a]=o.useState(""),[n,l]=o.useState(!1),[i,d]=o.useState(!1),[c,u]=o.useState(""),[x,b]=o.useState(!1),f=async T=>{if(T.preventDefault(),!t){u("Please enter your email address");return}l(!0),u("");try{const j=await(await fetch(`${mN}/auth/forgot-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,newEmail:x?r:null})})).json();j.success?d(!0):u(j.message||"Failed to submit request")}catch{u("Error submitting request. Please try again.")}finally{l(!1)}};return e.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-gradient-to-r from-cyan-500/20 to-transparent rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-gradient-to-l from-orange-500/20 via-purple-500/20 to-transparent rounded-full blur-3xl"}),e.jsxs("div",{className:"relative bg-dark-700 rounded-2xl p-8 w-full max-w-md border border-gray-800",children:[e.jsx(ns,{to:"/user/login",className:"absolute top-4 right-4 w-8 h-8 bg-dark-600 rounded-full flex items-center justify-center hover:bg-dark-500 transition-colors",children:e.jsx(ye,{size:16,className:"text-gray-400"})}),i?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(qe,{size:32,className:"text-green-500"})}),e.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Request Submitted"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Your password reset request has been sent to the admin. You will receive a new password on your registered email shortly."}),e.jsx(ns,{to:"/user/login",className:"inline-block bg-white text-black font-medium px-6 py-3 rounded-lg hover:bg-gray-100 transition-colors",children:"Back to Login"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-2xl font-semibold text-white mb-2",children:"Forgot Password"}),e.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"Enter your email address and we'll send your request to the admin. A new password will be sent to your email."}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Registered Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ys,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"email",placeholder:"Enter your registered email",value:t,onChange:T=>{s(T.target.value),u("")},className:"w-full bg-dark-600 border border-gray-700 rounded-lg pl-11 pr-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600 transition-colors"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"changeEmail",checked:x,onChange:T=>b(T.target.checked),className:"w-4 h-4 rounded border-gray-600 bg-dark-600 text-blue-500 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"changeEmail",className:"text-gray-400 text-sm",children:"I want to change my email address"})]}),x&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"New Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ys,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"email",placeholder:"Enter new email address",value:r,onChange:T=>a(T.target.value),className:"w-full bg-dark-600 border border-gray-700 rounded-lg pl-11 pr-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600 transition-colors"})]}),e.jsxs("p",{className:"text-yellow-500 text-xs mt-2 flex items-start gap-1",children:[e.jsx(wr,{size:14,className:"shrink-0 mt-0.5"}),"Admin will verify and update your email. Password will be sent to the new email."]})]}),c&&e.jsx("p",{className:"text-red-500 text-sm",children:c}),e.jsx("button",{type:"submit",disabled:n,className:"w-full bg-white text-black font-medium py-3 rounded-lg hover:bg-gray-100 transition-colors mt-2 disabled:opacity-50",children:n?"Submitting...":"Submit Request"})]}),e.jsxs("p",{className:"text-center text-gray-500 text-sm mt-6",children:["Remember your password?"," ",e.jsx(ns,{to:"/user/login",className:"text-white hover:underline",children:"Sign in"})]})]})]})]})},la="http://localhost:5001/api",pN=()=>{const[t,s]=o.useState([]),[r,a]=o.useState([]),[n,l]=o.useState(!0),[i,d]=o.useState(null),[c,u]=o.useState(!1),[x,b]=o.useState(!1),[f,T]=o.useState(null),[w,j]=o.useState({type:"",text:""}),[S,p]=o.useState(""),[m,h]=o.useState({});o.useEffect(()=>{N(),C()},[]);const N=async()=>{var L;l(!0);try{const $=await(await fetch(`${la}/theme/all`)).json();if($.success){s($.themes||[]);const H=(L=$.themes)==null?void 0:L.find(y=>y.isActive);d(H)}}catch(I){console.error("Error fetching themes:",I)}l(!1)},C=async()=>{try{const I=await(await fetch(`${la}/theme/presets`)).json();I.success&&a(I.presets||[])}catch(L){console.error("Error fetching presets:",L)}},E=async L=>{try{const $=await(await fetch(`${la}/theme/apply-preset`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({presetName:L})})).json();$.success?(j({type:"success",text:$.message}),N()):j({type:"error",text:$.message})}catch{j({type:"error",text:"Error applying preset"})}},P=async L=>{try{const $=await(await fetch(`${la}/theme/${L}/activate`,{method:"PUT"})).json();$.success?(j({type:"success",text:$.message}),N()):j({type:"error",text:$.message})}catch{j({type:"error",text:"Error activating theme"})}},U=async L=>{if(confirm("Are you sure you want to delete this theme?"))try{const $=await(await fetch(`${la}/theme/${L}`,{method:"DELETE"})).json();$.success?(j({type:"success",text:$.message}),N()):j({type:"error",text:$.message})}catch{j({type:"error",text:"Error deleting theme"})}},K=async()=>{if(!S.trim()){j({type:"error",text:"Theme name is required"});return}try{const I=await(await fetch(`${la}/theme/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:S,isActive:!1})})).json();I.success?(j({type:"success",text:I.message}),u(!1),p(""),N()):j({type:"error",text:I.message})}catch{j({type:"error",text:"Error creating theme"})}},R=L=>{T(L),h(L.colors||{}),b(!0)},le=async()=>{try{const I=await(await fetch(`${la}/theme/${f._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({colors:m})})).json();I.success?(j({type:"success",text:"Theme updated successfully"}),b(!1),N()):j({type:"error",text:I.message})}catch{j({type:"error",text:"Error updating theme"})}},X=[{title:"Primary Colors",colors:["primary","primaryHover","secondary","secondaryHover","accent","accentHover"]},{title:"Background Colors",colors:["bgPrimary","bgSecondary","bgCard","bgHover"]},{title:"Text Colors",colors:["textPrimary","textSecondary","textMuted"]},{title:"Border Colors",colors:["border","borderLight"]},{title:"Status Colors",colors:["success","error","warning","info"]},{title:"Trading Colors",colors:["buyColor","sellColor","profitColor","lossColor"]},{title:"Sidebar Colors",colors:["sidebarBg","sidebarText","sidebarActive"]},{title:"Button Colors",colors:["buttonPrimary","buttonSecondary","buttonDanger"]}],_=L=>L.replace(/([A-Z])/g," $1").replace(/^./,I=>I.toUpperCase());return e.jsxs(qt,{title:"Theme Settings",subtitle:"Customize user dashboard appearance",children:[w.text&&e.jsxs("div",{className:`mb-4 p-3 rounded-lg ${w.type==="success"?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500"}`,children:[w.text,e.jsx("button",{onClick:()=>j({type:"",text:""}),className:"float-right",children:e.jsx(ye,{size:16})})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 p-5 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-500/20 rounded-lg flex items-center justify-center",children:e.jsx(q0,{size:20,className:"text-purple-500"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-white font-semibold",children:"Quick Theme Presets"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Click to apply a preset theme instantly"})]})]}),e.jsx("button",{onClick:N,className:"p-2 bg-dark-700 rounded-lg hover:bg-dark-600",children:e.jsx(Ge,{size:18,className:"text-gray-400"})})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-8 gap-3",children:r.map(L=>e.jsxs("button",{onClick:()=>E(L.name),className:`p-3 rounded-xl border transition-all hover:scale-105 ${(i==null?void 0:i.name)===L.name?"border-green-500 bg-green-500/10":"border-gray-700 bg-dark-700 hover:border-gray-600"}`,children:[e.jsxs("div",{className:"w-full h-8 rounded-lg mb-2 flex overflow-hidden",style:{backgroundColor:L.colors.bgPrimary},children:[e.jsx("div",{className:"w-1/3 h-full",style:{backgroundColor:L.colors.primary}}),e.jsx("div",{className:"w-1/3 h-full",style:{backgroundColor:L.colors.accent}}),e.jsx("div",{className:"w-1/3 h-full",style:{backgroundColor:L.colors.secondary}})]}),e.jsx("p",{className:"text-white text-xs font-medium truncate",children:L.name}),(i==null?void 0:i.name)===L.name&&e.jsxs("div",{className:"flex items-center justify-center gap-1 mt-1",children:[e.jsx(qe,{size:12,className:"text-green-500"}),e.jsx("span",{className:"text-green-500 text-[10px]",children:"Active"})]})]},L.name))})]}),e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-gray-800",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-white font-semibold",children:"Custom Themes"}),e.jsxs("p",{className:"text-gray-500 text-sm",children:[t.length," themes configured"]})]}),e.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:[e.jsx(st,{size:16}),"Create Theme"]})]}),n?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading themes..."}):t.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx("p",{children:"No custom themes yet."}),e.jsx("p",{className:"text-sm mt-2",children:"Apply a preset or create a new theme."})]}):e.jsx("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(L=>{var I,$,H,y,O;return e.jsxs("div",{className:`p-4 rounded-xl border ${L.isActive?"border-green-500 bg-green-500/5":"border-gray-700 bg-dark-700"}`,children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-white font-medium",children:L.name}),L.isActive&&e.jsx("span",{className:"px-2 py-0.5 bg-green-500/20 text-green-500 text-xs rounded-full",children:"Active"})]})}),e.jsxs("div",{className:"w-full h-12 rounded-lg mb-3 flex overflow-hidden border border-gray-600",style:{backgroundColor:((I=L.colors)==null?void 0:I.bgPrimary)||"#000"},children:[e.jsx("div",{className:"w-1/4 h-full",style:{backgroundColor:(($=L.colors)==null?void 0:$.primary)||"#3B82F6"}}),e.jsx("div",{className:"w-1/4 h-full",style:{backgroundColor:((H=L.colors)==null?void 0:H.accent)||"#F59E0B"}}),e.jsx("div",{className:"w-1/4 h-full",style:{backgroundColor:((y=L.colors)==null?void 0:y.secondary)||"#10B981"}}),e.jsx("div",{className:"w-1/4 h-full",style:{backgroundColor:((O=L.colors)==null?void 0:O.error)||"#EF4444"}})]}),e.jsxs("div",{className:"flex gap-2",children:[!L.isActive&&e.jsxs("button",{onClick:()=>P(L._id),className:"flex-1 py-2 bg-green-500/20 text-green-500 rounded-lg hover:bg-green-500/30 text-sm flex items-center justify-center gap-1",children:[e.jsx(qe,{size:14}),"Activate"]}),e.jsxs("button",{onClick:()=>R(L),className:"flex-1 py-2 bg-blue-500/20 text-blue-500 rounded-lg hover:bg-blue-500/30 text-sm flex items-center justify-center gap-1",children:[e.jsx(Qt,{size:14}),"Edit"]}),!L.isActive&&e.jsx("button",{onClick:()=>U(L._id),className:"py-2 px-3 bg-red-500/20 text-red-500 rounded-lg hover:bg-red-500/30",children:e.jsx(Lt,{size:14})})]})]},L._id)})})]}),c&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-700 w-full max-w-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:"Create New Theme"}),e.jsx("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-white",children:e.jsx(ye,{size:20})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-400 text-sm mb-2",children:"Theme Name"}),e.jsx("input",{type:"text",value:S,onChange:L=>p(L.target.value),placeholder:"e.g., My Custom Theme",className:"w-full bg-dark-700 border border-gray-700 rounded-lg px-4 py-3 text-white"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>u(!1),className:"flex-1 py-3 bg-dark-700 text-gray-400 rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsx("button",{onClick:K,className:"flex-1 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Create Theme"})]})]})}),x&&f&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-dark-800 rounded-xl border border-gray-700 w-full max-w-4xl p-6 my-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-white font-semibold text-lg",children:["Edit Theme: ",f.name]}),e.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-white",children:e.jsx(ye,{size:20})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-h-[60vh] overflow-y-auto pr-2",children:X.map(L=>e.jsxs("div",{className:"bg-dark-700 rounded-lg p-4",children:[e.jsx("h4",{className:"text-white font-medium mb-3",children:L.title}),e.jsx("div",{className:"space-y-3",children:L.colors.map(I=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:_(I)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:m[I]||"#000000",onChange:$=>h({...m,[I]:$.target.value}),className:"w-10 h-8 rounded cursor-pointer border-0"}),e.jsx("input",{type:"text",value:m[I]||"",onChange:$=>h({...m,[I]:$.target.value}),className:"w-24 bg-dark-600 border border-gray-600 rounded px-2 py-1 text-white text-xs"})]})]},I))})]},L.title))}),e.jsxs("div",{className:"flex gap-3 mt-6 pt-4 border-t border-gray-700",children:[e.jsx("button",{onClick:()=>b(!1),className:"flex-1 py-3 bg-dark-700 text-gray-400 rounded-lg hover:bg-dark-600",children:"Cancel"}),e.jsxs("button",{onClick:le,className:"flex-1 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 flex items-center justify-center gap-2",children:[e.jsx(Jd,{size:18}),"Save Changes"]})]})]})})]})},fm="http://localhost:5001/api",gN=()=>{const{slug:t}=Hd(),s=ut(),[r,a]=o.useState("signin"),[n,l]=o.useState(!1),[i,d]=o.useState(""),[c,u]=o.useState(!1),[x,b]=o.useState(null),[f,T]=o.useState(!0),[w,j]=o.useState(""),[S,p]=o.useState({email:"",password:""}),[m,h]=o.useState(window.innerWidth<768);o.useEffect(()=>{const P=()=>h(window.innerWidth<768);return window.addEventListener("resize",P),()=>window.removeEventListener("resize",P)},[]),o.useEffect(()=>{N()},[t]);const N=async()=>{try{const U=await(await fetch(`${fm}/admin-mgmt/brand/${t}`)).json();U.success?(b(U.brand),localStorage.setItem("adminSlug",t),localStorage.setItem("adminId",U.brand.adminId)):j(U.message||"Brand not found")}catch{j("Failed to load brand information")}T(!1)},C=P=>{p({...S,[P.target.name]:P.target.value}),d("")},E=async P=>{P.preventDefault(),l(!0),d("");try{const U=await fetch(`${fm}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...S,adminSlug:t})}),K=await U.json();if(!U.ok)throw new Error(K.message||"Login failed");localStorage.setItem("token",K.token),localStorage.setItem("user",JSON.stringify(K.user)),s(m?"/mobile":"/dashboard")}catch(U){d(U.message)}finally{l(!1)}};return f?e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:e.jsx("div",{className:"text-white",children:"Loading..."})}):w?e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-dark-700 rounded-2xl p-8 w-full max-w-md border border-gray-800 text-center",children:[e.jsx(wr,{size:48,className:"mx-auto text-red-500 mb-4"}),e.jsx("h1",{className:"text-xl font-semibold text-white mb-2",children:"Invalid Link"}),e.jsx("p",{className:"text-gray-400 mb-6",children:w}),e.jsx(ns,{to:"/user/login",className:"text-accent-green hover:underline",children:"Go to main login"})]})}):e.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-gradient-to-r from-cyan-500/20 to-transparent rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-gradient-to-l from-orange-500/20 via-purple-500/20 to-transparent rounded-full blur-3xl"}),e.jsxs("div",{className:"relative bg-dark-700 rounded-2xl p-8 w-full max-w-md border border-gray-800",children:[e.jsx("button",{className:"absolute top-4 right-4 w-8 h-8 bg-dark-600 rounded-full flex items-center justify-center hover:bg-dark-500 transition-colors",children:e.jsx(ye,{size:16,className:"text-gray-400"})}),(x==null?void 0:x.brandName)&&e.jsx("div",{className:"text-center mb-6",children:e.jsx("h2",{className:"text-accent-green text-lg font-bold",children:x.brandName})}),e.jsxs("div",{className:"flex bg-dark-600 rounded-full p-1 w-fit mb-8",children:[e.jsx(ns,{to:`/${t}/signup`,className:"px-6 py-2 rounded-full text-sm font-medium text-gray-400 hover:text-white transition-colors",children:"Sign up"}),e.jsx("button",{onClick:()=>a("signin"),className:`px-6 py-2 rounded-full text-sm font-medium transition-colors ${r==="signin"?"bg-dark-500 text-white":"text-gray-400 hover:text-white"}`,children:"Sign in"})]}),e.jsx("h1",{className:"text-2xl font-semibold text-white mb-6",children:"Welcome back"}),e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ys,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"email",name:"email",placeholder:"Enter your email",value:S.email,onChange:C,className:"w-full bg-dark-600 border border-gray-700 rounded-lg pl-11 pr-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600 transition-colors"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ss,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:c?"text":"password",name:"password",placeholder:"Enter your password",value:S.password,onChange:C,className:"w-full bg-dark-600 border border-gray-700 rounded-lg pl-11 pr-12 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600 transition-colors"}),e.jsx("button",{type:"button",onClick:()=>u(!c),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300 transition-colors",children:c?e.jsx(pl,{size:18}):e.jsx(Qt,{size:18})})]}),e.jsx("div",{className:"text-right",children:e.jsx(ns,{to:`/${t}/forgot-password`,className:"text-sm text-gray-400 hover:text-white transition-colors",children:"Forgot password?"})}),i&&e.jsx("p",{className:"text-red-500 text-sm",children:i}),e.jsx("button",{type:"submit",disabled:n,className:"w-full bg-white text-black font-medium py-3 rounded-lg hover:bg-gray-100 transition-colors mt-2 disabled:opacity-50",children:n?"Signing in...":"Sign in"})]}),e.jsxs("p",{className:"text-center text-gray-500 text-sm mt-6",children:["Don't have an account?"," ",e.jsx(ns,{to:`/${t}/signup`,className:"text-white hover:underline",children:"Sign up"})]})]})]})},ym="http://localhost:5001/api",fN=()=>{const{slug:t}=Hd(),s=ut(),[r,a]=o.useState(!1),[n,l]=o.useState(""),[i,d]=o.useState(!1),[c,u]=o.useState(null),[x,b]=o.useState(!0),[f,T]=o.useState(""),[w,j]=o.useState({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:""});o.useEffect(()=>{S()},[t]);const S=async()=>{try{const N=await(await fetch(`${ym}/admin-mgmt/brand/${t}`)).json();N.success?(u(N.brand),localStorage.setItem("adminSlug",t),localStorage.setItem("adminId",N.brand.adminId)):T(N.message||"Brand not found")}catch{T("Failed to load brand information")}b(!1)},p=h=>{j({...w,[h.target.name]:h.target.value}),l("")},m=async h=>{if(h.preventDefault(),a(!0),l(""),w.password!==w.confirmPassword){l("Passwords do not match"),a(!1);return}try{const N=await fetch(`${ym}/auth/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:w.firstName,lastName:w.lastName,email:w.email,phone:w.phone,password:w.password,adminSlug:t,adminId:c==null?void 0:c.adminId})}),C=await N.json();if(!N.ok)throw new Error(C.message||"Signup failed");localStorage.setItem("token",C.token),localStorage.setItem("user",JSON.stringify(C.user)),s("/dashboard")}catch(N){l(N.message)}finally{a(!1)}};return x?e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:e.jsx("div",{className:"text-white",children:"Loading..."})}):f?e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-dark-700 rounded-2xl p-8 w-full max-w-md border border-gray-800 text-center",children:[e.jsx(wr,{size:48,className:"mx-auto text-red-500 mb-4"}),e.jsx("h1",{className:"text-xl font-semibold text-white mb-2",children:"Invalid Link"}),e.jsx("p",{className:"text-gray-400 mb-6",children:f}),e.jsx(ns,{to:"/user/signup",className:"text-accent-green hover:underline",children:"Go to main signup"})]})}):e.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-gradient-to-r from-cyan-500/20 to-transparent rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-gradient-to-l from-orange-500/20 via-purple-500/20 to-transparent rounded-full blur-3xl"}),e.jsxs("div",{className:"relative bg-dark-700 rounded-2xl p-8 w-full max-w-md border border-gray-800",children:[e.jsx("button",{className:"absolute top-4 right-4 w-8 h-8 bg-dark-600 rounded-full flex items-center justify-center hover:bg-dark-500 transition-colors",children:e.jsx(ye,{size:16,className:"text-gray-400"})}),(c==null?void 0:c.brandName)&&e.jsx("div",{className:"text-center mb-6",children:e.jsx("h2",{className:"text-accent-green text-lg font-bold",children:c.brandName})}),e.jsxs("div",{className:"flex bg-dark-600 rounded-full p-1 w-fit mb-8",children:[e.jsx("button",{className:"px-6 py-2 rounded-full text-sm font-medium bg-dark-500 text-white",children:"Sign up"}),e.jsx(ns,{to:`/${t}/login`,className:"px-6 py-2 rounded-full text-sm font-medium text-gray-400 hover:text-white transition-colors",children:"Sign in"})]}),e.jsx("h1",{className:"text-2xl font-semibold text-white mb-6",children:"Create account"}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(It,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"text",name:"firstName",placeholder:"First name",value:w.firstName,onChange:p,required:!0,className:"w-full bg-dark-600 border border-gray-700 rounded-lg pl-11 pr-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600 transition-colors"})]}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",name:"lastName",placeholder:"Last name",value:w.lastName,onChange:p,required:!0,className:"w-full bg-dark-600 border border-gray-700 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600 transition-colors"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ys,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"email",name:"email",placeholder:"Enter your email",value:w.email,onChange:p,required:!0,className:"w-full bg-dark-600 border border-gray-700 rounded-lg pl-11 pr-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600 transition-colors"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Pi,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:"tel",name:"phone",placeholder:"Phone number",value:w.phone,onChange:p,className:"w-full bg-dark-600 border border-gray-700 rounded-lg pl-11 pr-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600 transition-colors"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ss,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:i?"text":"password",name:"password",placeholder:"Create password",value:w.password,onChange:p,required:!0,className:"w-full bg-dark-600 border border-gray-700 rounded-lg pl-11 pr-12 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600 transition-colors"}),e.jsx("button",{type:"button",onClick:()=>d(!i),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-300 transition-colors",children:i?e.jsx(pl,{size:18}):e.jsx(Qt,{size:18})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ss,{size:18,className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500"}),e.jsx("input",{type:i?"text":"password",name:"confirmPassword",placeholder:"Confirm password",value:w.confirmPassword,onChange:p,required:!0,className:"w-full bg-dark-600 border border-gray-700 rounded-lg pl-11 pr-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:border-gray-600 transition-colors"})]}),n&&e.jsx("p",{className:"text-red-500 text-sm",children:n}),e.jsx("button",{type:"submit",disabled:r,className:"w-full bg-white text-black font-medium py-3 rounded-lg hover:bg-gray-100 transition-colors mt-2 disabled:opacity-50",children:r?"Creating account...":"Sign up"})]}),e.jsxs("p",{className:"text-center text-gray-500 text-sm mt-6",children:["Already have an account?"," ",e.jsx(ns,{to:`/${t}/login`,className:"text-white hover:underline",children:"Sign in"})]})]})]})};function yN(){return e.jsx(tb,{children:e.jsxs(Jy,{children:[e.jsx(Me,{path:"/",element:e.jsx(cm,{})}),e.jsx(Me,{path:"/user/signup",element:e.jsx(cm,{})}),e.jsx(Me,{path:"/user/login",element:e.jsx(Pb,{})}),e.jsx(Me,{path:"/user/forgot-password",element:e.jsx(hN,{})}),e.jsx(Me,{path:"/dashboard",element:e.jsx(Db,{})}),e.jsx(Me,{path:"/mobile",element:e.jsx(Ij,{})}),e.jsx(Me,{path:"/account",element:e.jsx($j,{})}),e.jsx(Me,{path:"/wallet",element:e.jsx(Lj,{})}),e.jsx(Me,{path:"/trade/:accountId",element:e.jsx(zj,{})}),e.jsx(Me,{path:"/copytrade",element:e.jsx(_j,{})}),e.jsx(Me,{path:"/ib",element:e.jsx(Mj,{})}),e.jsx(Me,{path:"/profile",element:e.jsx(Fj,{})}),e.jsx(Me,{path:"/support",element:e.jsx(Rj,{})}),e.jsx(Me,{path:"/instructions",element:e.jsx(Bj,{})}),e.jsx(Me,{path:"/admin",element:e.jsx(Vj,{})}),e.jsx(Me,{path:"/admin/dashboard",element:e.jsx(Wj,{})}),e.jsx(Me,{path:"/admin/users",element:e.jsx(Hj,{})}),e.jsx(Me,{path:"/admin/accounts",element:e.jsx(Yj,{})}),e.jsx(Me,{path:"/admin/account-types",element:e.jsx(Jj,{})}),e.jsx(Me,{path:"/admin/transactions",element:e.jsx(qj,{})}),e.jsx(Me,{path:"/admin/payment-methods",element:e.jsx(Gj,{})}),e.jsx(Me,{path:"/admin/trades",element:e.jsx(Kj,{})}),e.jsx(Me,{path:"/admin/funds",element:e.jsx(Xj,{})}),e.jsx(Me,{path:"/admin/bank-settings",element:e.jsx(Qj,{})}),e.jsx(Me,{path:"/admin/ib-management",element:e.jsx(Zj,{})}),e.jsx(Me,{path:"/admin/forex-charges",element:e.jsx(tN,{})}),e.jsx(Me,{path:"/admin/indian-charges",element:e.jsx(sN,{})}),e.jsx(Me,{path:"/admin/copy-trade",element:e.jsx(rN,{})}),e.jsx(Me,{path:"/admin/prop-firm",element:e.jsx(aN,{})}),e.jsx(Me,{path:"/admin/admin-management",element:e.jsx(nN,{})}),e.jsx(Me,{path:"/admin/kyc",element:e.jsx(lN,{})}),e.jsx(Me,{path:"/admin/support",element:e.jsx(iN,{})}),e.jsx(Me,{path:"/admin/prop-trading",element:e.jsx(dN,{})}),e.jsx(Me,{path:"/admin/earnings",element:e.jsx(xN,{})}),e.jsx(Me,{path:"/admin/theme",element:e.jsx(pN,{})}),e.jsx(Me,{path:"/buy-challenge",element:e.jsx(oN,{})}),e.jsx(Me,{path:"/challenge-dashboard",element:e.jsx(cN,{})}),e.jsx(Me,{path:"/:slug/login",element:e.jsx(gN,{})}),e.jsx(Me,{path:"/:slug/signup",element:e.jsx(fN,{})})]})})}const bN="http://localhost:5001/api",jN=o.createContext(),NN=({children:t})=>{const[s,r]=o.useState(null),[a,n]=o.useState(!0),l=async()=>{try{const u=await(await fetch(`${bN}/theme/active`)).json();u.success&&u.theme&&(r(u.theme),i(u.theme.colors))}catch(c){console.error("Error fetching theme:",c)}n(!1)},i=c=>{if(!c)return;const u=document.documentElement;Object.entries(c).forEach(([x,b])=>{b&&u.style.setProperty(`--theme-${x}`,b)}),u.style.setProperty("--color-primary",c.primary||"#3B82F6"),u.style.setProperty("--color-secondary",c.secondary||"#10B981"),u.style.setProperty("--color-accent",c.accent||"#F59E0B"),u.style.setProperty("--color-bg-primary",c.bgPrimary||"#000000"),u.style.setProperty("--color-bg-secondary",c.bgSecondary||"#0D0D0D"),u.style.setProperty("--color-bg-card",c.bgCard||"#1A1A1A"),u.style.setProperty("--color-text-primary",c.textPrimary||"#FFFFFF"),u.style.setProperty("--color-text-secondary",c.textSecondary||"#9CA3AF"),u.style.setProperty("--color-border",c.border||"#374151"),u.style.setProperty("--color-success",c.success||"#10B981"),u.style.setProperty("--color-error",c.error||"#EF4444"),u.style.setProperty("--color-buy",c.buyColor||"#3B82F6"),u.style.setProperty("--color-sell",c.sellColor||"#EF4444"),u.style.setProperty("--color-profit",c.profitColor||"#10B981"),u.style.setProperty("--color-loss",c.lossColor||"#EF4444")};o.useEffect(()=>{l();const c=setInterval(l,3e4);return()=>clearInterval(c)},[]);const d=()=>{l()};return e.jsx(jN.Provider,{value:{theme:s,loading:a,refreshTheme:d,applyTheme:i},children:t})};Bo.createRoot(document.getElementById("root")).render(e.jsx(Pm.StrictMode,{children:e.jsx(NN,{children:e.jsx(yN,{})})}));
